var Fg=Object.defineProperty;var Lg=(p,e,d)=>e in p?Fg(p,e,{enumerable:!0,configurable:!0,writable:!0,value:d}):p[e]=d;var hi=(p,e,d)=>(Lg(p,typeof e!="symbol"?e+"":e,d),d);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const R of document.querySelectorAll('link[rel="modulepreload"]'))x(R);new MutationObserver(R=>{for(const I of R)if(I.type==="childList")for(const f of I.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&x(f)}).observe(document,{childList:!0,subtree:!0});function d(R){const I={};return R.integrity&&(I.integrity=R.integrity),R.referrerPolicy&&(I.referrerPolicy=R.referrerPolicy),R.crossOrigin==="use-credentials"?I.credentials="include":R.crossOrigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function x(R){if(R.ep)return;R.ep=!0;const I=d(R);fetch(R.href,I)}})();var Og=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dg(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var _f={exports:{}};(function(p,e){(function(x,R){p.exports=R()})(Og,()=>(()=>{var d={6659:f=>{var S=Object.prototype.hasOwnProperty,t="~";function h(){}Object.create&&(h.prototype=Object.create(null),new h().__proto__||(t=!1));function m(i,n,u){this.fn=i,this.context=n,this.once=u||!1}function o(i,n,u,s,l){if(typeof u!="function")throw new TypeError("The listener must be a function");var v=new m(u,s||i,l),c=t?t+n:n;return i._events[c]?i._events[c].fn?i._events[c]=[i._events[c],v]:i._events[c].push(v):(i._events[c]=v,i._eventsCount++),i}function a(i,n){--i._eventsCount===0?i._events=new h:delete i._events[n]}function r(){this._events=new h,this._eventsCount=0}r.prototype.eventNames=function(){var n=[],u,s;if(this._eventsCount===0)return n;for(s in u=this._events)S.call(u,s)&&n.push(t?s.slice(1):s);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(u)):n},r.prototype.listeners=function(n){var u=t?t+n:n,s=this._events[u];if(!s)return[];if(s.fn)return[s.fn];for(var l=0,v=s.length,c=new Array(v);l<v;l++)c[l]=s[l].fn;return c},r.prototype.listenerCount=function(n){var u=t?t+n:n,s=this._events[u];return s?s.fn?1:s.length:0},r.prototype.emit=function(n,u,s,l,v,c){var g=t?t+n:n;if(!this._events[g])return!1;var y=this._events[g],E=arguments.length,C,T;if(y.fn){switch(y.once&&this.removeListener(n,y.fn,void 0,!0),E){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,s),!0;case 4:return y.fn.call(y.context,u,s,l),!0;case 5:return y.fn.call(y.context,u,s,l,v),!0;case 6:return y.fn.call(y.context,u,s,l,v,c),!0}for(T=1,C=new Array(E-1);T<E;T++)C[T-1]=arguments[T];y.fn.apply(y.context,C)}else{var A=y.length,P;for(T=0;T<A;T++)switch(y[T].once&&this.removeListener(n,y[T].fn,void 0,!0),E){case 1:y[T].fn.call(y[T].context);break;case 2:y[T].fn.call(y[T].context,u);break;case 3:y[T].fn.call(y[T].context,u,s);break;case 4:y[T].fn.call(y[T].context,u,s,l);break;default:if(!C)for(P=1,C=new Array(E-1);P<E;P++)C[P-1]=arguments[P];y[T].fn.apply(y[T].context,C)}}return!0},r.prototype.on=function(n,u,s){return o(this,n,u,s,!1)},r.prototype.once=function(n,u,s){return o(this,n,u,s,!0)},r.prototype.removeListener=function(n,u,s,l){var v=t?t+n:n;if(!this._events[v])return this;if(!u)return a(this,v),this;var c=this._events[v];if(c.fn)c.fn===u&&(!l||c.once)&&(!s||c.context===s)&&a(this,v);else{for(var g=0,y=[],E=c.length;g<E;g++)(c[g].fn!==u||l&&!c[g].once||s&&c[g].context!==s)&&y.push(c[g]);y.length?this._events[v]=y.length===1?y[0]:y:a(this,v)}return this},r.prototype.removeAllListeners=function(n){var u;return n?(u=t?t+n:n,this._events[u]&&a(this,u)):(this._events=new h,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prefixed=t,r.EventEmitter=r,f.exports=r},62270:(f,S,t)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82590),m=function(o,a,r,i){for(var n=o[0],u=1;u<o.length;u++){var s=o[u];h(s,n,a,r,i),n=s}return o};f.exports=m},61148:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(6124),m=function(o,a,r,i,n){return h(o,"angle",a,r,i,n)};f.exports=m},22015:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){for(var o=0;o<t.length;o++){var a=t[o];h.call(m,a)}return t};f.exports=S},31060:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){m===void 0&&(m=0);for(var o=m;o<t.length;o++){var a=t[o],r=!0;for(var i in h)a[i]!==h[i]&&(r=!1);if(r)return a}return null};f.exports=S},52367:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){m===void 0&&(m=0);for(var o=m;o<t.length;o++){var a=t[o],r=!0;for(var i in h)a[i]!==h[i]&&(r=!1);if(r)return a}return null};f.exports=S},12673:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(40327),m=t(84093),o=t(72632),a=t(72283),r=t(71030),i=new r({sys:{queueDepthSort:a,events:{once:a}}},0,0,1,1).setOrigin(0,0),n=function(u,s){s===void 0&&(s={});var l=s.hasOwnProperty("width"),v=s.hasOwnProperty("height"),c=o(s,"width",-1),g=o(s,"height",-1),y=o(s,"cellWidth",1),E=o(s,"cellHeight",y),C=o(s,"position",m.TOP_LEFT),T=o(s,"x",0),A=o(s,"y",0),P=0,M=0,w=c*y,L=g*E;i.setPosition(T,A),i.setSize(y,E);for(var F=0;F<u.length;F++)if(h(u[F],i,C),l&&c===-1)i.x+=y;else if(v&&g===-1)i.y+=E;else if(v&&!l){if(M+=E,i.y+=E,M===L&&(M=0,P+=y,i.y=A,i.x+=y,P===w))break}else if(P+=y,i.x+=y,P===w&&(P=0,M+=E,i.x=T,i.y+=E,M===L))break;return u};f.exports=n},691:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(6124),m=function(o,a,r,i,n){return h(o,"alpha",a,r,i,n)};f.exports=m},3877:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(6124),m=function(o,a,r,i,n){return h(o,"x",a,r,i,n)};f.exports=m},71020:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(6124),m=function(o,a,r,i,n,u,s){return r==null&&(r=a),h(o,"x",a,i,u,s),h(o,"y",r,n,u,s)};f.exports=m},28970:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(6124),m=function(o,a,r,i,n){return h(o,"y",a,r,i,n)};f.exports=m},82249:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){m===void 0&&(m=0),o===void 0&&(o=6.28);for(var a=m,r=(o-m)/t.length,i=h.x,n=h.y,u=h.radius,s=0;s<t.length;s++)t[s].x=i+u*Math.cos(a),t[s].y=n+u*Math.sin(a),a+=r;return t};f.exports=S},30285:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){m===void 0&&(m=0),o===void 0&&(o=6.28);for(var a=m,r=(o-m)/t.length,i=h.width/2,n=h.height/2,u=0;u<t.length;u++)t[u].x=h.x+i*Math.cos(a),t[u].y=h.y+n*Math.sin(a),a+=r;return t};f.exports=S},61557:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(8570),m=function(o,a){for(var r=h(a,o.length),i=0;i<o.length;i++){var n=o[i],u=r[i];n.x=u.x,n.y=u.y}return o};f.exports=m},63549:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(40053),m=t(77640),o=t(38487),a=function(r,i,n){n===void 0&&(n=0);var u=h(i,!1,r.length);n>0?m(u,n):n<0&&o(u,Math.abs(n));for(var s=0;s<r.length;s++)r[s].x=u[s].x,r[s].y=u[s].y;return r};f.exports=a},51629:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(58813),m=function(o,a,r){var i=h({x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},r),n=h({x1:a.x2,y1:a.y2,x2:a.x3,y2:a.y3},r),u=h({x1:a.x3,y1:a.y3,x2:a.x1,y2:a.y1},r);i.pop(),n.pop(),u.pop(),i=i.concat(n,u);for(var s=i.length/o.length,l=0,v=0;v<o.length;v++){var c=o[v],g=i[Math.floor(l)];c.x=g.x,c.y=g.y,l+=s}return o};f.exports=m},1045:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){for(var o=0;o<t.length;o++){var a=t[o];a.anims&&a.anims.play(h,m)}return t};f.exports=S},6124:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o,a,r){o===void 0&&(o=0),a===void 0&&(a=0),r===void 0&&(r=1);var i,n=0,u=t.length;if(r===1)for(i=a;i<u;i++)t[i][h]+=m+n*o,n++;else for(i=a;i>=0;i--)t[i][h]+=m+n*o,n++;return t};f.exports=S},23646:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o,a,r){o===void 0&&(o=0),a===void 0&&(a=0),r===void 0&&(r=1);var i,n=0,u=t.length;if(r===1)for(i=a;i<u;i++)t[i][h]=m+n*o,n++;else for(i=a;i>=0;i--)t[i][h]=m+n*o,n++;return t};f.exports=S},4392:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(30977),m=function(o,a){for(var r=0;r<o.length;r++)h(a,o[r]);return o};f.exports=m},94985:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72006),m=function(o,a){for(var r=0;r<o.length;r++)h(a,o[r]);return o};f.exports=m},63305:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(74077),m=function(o,a){for(var r=0;r<o.length;r++)h(a,o[r]);return o};f.exports=m},90739:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(30001),m=function(o,a){for(var r=0;r<o.length;r++)h(a,o[r]);return o};f.exports=m},91417:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(99761),m=function(o,a){for(var r=0;r<o.length;r++)h(a,o[r]);return o};f.exports=m},26182:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(6124),m=function(o,a,r,i,n){return h(o,"rotation",a,r,i,n)};f.exports=m},87299:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72395),m=t(53996),o=function(a,r,i){for(var n=r.x,u=r.y,s=0;s<a.length;s++){var l=a[s];h(l,n,u,i,Math.max(1,m(l.x,l.y,n,u)))}return a};f.exports=o},92194:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72395),m=function(o,a,r,i){var n=a.x,u=a.y;if(i===0)return o;for(var s=0;s<o.length;s++)h(o[s],n,u,r,i);return o};f.exports=m},30363:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(6124),m=function(o,a,r,i,n){return h(o,"scaleX",a,r,i,n)};f.exports=m},51449:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(6124),m=function(o,a,r,i,n,u,s){return r==null&&(r=a),h(o,"scaleX",a,i,u,s),h(o,"scaleY",r,n,u,s)};f.exports=m},64895:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(6124),m=function(o,a,r,i,n){return h(o,"scaleY",a,r,i,n)};f.exports=m},30329:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(23646),m=function(o,a,r,i,n){return h(o,"alpha",a,r,i,n)};f.exports=m},43954:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(23646),m=function(o,a,r,i){return h(o,"blendMode",a,0,r,i)};f.exports=m},70688:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(23646),m=function(o,a,r,i,n){return h(o,"depth",a,r,i,n)};f.exports=m},8314:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){for(var o=0;o<t.length;o++)t[o].setInteractive(h,m);return t};f.exports=S},12894:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(23646),m=function(o,a,r,i,n,u,s){return r==null&&(r=a),h(o,"originX",a,i,u,s),h(o,"originY",r,n,u,s),o.forEach(function(l){l.updateDisplayOrigin()}),o};f.exports=m},38767:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(23646),m=function(o,a,r,i,n){return h(o,"rotation",a,r,i,n)};f.exports=m},18584:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(23646),m=function(o,a,r,i,n,u,s){return r==null&&(r=a),h(o,"scaleX",a,i,u,s),h(o,"scaleY",r,n,u,s)};f.exports=m},17381:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(23646),m=function(o,a,r,i,n){return h(o,"scaleX",a,r,i,n)};f.exports=m},74370:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(23646),m=function(o,a,r,i,n){return h(o,"scaleY",a,r,i,n)};f.exports=m},27773:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(23646),m=function(o,a,r,i,n,u,s){return r==null&&(r=a),h(o,"scrollFactorX",a,i,u,s),h(o,"scrollFactorY",r,n,u,s)};f.exports=m},75257:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(23646),m=function(o,a,r,i,n){return h(o,"scrollFactorX",a,r,i,n)};f.exports=m},54512:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(23646),m=function(o,a,r,i,n){return h(o,"scrollFactorY",a,r,i,n)};f.exports=m},69423:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o,a){for(var r=0;r<t.length;r++)t[r].setTint(h,m,o,a);return t};f.exports=S},58291:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(23646),m=function(o,a,r,i){return h(o,"visible",a,0,r,i)};f.exports=m},94833:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(23646),m=function(o,a,r,i,n){return h(o,"x",a,r,i,n)};f.exports=m},14284:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(23646),m=function(o,a,r,i,n,u,s){return r==null&&(r=a),h(o,"x",a,i,u,s),h(o,"y",r,n,u,s)};f.exports=m},96574:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(23646),m=function(o,a,r,i,n){return h(o,"y",a,r,i,n)};f.exports=m},74086:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(93736),m=function(o,a,r,i,n){i===void 0&&(i=0),n===void 0&&(n=new h);var u,s,l=o.length;if(l===1)u=o[0].x,s=o[0].y,o[0].x=a,o[0].y=r;else{var v=1,c=0;i===0&&(c=l-1,v=l-2),u=o[c].x,s=o[c].y,o[c].x=a,o[c].y=r;for(var g=0;g<l;g++)if(!(v>=l||v===-1)){var y=o[v],E=y.x,C=y.y;y.x=u,y.y=s,u=E,s=C,i===0?v--:v++}}return n.x=u,n.y=s,n};f.exports=m},86347:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(18592),m=function(o){return h(o)};f.exports=m},1558:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(5514),m=function(o,a,r,i,n){n===void 0&&(n=!1);var u=Math.abs(i-r)/o.length,s;if(n)for(s=0;s<o.length;s++)o[s][a]+=h(s*u,r,i);else for(s=0;s<o.length;s++)o[s][a]=h(s*u,r,i);return o};f.exports=m},9938:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(87736),m=function(o,a,r,i,n){n===void 0&&(n=!1);var u=Math.abs(i-r)/o.length,s;if(n)for(s=0;s<o.length;s++)o[s][a]+=h(s*u,r,i);else for(s=0;s<o.length;s++)o[s][a]=h(s*u,r,i);return o};f.exports=m},71060:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o,a){if(a===void 0&&(a=!1),t.length===0)return t;if(t.length===1)return a?t[0][h]+=(o+m)/2:t[0][h]=(o+m)/2,t;var r=Math.abs(o-m)/(t.length-1),i;if(a)for(i=0;i<t.length;i++)t[i][h]+=i*r+m;else for(i=0;i<t.length;i++)t[i][h]=i*r+m;return t};f.exports=S},11207:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){for(var h=0;h<t.length;h++)t[h].visible=!t[h].visible;return t};f.exports=S},24404:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(1071),m=function(o,a,r){r===void 0&&(r=0);for(var i=0;i<o.length;i++){var n=o[i];n.x=h(n.x,a.left-r,a.right+r),n.y=h(n.y,a.top-r,a.bottom+r)}return o};f.exports=m},83979:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={AlignTo:t(62270),Angle:t(61148),Call:t(22015),GetFirst:t(31060),GetLast:t(52367),GridAlign:t(12673),IncAlpha:t(691),IncX:t(3877),IncXY:t(71020),IncY:t(28970),PlaceOnCircle:t(82249),PlaceOnEllipse:t(30285),PlaceOnLine:t(61557),PlaceOnRectangle:t(63549),PlaceOnTriangle:t(51629),PlayAnimation:t(1045),PropertyValueInc:t(6124),PropertyValueSet:t(23646),RandomCircle:t(4392),RandomEllipse:t(94985),RandomLine:t(63305),RandomRectangle:t(90739),RandomTriangle:t(91417),Rotate:t(26182),RotateAround:t(87299),RotateAroundDistance:t(92194),ScaleX:t(30363),ScaleXY:t(51449),ScaleY:t(64895),SetAlpha:t(30329),SetBlendMode:t(43954),SetDepth:t(70688),SetHitArea:t(8314),SetOrigin:t(12894),SetRotation:t(38767),SetScale:t(18584),SetScaleX:t(17381),SetScaleY:t(74370),SetScrollFactor:t(27773),SetScrollFactorX:t(75257),SetScrollFactorY:t(54512),SetTint:t(69423),SetVisible:t(58291),SetX:t(94833),SetXY:t(14284),SetY:t(96574),ShiftPosition:t(74086),Shuffle:t(86347),SmootherStep:t(9938),SmoothStep:t(1558),Spread:t(71060),ToggleVisible:t(11207),WrapInRectangle:t(24404)}},85463:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82897),m=t(56694),o=t(16938),a=t(2406),r=t(71519),i=t(10850),n=t(28834),u=new m({initialize:function(l,v,c){this.manager=l,this.key=v,this.type="frame",this.frames=this.getFrames(l.textureManager,i(c,"frames",[]),i(c,"defaultTextureKey",null),i(c,"sortFrames",!0)),this.frameRate=i(c,"frameRate",null),this.duration=i(c,"duration",null),this.msPerFrame,this.skipMissedFrames=i(c,"skipMissedFrames",!0),this.delay=i(c,"delay",0),this.repeat=i(c,"repeat",0),this.repeatDelay=i(c,"repeatDelay",0),this.yoyo=i(c,"yoyo",!1),this.showBeforeDelay=i(c,"showBeforeDelay",!1),this.showOnStart=i(c,"showOnStart",!1),this.hideOnComplete=i(c,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(o.PAUSE_ALL,this.pause,this),this.manager.on(o.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(s,l,v,c){v===null&&c===null?(s.frameRate=24,s.duration=24/l*1e3):v&&c===null?(s.duration=v,s.frameRate=l/(v/1e3)):(s.frameRate=c,s.duration=l/c*1e3),s.msPerFrame=1e3/s.frameRate},addFrame:function(s){return this.addFrameAt(this.frames.length,s)},addFrameAt:function(s,l){var v=this.getFrames(this.manager.textureManager,l);if(v.length>0){if(s===0)this.frames=v.concat(this.frames);else if(s===this.frames.length)this.frames=this.frames.concat(v);else{var c=this.frames.slice(0,s),g=this.frames.slice(s);this.frames=c.concat(v,g)}this.updateFrameSequence()}return this},checkFrame:function(s){return s>=0&&s<this.frames.length},getFirstTick:function(s){s.accumulator=0,s.nextTick=s.msPerFrame+s.currentFrame.duration},getFrameAt:function(s){return this.frames[s]},getFrames:function(s,l,v,c){c===void 0&&(c=!0);var g=[],y,E,C=1,T,A;if(typeof l=="string"){if(A=l,!s.exists(A))return console.warn('Texture "%s" not found',A),g;var P=s.get(A),M=P.getFrameNames();c&&n(M),l=[],M.forEach(function(B){l.push({key:A,frame:B})})}if(!Array.isArray(l)||l.length===0)return g;for(T=0;T<l.length;T++){var w=l[T],L=i(w,"key",v);if(L){var F=i(w,"frame",0),D=s.getFrame(L,F);if(!D){console.warn('Texture "%s" not found',L);continue}E=new r(L,F,C,D),E.duration=i(w,"duration",0),E.isFirst=!y,y&&(y.nextFrame=E,E.prevFrame=y),g.push(E),y=E,C++}}if(g.length>0){E.isLast=!0,E.nextFrame=g[0],g[0].prevFrame=E;var N=1/(g.length-1);for(T=0;T<g.length;T++)g[T].progress=T*N}return g},getNextTick:function(s){s.accumulator-=s.nextTick,s.nextTick=s.msPerFrame+s.currentFrame.duration},getFrameByProgress:function(s){return s=h(s,0,1),a(s,this.frames,"progress")},nextFrame:function(s){var l=s.currentFrame;l.isLast?s.yoyo?this.handleYoyoFrame(s,!1):s.repeatCounter>0?s.inReverse&&s.forward?s.forward=!1:this.repeatAnimation(s):s.complete():this.updateAndGetNextTick(s,l.nextFrame)},handleYoyoFrame:function(s,l){if(l||(l=!1),s.inReverse===!l&&s.repeatCounter>0){(s.repeatDelay===0||s.pendingRepeat)&&(s.forward=l),this.repeatAnimation(s);return}if(s.inReverse!==l&&s.repeatCounter===0){s.complete();return}s.forward=l;var v=l?s.currentFrame.nextFrame:s.currentFrame.prevFrame;this.updateAndGetNextTick(s,v)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(s){var l=s.currentFrame;l.isFirst?s.yoyo?this.handleYoyoFrame(s,!0):s.repeatCounter>0?s.inReverse&&!s.forward?this.repeatAnimation(s):(s.forward=!0,this.repeatAnimation(s)):s.complete():this.updateAndGetNextTick(s,l.prevFrame)},updateAndGetNextTick:function(s,l){s.setCurrentFrame(l),this.getNextTick(s)},removeFrame:function(s){var l=this.frames.indexOf(s);return l!==-1&&this.removeFrameAt(l),this},removeFrameAt:function(s){return this.frames.splice(s,1),this.updateFrameSequence(),this},repeatAnimation:function(s){if(s._pendingStop===2){if(s._pendingStopValue===0)return s.stop();s._pendingStopValue--}s.repeatDelay>0&&!s.pendingRepeat?(s.pendingRepeat=!0,s.accumulator-=s.nextTick,s.nextTick+=s.repeatDelay):(s.repeatCounter--,s.forward?s.setCurrentFrame(s.currentFrame.nextFrame):s.setCurrentFrame(s.currentFrame.prevFrame),s.isPlaying&&(this.getNextTick(s),s.handleRepeat()))},toJSON:function(){var s={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(l){s.frames.push(l.toJSON())}),s},updateFrameSequence:function(){for(var s=this.frames.length,l=1/(s-1),v,c=0;c<s;c++)v=this.frames[c],v.index=c+1,v.isFirst=!1,v.isLast=!1,v.progress=c*l,c===0?(v.isFirst=!0,s===1?(v.isLast=!0,v.nextFrame=v,v.prevFrame=v):(v.isLast=!1,v.prevFrame=this.frames[s-1],v.nextFrame=this.frames[c+1])):c===s-1&&s>1?(v.isLast=!0,v.prevFrame=this.frames[s-2],v.nextFrame=this.frames[0]):s>1&&(v.prevFrame=this.frames[c-1],v.nextFrame=this.frames[c+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(o.PAUSE_ALL,this.pause,this),this.manager.off(o.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var s=0;s<this.frames.length;s++)this.frames[s].destroy();this.frames=[],this.manager=null}});f.exports=u},71519:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=new h({initialize:function(a,r,i,n,u){u===void 0&&(u=!1),this.textureKey=a,this.textureFrame=r,this.index=i,this.frame=n,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=u},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});f.exports=m},90249:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(85463),m=t(56694),o=t(33885),a=t(6659),r=t(16938),i=t(97081),n=t(72632),u=t(10850),s=t(83392),l=t(13401),v=t(76400),c=new m({Extends:a,initialize:function(y){a.call(this),this.game=y,this.textureManager=null,this.globalTimeScale=1,this.anims=new o,this.mixes=new o,this.paused=!1,this.name="AnimationManager",y.events.once(i.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(i.DESTROY,this.destroy,this)},addMix:function(g,y,E){var C=this.anims,T=this.mixes,A=typeof g=="string"?g:g.key,P=typeof y=="string"?y:y.key;if(C.has(A)&&C.has(P)){var M=T.get(A);M||(M={}),M[P]=E,T.set(A,M)}return this},removeMix:function(g,y){var E=this.mixes,C=typeof g=="string"?g:g.key,T=E.get(C);if(T)if(y){var A=typeof y=="string"?y:y.key;T.hasOwnProperty(A)&&delete T[A]}else y||E.delete(C);return this},getMix:function(g,y){var E=this.mixes,C=typeof g=="string"?g:g.key,T=typeof y=="string"?y:y.key,A=E.get(C);return A&&A.hasOwnProperty(T)?A[T]:0},add:function(g,y){return this.anims.has(g)?(console.warn("Animation key exists: "+g),this):(y.key=g,this.anims.set(g,y),this.emit(r.ADD_ANIMATION,g,y),this)},exists:function(g){return this.anims.has(g)},createFromAseprite:function(g,y,E){var C=[],T=this.game.cache.json.get(g);if(!T)return console.warn("No Aseprite data found for: "+g),C;var A=this,P=u(T,"meta",null),M=u(T,"frames",null);if(P&&M){var w=u(P,"frameTags",[]);w.forEach(function(L){var F=[],D=n(L,"name",null),N=n(L,"from",0),B=n(L,"to",0),b=n(L,"direction","forward");if(D&&(!y||y&&y.indexOf(D)>-1)){for(var W=0,Y=N;Y<=B;Y++){var K=Y.toString(),G=M[K];if(G){var z=n(G,"duration",s.MAX_SAFE_INTEGER);F.push({key:g,frame:K,duration:z}),W+=z}}var O=W/F.length;F.forEach(function(X){X.duration-=O}),b==="reverse"&&(F=F.reverse());var V={key:D,frames:F,duration:W,yoyo:b==="pingpong"},U;E?E.anims&&(U=E.anims.create(V)):U=A.create(V),U&&C.push(U)}})}return C},create:function(g){var y=g.key,E=!1;return y&&(E=this.get(y),E?console.warn("AnimationManager key already exists: "+y):(E=new h(this,y,g),this.anims.set(y,E),this.emit(r.ADD_ANIMATION,y,E))),E},fromJSON:function(g,y){y===void 0&&(y=!1),y&&this.anims.clear(),typeof g=="string"&&(g=JSON.parse(g));var E=[];if(g.hasOwnProperty("anims")&&Array.isArray(g.anims)){for(var C=0;C<g.anims.length;C++)E.push(this.create(g.anims[C]));g.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=g.globalTimeScale)}else g.hasOwnProperty("key")&&g.type==="frame"&&E.push(this.create(g));return E},generateFrameNames:function(g,y){var E=u(y,"prefix",""),C=u(y,"start",0),T=u(y,"end",0),A=u(y,"suffix",""),P=u(y,"zeroPad",0),M=u(y,"outputArray",[]),w=u(y,"frames",!1);if(!this.textureManager.exists(g))return console.warn('Texture "%s" not found',g),M;var L=this.textureManager.get(g);if(!L)return M;var F;if(y)for(w||(w=l(C,T)),F=0;F<w.length;F++){var D=E+v(w[F],P,"0",1)+A;L.has(D)?M.push({key:g,frame:D}):console.warn('Frame "%s" not found in texture "%s"',D,g)}else for(w=L.getFrameNames(),F=0;F<w.length;F++)M.push({key:g,frame:w[F]});return M},generateFrameNumbers:function(g,y){var E=u(y,"start",0),C=u(y,"end",-1),T=u(y,"first",!1),A=u(y,"outputArray",[]),P=u(y,"frames",!1);if(!this.textureManager.exists(g))return console.warn('Texture "%s" not found',g),A;var M=this.textureManager.get(g);if(!M)return A;T&&M.has(T)&&A.push({key:g,frame:T}),P||(C===-1&&(C=M.frameTotal-2),P=l(E,C));for(var w=0;w<P.length;w++){var L=P[w];M.has(L)?A.push({key:g,frame:L}):console.warn('Frame "%s" not found in texture "%s"',L,g)}return A},get:function(g){return this.anims.get(g)},getAnimsFromTexture:function(g){for(var y=this.textureManager.get(g),E=y.key,C=this.anims.getArray(),T=[],A=0;A<C.length;A++)for(var P=C[A],M=P.frames,w=0;w<M.length;w++)if(M[w].textureKey===E){T.push(P.key);break}return T},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(r.PAUSE_ALL)),this},play:function(g,y){Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++)y[E].anims.play(g);return this},staggerPlay:function(g,y,E,C){E===void 0&&(E=0),C===void 0&&(C=!0),Array.isArray(y)||(y=[y]);var T=y.length;C||T--;for(var A=0;A<y.length;A++){var P=E<0?Math.abs(E)*(T-A):E*A;y[A].anims.playAfterDelay(g,P)}return this},remove:function(g){var y=this.get(g);return y&&(this.emit(r.REMOVE_ANIMATION,g,y),this.anims.delete(g),this.removeMix(g)),y},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(r.RESUME_ALL)),this},toJSON:function(g){var y={anims:[],globalTimeScale:this.globalTimeScale};return g!==void 0&&g!==""?y.anims.push(this.anims.get(g).toJSON()):this.anims.each(function(E,C){y.anims.push(C.toJSON())}),y},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});f.exports=c},16569:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(33885),o=t(72632),a=t(16938),r=t(85463),i=new h({initialize:function(u){this.parent=u,this.animationManager=u.scene.sys.anims,this.animationManager.on(a.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(n){var u=this.parent;if(n===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,u;Array.isArray(n)||(n=[n]);for(var s=0;s<n.length;s++){var l=n[s];this.nextAnim?this.nextAnimsQueue.push(l):this.nextAnim=l}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(n){this.isPlaying&&this.stop();var u=this.animationManager,s=typeof n=="string"?n:o(n,"key",null),l=this.exists(s)?this.get(s):u.get(s);if(!l)console.warn("Missing animation: "+s);else{this.currentAnim=l;var v=l.getTotalFrames(),c=o(n,"frameRate",l.frameRate),g=o(n,"duration",l.duration);l.calculateDuration(this,v,g,c),this.delay=o(n,"delay",l.delay),this.repeat=o(n,"repeat",l.repeat),this.repeatDelay=o(n,"repeatDelay",l.repeatDelay),this.yoyo=o(n,"yoyo",l.yoyo),this.showBeforeDelay=o(n,"showBeforeDelay",l.showBeforeDelay),this.showOnStart=o(n,"showOnStart",l.showOnStart),this.hideOnComplete=o(n,"hideOnComplete",l.hideOnComplete),this.skipMissedFrames=o(n,"skipMissedFrames",l.skipMissedFrames),this.timeScale=o(n,"timeScale",this.timeScale);var y=o(n,"startFrame",0);y>l.getTotalFrames()&&(y=0);var E=l.frames[y];y===0&&!this.forward&&(E=l.getLastFrame()),this.currentFrame=E}return this.parent},pause:function(n){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),n!==void 0&&this.setCurrentFrame(n),this.parent},resume:function(n){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),n!==void 0&&this.setCurrentFrame(n),this.parent},playAfterDelay:function(n,u){if(!this.isPlaying)this.delayCounter=u,this.play(n,!0);else{var s=this.nextAnim,l=this.nextAnimsQueue;s&&l.unshift(s),this.nextAnim=n,this._pendingStop=1,this._pendingStopValue=u}return this.parent},playAfterRepeat:function(n,u){if(u===void 0&&(u=1),!this.isPlaying)this.play(n);else{var s=this.nextAnim,l=this.nextAnimsQueue;s&&l.unshift(s),this.repeatCounter!==-1&&u>this.repeatCounter&&(u=this.repeatCounter),this.nextAnim=n,this._pendingStop=2,this._pendingStopValue=u}return this.parent},play:function(n,u){u===void 0&&(u=!1);var s=this.currentAnim,l=this.parent,v=typeof n=="string"?n:n.key;if(u&&this.isPlaying&&s.key===v)return l;if(s&&this.isPlaying){var c=this.animationManager.getMix(s.key,n);if(c>0)return this.playAfterDelay(n,c)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(n)},playReverse:function(n,u){u===void 0&&(u=!1);var s=typeof n=="string"?n:n.key;return u&&this.isPlaying&&this.currentAnim.key===s?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(n))},startAnimation:function(n){this.load(n);var u=this.currentAnim,s=this.parent;return u&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,u.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),s},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(a.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(a.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(a.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(a.ANIMATION_COMPLETE,a.ANIMATION_COMPLETE_KEY)},emitEvents:function(n,u){var s=this.currentAnim;if(s){var l=this.currentFrame,v=this.parent,c=l.textureFrame;v.emit(n,s,l,v,c),u&&v.emit(u+s.key,s,l,v,c)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var n=this.currentFrame;if(!n)return 0;var u=n.progress;return this.inReverse&&(u*=-1),u},setProgress:function(n){return this.forward||(n=1-n),this.setCurrentFrame(this.currentAnim.getFrameByProgress(n)),this.parent},setRepeat:function(n){return this.repeatCounter=n===-1?Number.MAX_VALUE:n,this.parent},globalRemove:function(n,u){u===void 0&&(u=this.currentAnim),this.isPlaying&&u.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(n,u){n===void 0&&(n=!1),u===void 0&&(u=!1);var s=this.currentAnim,l=this.parent;return s?(u&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),s.getFirstTick(this),this.emitEvents(a.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!n,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(s.frames[0]),this.parent):l},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var n=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(n)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var n=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(n)}return this.parent},stopAfterDelay:function(n){return this._pendingStop=1,this._pendingStopValue=n,this.parent},stopAfterRepeat:function(n){return n===void 0&&(n=1),this.repeatCounter!==-1&&n>this.repeatCounter&&(n=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=n,this.parent},stopOnFrame:function(n){return this._pendingStop=3,this._pendingStopValue=n,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(n,u){var s=this.currentAnim;if(!(!this.isPlaying||!s||s.paused)){if(this.accumulator+=u*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=u,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?s.nextFrame(this):s.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var l=0;do this.forward?s.nextFrame(this):s.previousFrame(this),l++;while(this.isPlaying&&this.accumulator>this.nextTick&&l<60)}}},setCurrentFrame:function(n){var u=this.parent;return this.currentFrame=n,u.texture=n.frame.texture,u.frame=n.frame,u.isCropped&&u.frame.updateCropUVs(u._crop,u.flipX,u.flipY),n.setAlpha&&(u.alpha=n.alpha),u.setSizeToFrame(),u._originComponent&&(n.frame.customPivot?u.setOrigin(n.frame.pivotX,n.frame.pivotY):u.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(a.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===n&&this.stop()),u},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(n){return this.anims?this.anims.get(n):null},exists:function(n){return this.anims?this.anims.has(n):!1},create:function(n){var u=n.key,s=!1;return u&&(s=this.get(u),s?console.warn("Animation key already exists: "+u):(s=new r(this,u,n),this.anims||(this.anims=new m),this.anims.set(u,s))),s},createFromAseprite:function(n,u){return this.animationManager.createFromAseprite(n,u,this.parent)},generateFrameNames:function(n,u){return this.animationManager.generateFrameNames(n,u)},generateFrameNumbers:function(n,u){return this.animationManager.generateFrameNumbers(n,u)},remove:function(n){var u=this.get(n);return u&&(this.currentAnim===u&&this.stop(),this.anims.delete(n)),u},destroy:function(){this.animationManager.off(a.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});f.exports=i},44509:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="add"},84563:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="animationcomplete"},61586:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="animationcomplete-"},72175:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="animationrepeat"},568:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="animationrestart"},37690:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="animationstart"},58525:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="animationstop"},5243:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="animationupdate"},10598:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pauseall"},4860:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="remove"},31865:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="resumeall"},16938:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={ADD_ANIMATION:t(44509),ANIMATION_COMPLETE:t(84563),ANIMATION_COMPLETE_KEY:t(61586),ANIMATION_REPEAT:t(72175),ANIMATION_RESTART:t(568),ANIMATION_START:t(37690),ANIMATION_STOP:t(58525),ANIMATION_UPDATE:t(5243),PAUSE_ALL:t(10598),REMOVE_ANIMATION:t(4860),RESUME_ALL:t(31865)}},13517:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Animation:t(85463),AnimationFrame:t(71519),AnimationManager:t(90249),AnimationState:t(16569),Events:t(16938)}},23740:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(33885),o=t(6659),a=t(69773),r=new h({initialize:function(){this.entries=new m,this.events=new o},add:function(i,n){return this.entries.set(i,n),this.events.emit(a.ADD,this,i,n),this},has:function(i){return this.entries.has(i)},exists:function(i){return this.entries.has(i)},get:function(i){return this.entries.get(i)},remove:function(i){var n=this.get(i);return n&&(this.entries.delete(i),this.events.emit(a.REMOVE,this,i,n.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});f.exports=r},43474:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(23740),m=t(56694),o=t(97081),a=new m({initialize:function(i){this.game=i,this.binary=new h,this.bitmapFont=new h,this.json=new h,this.physics=new h,this.shader=new h,this.audio=new h,this.video=new h,this.text=new h,this.html=new h,this.obj=new h,this.tilemap=new h,this.xml=new h,this.custom={},this.game.events.once(o.DESTROY,this.destroy,this)},addCustom:function(r){return this.custom.hasOwnProperty(r)||(this.custom[r]=new h),this.custom[r]},destroy:function(){for(var r=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],i=0;i<r.length;i++)this[r[i]].destroy(),this[r[i]]=null;for(var n in this.custom)this.custom[n].destroy();this.custom=null,this.game=null}});f.exports=a},94762:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="add"},75968:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="remove"},69773:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={ADD:t(94762),REMOVE:t(75968)}},45820:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={BaseCache:t(23740),CacheManager:t(43474),Events:t(69773)}},51052:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(64937),o=t(75606),a=t(6659),r=t(89787),i=t(74118),n=t(69360),u=t(93222),s=t(93736),l=new h({Extends:a,Mixins:[m.AlphaSingle,m.Visible],initialize:function(c,g,y,E){c===void 0&&(c=0),g===void 0&&(g=0),y===void 0&&(y=0),E===void 0&&(E=0),a.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new i,this.dirty=!0,this._x=c,this._y=g,this._width=y,this._height=E,this._bounds=new i,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new n,this.transparent=!0,this.backgroundColor=u("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new s(y/2,E/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0},addToRenderList:function(v){this.renderList.push(v)},setOrigin:function(v,c){return v===void 0&&(v=.5),c===void 0&&(c=v),this.originX=v,this.originY=c,this},getScroll:function(v,c,g){g===void 0&&(g=new s);var y=this.width*.5,E=this.height*.5;return g.x=v-y,g.y=c-E,this.useBounds&&(g.x=this.clampX(g.x),g.y=this.clampY(g.y)),g},centerOnX:function(v){var c=this.width*.5;return this.midPoint.x=v,this.scrollX=v-c,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(v){var c=this.height*.5;return this.midPoint.y=v,this.scrollY=v-c,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(v,c){return this.centerOnX(v),this.centerOnY(c),this},centerToBounds:function(){if(this.useBounds){var v=this._bounds,c=this.width*.5,g=this.height*.5;this.midPoint.set(v.centerX,v.centerY),this.scrollX=v.centerX-c,this.scrollY=v.centerY-g}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(v){if(this.disableCull)return v;var c=this.matrix.matrix,g=c[0],y=c[1],E=c[2],C=c[3],T=g*C-y*E;if(!T)return v;var A=c[4],P=c[5],M=this.scrollX,w=this.scrollY,L=this.width,F=this.height,D=this.y,N=D+F,B=this.x,b=B+L,W=this.culledObjects,Y=v.length;T=1/T,W.length=0;for(var K=0;K<Y;++K){var G=v[K];if(!G.hasOwnProperty("width")||G.parentContainer){W.push(G);continue}var z=G.width,O=G.height,V=G.x-M*G.scrollFactorX-z*G.originX,U=G.y-w*G.scrollFactorY-O*G.originY,X=V*g+U*E+A,H=V*y+U*C+P,Q=(V+z)*g+(U+O)*E+A,$=(V+z)*y+(U+O)*C+P;Q>B&&X<b&&$>D&&H<N&&W.push(G)}return W},getWorldPoint:function(v,c,g){g===void 0&&(g=new s);var y=this.matrix.matrix,E=y[0],C=y[1],T=y[2],A=y[3],P=y[4],M=y[5],w=E*A-C*T;if(!w)return g.x=v,g.y=c,g;w=1/w;var L=A*w,F=-C*w,D=-T*w,N=E*w,B=(T*M-A*P)*w,b=(C*P-E*M)*w,W=Math.cos(this.rotation),Y=Math.sin(this.rotation),K=this.zoomX,G=this.zoomY,z=this.scrollX,O=this.scrollY,V=v+(z*W-O*Y)*K,U=c+(z*Y+O*W)*G;return g.x=V*L+U*D+B,g.y=V*F+U*N+b,g},ignore:function(v){var c=this.id;Array.isArray(v)||(v=[v]);for(var g=0;g<v.length;g++){var y=v[g];Array.isArray(y)?this.ignore(y):y.isParent?this.ignore(y.getChildren()):y.cameraFilter|=c}return this},preRender:function(){this.renderList.length=0;var v=this.width,c=this.height,g=v*.5,y=c*.5,E=this.zoomX,C=this.zoomY,T=this.matrix,A=v*this.originX,P=c*this.originY,M=this.scrollX,w=this.scrollY;this.useBounds&&(M=this.clampX(M),w=this.clampY(w)),this.roundPixels&&(A=Math.round(A),P=Math.round(P)),this.scrollX=M,this.scrollY=w;var L=M+g,F=w+y;this.midPoint.set(L,F);var D=v/E,N=c/C;this.worldView.setTo(L-D/2,F-N/2,D,N),T.applyITRS(this.x+A,this.y+P,this.rotation,E,C),T.translate(-A,-P)},clampX:function(v){var c=this._bounds,g=this.displayWidth,y=c.x+(g-this.width)/2,E=Math.max(y,y+c.width-g);return v<y?v=y:v>E&&(v=E),v},clampY:function(v){var c=this._bounds,g=this.displayHeight,y=c.y+(g-this.height)/2,E=Math.max(y,y+c.height-g);return v<y?v=y:v>E&&(v=E),v},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(v){return v===void 0&&(v=0),this.rotation=o(v),this},setBackgroundColor:function(v){return v===void 0&&(v="rgba(0,0,0,0)"),this.backgroundColor=u(v),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(v,c,g,y,E){return E===void 0&&(E=!1),this._bounds.setTo(v,c,g,y),this.dirty=!0,this.useBounds=!0,E?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(v){v===void 0&&(v=new i);var c=this._bounds;return v.setTo(c.x,c.y,c.width,c.height),v},setName:function(v){return v===void 0&&(v=""),this.name=v,this},setPosition:function(v,c){return c===void 0&&(c=v),this.x=v,this.y=c,this},setRotation:function(v){return v===void 0&&(v=0),this.rotation=v,this},setRoundPixels:function(v){return this.roundPixels=v,this},setScene:function(v,c){c===void 0&&(c=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=v,this.isSceneCamera=c;var g=v.sys;return this.sceneManager=g.game.scene,this.scaleManager=g.scale,this.cameraManager=g.cameras,this.updateSystem(),this},setScroll:function(v,c){return c===void 0&&(c=v),this.scrollX=v,this.scrollY=c,this},setSize:function(v,c){return c===void 0&&(c=v),this.width=v,this.height=c,this},setViewport:function(v,c,g,y){return this.x=v,this.y=c,this.width=g,this.height=y,this},setZoom:function(v,c){return v===void 0&&(v=1),c===void 0&&(c=v),v===0&&(v=.001),c===0&&(c=.001),this.zoomX=v,this.zoomY=c,this},setMask:function(v,c){return c===void 0&&(c=!0),this.mask=v,this._maskCamera=c?this.cameraManager.default:this,this},clearMask:function(v){return v===void 0&&(v=!1),v&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var v={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(v.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),v},update:function(){},setIsSceneCamera:function(v){return this.isSceneCamera=v,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var v=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,c=this.sceneManager;v&&!this._customViewport?c.customViewports++:!v&&this._customViewport&&c.customViewports--,this.dirty=!0,this._customViewport=v}},destroy:function(){this.emit(r.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(v){this._x=v,this.updateSystem()}},y:{get:function(){return this._y},set:function(v){this._y=v,this.updateSystem()}},width:{get:function(){return this._width},set:function(v){this._width=v,this.updateSystem()}},height:{get:function(){return this._height},set:function(v){this._height=v,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(v){v!==this._scrollX&&(this._scrollX=v,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(v){v!==this._scrollY&&(this._scrollY=v,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(v){this._zoomX=v,this._zoomY=v,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(v){this._zoomX=v,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(v){this._zoomY=v,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(v){this._rotation=v,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});f.exports=l},47751:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(51052),m=t(79993),o=t(82897),a=t(56694),r=t(64937),i=t(53030),n=t(89787),u=t(42798),s=t(74118),l=t(93736),v=new a({Extends:h,Mixins:[r.PostPipeline],initialize:function(g,y,E,C){h.call(this,g,y,E,C),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new i.Fade(this),this.flashEffect=new i.Flash(this),this.shakeEffect=new i.Shake(this),this.panEffect=new i.Pan(this),this.rotateToEffect=new i.RotateTo(this),this.zoomEffect=new i.Zoom(this),this.lerp=new l(1,1),this.followOffset=new l,this.deadzone=null,this._follow=null},setDeadzone:function(c,g){if(c===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=c,this.deadzone.height=g):this.deadzone=new s(0,0,c,g),this._follow){var y=this.width/2,E=this.height/2,C=this._follow.x-this.followOffset.x,T=this._follow.y-this.followOffset.y;this.midPoint.set(C,T),this.scrollX=C-y,this.scrollY=T-E}m(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(c,g,y,E,C,T){return this.fadeEffect.start(!1,c,g,y,E,!0,C,T)},fadeOut:function(c,g,y,E,C,T){return this.fadeEffect.start(!0,c,g,y,E,!0,C,T)},fadeFrom:function(c,g,y,E,C,T,A){return this.fadeEffect.start(!1,c,g,y,E,C,T,A)},fade:function(c,g,y,E,C,T,A){return this.fadeEffect.start(!0,c,g,y,E,C,T,A)},flash:function(c,g,y,E,C,T,A){return this.flashEffect.start(c,g,y,E,C,T,A)},shake:function(c,g,y,E,C){return this.shakeEffect.start(c,g,y,E,C)},pan:function(c,g,y,E,C,T,A){return this.panEffect.start(c,g,y,E,C,T,A)},rotateTo:function(c,g,y,E,C,T,A){return this.rotateToEffect.start(c,g,y,E,C,T,A)},zoomTo:function(c,g,y,E,C,T){return this.zoomEffect.start(c,g,y,E,C,T)},preRender:function(){this.renderList.length=0;var c=this.width,g=this.height,y=c*.5,E=g*.5,C=this.zoom,T=this.matrix,A=c*this.originX,P=g*this.originY,M=this._follow,w=this.deadzone,L=this.scrollX,F=this.scrollY;w&&m(w,this.midPoint.x,this.midPoint.y);var D=!1;if(this.roundPixels&&(A=Math.floor(A),P=Math.floor(P)),M&&!this.panEffect.isRunning){var N=this.lerp,B=M.x-this.followOffset.x,b=M.y-this.followOffset.y;this.roundPixels&&(B=Math.floor(B),b=Math.floor(b)),w?(B<w.x?L=u(L,L-(w.x-B),N.x):B>w.right&&(L=u(L,L+(B-w.right),N.x)),b<w.y?F=u(F,F-(w.y-b),N.y):b>w.bottom&&(F=u(F,F+(b-w.bottom),N.y))):(L=u(L,B-A,N.x),F=u(F,b-P,N.y)),D=!0}this.useBounds&&(L=this.clampX(L),F=this.clampY(F)),this.roundPixels&&(L=Math.floor(L),F=Math.floor(F)),this.scrollX=L,this.scrollY=F;var W=L+y,Y=F+E;this.midPoint.set(W,Y);var K=c/C,G=g/C,z=W-K/2,O=Y-G/2;this.roundPixels&&(z=Math.floor(z),O=Math.floor(O)),this.worldView.setTo(z,O,K,G),T.applyITRS(Math.floor(this.x+A),Math.floor(this.y+P),this.rotation,C,C),T.translate(-A,-P),this.shakeEffect.preRender(),D&&this.emit(n.FOLLOW_UPDATE,this,M)},setLerp:function(c,g){return c===void 0&&(c=1),g===void 0&&(g=c),this.lerp.set(c,g),this},setFollowOffset:function(c,g){return c===void 0&&(c=0),g===void 0&&(g=0),this.followOffset.set(c,g),this},startFollow:function(c,g,y,E,C,T){g===void 0&&(g=!1),y===void 0&&(y=1),E===void 0&&(E=y),C===void 0&&(C=0),T===void 0&&(T=C),this._follow=c,this.roundPixels=g,y=o(y,0,1),E=o(E,0,1),this.lerp.set(y,E),this.followOffset.set(C,T);var A=this.width/2,P=this.height/2,M=c.x-C,w=c.y-T;return this.midPoint.set(M,w),this.scrollX=M-A,this.scrollY=w-P,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(c,g){this.visible&&(this.rotateToEffect.update(c,g),this.panEffect.update(c,g),this.zoomEffect.update(c,g),this.shakeEffect.update(c,g),this.flashEffect.update(c,g),this.fadeEffect.update(c,g))},destroy:function(){this.resetFX(),h.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});f.exports=v},62382:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(47751),m=t(56694),o=t(72632),a=t(91963),r=t(94287),i=t(40444),n=t(7599),u=new m({initialize:function(l){this.scene=l,this.systems=l.sys,this.roundPixels=l.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,l.sys.events.once(n.BOOT,this.boot,this),l.sys.events.on(n.START,this.start,this)},boot:function(){var s=this.systems;s.settings.cameras?this.fromJSON(s.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new h(0,0,s.scale.width,s.scale.height).setScene(this.scene),s.game.scale.on(i.RESIZE,this.onResize,this),this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){if(!this.main){var s=this.systems;s.settings.cameras?this.fromJSON(s.settings.cameras):this.add(),this.main=this.cameras[0]}var l=this.systems.events;l.on(n.UPDATE,this.update,this),l.once(n.SHUTDOWN,this.shutdown,this)},add:function(s,l,v,c,g,y){s===void 0&&(s=0),l===void 0&&(l=0),v===void 0&&(v=this.scene.sys.scale.width),c===void 0&&(c=this.scene.sys.scale.height),g===void 0&&(g=!1),y===void 0&&(y="");var E=new h(s,l,v,c);return E.setName(y),E.setScene(this.scene),E.setRoundPixels(this.roundPixels),E.id=this.getNextID(),this.cameras.push(E),g&&(this.main=E),E},addExisting:function(s,l){l===void 0&&(l=!1);var v=this.cameras.indexOf(s);return v===-1?(s.id=this.getNextID(),s.setRoundPixels(this.roundPixels),this.cameras.push(s),l&&(this.main=s),s):null},getNextID:function(){for(var s=this.cameras,l=1,v=0;v<32;v++){for(var c=!1,g=0;g<s.length;g++){var y=s[g];if(y&&y.id===l){c=!0;continue}}if(c)l=l<<1;else return l}return 0},getTotal:function(s){s===void 0&&(s=!1);for(var l=0,v=this.cameras,c=0;c<v.length;c++){var g=v[c];(!s||s&&g.visible)&&l++}return l},fromJSON:function(s){Array.isArray(s)||(s=[s]);for(var l=this.scene.sys.scale.width,v=this.scene.sys.scale.height,c=0;c<s.length;c++){var g=s[c],y=o(g,"x",0),E=o(g,"y",0),C=o(g,"width",l),T=o(g,"height",v),A=this.add(y,E,C,T);A.name=o(g,"name",""),A.zoom=o(g,"zoom",1),A.rotation=o(g,"rotation",0),A.scrollX=o(g,"scrollX",0),A.scrollY=o(g,"scrollY",0),A.roundPixels=o(g,"roundPixels",!1),A.visible=o(g,"visible",!0);var P=o(g,"backgroundColor",!1);P&&A.setBackgroundColor(P);var M=o(g,"bounds",null);if(M){var w=o(M,"x",0),L=o(M,"y",0),F=o(M,"width",l),D=o(M,"height",v);A.setBounds(w,L,F,D)}}return this},getCamera:function(s){for(var l=this.cameras,v=0;v<l.length;v++)if(l[v].name===s)return l[v];return null},getCamerasBelowPointer:function(s){for(var l=this.cameras,v=s.x,c=s.y,g=[],y=0;y<l.length;y++){var E=l[y];E.visible&&E.inputEnabled&&r(E,v,c)&&g.unshift(E)}return g},remove:function(s,l){l===void 0&&(l=!0),Array.isArray(s)||(s=[s]);for(var v=0,c=this.cameras,g=0;g<s.length;g++){var y=c.indexOf(s[g]);y!==-1&&(l?c[y].destroy():c[y].renderList=[],c.splice(y,1),v++)}return!this.main&&c[0]&&(this.main=c[0]),v},render:function(s,l){for(var v=this.scene,c=this.cameras,g=0;g<c.length;g++){var y=c[g];if(y.visible&&y.alpha>0){y.preRender();var E=this.getVisibleChildren(l.getChildren(),y);s.render(v,E,y)}}},getVisibleChildren:function(s,l){return s.filter(function(v){return v.willRender(l)})},resetAll:function(){for(var s=0;s<this.cameras.length;s++)this.cameras[s].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(s,l){for(var v=0;v<this.cameras.length;v++)this.cameras[v].update(s,l)},onResize:function(s,l,v,c,g){for(var y=0;y<this.cameras.length;y++){var E=this.cameras[y];E._x===0&&E._y===0&&E._width===c&&E._height===g&&E.setSize(l.width,l.height)}},resize:function(s,l){for(var v=0;v<this.cameras.length;v++)this.cameras[v].setSize(s,l)},shutdown:function(){this.main=void 0;for(var s=0;s<this.cameras.length;s++)this.cameras[s].destroy();this.cameras=[];var l=this.systems.events;l.off(n.UPDATE,this.update,this),l.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(n.START,this.start,this),this.systems.events.off(n.DESTROY,this.destroy,this),this.systems.game.scale.off(i.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});a.register("CameraManager",u,"cameras"),f.exports=u},92522:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82897),m=t(56694),o=t(89787),a=new m({initialize:function(i){this.camera=i,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(r,i,n,u,s,l,v,c){if(r===void 0&&(r=!0),i===void 0&&(i=1e3),n===void 0&&(n=0),u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=!1),v===void 0&&(v=null),c===void 0&&(c=this.camera.scene),!l&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=i,this.direction=r,this.progress=0,this.red=n,this.green=u,this.blue=s,this.alpha=r?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=v,this._onUpdateScope=c;var g=r?o.FADE_OUT_START:o.FADE_IN_START;return this.camera.emit(g,this.camera,this,i,n,u,s),this.camera},update:function(r,i){this.isRunning&&(this._elapsed+=i,this.progress=h(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(r){if(!this.isRunning&&!this.isComplete)return!1;var i=this.camera;return r.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",r.fillRect(i.x,i.y,i.width,i.height),!0},postRenderWebGL:function(r,i){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera,u=this.red/255,s=this.green/255,l=this.blue/255;return r.drawFillRect(n.x,n.y,n.width,n.height,i(l,s,u,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var r=this.direction?o.FADE_OUT_COMPLETE:o.FADE_IN_COMPLETE;this.camera.emit(r,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});f.exports=a},22151:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82897),m=t(56694),o=t(89787),a=new m({initialize:function(i){this.camera=i,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(r,i,n,u,s,l,v){return r===void 0&&(r=250),i===void 0&&(i=255),n===void 0&&(n=255),u===void 0&&(u=255),s===void 0&&(s=!1),l===void 0&&(l=null),v===void 0&&(v=this.camera.scene),!s&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=r,this.progress=0,this.red=i,this.green=n,this.blue=u,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=l,this._onUpdateScope=v,this.camera.emit(o.FLASH_START,this.camera,this,r,i,n,u),this.camera)},update:function(r,i){this.isRunning&&(this._elapsed+=i,this.progress=h(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(r){if(!this.isRunning)return!1;var i=this.camera;return r.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",r.fillRect(i.x,i.y,i.width,i.height),!0},postRenderWebGL:function(r,i){if(!this.isRunning)return!1;var n=this.camera,u=this.red/255,s=this.green/255,l=this.blue/255;return r.drawFillRect(n.x,n.y,n.width,n.height,i(l,s,u,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});f.exports=a},37551:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82897),m=t(56694),o=t(35060),a=t(89787),r=t(93736),i=new m({initialize:function(u){this.camera=u,this.isRunning=!1,this.duration=0,this.source=new r,this.current=new r,this.destination=new r,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,u,s,l,v,c,g){s===void 0&&(s=1e3),l===void 0&&(l=o.Linear),v===void 0&&(v=!1),c===void 0&&(c=null),g===void 0&&(g=this.camera.scene);var y=this.camera;return!v&&this.isRunning||(this.isRunning=!0,this.duration=s,this.progress=0,this.source.set(y.scrollX,y.scrollY),this.destination.set(n,u),y.getScroll(n,u,this.current),typeof l=="string"&&o.hasOwnProperty(l)?this.ease=o[l]:typeof l=="function"&&(this.ease=l),this._elapsed=0,this._onUpdate=c,this._onUpdateScope=g,this.camera.emit(a.PAN_START,this.camera,this,s,n,u)),y},update:function(n,u){if(this.isRunning){this._elapsed+=u;var s=h(this._elapsed/this.duration,0,1);this.progress=s;var l=this.camera;if(this._elapsed<this.duration){var v=this.ease(s);l.getScroll(this.destination.x,this.destination.y,this.current);var c=this.source.x+(this.current.x-this.source.x)*v,g=this.source.y+(this.current.y-this.source.y)*v;l.setScroll(c,g),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,s,c,g)}else l.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,s,l.scrollX,l.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});f.exports=i},1771:(f,S,t)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var h=t(82897),m=t(56694),o=t(89787),a=t(35060),r=new m({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(i,n,u,s,l,v,c){u===void 0&&(u=1e3),s===void 0&&(s=a.Linear),l===void 0&&(l=!1),v===void 0&&(v=null),c===void 0&&(c=this.camera.scene),n===void 0&&(n=!1),this.shortestPath=n;var g=i;i<0?(g=-1*i,this.clockwise=!1):this.clockwise=!0;var y=360*Math.PI/180;g=g-Math.floor(g/y)*y;var E=this.camera;if(!l&&this.isRunning)return E;if(this.isRunning=!0,this.duration=u,this.progress=0,this.source=E.rotation,this.destination=g,typeof s=="string"&&a.hasOwnProperty(s)?this.ease=a[s]:typeof s=="function"&&(this.ease=s),this._elapsed=0,this._onUpdate=v,this._onUpdateScope=c,this.shortestPath){var C=0,T=0;this.destination>this.source?C=Math.abs(this.destination-this.source):C=Math.abs(this.destination+y)-this.source,this.source>this.destination?T=Math.abs(this.source-this.destination):T=Math.abs(this.source+y)-this.destination,C<T?this.clockwise=!0:C>T&&(this.clockwise=!1)}return this.camera.emit(o.ROTATE_START,this.camera,this,u,g),E},update:function(i,n){if(this.isRunning){this._elapsed+=n;var u=h(this._elapsed/this.duration,0,1);this.progress=u;var s=this.camera;if(this._elapsed<this.duration){var l=this.ease(u);this.current=s.rotation;var v=0,c=360*Math.PI/180,g=this.destination,y=this.current;this.clockwise===!1&&(g=this.current,y=this.destination),g>=y?v=Math.abs(g-y):v=Math.abs(g+c)-y;var E=0;this.clockwise?E=s.rotation+v*l:E=s.rotation-v*l,s.rotation=E,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,s,u,E)}else s.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,s,u,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});f.exports=r},3241:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82897),m=t(56694),o=t(89787),a=t(93736),r=new m({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.intensity=new a,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(i,n,u,s,l){return i===void 0&&(i=100),n===void 0&&(n=.05),u===void 0&&(u=!1),s===void 0&&(s=null),l===void 0&&(l=this.camera.scene),!u&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=i,this.progress=0,typeof n=="number"?this.intensity.set(n):this.intensity.set(n.x,n.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=s,this._onUpdateScope=l,this.camera.emit(o.SHAKE_START,this.camera,this,i,n),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(i,n){if(this.isRunning)if(this._elapsed+=n,this.progress=h(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var u=this.intensity,s=this.camera.width,l=this.camera.height,v=this.camera.zoom;this._offsetX=(Math.random()*u.x*s*2-u.x*s)*v,this._offsetY=(Math.random()*u.y*l*2-u.y*l)*v,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});f.exports=r},13383:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82897),m=t(56694),o=t(35060),a=t(89787),r=new m({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(i,n,u,s,l,v){n===void 0&&(n=1e3),u===void 0&&(u=o.Linear),s===void 0&&(s=!1),l===void 0&&(l=null),v===void 0&&(v=this.camera.scene);var c=this.camera;return!s&&this.isRunning||(this.isRunning=!0,this.duration=n,this.progress=0,this.source=c.zoom,this.destination=i,typeof u=="string"&&o.hasOwnProperty(u)?this.ease=o[u]:typeof u=="function"&&(this.ease=u),this._elapsed=0,this._onUpdate=l,this._onUpdateScope=v,this.camera.emit(a.ZOOM_START,this.camera,this,n,i)),c},update:function(i,n){this.isRunning&&(this._elapsed+=n,this.progress=h(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});f.exports=r},53030:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Fade:t(92522),Flash:t(22151),Pan:t(37551),Shake:t(3241),RotateTo:t(1771),Zoom:t(13383)}},39577:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="cameradestroy"},85373:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="camerafadeincomplete"},92057:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="camerafadeinstart"},1903:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="camerafadeoutcomplete"},96131:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="camerafadeoutstart"},85409:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="cameraflashcomplete"},25500:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="cameraflashstart"},44071:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="followupdate"},19818:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="camerapancomplete"},80002:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="camerapanstart"},87966:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="postrender"},74217:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="prerender"},34805:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="camerarotatecomplete"},30408:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="camerarotatestart"},49856:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="camerashakecomplete"},69189:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="camerashakestart"},67657:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="camerazoomcomplete"},14229:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="camerazoomstart"},89787:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={DESTROY:t(39577),FADE_IN_COMPLETE:t(85373),FADE_IN_START:t(92057),FADE_OUT_COMPLETE:t(1903),FADE_OUT_START:t(96131),FLASH_COMPLETE:t(85409),FLASH_START:t(25500),FOLLOW_UPDATE:t(44071),PAN_COMPLETE:t(19818),PAN_START:t(80002),POST_RENDER:t(87966),PRE_RENDER:t(74217),ROTATE_COMPLETE:t(34805),ROTATE_START:t(30408),SHAKE_COMPLETE:t(49856),SHAKE_START:t(69189),ZOOM_COMPLETE:t(67657),ZOOM_START:t(14229)}},32356:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Camera:t(47751),BaseCamera:t(51052),CameraManager:t(62382),Effects:t(53030),Events:t(89787)}},84219:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(10850),o=new h({initialize:function(r){this.camera=m(r,"camera",null),this.left=m(r,"left",null),this.right=m(r,"right",null),this.up=m(r,"up",null),this.down=m(r,"down",null),this.zoomIn=m(r,"zoomIn",null),this.zoomOut=m(r,"zoomOut",null),this.zoomSpeed=m(r,"zoomSpeed",.01),this.minZoom=m(r,"minZoom",.001),this.maxZoom=m(r,"maxZoom",1e3),this.speedX=0,this.speedY=0;var i=m(r,"speed",null);typeof i=="number"?(this.speedX=i,this.speedY=i):(this.speedX=m(r,"speed.x",0),this.speedY=m(r,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(a){return this.camera=a,this},update:function(a){if(this.active){a===void 0&&(a=1);var r=this.camera;this.up&&this.up.isDown?r.scrollY-=this.speedY*a|0:this.down&&this.down.isDown&&(r.scrollY+=this.speedY*a|0),this.left&&this.left.isDown?r.scrollX-=this.speedX*a|0:this.right&&this.right.isDown&&(r.scrollX+=this.speedX*a|0),this.zoomIn&&this.zoomIn.isDown?(r.zoom-=this.zoomSpeed,r.zoom<this.minZoom&&(r.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(r.zoom+=this.zoomSpeed,r.zoom>this.maxZoom&&(r.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});f.exports=o},69370:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(10850),o=new h({initialize:function(r){this.camera=m(r,"camera",null),this.left=m(r,"left",null),this.right=m(r,"right",null),this.up=m(r,"up",null),this.down=m(r,"down",null),this.zoomIn=m(r,"zoomIn",null),this.zoomOut=m(r,"zoomOut",null),this.zoomSpeed=m(r,"zoomSpeed",.01),this.minZoom=m(r,"minZoom",.001),this.maxZoom=m(r,"maxZoom",1e3),this.accelX=0,this.accelY=0;var i=m(r,"acceleration",null);typeof i=="number"?(this.accelX=i,this.accelY=i):(this.accelX=m(r,"acceleration.x",0),this.accelY=m(r,"acceleration.y",0)),this.dragX=0,this.dragY=0;var n=m(r,"drag",null);typeof n=="number"?(this.dragX=n,this.dragY=n):(this.dragX=m(r,"drag.x",0),this.dragY=m(r,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var u=m(r,"maxSpeed",null);typeof u=="number"?(this.maxSpeedX=u,this.maxSpeedY=u):(this.maxSpeedX=m(r,"maxSpeed.x",0),this.maxSpeedY=m(r,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(a){return this.camera=a,this},update:function(a){if(this.active){a===void 0&&(a=1);var r=this.camera;this._speedX>0?(this._speedX-=this.dragX*a,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*a,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*a,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*a,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(r.scrollX-=this._speedX*a|0),this._speedY!==0&&(r.scrollY-=this._speedY*a|0),this._zoom!==0&&(r.zoom+=this._zoom,r.zoom<this.minZoom?r.zoom=this.minZoom:r.zoom>this.maxZoom&&(r.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});f.exports=o},6524:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={FixedKeyControl:t(84219),SmoothedKeyControl:t(69370)}},44143:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Controls:t(6524),Scene2D:t(32356)}},86459:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h={VERSION:"3.60.0",BlendModes:t(95723),ScaleModes:t(27394),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};f.exports=h},14033:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(86459),o=t(18360),a=t(77290),r=t(72632),i=t(10850),n=t(42911),u=t(72283),s=t(5923),l=t(65641),v=t(93222),c=new h({initialize:function(y){y===void 0&&(y={});var E=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],C="#ffffff",T=i(y,"scale",null);this.width=i(T,"width",1024,y),this.height=i(T,"height",768,y),this.zoom=i(T,"zoom",1,y),this.parent=i(T,"parent",void 0,y),this.scaleMode=i(T,T?"mode":"scaleMode",0,y),this.expandParent=i(T,"expandParent",!0,y),this.autoRound=i(T,"autoRound",!1,y),this.autoCenter=i(T,"autoCenter",0,y),this.resizeInterval=i(T,"resizeInterval",500,y),this.fullscreenTarget=i(T,"fullscreenTarget",null,y),this.minWidth=i(T,"minWidth",0,y),this.maxWidth=i(T,"maxWidth",0,y),this.minHeight=i(T,"minHeight",0,y),this.maxHeight=i(T,"maxHeight",0,y),this.renderType=i(y,"type",m.AUTO),this.canvas=i(y,"canvas",null),this.context=i(y,"context",null),this.canvasStyle=i(y,"canvasStyle",null),this.customEnvironment=i(y,"customEnvironment",!1),this.sceneConfig=i(y,"scene",null),this.seed=i(y,"seed",[(Date.now()*Math.random()).toString()]),s.RND=new s.RandomDataGenerator(this.seed),this.gameTitle=i(y,"title",""),this.gameURL=i(y,"url","https://phaser.io"),this.gameVersion=i(y,"version",""),this.autoFocus=i(y,"autoFocus",!0),this.stableSort=i(y,"stableSort",-1),this.stableSort===-1&&(this.stableSort=a.browser.es2019?1:0),a.features.stableSort=this.stableSort,this.domCreateContainer=i(y,"dom.createContainer",!1),this.domPointerEvents=i(y,"dom.pointerEvents","none"),this.inputKeyboard=i(y,"input.keyboard",!0),this.inputKeyboardEventTarget=i(y,"input.keyboard.target",window),this.inputKeyboardCapture=i(y,"input.keyboard.capture",[]),this.inputMouse=i(y,"input.mouse",!0),this.inputMouseEventTarget=i(y,"input.mouse.target",null),this.inputMousePreventDefaultDown=i(y,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=i(y,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=i(y,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=i(y,"input.mouse.preventDefaultWheel",!0),this.inputTouch=i(y,"input.touch",a.input.touch),this.inputTouchEventTarget=i(y,"input.touch.target",null),this.inputTouchCapture=i(y,"input.touch.capture",!0),this.inputActivePointers=i(y,"input.activePointers",1),this.inputSmoothFactor=i(y,"input.smoothFactor",0),this.inputWindowEvents=i(y,"input.windowEvents",!0),this.inputGamepad=i(y,"input.gamepad",!1),this.inputGamepadEventTarget=i(y,"input.gamepad.target",window),this.disableContextMenu=i(y,"disableContextMenu",!1),this.audio=i(y,"audio",{}),this.hideBanner=i(y,"banner",null)===!1,this.hidePhaser=i(y,"banner.hidePhaser",!1),this.bannerTextColor=i(y,"banner.text",C),this.bannerBackgroundColor=i(y,"banner.background",E),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=i(y,"fps",null);var A=i(y,"render",null);this.pipeline=i(A,"pipeline",null,y),this.autoMobilePipeline=i(A,"autoMobilePipeline",!0,y),this.defaultPipeline=i(A,"defaultPipeline",l.MULTI_PIPELINE,y),this.antialias=i(A,"antialias",!0,y),this.antialiasGL=i(A,"antialiasGL",!0,y),this.mipmapFilter=i(A,"mipmapFilter","",y),this.desynchronized=i(A,"desynchronized",!1,y),this.roundPixels=i(A,"roundPixels",!1,y),this.pixelArt=i(A,"pixelArt",this.zoom!==1,y),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=i(A,"transparent",!1,y),this.clearBeforeRender=i(A,"clearBeforeRender",!0,y),this.preserveDrawingBuffer=i(A,"preserveDrawingBuffer",!1,y),this.premultipliedAlpha=i(A,"premultipliedAlpha",!0,y),this.failIfMajorPerformanceCaveat=i(A,"failIfMajorPerformanceCaveat",!1,y),this.powerPreference=i(A,"powerPreference","default",y),this.batchSize=i(A,"batchSize",4096,y),this.maxTextures=i(A,"maxTextures",-1,y),this.maxLights=i(A,"maxLights",10,y);var P=i(y,"backgroundColor",0);this.backgroundColor=v(P),this.transparent&&(this.backgroundColor=v(0),this.backgroundColor.alpha=0),this.preBoot=i(y,"callbacks.preBoot",u),this.postBoot=i(y,"callbacks.postBoot",u),this.physics=i(y,"physics",{}),this.defaultPhysicsSystem=i(this.physics,"default",!1),this.loaderBaseURL=i(y,"loader.baseURL",""),this.loaderPath=i(y,"loader.path",""),this.loaderMaxParallelDownloads=i(y,"loader.maxParallelDownloads",a.os.android?6:32),this.loaderCrossOrigin=i(y,"loader.crossOrigin",void 0),this.loaderResponseType=i(y,"loader.responseType",""),this.loaderAsync=i(y,"loader.async",!0),this.loaderUser=i(y,"loader.user",""),this.loaderPassword=i(y,"loader.password",""),this.loaderTimeout=i(y,"loader.timeout",0),this.loaderWithCredentials=i(y,"loader.withCredentials",!1),this.loaderImageLoadType=i(y,"loader.imageLoadType","XHR"),this.loaderLocalScheme=i(y,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=i(y,"fx.glow.quality",.1),this.glowFXDistance=i(y,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var M=i(y,"plugins",null),w=o.DefaultScene;M&&(Array.isArray(M)?this.defaultPlugins=M:n(M)&&(this.installGlobalPlugins=r(M,"global",[]),this.installScenePlugins=r(M,"scene",[]),Array.isArray(M.default)?w=M.default:Array.isArray(M.defaultMerge)&&(w=w.concat(M.defaultMerge)))),this.defaultPlugins=w;var L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=i(y,"images.default",L+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=i(y,"images.missing",L+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=i(y,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=m.WEBGL:window.FORCE_CANVAS&&(this.renderType=m.CANVAS))}});f.exports=c},50150:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(70616),m=t(61068),o=t(86459),a=t(90185),r=function(i){var n=i.config;if((n.customEnvironment||n.canvas)&&n.renderType===o.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!n.customEnvironment&&!n.canvas&&n.renderType!==o.HEADLESS)if(n.renderType===o.AUTO&&(n.renderType=a.webGL?o.WEBGL:o.CANVAS),n.renderType===o.WEBGL){if(!a.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(n.renderType===o.CANVAS){if(!a.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+n.renderType);n.antialias||m.disableSmoothing();var u=i.scale.baseSize,s=u.width,l=u.height;if(n.canvas?(i.canvas=n.canvas,i.canvas.width=s,i.canvas.height=l):i.canvas=m.create(i,s,l,n.renderType),n.canvasStyle&&(i.canvas.style=n.canvasStyle),n.antialias||h.setCrisp(i.canvas),n.renderType!==o.HEADLESS){var v,c;v=t(91135),c=t(11857),n.renderType===o.WEBGL?i.renderer=new c(i):(i.renderer=new v(i),i.context=i.renderer.gameContext)}};f.exports=r},77291:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(86459),m=function(o){var a=o.config;if(!a.hideBanner){var r="WebGL";a.renderType===h.CANVAS?r="Canvas":a.renderType===h.HEADLESS&&(r="Headless");var i=a.audio,n=o.device.audio,u;if(n.webAudio&&!i.disableWebAudio?u="Web Audio":i.noAudio||!n.webAudio&&!n.audioData?u="No Audio":u="HTML5 Audio",o.device.browser.ie)window.console&&console.log("Phaser v"+h.VERSION+" / https://phaser.io");else{var s="",l=[s];if(Array.isArray(a.bannerBackgroundColor)){var v;a.bannerBackgroundColor.forEach(function(g){s=s.concat("%c "),l.push("background: "+g),v=g}),l[l.length-1]="color: "+a.bannerTextColor+"; background: "+v}else s=s.concat("%c "),l.push("color: "+a.bannerTextColor+"; background: "+a.bannerBackgroundColor);l.push("background: transparent"),a.gameTitle&&(s=s.concat(a.gameTitle),a.gameVersion&&(s=s.concat(" v"+a.gameVersion)),a.hidePhaser||(s=s.concat(" / ")));var c="";a.hidePhaser||(s=s.concat("Phaser v"+h.VERSION+c+" ("+r+" | "+u+")")),s=s.concat(" %c "+a.gameURL),l[0]=s,console.log.apply(console,l)}}};f.exports=m},15213:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(99584),m=t(90249),o=t(43474),a=t(61068),r=t(56694),i=t(14033),n=t(85178),u=t(50150),s=t(81078),l=t(77291),v=t(77290),c=t(21546),g=t(6659),y=t(97081),E=t(69898),C=t(91963),T=t(49274),A=t(756),P=t(13553),M=t(38203),w=t(6237),L=t(26617),F=t(26493),D=t(84191),N=new r({initialize:function(b){this.config=new i(b),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new g,this.anims=new m(this),this.textures=new w(this),this.cache=new o(this),this.registry=new s(this,new g),this.input=new E(this,this.config),this.scene=new P(this,this.config.sceneConfig),this.device=v,this.scale=new A(this,this.config),this.sound=null,this.sound=D.create(this),this.loop=new L(this,this.config.fps),this.plugins=new T(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,c(this.boot.bind(this))},boot:function(){if(!C.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),u(this),n(this),l(this),h(this.canvas,this.config.parent),this.textures.once(M.READY,this.texturesReady,this),this.events.emit(y.BOOT)},texturesReady:function(){this.events.emit(y.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),F(this);var B=this.events;B.on(y.HIDDEN,this.onHidden,this),B.on(y.VISIBLE,this.onVisible,this),B.on(y.BLUR,this.onBlur,this),B.on(y.FOCUS,this.onFocus,this)},step:function(B,b){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var W=this.events;W.emit(y.PRE_STEP,B,b),W.emit(y.STEP,B,b),this.scene.update(B,b),W.emit(y.POST_STEP,B,b);var Y=this.renderer;Y.preRender(),W.emit(y.PRE_RENDER,Y,B,b),this.scene.render(Y),Y.postRender(),W.emit(y.POST_RENDER,Y,B,b)}},headlessStep:function(B,b){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var W=this.events;W.emit(y.PRE_STEP,B,b),W.emit(y.STEP,B,b),this.scene.update(B,b),W.emit(y.POST_STEP,B,b),this.scene.isProcessing=!1,W.emit(y.PRE_RENDER,null,B,b),W.emit(y.POST_RENDER,null,B,b)}},onHidden:function(){this.loop.pause(),this.events.emit(y.PAUSE)},pause:function(){var B=this.isPaused;this.isPaused=!0,B||this.events.emit(y.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(y.RESUME)},resume:function(){var B=this.isPaused;this.isPaused=!1,B&&this.events.emit(y.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(B,b){b===void 0&&(b=!1),this.pendingDestroy=!0,this.removeCanvas=B,this.noReturn=b},runDestroy:function(){this.scene.destroy(),this.events.emit(y.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(a.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});f.exports=N},26617:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(10850),o=t(72283),a=t(27385),r=new h({initialize:function(n,u){this.game=n,this.raf=new a,this.started=!1,this.running=!1,this.minFps=m(u,"min",5),this.targetFps=m(u,"target",60),this.fpsLimit=m(u,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=o,this.forceSetTimeOut=m(u,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=m(u,"deltaHistory",10),this.panicMax=m(u,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=m(u,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var i=window.performance.now();this.time=i,this.lastTime=i,this.nextFpsUpdate=i+1e3,this.framesThisSecond=0;for(var n=0;n<this.deltaSmoothingMax;n++)this.deltaHistory[n]=Math.min(this._target,this.deltaHistory[n]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(i){if(this.started)return this;this.started=!0,this.running=!0;for(var n=0;n<this.deltaSmoothingMax;n++)this.deltaHistory[n]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=i;var u=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(u,this.forceSetTimeOut,this._target)},smoothDelta:function(i){var n=this.deltaIndex,u=this.deltaHistory,s=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,i=Math.min(i,this._target)),i>this._min&&(i=u[n],i=Math.min(i,this._min)),u[n]=i,this.deltaIndex++,this.deltaIndex>=s&&(this.deltaIndex=0);for(var l=0,v=0;v<s;v++)l+=u[v];return l/=s,l},updateFPS:function(i){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=i+1e3,this.framesThisSecond=0},stepLimitFPS:function(i){this.now=i;var n=Math.max(0,i-this.lastTime);this.rawDelta=n,this.time+=this.rawDelta,this.smoothStep&&(n=this.smoothDelta(n)),this.delta+=n,i>=this.nextFpsUpdate&&this.updateFPS(i),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(i,this.delta),this.delta=0),this.lastTime=i,this.frame++},step:function(i){this.now=i;var n=Math.max(0,i-this.lastTime);this.rawDelta=n,this.time+=this.rawDelta,this.smoothStep&&(n=this.smoothDelta(n)),this.delta=n,i>=this.nextFpsUpdate&&this.updateFPS(i),this.framesThisSecond++,this.callback(i,n),this.lastTime=i,this.frame++},tick:function(){var i=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(i):this.step(i)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(i){i===void 0&&(i=!1);var n=window.performance.now();if(!this.running){i&&(this.startTime+=-this.lastTime+(this.lastTime+n));var u=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(u,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});f.exports=r},26493:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(97081),m=function(o){var a,r=o.events;if(document.hidden!==void 0)a="visibilitychange";else{var i=["webkit","moz","ms"];i.forEach(function(u){document[u+"Hidden"]!==void 0&&(document.hidden=function(){return document[u+"Hidden"]},a=u+"visibilitychange")})}var n=function(u){document.hidden||u.type==="pause"?r.emit(h.HIDDEN):r.emit(h.VISIBLE)};a&&document.addEventListener(a,n,!1),window.onblur=function(){r.emit(h.BLUR)},window.onfocus=function(){r.emit(h.FOCUS)},window.focus&&o.config.autoFocus&&window.focus()};f.exports=m},41651:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="blur"},5520:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="boot"},51673:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="contextlost"},25055:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="destroy"},23767:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="focus"},57564:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="hidden"},38327:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pause"},43807:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="postrender"},73652:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="poststep"},780:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="prerender"},13781:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="prestep"},38247:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="ready"},29129:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="resume"},34994:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="step"},98704:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="visible"},97081:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={BLUR:t(41651),BOOT:t(5520),CONTEXT_LOST:t(51673),DESTROY:t(25055),FOCUS:t(23767),HIDDEN:t(57564),PAUSE:t(38327),POST_RENDER:t(43807),POST_STEP:t(73652),PRE_RENDER:t(780),PRE_STEP:t(13781),READY:t(38247),RESUME:t(29129),STEP:t(34994),VISIBLE:t(98704)}},80293:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Config:t(14033),CreateRenderer:t(50150),DebugHeader:t(77291),Events:t(97081),TimeStep:t(26617),VisibilityHandler:t(26493)}},52780:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(81543),m=t(61068),o=t(10850),a=function(r){var i=o(r,"data",[]),n=o(r,"canvas",null),u=o(r,"palette",h),s=o(r,"pixelWidth",1),l=o(r,"pixelHeight",s),v=o(r,"resizeCanvas",!0),c=o(r,"clearCanvas",!0),g=o(r,"preRender",null),y=o(r,"postRender",null),E=Math.floor(Math.abs(i[0].length*s)),C=Math.floor(Math.abs(i.length*l));n||(n=m.create2D(this,E,C),v=!1,c=!1),v&&(n.width=E,n.height=C);var T=n.getContext("2d",{willReadFrequently:!0});c&&T.clearRect(0,0,E,C),g&&g(n,T);for(var A=0;A<i.length;A++)for(var P=i[A],M=0;M<P.length;M++){var w=P[M];w!=="."&&w!==" "&&(T.fillStyle=u[w],T.fillRect(M*s,A*l,s,l))}return y&&y(n,T),n};f.exports=a},84106:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={GenerateTexture:t(52780),Palettes:t(25235)}},81543:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},75846:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},83206:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},13194:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},50686:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},25235:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={ARNE16:t(81543),C64:t(75846),CGA:t(83206),JMP:t(13194),MSX:t(50686)}},63120:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(34631),o=t(38517),a=t(93736),r=new h({Extends:o,initialize:function(n,u,s,l){o.call(this,"CubicBezierCurve"),Array.isArray(n)&&(l=new a(n[6],n[7]),s=new a(n[4],n[5]),u=new a(n[2],n[3]),n=new a(n[0],n[1])),this.p0=n,this.p1=u,this.p2=s,this.p3=l},getStartPoint:function(i){return i===void 0&&(i=new a),i.copy(this.p0)},getResolution:function(i){return i},getPoint:function(i,n){n===void 0&&(n=new a);var u=this.p0,s=this.p1,l=this.p2,v=this.p3;return n.set(m(i,u.x,s.x,l.x,v.x),m(i,u.y,s.y,l.y,v.y))},draw:function(i,n){n===void 0&&(n=32);var u=this.getPoints(n);i.beginPath(),i.moveTo(this.p0.x,this.p0.y);for(var s=1;s<u.length;s++)i.lineTo(u[s].x,u[s].y);return i.strokePath(),i},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});r.fromJSON=function(i){var n=i.points,u=new a(n[0],n[1]),s=new a(n[2],n[3]),l=new a(n[4],n[5]),v=new a(n[6],n[7]);return new r(u,s,l,v)},f.exports=r},38517:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(80222),o=t(74118),a=t(93736),r=new h({initialize:function(n){this.type=n,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new a,this._tmpVec2B=new a},draw:function(i,n){return n===void 0&&(n=32),i.strokePoints(this.getPoints(n))},getBounds:function(i,n){i||(i=new o),n===void 0&&(n=16);var u=this.getLength();n>u&&(n=u/2);var s=Math.max(1,Math.round(u/n));return m(this.getSpacedPoints(s),i)},getDistancePoints:function(i){var n=this.getLength(),u=Math.max(1,n/i);return this.getSpacedPoints(u)},getEndPoint:function(i){return i===void 0&&(i=new a),this.getPointAt(1,i)},getLength:function(){var i=this.getLengths();return i[i.length-1]},getLengths:function(i){if(i===void 0&&(i=this.arcLengthDivisions),this.cacheArcLengths.length===i+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var n=[],u,s=this.getPoint(0,this._tmpVec2A),l=0;n.push(0);for(var v=1;v<=i;v++)u=this.getPoint(v/i,this._tmpVec2B),l+=u.distance(s),n.push(l),s.copy(u);return this.cacheArcLengths=n,n},getPointAt:function(i,n){var u=this.getUtoTmapping(i);return this.getPoint(u,n)},getPoints:function(i,n,u){u===void 0&&(u=[]),i||(n?i=this.getLength()/n:i=this.defaultDivisions);for(var s=0;s<=i;s++)u.push(this.getPoint(s/i));return u},getRandomPoint:function(i){return i===void 0&&(i=new a),this.getPoint(Math.random(),i)},getSpacedPoints:function(i,n,u){u===void 0&&(u=[]),i||(n?i=this.getLength()/n:i=this.defaultDivisions);for(var s=0;s<=i;s++){var l=this.getUtoTmapping(s/i,null,i);u.push(this.getPoint(l))}return u},getStartPoint:function(i){return i===void 0&&(i=new a),this.getPointAt(0,i)},getTangent:function(i,n){n===void 0&&(n=new a);var u=1e-4,s=i-u,l=i+u;return s<0&&(s=0),l>1&&(l=1),this.getPoint(s,this._tmpVec2A),this.getPoint(l,n),n.subtract(this._tmpVec2A).normalize()},getTangentAt:function(i,n){var u=this.getUtoTmapping(i);return this.getTangent(u,n)},getTFromDistance:function(i,n){return i<=0?0:this.getUtoTmapping(0,i,n)},getUtoTmapping:function(i,n,u){var s=this.getLengths(u),l=0,v=s.length,c;n?c=Math.min(n,s[v-1]):c=i*s[v-1];for(var g=0,y=v-1,E;g<=y;)if(l=Math.floor(g+(y-g)/2),E=s[l]-c,E<0)g=l+1;else if(E>0)y=l-1;else{y=l;break}if(l=y,s[l]===c)return l/(v-1);var C=s[l],T=s[l+1],A=T-C,P=(c-C)/A;return(l+P)/(v-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});f.exports=r},48835:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(38517),o=t(75606),a=t(10850),r=t(23701),i=t(93736),n=new h({Extends:m,initialize:function(s,l,v,c,g,y,E,C){if(typeof s=="object"){var T=s;s=a(T,"x",0),l=a(T,"y",0),v=a(T,"xRadius",0),c=a(T,"yRadius",v),g=a(T,"startAngle",0),y=a(T,"endAngle",360),E=a(T,"clockwise",!1),C=a(T,"rotation",0)}else c===void 0&&(c=v),g===void 0&&(g=0),y===void 0&&(y=360),E===void 0&&(E=!1),C===void 0&&(C=0);m.call(this,"EllipseCurve"),this.p0=new i(s,l),this._xRadius=v,this._yRadius=c,this._startAngle=o(g),this._endAngle=o(y),this._clockwise=E,this._rotation=o(C)},getStartPoint:function(u){return u===void 0&&(u=new i),this.getPoint(0,u)},getResolution:function(u){return u*2},getPoint:function(u,s){s===void 0&&(s=new i);for(var l=Math.PI*2,v=this._endAngle-this._startAngle,c=Math.abs(v)<Number.EPSILON;v<0;)v+=l;for(;v>l;)v-=l;v<Number.EPSILON&&(c?v=0:v=l),this._clockwise&&!c&&(v===l?v=-l:v=v-l);var g=this._startAngle+u*v,y=this.p0.x+this._xRadius*Math.cos(g),E=this.p0.y+this._yRadius*Math.sin(g);if(this._rotation!==0){var C=Math.cos(this._rotation),T=Math.sin(this._rotation),A=y-this.p0.x,P=E-this.p0.y;y=A*C-P*T+this.p0.x,E=A*T+P*C+this.p0.y}return s.set(y,E)},setXRadius:function(u){return this.xRadius=u,this},setYRadius:function(u){return this.yRadius=u,this},setWidth:function(u){return this.xRadius=u/2,this},setHeight:function(u){return this.yRadius=u/2,this},setStartAngle:function(u){return this.startAngle=u,this},setEndAngle:function(u){return this.endAngle=u,this},setClockwise:function(u){return this.clockwise=u,this},setRotation:function(u){return this.rotation=u,this},x:{get:function(){return this.p0.x},set:function(u){this.p0.x=u}},y:{get:function(){return this.p0.y},set:function(u){this.p0.y=u}},xRadius:{get:function(){return this._xRadius},set:function(u){this._xRadius=u}},yRadius:{get:function(){return this._yRadius},set:function(u){this._yRadius=u}},startAngle:{get:function(){return r(this._startAngle)},set:function(u){this._startAngle=o(u)}},endAngle:{get:function(){return r(this._endAngle)},set:function(u){this._endAngle=o(u)}},clockwise:{get:function(){return this._clockwise},set:function(u){this._clockwise=u}},angle:{get:function(){return r(this._rotation)},set:function(u){this._rotation=o(u)}},rotation:{get:function(){return this._rotation},set:function(u){this._rotation=u}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:r(this._startAngle),endAngle:r(this._endAngle),clockwise:this._clockwise,rotation:r(this._rotation)}}});n.fromJSON=function(u){return new n(u)},f.exports=n},58084:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(38517),o=t(80222),a=t(74118),r=t(93736),i=new h({Extends:m,initialize:function(u,s){m.call(this,"LineCurve"),Array.isArray(u)&&(s=new r(u[2],u[3]),u=new r(u[0],u[1])),this.p0=u,this.p1=s,this.arcLengthDivisions=1},getBounds:function(n){return n===void 0&&(n=new a),o([this.p0,this.p1],n)},getStartPoint:function(n){return n===void 0&&(n=new r),n.copy(this.p0)},getResolution:function(n){return n===void 0&&(n=1),n},getPoint:function(n,u){return u===void 0&&(u=new r),n===1?u.copy(this.p1):(u.copy(this.p1).subtract(this.p0).scale(n).add(this.p0),u)},getPointAt:function(n,u){return this.getPoint(n,u)},getTangent:function(n,u){return u===void 0&&(u=new r),u.copy(this.p1).subtract(this.p0).normalize(),u},getUtoTmapping:function(n,u,s){var l;if(u){var v=this.getLengths(s),c=v[v.length-1],g=Math.min(u,c);l=g/c}else l=n;return l},draw:function(n){return n.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});i.fromJSON=function(n){var u=n.points,s=new r(u[0],u[1]),l=new r(u[2],u[3]);return new i(s,l)},f.exports=i},64761:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(38517),o=t(16252),a=t(93736),r=new h({Extends:m,initialize:function(n,u,s){m.call(this,"QuadraticBezierCurve"),Array.isArray(n)&&(s=new a(n[4],n[5]),u=new a(n[2],n[3]),n=new a(n[0],n[1])),this.p0=n,this.p1=u,this.p2=s},getStartPoint:function(i){return i===void 0&&(i=new a),i.copy(this.p0)},getResolution:function(i){return i},getPoint:function(i,n){n===void 0&&(n=new a);var u=this.p0,s=this.p1,l=this.p2;return n.set(o(i,u.x,s.x,l.x),o(i,u.y,s.y,l.y))},draw:function(i,n){n===void 0&&(n=32);var u=this.getPoints(n);i.beginPath(),i.moveTo(this.p0.x,this.p0.y);for(var s=1;s<u.length;s++)i.lineTo(u[s].x,u[s].y);return i.strokePath(),i},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});r.fromJSON=function(i){var n=i.points,u=new a(n[0],n[1]),s=new a(n[2],n[3]),l=new a(n[4],n[5]);return new r(u,s,l)},f.exports=r},11956:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(14976),m=t(56694),o=t(38517),a=t(93736),r=new m({Extends:o,initialize:function(n){n===void 0&&(n=[]),o.call(this,"SplineCurve"),this.points=[],this.addPoints(n)},addPoints:function(i){for(var n=0;n<i.length;n++){var u=new a;typeof i[n]=="number"?(u.x=i[n],u.y=i[n+1],n++):Array.isArray(i[n])?(u.x=i[n][0],u.y=i[n][1]):(u.x=i[n].x,u.y=i[n].y),this.points.push(u)}return this},addPoint:function(i,n){var u=new a(i,n);return this.points.push(u),u},getStartPoint:function(i){return i===void 0&&(i=new a),i.copy(this.points[0])},getResolution:function(i){return i*this.points.length},getPoint:function(i,n){n===void 0&&(n=new a);var u=this.points,s=(u.length-1)*i,l=Math.floor(s),v=s-l,c=u[l===0?l:l-1],g=u[l],y=u[l>u.length-2?u.length-1:l+1],E=u[l>u.length-3?u.length-1:l+2];return n.set(h(v,c.x,g.x,y.x,E.x),h(v,c.y,g.y,y.y,E.y))},toJSON:function(){for(var i=[],n=0;n<this.points.length;n++)i.push(this.points[n].x),i.push(this.points[n].y);return{type:this.type,points:i}}});r.fromJSON=function(i){return new r(i.points)},f.exports=r},73962:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Path:t(12822),MoveTo:t(53639),CubicBezier:t(63120),Curve:t(38517),Ellipse:t(48835),Line:t(58084),QuadraticBezier:t(64761),Spline:t(11956)}},53639:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(93736),o=new h({initialize:function(r,i){this.active=!1,this.p0=new m(r,i)},getPoint:function(a,r){return r===void 0&&(r=new m),r.copy(this.p0)},getPointAt:function(a,r){return this.getPoint(a,r)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});f.exports=o},12822:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(63120),o=t(48835),a=t(61286),r=t(58084),i=t(53639),n=t(64761),u=t(74118),s=t(11956),l=t(93736),v=t(83392),c=new h({initialize:function(y,E){y===void 0&&(y=0),E===void 0&&(E=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new l,this._tmpVec2A=new l,this._tmpVec2B=new l,typeof y=="object"?this.fromJSON(y):this.startPoint.set(y,E)},add:function(g){return this.curves.push(g),this},circleTo:function(g,y,E){return y===void 0&&(y=!1),this.ellipseTo(g,g,0,360,y,E)},closePath:function(){var g=this.curves[0].getPoint(0),y=this.curves[this.curves.length-1].getPoint(1);return g.equals(y)||this.curves.push(new r(y,g)),this},cubicBezierTo:function(g,y,E,C,T,A){var P=this.getEndPoint(),M,w,L;return g instanceof l?(M=g,w=y,L=E):(M=new l(E,C),w=new l(T,A),L=new l(g,y)),this.add(new m(P,M,w,L))},quadraticBezierTo:function(g,y,E,C){var T=this.getEndPoint(),A,P;return g instanceof l?(A=g,P=y):(A=new l(E,C),P=new l(g,y)),this.add(new n(T,A,P))},draw:function(g,y){for(var E=0;E<this.curves.length;E++){var C=this.curves[E];C.active&&C.draw(g,y)}return g},ellipseTo:function(g,y,E,C,T,A){var P=new o(0,0,g,y,E,C,T,A),M=this.getEndPoint(this._tmpVec2A),w=P.getStartPoint(this._tmpVec2B);return M.subtract(w),P.x=M.x,P.y=M.y,this.add(P)},fromJSON:function(g){this.curves=[],this.cacheLengths=[],this.startPoint.set(g.x,g.y),this.autoClose=g.autoClose;for(var y=0;y<g.curves.length;y++){var E=g.curves[y];switch(E.type){case"LineCurve":this.add(r.fromJSON(E));break;case"EllipseCurve":this.add(o.fromJSON(E));break;case"SplineCurve":this.add(s.fromJSON(E));break;case"CubicBezierCurve":this.add(m.fromJSON(E));break;case"QuadraticBezierCurve":this.add(n.fromJSON(E));break}}return this},getBounds:function(g,y){g===void 0&&(g=new u),y===void 0&&(y=16),g.x=Number.MAX_VALUE,g.y=Number.MAX_VALUE;for(var E=new u,C=v.MIN_SAFE_INTEGER,T=v.MIN_SAFE_INTEGER,A=0;A<this.curves.length;A++){var P=this.curves[A];P.active&&(P.getBounds(E,y),g.x=Math.min(g.x,E.x),g.y=Math.min(g.y,E.y),C=Math.max(C,E.right),T=Math.max(T,E.bottom))}return g.right=C,g.bottom=T,g},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var g=[],y=0,E=0;E<this.curves.length;E++)y+=this.curves[E].getLength(),g.push(y);return this.cacheLengths=g,g},getCurveAt:function(g){for(var y=g*this.getLength(),E=this.getCurveLengths(),C=0;C<E.length;){if(E[C]>=y)return this.curves[C];C++}return null},getEndPoint:function(g){return g===void 0&&(g=new l),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,g):g.copy(this.startPoint),g},getLength:function(){var g=this.getCurveLengths();return g[g.length-1]},getPoint:function(g,y){y===void 0&&(y=new l);for(var E=g*this.getLength(),C=this.getCurveLengths(),T=0;T<C.length;){if(C[T]>=E){var A=C[T]-E,P=this.curves[T],M=P.getLength(),w=M===0?0:1-A/M;return P.getPointAt(w,y)}T++}return null},getPoints:function(g){g===void 0&&(g=12);for(var y=[],E,C=0;C<this.curves.length;C++){var T=this.curves[C];if(T.active)for(var A=T.getResolution(g),P=T.getPoints(A),M=0;M<P.length;M++){var w=P[M];E&&E.equals(w)||(y.push(w),E=w)}}return this.autoClose&&y.length>1&&!y[y.length-1].equals(y[0])&&y.push(y[0]),y},getRandomPoint:function(g){return g===void 0&&(g=new l),this.getPoint(Math.random(),g)},getSpacedPoints:function(g){g===void 0&&(g=40);for(var y=[],E=0;E<=g;E++)y.push(this.getPoint(E/g));return this.autoClose&&y.push(y[0]),y},getStartPoint:function(g){return g===void 0&&(g=new l),g.copy(this.startPoint)},getTangent:function(g,y){y===void 0&&(y=new l);for(var E=g*this.getLength(),C=this.getCurveLengths(),T=0;T<C.length;){if(C[T]>=E){var A=C[T]-E,P=this.curves[T],M=P.getLength(),w=M===0?0:1-A/M;return P.getTangentAt(w,y)}T++}return null},lineTo:function(g,y){g instanceof l?this._tmpVec2B.copy(g):this._tmpVec2B.set(g,y);var E=this.getEndPoint(this._tmpVec2A);return this.add(new r([E.x,E.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(g){return g.unshift(this.getEndPoint()),this.add(new s(g))},moveTo:function(g,y){return g instanceof l?this.add(new i(g.x,g.y)):this.add(new i(g,y))},toJSON:function(){for(var g=[],y=0;y<this.curves.length;y++)g.push(this.curves[y].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:g}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});a.register("path",function(g,y){return new c(g,y)}),f.exports=c},81078:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(35026),o=new h({initialize:function(r,i){this.parent=r,this.events=i,i||(this.events=r.events?r.events:r),this.list={},this.values={},this._frozen=!1,!r.hasOwnProperty("sys")&&this.events&&this.events.once(m.DESTROY,this.destroy,this)},get:function(a){var r=this.list;if(Array.isArray(a)){for(var i=[],n=0;n<a.length;n++)i.push(r[a[n]]);return i}else return r[a]},getAll:function(){var a={};for(var r in this.list)this.list.hasOwnProperty(r)&&(a[r]=this.list[r]);return a},query:function(a){var r={};for(var i in this.list)this.list.hasOwnProperty(i)&&i.match(a)&&(r[i]=this.list[i]);return r},set:function(a,r){if(this._frozen)return this;if(typeof a=="string")return this.setValue(a,r);for(var i in a)this.setValue(i,a[i]);return this},inc:function(a,r){if(this._frozen)return this;r===void 0&&(r=1);var i=this.get(a);return i===void 0&&(i=0),this.set(a,i+r),this},toggle:function(a){return this._frozen?this:(this.set(a,!this.get(a)),this)},setValue:function(a,r){if(this._frozen)return this;if(this.has(a))this.values[a]=r;else{var i=this,n=this.list,u=this.events,s=this.parent;Object.defineProperty(this.values,a,{enumerable:!0,configurable:!0,get:function(){return n[a]},set:function(l){if(!i._frozen){var v=n[a];n[a]=l,u.emit(m.CHANGE_DATA,s,a,l,v),u.emit(m.CHANGE_DATA_KEY+a,s,l,v)}}}),n[a]=r,u.emit(m.SET_DATA,s,a,r)}return this},each:function(a,r){for(var i=[this.parent,null,void 0],n=1;n<arguments.length;n++)i.push(arguments[n]);for(var u in this.list)i[1]=u,i[2]=this.list[u],a.apply(r,i);return this},merge:function(a,r){r===void 0&&(r=!0);for(var i in a)a.hasOwnProperty(i)&&(r||!r&&!this.has(i))&&this.setValue(i,a[i]);return this},remove:function(a){if(this._frozen)return this;if(Array.isArray(a))for(var r=0;r<a.length;r++)this.removeValue(a[r]);else return this.removeValue(a);return this},removeValue:function(a){if(this.has(a)){var r=this.list[a];delete this.list[a],delete this.values[a],this.events.emit(m.REMOVE_DATA,this.parent,a,r)}return this},pop:function(a){var r=void 0;return!this._frozen&&this.has(a)&&(r=this.list[a],delete this.list[a],delete this.values[a],this.events.emit(m.REMOVE_DATA,this.parent,a,r)),r},has:function(a){return this.list.hasOwnProperty(a)},setFreeze:function(a){return this._frozen=a,this},reset:function(){for(var a in this.list)delete this.list[a],delete this.values[a];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(m.CHANGE_DATA),this.events.off(m.SET_DATA),this.events.off(m.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(a){this._frozen=!!a}},count:{get:function(){var a=0;for(var r in this.list)this.list[r]!==void 0&&a++;return a}}});f.exports=o},76508:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(81078),o=t(91963),a=t(7599),r=new h({Extends:m,initialize:function(n){m.call(this,n,n.sys.events),this.scene=n,this.systems=n.sys,n.sys.events.once(a.BOOT,this.boot,this),n.sys.events.on(a.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){m.prototype.destroy.call(this),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});o.register("DataManagerPlugin",r,"data"),f.exports=r},73569:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="changedata"},15590:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="changedata-"},37669:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="destroy"},87090:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="removedata"},90142:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="setdata"},35026:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={CHANGE_DATA:t(73569),CHANGE_DATA_KEY:t(15590),DESTROY:t(37669),REMOVE_DATA:t(87090),SET_DATA:t(90142)}},1999:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={DataManager:t(81078),DataManagerPlugin:t(76508),Events:t(35026)}},10720:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(1350),m={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function o(){if(typeof importScripts=="function")return m;m.audioData=!!window.Audio,m.webAudio=!!(window.AudioContext||window.webkitAudioContext);var a=document.createElement("audio"),r=!!a.canPlayType;try{if(r){var i=function(s,l){var v=a.canPlayType("audio/"+s).replace(/^no$/,"");return l?!!(v||a.canPlayType("audio/"+l).replace(/^no$/,"")):!!v};if(m.ogg=i('ogg; codecs="vorbis"'),m.opus=i('ogg; codecs="opus"',"opus"),m.mp3=i("mpeg"),m.wav=i("wav"),m.m4a=i("x-m4a"),m.aac=i("aac"),m.flac=i("flac","x-flac"),m.webm=i('webm; codecs="vorbis"'),a.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(h.edge)m.dolby=!0;else if(h.safari&&h.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var n=parseInt(RegExp.$1,10),u=parseInt(RegExp.$2,10);(n===10&&u>=11||n>10)&&(m.dolby=!0)}}}}catch{}return m}f.exports=o()},1350:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(36580),m={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function o(){var a=navigator.userAgent;return/Edg\/\d+/.test(a)?(m.edge=!0,m.es2019=!0):/OPR/.test(a)?(m.opera=!0,m.es2019=!0):/Chrome\/(\d+)/.test(a)&&!h.windowsPhone?(m.chrome=!0,m.chromeVersion=parseInt(RegExp.$1,10),m.es2019=m.chromeVersion>69):/Firefox\D+(\d+)/.test(a)?(m.firefox=!0,m.firefoxVersion=parseInt(RegExp.$1,10),m.es2019=m.firefoxVersion>10):/AppleWebKit/.test(a)&&h.iOS?m.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(a)?(m.ie=!0,m.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+) Safari/.test(a)&&!h.windowsPhone?(m.safari=!0,m.safariVersion=parseInt(RegExp.$1,10),m.es2019=m.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(a)&&(m.ie=!0,m.trident=!0,m.tridentVersion=parseInt(RegExp.$1,10),m.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(a)&&(m.silk=!0),m}f.exports=o()},98581:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61068),m={supportInverseAlpha:!1,supportNewBlendModes:!1};function o(){var i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",n="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",u=new Image;return u.onload=function(){var s=new Image;s.onload=function(){var l=h.create2D(s,6),v=l.getContext("2d",{willReadFrequently:!0});if(v.globalCompositeOperation="multiply",v.drawImage(u,0,0),v.drawImage(s,2,0),!v.getImageData(2,0,1,1))return!1;var c=v.getImageData(2,0,1,1).data;h.remove(s),m.supportNewBlendModes=c[0]===255&&c[1]===0&&c[2]===0},s.src=i+"/wCKxvRF"+n},u.src=i+"AP804Oa6"+n,!1}function a(){var i=h.create2D(this,2),n=i.getContext("2d",{willReadFrequently:!0});n.fillStyle="rgba(10, 20, 30, 0.5)",n.fillRect(0,0,1,1);var u=n.getImageData(0,0,1,1);if(u===null)return!1;n.putImageData(u,1,0);var s=n.getImageData(1,0,1,1),l=s.data[0]===u.data[0]&&s.data[1]===u.data[1]&&s.data[2]===u.data[2]&&s.data[3]===u.data[3];return h.remove(this),l}function r(){return typeof importScripts!="function"&&document!==void 0&&(m.supportNewBlendModes=o(),m.supportInverseAlpha=a()),m}f.exports=r()},90185:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(36580),m=t(1350),o=t(61068),a={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function r(){var n=new ArrayBuffer(4),u=new Uint8Array(n),s=new Uint32Array(n);return u[0]=161,u[1]=178,u[2]=195,u[3]=212,s[0]===3569595041?!0:s[0]===2712847316?!1:null}function i(){if(typeof importScripts=="function")return a;a.canvas=!!window.CanvasRenderingContext2D;try{a.localStorage=!!localStorage.getItem}catch{a.localStorage=!1}a.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,a.fileSystem=!!window.requestFileSystem;var n=!1,u=function(){if(window.WebGLRenderingContext)try{var s=o.createWebGL(this),l=s.getContext("webgl")||s.getContext("experimental-webgl"),v=o.create2D(this),c=v.getContext("2d",{willReadFrequently:!0}),g=c.createImageData(1,1);return n=g.data instanceof Uint8ClampedArray,o.remove(s),o.remove(v),!!l}catch{return!1}return!1};return a.webGL=u(),a.worker=!!window.Worker,a.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,a.getUserMedia=a.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,m.firefox&&m.firefoxVersion<21&&(a.getUserMedia=!1),!h.iOS&&(m.ie||m.firefox||m.chrome)&&(a.canvasBitBltShift=!0),(m.safari||m.mobileSafari)&&(a.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(a.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(a.littleEndian=r()),a.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&a.littleEndian!==null&&n,a}f.exports=i()},33553:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={available:!1,cancel:"",keyboard:!1,request:""};function t(){if(typeof importScripts=="function")return S;var h,m="Fullscreen",o="FullScreen",a=["request"+m,"request"+o,"webkitRequest"+m,"webkitRequest"+o,"msRequest"+m,"msRequest"+o,"mozRequest"+o,"mozRequest"+m];for(h=0;h<a.length;h++)if(document.documentElement[a[h]]){S.available=!0,S.request=a[h];break}var r=["cancel"+o,"exit"+m,"webkitCancel"+o,"webkitExit"+m,"msCancel"+o,"msExit"+m,"mozCancel"+o,"mozExit"+m];if(S.available){for(h=0;h<r.length;h++)if(document[r[h]]){S.cancel=r[h];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(S.keyboard=!0),Object.defineProperty(S,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),S}f.exports=t()},95872:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(1350),m={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function o(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(m.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(m.mspointer=!0),navigator.getGamepads&&(m.gamepads=!0),"onwheel"in window||h.ie&&"WheelEvent"in window?m.wheelEvent="wheel":"onmousewheel"in window?m.wheelEvent="mousewheel":h.firefox&&"MouseScrollEvent"in window&&(m.wheelEvent="DOMMouseScroll")),m}f.exports=o()},36580:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function t(){if(typeof importScripts=="function")return S;var h=navigator.userAgent;/Windows/.test(h)?S.windows=!0:/Mac OS/.test(h)&&!/like Mac OS/.test(h)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(S.iOS=!0,S.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),S.iOSVersion=parseInt(RegExp.$1,10)):S.macOS=!0:/Android/.test(h)?S.android=!0:/Linux/.test(h)?S.linux=!0:/iP[ao]d|iPhone/i.test(h)?(S.iOS=!0,navigator.appVersion.match(/OS (\d+)/),S.iOSVersion=parseInt(RegExp.$1,10),S.iPhone=h.toLowerCase().indexOf("iphone")!==-1,S.iPad=h.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(h)||/\bKF[A-Z][A-Z]+/.test(h)||/Silk.*Mobile Safari/.test(h)?S.kindle=!0:/CrOS/.test(h)&&(S.chromeOS=!0),(/Windows Phone/i.test(h)||/IEMobile/i.test(h))&&(S.android=!1,S.iOS=!1,S.macOS=!1,S.windows=!0,S.windowsPhone=!0);var m=/Silk/.test(h);return(S.windows||S.macOS||S.linux&&!m||S.chromeOS)&&(S.desktop=!0),(S.windowsPhone||/Windows NT/i.test(h)&&/Touch/i.test(h))&&(S.desktop=!1),navigator.standalone&&(S.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(S.cordova=!0),window.ejecta!==void 0&&(S.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(S.node=!0),S.node&&typeof process.versions=="object"&&(S.nodeWebkit=!!process.versions["node-webkit"],S.electron=!!process.versions.electron),/Crosswalk/.test(h)&&(S.crosswalk=!0),S.pixelRatio=window.devicePixelRatio||1,S}f.exports=t()},53861:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72632),m={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function o(){if(typeof importScripts=="function")return m;var a=document.createElement("video"),r=!!a.canPlayType,i=/^no$/;try{r&&(a.canPlayType('video/ogg; codecs="theora"').replace(i,"")&&(m.ogg=!0),a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(i,"")&&(m.h264=!0,m.mp4=!0),a.canPlayType("video/x-m4v").replace(i,"")&&(m.m4v=!0),a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(i,"")&&(m.webm=!0),a.canPlayType('video/webm; codecs="vp9"').replace(i,"")&&(m.vp9=!0),a.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(i,"")&&(m.hls=!0))}catch{}return a.parentNode&&a.parentNode.removeChild(a),m.getVideoURL=function(n){Array.isArray(n)||(n=[n]);for(var u=0;u<n.length;u++){var s=h(n[u],"url",n[u]);if(s.indexOf("blob:")===0)return{url:s,type:""};var l;if(s.indexOf("data:")===0?l=s.split(",")[0].match(/\/(.*?);/):l=s.match(/\.([a-zA-Z0-9]+)($|\?)/),l=h(n[u],"type",l?l[1]:"").toLowerCase(),m[l])return{url:s,type:l}}return null},m}f.exports=o()},77290:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={os:t(36580),browser:t(1350),features:t(90185),input:t(95872),audio:t(10720),video:t(53861),fullscreen:t(33553),canvasFeatures:t(98581)}},65246:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=new Float32Array(20),o=new h({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(a){return this._matrix.set(a),this._dirty=!0,this},reset:function(){var a=this._matrix;return a.fill(0),a[0]=1,a[6]=1,a[12]=1,a[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var a=this._data;return this._dirty&&(a.set(this._matrix),a[4]/=255,a[9]/=255,a[14]/=255,a[19]/=255,this._dirty=!1),a},brightness:function(a,r){a===void 0&&(a=0),r===void 0&&(r=!1);var i=a;return this.multiply([i,0,0,0,0,0,i,0,0,0,0,0,i,0,0,0,0,0,1,0],r)},saturate:function(a,r){a===void 0&&(a=0),r===void 0&&(r=!1);var i=a*2/3+1,n=(i-1)*-.5;return this.multiply([i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0],r)},desaturate:function(a){return a===void 0&&(a=!1),this.saturate(-1,a)},hue:function(a,r){a===void 0&&(a=0),r===void 0&&(r=!1),a=a/180*Math.PI;var i=Math.cos(a),n=Math.sin(a),u=.213,s=.715,l=.072;return this.multiply([u+i*(1-u)+n*-u,s+i*-s+n*-s,l+i*-l+n*(1-l),0,0,u+i*-u+n*.143,s+i*(1-s)+n*.14,l+i*-l+n*-.283,0,0,u+i*-u+n*-(1-u),s+i*-s+n*s,l+i*(1-l)+n*l,0,0,0,0,0,1,0],r)},grayscale:function(a,r){return a===void 0&&(a=1),r===void 0&&(r=!1),this.saturate(-a,r)},blackWhite:function(a){return a===void 0&&(a=!1),this.multiply(o.BLACK_WHITE,a)},contrast:function(a,r){a===void 0&&(a=0),r===void 0&&(r=!1);var i=a+1,n=-.5*(i-1);return this.multiply([i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0],r)},negative:function(a){return a===void 0&&(a=!1),this.multiply(o.NEGATIVE,a)},desaturateLuminance:function(a){return a===void 0&&(a=!1),this.multiply(o.DESATURATE_LUMINANCE,a)},sepia:function(a){return a===void 0&&(a=!1),this.multiply(o.SEPIA,a)},night:function(a,r){return a===void 0&&(a=.1),r===void 0&&(r=!1),this.multiply([a*-2,-a,0,0,0,-a,0,a,0,0,0,a,a*2,0,0,0,0,0,1,0],r)},lsd:function(a){return a===void 0&&(a=!1),this.multiply(o.LSD,a)},brown:function(a){return a===void 0&&(a=!1),this.multiply(o.BROWN,a)},vintagePinhole:function(a){return a===void 0&&(a=!1),this.multiply(o.VINTAGE,a)},kodachrome:function(a){return a===void 0&&(a=!1),this.multiply(o.KODACHROME,a)},technicolor:function(a){return a===void 0&&(a=!1),this.multiply(o.TECHNICOLOR,a)},polaroid:function(a){return a===void 0&&(a=!1),this.multiply(o.POLAROID,a)},shiftToBGR:function(a){return a===void 0&&(a=!1),this.multiply(o.SHIFT_BGR,a)},multiply:function(a,r){r===void 0&&(r=!1),r||this.reset();var i=this._matrix,n=m;return n.set(i),i.set([n[0]*a[0]+n[1]*a[5]+n[2]*a[10]+n[3]*a[15],n[0]*a[1]+n[1]*a[6]+n[2]*a[11]+n[3]*a[16],n[0]*a[2]+n[1]*a[7]+n[2]*a[12]+n[3]*a[17],n[0]*a[3]+n[1]*a[8]+n[2]*a[13]+n[3]*a[18],n[0]*a[4]+n[1]*a[9]+n[2]*a[14]+n[3]*a[19]+n[4],n[5]*a[0]+n[6]*a[5]+n[7]*a[10]+n[8]*a[15],n[5]*a[1]+n[6]*a[6]+n[7]*a[11]+n[8]*a[16],n[5]*a[2]+n[6]*a[7]+n[7]*a[12]+n[8]*a[17],n[5]*a[3]+n[6]*a[8]+n[7]*a[13]+n[8]*a[18],n[5]*a[4]+n[6]*a[9]+n[7]*a[14]+n[8]*a[19]+n[9],n[10]*a[0]+n[11]*a[5]+n[12]*a[10]+n[13]*a[15],n[10]*a[1]+n[11]*a[6]+n[12]*a[11]+n[13]*a[16],n[10]*a[2]+n[11]*a[7]+n[12]*a[12]+n[13]*a[17],n[10]*a[3]+n[11]*a[8]+n[12]*a[13]+n[13]*a[18],n[10]*a[4]+n[11]*a[9]+n[12]*a[14]+n[13]*a[19]+n[14],n[15]*a[0]+n[16]*a[5]+n[17]*a[10]+n[18]*a[15],n[15]*a[1]+n[16]*a[6]+n[17]*a[11]+n[18]*a[16],n[15]*a[2]+n[16]*a[7]+n[17]*a[12]+n[18]*a[17],n[15]*a[3]+n[16]*a[8]+n[17]*a[13]+n[18]*a[18],n[15]*a[4]+n[16]*a[9]+n[17]*a[14]+n[18]*a[19]+n[19]]),this._dirty=!0,this}});o.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],o.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],o.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],o.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],o.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],o.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],o.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],o.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],o.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],o.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],o.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],f.exports=o},39298:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(72283),o=new h({initialize:function(r,i,n){this._rgb=[0,0,0],this.onChangeCallback=m,this.dirty=!1,this.set(r,i,n)},set:function(a,r,i){return a===void 0&&(a=0),r===void 0&&(r=0),i===void 0&&(i=0),this._rgb=[a,r,i],this.onChange(),this},equals:function(a,r,i){var n=this._rgb;return n[0]===a&&n[1]===r&&n[2]===i},onChange:function(){this.dirty=!0;var a=this._rgb;this.onChangeCallback.call(this,a[0],a[1],a[2])},r:{get:function(){return this._rgb[0]},set:function(a){this._rgb[0]=a,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(a){this._rgb[1]=a,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(a){this._rgb[2]=a,this.onChange()}},destroy:function(){this.onChangeCallback=null}});f.exports=o},84093:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};f.exports=S},32058:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(97328),m=t(59994),o=t(73174),a=t(28417),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(i,m(n)+u),o(i,h(n)+s),i};f.exports=r},85535:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(97328),m=t(40163),o=t(73174),a=t(74465),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(i,m(n)-u),o(i,h(n)+s),i};f.exports=r},9605:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(97328),m=t(70271),o=t(73174),a=t(19298),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(i,m(n)+u),o(i,h(n)+s),i};f.exports=r},22529:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(21843),m=t(59994),o=t(29568),a=function(r,i,n,u){return n===void 0&&(n=0),u===void 0&&(u=0),h(r,m(i)+n,o(i)+u),r};f.exports=a},5739:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(29568),m=t(40163),o=t(81711),a=t(74465),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(i,m(n)-u),o(i,h(n)+s),i};f.exports=r},40327:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(84093),m=[];m[h.BOTTOM_CENTER]=t(32058),m[h.BOTTOM_LEFT]=t(85535),m[h.BOTTOM_RIGHT]=t(9605),m[h.CENTER]=t(22529),m[h.LEFT_CENTER]=t(5739),m[h.RIGHT_CENTER]=t(27683),m[h.TOP_CENTER]=t(96439),m[h.TOP_LEFT]=t(81447),m[h.TOP_RIGHT]=t(47888),m[h.LEFT_BOTTOM]=m[h.BOTTOM_LEFT],m[h.LEFT_TOP]=m[h.TOP_LEFT],m[h.RIGHT_BOTTOM]=m[h.BOTTOM_RIGHT],m[h.RIGHT_TOP]=m[h.TOP_RIGHT];var o=function(a,r,i,n,u){return m[i](a,r,n,u)};f.exports=o},27683:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(29568),m=t(70271),o=t(81711),a=t(19298),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(i,m(n)+u),o(i,h(n)+s),i};f.exports=r},96439:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(59994),m=t(47196),o=t(28417),a=t(84349),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),o(i,h(n)+u),a(i,m(n)-s),i};f.exports=r},81447:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(40163),m=t(47196),o=t(74465),a=t(84349),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),o(i,h(n)-u),a(i,m(n)-s),i};f.exports=r},47888:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(70271),m=t(47196),o=t(19298),a=t(84349),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),o(i,h(n)+u),a(i,m(n)-s),i};f.exports=r},46997:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={BottomCenter:t(32058),BottomLeft:t(85535),BottomRight:t(9605),Center:t(22529),LeftCenter:t(5739),QuickSet:t(40327),RightCenter:t(27683),TopCenter:t(96439),TopLeft:t(81447),TopRight:t(47888)}},93545:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(84093),m=t(98611),o={In:t(46997),To:t(86639)};o=m(!1,o,h),f.exports=o},27118:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(97328),m=t(59994),o=t(28417),a=t(84349),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),o(i,m(n)+u),a(i,h(n)+s),i};f.exports=r},84469:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(97328),m=t(40163),o=t(74465),a=t(84349),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),o(i,m(n)-u),a(i,h(n)+s),i};f.exports=r},51577:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(97328),m=t(70271),o=t(19298),a=t(84349),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),o(i,m(n)+u),a(i,h(n)+s),i};f.exports=r},90271:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(97328),m=t(40163),o=t(73174),a=t(19298),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(i,m(n)-u),o(i,h(n)+s),i};f.exports=r},30466:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(29568),m=t(40163),o=t(81711),a=t(19298),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(i,m(n)-u),o(i,h(n)+s),i};f.exports=r},50087:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(40163),m=t(47196),o=t(19298),a=t(84349),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),o(i,h(n)-u),a(i,m(n)-s),i};f.exports=r},82590:(f,S,t)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(84093),m=[];m[h.BOTTOM_CENTER]=t(27118),m[h.BOTTOM_LEFT]=t(84469),m[h.BOTTOM_RIGHT]=t(51577),m[h.LEFT_BOTTOM]=t(90271),m[h.LEFT_CENTER]=t(30466),m[h.LEFT_TOP]=t(50087),m[h.RIGHT_BOTTOM]=t(13555),m[h.RIGHT_CENTER]=t(99049),m[h.RIGHT_TOP]=t(67788),m[h.TOP_CENTER]=t(78170),m[h.TOP_LEFT]=t(54145),m[h.TOP_RIGHT]=t(75548);var o=function(a,r,i,n,u){return m[i](a,r,n,u)};f.exports=o},13555:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(97328),m=t(70271),o=t(73174),a=t(74465),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(i,m(n)+u),o(i,h(n)+s),i};f.exports=r},99049:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(29568),m=t(70271),o=t(81711),a=t(74465),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(i,m(n)+u),o(i,h(n)+s),i};f.exports=r},67788:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(70271),m=t(47196),o=t(74465),a=t(84349),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),o(i,h(n)+u),a(i,m(n)-s),i};f.exports=r},78170:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(59994),m=t(47196),o=t(73174),a=t(28417),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(i,h(n)+u),o(i,m(n)-s),i};f.exports=r},54145:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(40163),m=t(47196),o=t(73174),a=t(74465),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(i,h(n)-u),o(i,m(n)-s),i};f.exports=r},75548:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(70271),m=t(47196),o=t(73174),a=t(19298),r=function(i,n,u,s){return u===void 0&&(u=0),s===void 0&&(s=0),a(i,h(n)+u),o(i,m(n)-s),i};f.exports=r},86639:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={BottomCenter:t(27118),BottomLeft:t(84469),BottomRight:t(51577),LeftBottom:t(90271),LeftCenter:t(30466),LeftTop:t(50087),QuickSet:t(82590),RightBottom:t(13555),RightCenter:t(99049),RightTop:t(67788),TopCenter:t(78170),TopLeft:t(54145),TopRight:t(75548)}},21843:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(28417),m=t(81711),o=function(a,r,i){return h(a,r),m(a,i)};f.exports=o},97328:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.y+t.height-t.height*t.originY};f.exports=S},7126:(f,S,t)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(97328),m=t(40163),o=t(70271),a=t(47196),r=t(74118),i=function(n,u){u===void 0&&(u=new r);var s=m(n),l=a(n);return u.x=s,u.y=l,u.width=o(n)-s,u.height=h(n)-l,u};f.exports=i},59994:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.x-t.width*t.originX+t.width*.5};f.exports=S},29568:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.y-t.height*t.originY+t.height*.5};f.exports=S},40163:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.x-t.width*t.originX};f.exports=S},52088:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.width*t.originX};f.exports=S},23379:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.height*t.originY};f.exports=S},70271:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.x+t.width-t.width*t.originX};f.exports=S},47196:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.y-t.height*t.originY};f.exports=S},73174:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.y=h-t.height+t.height*t.originY,t};f.exports=S},28417:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){var m=t.width*t.originX;return t.x=h+m-t.width*.5,t};f.exports=S},81711:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){var m=t.height*t.originY;return t.y=h+m-t.height*.5,t};f.exports=S},74465:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.x=h+t.width*t.originX,t};f.exports=S},19298:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.x=h-t.width+t.width*t.originX,t};f.exports=S},84349:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.y=h+t.height*t.originY,t};f.exports=S},15252:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={CenterOn:t(21843),GetBottom:t(97328),GetBounds:t(7126),GetCenterX:t(59994),GetCenterY:t(29568),GetLeft:t(40163),GetOffsetX:t(52088),GetOffsetY:t(23379),GetRight:t(70271),GetTop:t(47196),SetBottom:t(73174),SetCenterX:t(28417),SetCenterY:t(81711),SetLeft:t(74465),SetRight:t(19298),SetTop:t(84349)}},70616:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setCrisp:function(t){var h=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return h.forEach(function(m){t.style["image-rendering"]=m}),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}};f.exports=S},61068:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(86459),m=t(8213),o=[],a=!1,r=function(){var i=function(E,C,T,A,P){C===void 0&&(C=1),T===void 0&&(T=1),A===void 0&&(A=h.CANVAS),P===void 0&&(P=!1);var M,w=s(A);return w===null?(w={parent:E,canvas:document.createElement("canvas"),type:A},A===h.CANVAS&&o.push(w),M=w.canvas):(w.parent=E,M=w.canvas),P&&(w.parent=M),M.width=C,M.height=T,a&&A===h.CANVAS&&m.disable(M.getContext("2d",{willReadFrequently:!1})),M},n=function(E,C,T){return i(E,C,T,h.CANVAS)},u=function(E,C,T){return i(E,C,T,h.WEBGL)},s=function(E){if(E===void 0&&(E=h.CANVAS),E===h.WEBGL)return null;for(var C=0;C<o.length;C++){var T=o[C];if(!T.parent&&T.type===E)return T}return null},l=function(E){var C=E instanceof HTMLCanvasElement;o.forEach(function(T){(C&&T.canvas===E||!C&&T.parent===E)&&(T.parent=null,T.canvas.width=1,T.canvas.height=1)})},v=function(){var E=0;return o.forEach(function(C){C.parent&&E++}),E},c=function(){return o.length-v()},g=function(){a=!0},y=function(){a=!1};return{create2D:n,create:i,createWebGL:u,disableSmoothing:g,enableSmoothing:y,first:s,free:c,pool:o,remove:l,total:v}};f.exports=r()},8213:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S="",t=function(){var h=function(r){for(var i=["i","webkitI","msI","mozI","oI"],n=0;n<i.length;n++){var u=i[n]+"mageSmoothingEnabled";if(u in r)return u}return null},m=function(r){return S===""&&(S=h(r)),S&&(r[S]=!0),r},o=function(r){return S===""&&(S=h(r)),S&&(r[S]=!1),r},a=function(r){return S!==null?r[S]:null};return{disable:o,enable:m,getPrefix:h,isEnabled:a}};f.exports=t()},59271:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return h===void 0&&(h="none"),t.style.msTouchAction=h,t.style["ms-touch-action"]=h,t.style["touch-action"]=h,t};f.exports=S},36505:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){h===void 0&&(h="none");var m=["-webkit-","-khtml-","-moz-","-ms-",""];return m.forEach(function(o){t.style[o+"user-select"]=h}),t.style["-webkit-touch-callout"]=h,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t};f.exports=S},23514:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={CanvasInterpolation:t(70616),CanvasPool:t(61068),Smoothing:t(8213),TouchAction:t(59271),UserSelect:t(36505)}},27119:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(22946),o=t(5657),a=t(24650),r=t(68033),i=new h({initialize:function(u,s,l,v){u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=0),v===void 0&&(v=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(u,s,l,v)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(n,u,s,l,v){return l===void 0&&(l=255),v===void 0&&(v=!0),this._locked=!0,this.red=n,this.green=u,this.blue=s,this.alpha=l,this._locked=!1,this.update(v)},setGLTo:function(n,u,s,l){return l===void 0&&(l=1),this._locked=!0,this.redGL=n,this.greenGL=u,this.blueGL=s,this.alphaGL=l,this._locked=!1,this.update(!0)},setFromRGB:function(n){return this._locked=!0,this.red=n.r,this.green=n.g,this.blue=n.b,n.hasOwnProperty("a")&&(this.alpha=n.a),this._locked=!1,this.update(!0)},setFromHSV:function(n,u,s){return a(n,u,s,this)},update:function(n){if(n===void 0&&(n=!1),this._locked)return this;var u=this.r,s=this.g,l=this.b,v=this.a;return this._color=m(u,s,l),this._color32=o(u,s,l,v),this._rgba="rgba("+u+","+s+","+l+","+v/255+")",n&&r(u,s,l,this),this},updateHSV:function(){var n=this.r,u=this.g,s=this.b;return r(n,u,s,this),this},clone:function(){return new i(this.r,this.g,this.b,this.a)},gray:function(n){return this.setTo(n,n,n)},random:function(n,u){n===void 0&&(n=0),u===void 0&&(u=255);var s=Math.floor(n+Math.random()*(u-n)),l=Math.floor(n+Math.random()*(u-n)),v=Math.floor(n+Math.random()*(u-n));return this.setTo(s,l,v)},randomGray:function(n,u){n===void 0&&(n=0),u===void 0&&(u=255);var s=Math.floor(n+Math.random()*(u-n));return this.setTo(s,s,s)},saturate:function(n){return this.s+=n/100,this},desaturate:function(n){return this.s-=n/100,this},lighten:function(n){return this.v+=n/100,this},darken:function(n){return this.v-=n/100,this},brighten:function(n){var u=this.r,s=this.g,l=this.b;return u=Math.max(0,Math.min(255,u-Math.round(255*-(n/100)))),s=Math.max(0,Math.min(255,s-Math.round(255*-(n/100)))),l=Math.max(0,Math.min(255,l-Math.round(255*-(n/100)))),this.setTo(u,s,l)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(n){this.gl[0]=Math.min(Math.abs(n),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(n){this.gl[1]=Math.min(Math.abs(n),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(n){this.gl[2]=Math.min(Math.abs(n),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(n){this.gl[3]=Math.min(Math.abs(n),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(n){n=Math.floor(Math.abs(n)),this.r=Math.min(n,255),this.gl[0]=n/255,this.update(!0)}},green:{get:function(){return this.g},set:function(n){n=Math.floor(Math.abs(n)),this.g=Math.min(n,255),this.gl[1]=n/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(n){n=Math.floor(Math.abs(n)),this.b=Math.min(n,255),this.gl[2]=n/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(n){n=Math.floor(Math.abs(n)),this.a=Math.min(n,255),this.gl[3]=n/255,this.update()}},h:{get:function(){return this._h},set:function(n){this._h=n,a(n,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(n){this._s=n,a(this._h,n,this._v,this)}},v:{get:function(){return this._v},set:function(n){this._v=n,a(this._h,this._s,n,this)}}});f.exports=i},30245:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(22946),m=function(o){o===void 0&&(o=1024);var a=[],r=255,i,n=255,u=0,s=0;for(i=0;i<=r;i++)a.push({r:n,g:i,b:s,color:h(n,i,s)});for(u=255,i=r;i>=0;i--)a.push({r:i,g:u,b:s,color:h(i,u,s)});for(n=0,i=0;i<=r;i++,u--)a.push({r:n,g:u,b:i,color:h(n,u,i)});for(u=0,s=255,i=0;i<=r;i++,s--,n++)a.push({r:n,g:u,b:s,color:h(n,u,s)});if(o===1024)return a;var l=[],v=0,c=1024/o;for(i=0;i<o;i++)l.push(a[Math.floor(v)]),v+=c;return l};f.exports=m},86672:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var h={r:t>>16&255,g:t>>8&255,b:t&255,a:255};return t>16777215&&(h.a=t>>>24),h};f.exports=S},25409:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var h=t.toString(16);return h.length===1?"0"+h:h};f.exports=S},22946:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return t<<16|h<<8|m};f.exports=S},5657:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){return o<<24|t<<16|h<<8|m};f.exports=S},74777:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(27119),m=t(59998),o=function(a,r,i){var n=i,u=i,s=i;if(r!==0){var l=i<.5?i*(1+r):i+r-i*r,v=2*i-l;n=m(v,l,a+1/3),u=m(v,l,a),s=m(v,l,a-1/3)}var c=new h;return c.setGLTo(n,u,s,1)};f.exports=o},89263:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(24650),m=function(o,a){o===void 0&&(o=1),a===void 0&&(a=1);for(var r=[],i=0;i<=359;i++)r.push(h(i/359,o,a));return r};f.exports=m},24650:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(22946);function m(a,r,i,n){var u=(a+r*6)%6,s=Math.min(u,4-u,1);return Math.round(255*(n-n*i*Math.max(0,s)))}var o=function(a,r,i,n){r===void 0&&(r=1),i===void 0&&(i=1);var u=m(5,a,r,i),s=m(3,a,r,i),l=m(1,a,r,i);return n?n.setTo?n.setTo(u,s,l,n.alpha,!0):(n.r=u,n.g=s,n.b=l,n.color=h(u,s,l),n):{r:u,g:s,b:l,color:h(u,s,l)}};f.exports=o},91487:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(27119),m=function(o){var a=new h;o=o.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(s,l,v,c){return l+l+v+v+c+c});var r=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);if(r){var i=parseInt(r[1],16),n=parseInt(r[2],16),u=parseInt(r[3],16);a.setTo(i,n,u)}return a};f.exports=m},59998:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return m<0&&(m+=1),m>1&&(m-=1),m<.16666666666666666?t+(h-t)*6*m:m<.5?h:m<.6666666666666666?t+(h-t)*(.6666666666666666-m)*6:t};f.exports=S},74853:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(27119),m=t(15978),o=function(a){var r=m(a);return new h(r.r,r.g,r.b,r.a)};f.exports=o},15978:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t>16777215?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:t&255}:{a:255,r:t>>16&255,g:t>>8&255,b:t&255}};f.exports=S},53756:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(42798),m=function(r,i,n,u,s,l,v,c){v===void 0&&(v=100),c===void 0&&(c=0);var g=c/v;return{r:h(r,u,g),g:h(i,s,g),b:h(n,l,g)}},o=function(r,i,n,u){return n===void 0&&(n=100),u===void 0&&(u=0),m(r.r,r.g,r.b,i.r,i.g,i.b,n,u)},a=function(r,i,n,u,s,l){return s===void 0&&(s=100),l===void 0&&(l=0),m(r.r,r.g,r.b,i,n,u,s,l)};f.exports={RGBWithRGB:m,ColorWithRGB:a,ColorWithColor:o}},73904:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(27119),m=function(o){return new h(o.r,o.g,o.b,o.a)};f.exports=m},26841:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(27119),m=function(o){var a=new h,r=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(o.toLowerCase());if(r){var i=parseInt(r[1],10),n=parseInt(r[2],10),u=parseInt(r[3],10),s=r[4]!==void 0?parseFloat(r[4]):1;a.setTo(i,n,u,s*255)}return a};f.exports=m},68033:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){o===void 0&&(o={h:0,s:0,v:0}),t/=255,h/=255,m/=255;var a=Math.min(t,h,m),r=Math.max(t,h,m),i=r-a,n=0,u=r===0?0:i/r,s=r;return r!==a&&(r===t?n=(h-m)/i+(h<m?6:0):r===h?n=(m-t)/i+2:r===m&&(n=(t-h)/i+4),n/=6),o.hasOwnProperty("_h")?(o._h=n,o._s=u,o._v=s):(o.h=n,o.s=u,o.v=s),o};f.exports=S},4880:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(25409),m=function(o,a,r,i,n){return i===void 0&&(i=255),n===void 0&&(n="#"),n==="#"?"#"+((1<<24)+(o<<16)+(a<<8)+r).toString(16).slice(1,7):"0x"+h(i)+h(o)+h(a)+h(r)};f.exports=m},37243:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(17489),m=t(27119),o=function(a,r){return a===void 0&&(a=0),r===void 0&&(r=255),new m(h(a,r),h(a,r),h(a,r))};f.exports=o},93222:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(91487),m=t(74853),o=t(73904),a=t(26841),r=function(i){var n=typeof i;switch(n){case"string":return i.substr(0,3).toLowerCase()==="rgb"?a(i):h(i);case"number":return m(i);case"object":return o(i)}};f.exports=r},95509:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(27119);h.ColorSpectrum=t(30245),h.ColorToRGBA=t(86672),h.ComponentToHex=t(25409),h.GetColor=t(22946),h.GetColor32=t(5657),h.HexStringToColor=t(91487),h.HSLToColor=t(74777),h.HSVColorWheel=t(89263),h.HSVToRGB=t(24650),h.HueToComponent=t(59998),h.IntegerToColor=t(74853),h.IntegerToRGB=t(15978),h.Interpolate=t(53756),h.ObjectToColor=t(73904),h.RandomRGB=t(37243),h.RGBStringToColor=t(26841),h.RGBToHSV=t(68033),h.RGBToString=t(4880),h.ValueToColor=t(93222),f.exports=h},24816:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Align:t(93545),BaseShader:t(31053),Bounds:t(15252),Canvas:t(23514),Color:t(95509),ColorMatrix:t(65246),Masks:t(93310),RGB:t(39298)}},76756:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(61286),o=new h({initialize:function(r,i,n,u,s,l){i||(i=r.sys.make.image({x:n,y:u,key:s,frame:l,add:!1})),this.bitmapMask=i,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(a){this.bitmapMask=a},preRenderWebGL:function(a,r,i){a.pipelines.BITMAPMASK_PIPELINE.beginMask(this,r,i)},postRenderWebGL:function(a,r,i){a.pipelines.BITMAPMASK_PIPELINE.endMask(this,r,i)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});m.register("bitmapMask",function(a,r,i,n,u){return new o(this.scene,a,r,i,n,u)}),f.exports=o},63037:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=new h({initialize:function(a,r){this.geometryMask=r,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(o){return this.geometryMask=o,this},setInvertAlpha:function(o){return o===void 0&&(o=!0),this.invertAlpha=o,this},preRenderWebGL:function(o,a,r){var i=o.gl;o.flush(),o.maskStack.length===0&&(i.enable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),o.maskCount=0),o.currentCameraMask.mask!==this&&(o.currentMask.mask=this),o.maskStack.push({mask:this,camera:r}),this.applyStencil(o,r,!0),o.maskCount++},applyStencil:function(o,a,r){var i=o.gl,n=this.geometryMask,u=o.maskCount,s=255;i.colorMask(!1,!1,!1,!1),r?(i.stencilFunc(i.EQUAL,u,s),i.stencilOp(i.KEEP,i.KEEP,i.INCR),u++):(i.stencilFunc(i.EQUAL,u+1,s),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),this.level=u,n.renderWebGL(o,n,a),o.flush(),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),this.invertAlpha?i.stencilFunc(i.NOTEQUAL,u,s):i.stencilFunc(i.EQUAL,u,s)},postRenderWebGL:function(o){var a=o.gl;o.maskStack.pop(),o.maskCount--,o.flush();var r=o.currentMask;if(o.maskStack.length===0)r.mask=null,a.disable(a.STENCIL_TEST);else{var i=o.maskStack[o.maskStack.length-1];i.mask.applyStencil(o,i.camera,!1),o.currentCameraMask.mask!==i.mask?(r.mask=i.mask,r.camera=i.camera):r.mask=null}},preRenderCanvas:function(o,a,r){var i=this.geometryMask;o.currentContext.save(),i.renderCanvas(o,i,r,null,null,!0),o.currentContext.clip()},postRenderCanvas:function(o){o.currentContext.restore()},destroy:function(){this.geometryMask=null}});f.exports=m},93310:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={BitmapMask:t(76756),GeometryMask:t(63037)}},31053:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=new h({initialize:function(a,r,i,n){(!r||r==="")&&(r=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!i||i==="")&&(i=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),n===void 0&&(n=null),this.key=a,this.fragmentSrc=r,this.vertexSrc=i,this.uniforms=n}});f.exports=m},99584:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){var m;if(h)typeof h=="string"?m=document.getElementById(h):typeof h=="object"&&h.nodeType===1&&(m=h);else if(t.parentElement||h===null)return t;return m||(m=document.body),m.appendChild(t),t};f.exports=S},85178:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(99584),m=function(o){var a=o.config;if(!(!a.parent||!a.domCreateContainer)){var r=document.createElement("div");r.style.cssText=["display: block;","width: "+o.scale.width+"px;","height: "+o.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+a.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),o.domContainer=r,h(r,a.parent)}};f.exports=m},21546:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(36580),m=function(o){if(document.readyState==="complete"||document.readyState==="interactive"){o();return}var a=function(){document.removeEventListener("deviceready",a,!0),document.removeEventListener("DOMContentLoaded",a,!0),window.removeEventListener("load",a,!0),o()};document.body?h.cordova?document.addEventListener("deviceready",a,!1):(document.addEventListener("DOMContentLoaded",a,!0),window.addEventListener("load",a,!0)):window.setTimeout(a,20)};f.exports=m},74181:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){if(!t)return window.innerHeight;var h=Math.abs(window.orientation),m={w:0,h:0},o=document.createElement("div");return o.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(o),m.w=h===90?o.offsetHeight:window.innerWidth,m.h=h===90?window.innerWidth:o.offsetHeight,document.documentElement.removeChild(o),o=null,Math.abs(window.orientation)!==90?m.h:m.w};f.exports=S},9229:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(55301),m=function(o,a){var r=window.screen,i=r?r.orientation||r.mozOrientation||r.msOrientation:!1;if(i&&typeof i.type=="string")return i.type;if(typeof i=="string")return i;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?h.ORIENTATION.PORTRAIT:h.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return h.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return h.ORIENTATION.LANDSCAPE}else return a>o?h.ORIENTATION.PORTRAIT:h.ORIENTATION.LANDSCAPE};f.exports=m},2893:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var h;return t!==""&&(typeof t=="string"?h=document.getElementById(t):t&&t.nodeType===1&&(h=t)),h||(h=document.body),h};f.exports=S},89200:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var h="";try{if(window.DOMParser){var m=new DOMParser;h=m.parseFromString(t,"text/xml")}else h=new ActiveXObject("Microsoft.XMLDOM"),h.loadXML(t)}catch{h=null}return!h||!h.documentElement||h.getElementsByTagName("parsererror").length?null:h};f.exports=S},55638:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){t.parentNode&&t.parentNode.removeChild(t)};f.exports=S},27385:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(72283),o=new h({initialize:function(){this.isRunning=!1,this.callback=m,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var r=this;this.step=function i(n){r.callback(n),r.isRunning&&(r.timeOutID=window.requestAnimationFrame(i))},this.stepTimeout=function i(){r.isRunning&&(r.timeOutID=window.setTimeout(i,r.delay)),r.callback(window.performance.now())}},start:function(a,r,i){this.isRunning||(this.callback=a,this.isSetTimeOut=r,this.delay=i,this.isRunning=!0,this.timeOutID=r?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=m}});f.exports=o},3590:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h={AddToDOM:t(99584),DOMContentLoaded:t(21546),GetInnerHeight:t(74181),GetScreenOrientation:t(9229),GetTarget:t(2893),ParseXML:t(89200),RemoveFromDOM:t(55638),RequestAnimationFrame:t(27385)};f.exports=h},78491:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(6659),o=t(91963),a=new h({Extends:m,initialize:function(){m.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});o.register("EventEmitter",a,"events"),f.exports=a},95146:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={EventEmitter:t(78491)}},20170:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(47551),o=t(47406),a=new h({Extends:m,initialize:function(i,n){n===void 0&&(n=1),m.call(this,o.BARREL,i),this.amount=n}});f.exports=a},51182:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(47551),o=t(47406),a=new h({Extends:m,initialize:function(i,n,u,s,l,v,c){u===void 0&&(u=1),s===void 0&&(s=1),l===void 0&&(l=1),v===void 0&&(v=1),c===void 0&&(c=4),m.call(this,o.BLOOM,i),this.steps=c,this.offsetX=u,this.offsetY=s,this.blurStrength=l,this.strength=v,this.glcolor=[1,1,1],n!=null&&(this.color=n)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var i=this.glcolor;i[0]=(r>>16&255)/255,i[1]=(r>>8&255)/255,i[2]=(r&255)/255}}});f.exports=a},51498:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(47551),o=t(47406),a=new h({Extends:m,initialize:function(i,n,u,s,l,v,c){u===void 0&&(u=2),s===void 0&&(s=2),l===void 0&&(l=1),c===void 0&&(c=4),m.call(this,o.BLUR,i),this.quality=0,this.x=u,this.y=s,this.steps=c,this.strength=l,this.glcolor=[1,1,1],v!=null&&(this.color=v)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var i=this.glcolor;i[0]=(r>>16&255)/255,i[1]=(r>>8&255)/255,i[2]=(r&255)/255}}});f.exports=a},12042:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(47551),o=t(47406),a=new h({Extends:m,initialize:function(i,n,u,s,l,v,c,g){n===void 0&&(n=.5),u===void 0&&(u=1),s===void 0&&(s=.2),l===void 0&&(l=!1),v===void 0&&(v=1),c===void 0&&(c=1),g===void 0&&(g=1),m.call(this,o.BOKEH,i),this.radius=n,this.amount=u,this.contrast=s,this.isTiltShift=l,this.strength=g,this.blurX=v,this.blurY=c}});f.exports=a},69900:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(47551),o=t(47406),a=new h({Extends:m,initialize:function(i,n,u,s,l,v){n===void 0&&(n=8),l===void 0&&(l=1),v===void 0&&(v=.005),m.call(this,o.CIRCLE,i),this.scale=l,this.feather=v,this.thickness=n,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],u!=null&&(this.color=u),s!=null&&(this.backgroundColor=s)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var i=this.glcolor;i[0]=(r>>16&255)/255,i[1]=(r>>8&255)/255,i[2]=(r&255)/255}},backgroundColor:{get:function(){var r=this.glcolor2;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var i=this.glcolor2;i[0]=(r>>16&255)/255,i[1]=(r>>8&255)/255,i[2]=(r&255)/255}}});f.exports=a},48991:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(65246),o=t(47406),a=new h({Extends:m,initialize:function(i){m.call(this),this.type=o.COLOR_MATRIX,this.gameObject=i,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});f.exports=a},47551:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=new h({initialize:function(a,r){this.type=a,this.gameObject=r,this.active=!0},setActive:function(o){return this.active=o,this},destroy:function(){this.gameObject=null,this.active=!1}});f.exports=m},47909:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(47551),o=t(47406),a=new h({Extends:m,initialize:function(i,n,u,s){n===void 0&&(n="__WHITE"),u===void 0&&(u=.005),s===void 0&&(s=.005),m.call(this,o.DISPLACEMENT,i),this.x=u,this.y=s,this.glTexture,this.setTexture(n)},setTexture:function(r){var i=this.gameObject.scene.sys.textures.getFrame(r);return i&&(this.glTexture=i.glTexture),this}});f.exports=a},18919:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(47551),o=t(47406),a=new h({Extends:m,initialize:function(i,n,u,s,l){u===void 0&&(u=4),s===void 0&&(s=0),l===void 0&&(l=!1),m.call(this,o.GLOW,i),this.outerStrength=u,this.innerStrength=s,this.knockout=l,this.glcolor=[1,1,1,1],n!==void 0&&(this.color=n)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var i=this.glcolor;i[0]=(r>>16&255)/255,i[1]=(r>>8&255)/255,i[2]=(r&255)/255}}});f.exports=a},62494:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(47551),o=t(47406),a=new h({Extends:m,initialize:function(i,n,u,s,l,v,c,g,y){s===void 0&&(s=.2),l===void 0&&(l=0),v===void 0&&(v=0),c===void 0&&(c=0),g===void 0&&(g=1),y===void 0&&(y=0),m.call(this,o.GRADIENT,i),this.alpha=s,this.size=y,this.fromX=l,this.fromY=v,this.toX=c,this.toY=g,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],n!=null&&(this.color1=n),u!=null&&(this.color2=u)},color1:{get:function(){var r=this.glcolor1;return(r[0]<<16)+(r[1]<<8)+(r[2]|0)},set:function(r){var i=this.glcolor1;i[0]=r>>16&255,i[1]=r>>8&255,i[2]=r&255}},color2:{get:function(){var r=this.glcolor2;return(r[0]<<16)+(r[1]<<8)+(r[2]|0)},set:function(r){var i=this.glcolor2;i[0]=r>>16&255,i[1]=r>>8&255,i[2]=r&255}}});f.exports=a},68897:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(47551),o=t(47406),a=new h({Extends:m,initialize:function(i,n){n===void 0&&(n=1),m.call(this,o.PIXELATE,i),this.amount=n}});f.exports=a},58575:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(47551),o=t(47406),a=new h({Extends:m,initialize:function(i,n,u,s,l,v,c,g){n===void 0&&(n=0),u===void 0&&(u=0),s===void 0&&(s=.1),l===void 0&&(l=1),c===void 0&&(c=6),g===void 0&&(g=1),m.call(this,o.SHADOW,i),this.x=n,this.y=u,this.decay=s,this.power=l,this.glcolor=[0,0,0,1],this.samples=c,this.intensity=g,v!==void 0&&(this.color=v)},color:{get:function(){var r=this.glcolor;return(r[0]*255<<16)+(r[1]*255<<8)+(r[2]*255|0)},set:function(r){var i=this.glcolor;i[0]=(r>>16&255)/255,i[1]=(r>>8&255)/255,i[2]=(r&255)/255}}});f.exports=a},33755:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(47551),o=t(47406),a=new h({Extends:m,initialize:function(i,n,u,s,l){n===void 0&&(n=.5),u===void 0&&(u=.5),s===void 0&&(s=3),l===void 0&&(l=!1),m.call(this,o.SHINE,i),this.speed=n,this.lineWidth=u,this.gradient=s,this.reveal=l}});f.exports=a},24949:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(47551),o=t(47406),a=new h({Extends:m,initialize:function(i,n,u,s,l){n===void 0&&(n=.5),u===void 0&&(u=.5),s===void 0&&(s=.5),l===void 0&&(l=.5),m.call(this,o.VIGNETTE,i),this.x=n,this.y=u,this.radius=s,this.strength=l}});f.exports=a},66241:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(47551),o=t(47406),a=new h({Extends:m,initialize:function(i,n,u,s,l){n===void 0&&(n=.1),u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=!1),m.call(this,o.WIPE,i),this.progress=0,this.wipeWidth=n,this.direction=u,this.axis=s,this.reveal=l}});f.exports=a},47406:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};f.exports=S},96910:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(98611),m=t(47406),o={Barrel:t(20170),Controller:t(47551),Bloom:t(51182),Blur:t(51498),Bokeh:t(12042),Circle:t(69900),ColorMatrix:t(48991),Displacement:t(47909),Glow:t(18919),Gradient:t(62494),Pixelate:t(68897),Shadow:t(58575),Shine:t(33755),Vignette:t(24949),Wipe:t(66241)};o=h(!1,o,m),f.exports=o},88933:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(95723),m=t(20494),o=function(a,r,i){r.x=m(i,"x",0),r.y=m(i,"y",0),r.depth=m(i,"depth",0),r.flipX=m(i,"flipX",!1),r.flipY=m(i,"flipY",!1);var n=m(i,"scale",null);typeof n=="number"?r.setScale(n):n!==null&&(r.scaleX=m(n,"x",1),r.scaleY=m(n,"y",1));var u=m(i,"scrollFactor",null);typeof u=="number"?r.setScrollFactor(u):u!==null&&(r.scrollFactorX=m(u,"x",1),r.scrollFactorY=m(u,"y",1)),r.rotation=m(i,"rotation",0);var s=m(i,"angle",null);s!==null&&(r.angle=s),r.alpha=m(i,"alpha",1);var l=m(i,"origin",null);if(typeof l=="number")r.setOrigin(l);else if(l!==null){var v=m(l,"x",.5),c=m(l,"y",.5);r.setOrigin(v,c)}r.blendMode=m(i,"blendMode",h.NORMAL),r.visible=m(i,"visible",!0);var g=m(i,"add",!0);return g&&a.sys.displayList.add(r),r.preUpdate&&a.sys.updateList.add(r),r};f.exports=o},32291:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(20494),m=function(o,a){var r=h(a,"anims",null);if(r===null)return o;if(typeof r=="string")o.anims.play(r);else if(typeof r=="object"){var i=o.anims,n=h(r,"key",void 0);if(n){var u=h(r,"startFrame",void 0),s=h(r,"delay",0),l=h(r,"repeat",0),v=h(r,"repeatDelay",0),c=h(r,"yoyo",!1),g=h(r,"play",!1),y=h(r,"delayedPlay",0),E={key:n,delay:s,repeat:l,repeatDelay:v,yoyo:c,startFrame:u};g?i.play(E):y>0?i.playAfterDelay(E,y):i.load(E)}}return o};f.exports=m},91713:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(71207),o=t(91963),a=t(56631),r=t(7599),i=t(17922),n=new h({Extends:m,initialize:function(s){m.call(this,s),this.sortChildrenFlag=!1,this.scene=s,this.systems=s.sys,this.events=s.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.events.once(r.DESTROY,this.destroy,this)},addChildCallback:function(u){u.displayList&&u.displayList!==this&&u.removeFromDisplayList(),u.parentContainer&&u.parentContainer.remove(u),u.displayList||(this.queueDepthSort(),u.displayList=this,u.emit(a.ADDED_TO_SCENE,u,this.scene),this.events.emit(r.ADDED_TO_SCENE,u,this.scene))},removeChildCallback:function(u){this.queueDepthSort(),u.displayList=null,u.emit(a.REMOVED_FROM_SCENE,u,this.scene),this.events.emit(r.REMOVED_FROM_SCENE,u,this.scene)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(i(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(u,s){return u._depth-s._depth},getChildren:function(){return this.list},shutdown:function(){for(var u=this.list;u.length;)u[0].destroy(!0);this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});o.register("DisplayList",n,"displayList"),f.exports=n},89980:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(48129),o=t(81078),a=t(6659),r=t(56631),i=t(7599),n=new h({Extends:a,initialize:function(s,l){a.call(this),this.scene=s,this.displayList=null,this.type=l,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(r.ADDED_TO_SCENE,this.addedToScene,this),this.on(r.REMOVED_FROM_SCENE,this.removedFromScene,this),s.sys.queueDepthSort()},setActive:function(u){return this.active=u,this},setName:function(u){return this.name=u,this},setState:function(u){return this.state=u,this},setDataEnabled:function(){return this.data||(this.data=new o(this)),this},setData:function(u,s){return this.data||(this.data=new o(this)),this.data.set(u,s),this},incData:function(u,s){return this.data||(this.data=new o(this)),this.data.inc(u,s),this},toggleData:function(u){return this.data||(this.data=new o(this)),this.data.toggle(u),this},getData:function(u){return this.data||(this.data=new o(this)),this.data.get(u)},setInteractive:function(u,s,l){return this.scene.sys.input.enable(this,u,s,l),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return m(this)},willRender:function(u){var s=this.displayList&&this.displayList.active?this.displayList.willRender(u):!0;return!(!s||n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&u.id)},getIndexList:function(){for(var u=this,s=this.parentContainer,l=[];s&&(l.unshift(s.getIndex(u)),u=s,s.parentContainer);)s=s.parentContainer;return this.displayList?l.unshift(this.displayList.getIndex(u)):l.unshift(this.scene.sys.displayList.getIndex(u)),l},addToDisplayList:function(u){return u===void 0&&(u=this.scene.sys.displayList),this.displayList&&this.displayList!==u&&this.removeFromDisplayList(),u.exists(this)||(this.displayList=u,u.add(this,!0),u.queueDepthSort(),this.emit(r.ADDED_TO_SCENE,this,this.scene),u.events.emit(i.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var u=this.displayList||this.scene.sys.displayList;return u&&u.exists(this)&&(u.remove(this,!0),u.queueDepthSort(),this.displayList=null,this.emit(r.REMOVED_FROM_SCENE,this,this.scene),u.events.emit(i.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(u){!this.scene||this.ignoreDestroy||(u===void 0&&(u=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(r.DESTROY,this,u),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});n.RENDER_MASK=15,f.exports=n},99325:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(91963),o=t(7599),a=new h({initialize:function(i){this.scene=i,this.systems=i.sys,this.events=i.sys.events,this.displayList,this.updateList,this.events.once(o.BOOT,this.boot,this),this.events.on(o.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(r,i){a.prototype.hasOwnProperty(r)||(a.prototype[r]=i)},a.remove=function(r){a.prototype.hasOwnProperty(r)&&delete a.prototype[r]},m.register("GameObjectCreator",a,"make"),f.exports=a},61286:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(91963),o=t(7599),a=new h({initialize:function(i){this.scene=i,this.systems=i.sys,this.events=i.sys.events,this.displayList,this.updateList,this.events.once(o.BOOT,this.boot,this),this.events.on(o.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},existing:function(r){return(r.renderCanvas||r.renderWebGL)&&this.displayList.add(r),r.preUpdate&&this.updateList.add(r),r},shutdown:function(){this.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});a.register=function(r,i){a.prototype.hasOwnProperty(r)||(a.prototype[r]=i)},a.remove=function(r){a.prototype.hasOwnProperty(r)&&delete a.prototype[r]},m.register("GameObjectFactory",a,"add"),f.exports=a},73329:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(69360),m=new h,o=new h,a=new h,r={camera:m,sprite:o,calc:a},i=function(n,u,s){var l=m,v=o,c=a;return v.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),l.copyFrom(u.matrix),s?(l.multiplyWithOffset(s,-u.scrollX*n.scrollFactorX,-u.scrollY*n.scrollFactorY),v.e=n.x,v.f=n.y):(v.e-=u.scrollX*n.scrollFactorX,v.f-=u.scrollY*n.scrollFactorY),l.multiply(v,c),r};f.exports=i},92034:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(74623),o=t(91963),a=t(7599),r=new h({Extends:m,initialize:function(n){m.call(this),this.checkQueue=!0,this.scene=n,this.systems=n.sys,n.sys.events.once(a.BOOT,this.boot,this),n.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var i=this.systems.events;i.on(a.PRE_UPDATE,this.update,this),i.on(a.UPDATE,this.sceneUpdate,this),i.once(a.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(i,n){for(var u=this._active,s=u.length,l=0;l<s;l++){var v=u[l];v.active&&v.preUpdate.call(v,i,n)}},shutdown:function(){for(var i=this._active.length;i--;)this._active[i].destroy(!0);for(i=this._pending.length;i--;)this._pending[i].destroy(!0);for(i=this._destroy.length;i--;)this._destroy[i].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var n=this.systems.events;n.off(a.PRE_UPDATE,this.update,this),n.off(a.UPDATE,this.sceneUpdate,this),n.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});o.register("UpdateList",r,"updateList"),f.exports=r},8810:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o,a,r,i,n,u,s,l,v,c,g,y){var E=m.x-h.displayOriginX+a,C=m.y-h.displayOriginY+r,T=E+m.w,A=C+m.h,P=i.getXRound(E,C,n),M=i.getYRound(E,C,n),w=i.getXRound(E,A,n),L=i.getYRound(E,A,n),F=i.getXRound(T,A,n),D=i.getYRound(T,A,n),N=i.getXRound(T,C,n),B=i.getYRound(T,C,n);t.batchQuad(h,P,M,w,L,F,D,N,B,o.u0,o.v0,o.u1,o.v1,u,s,l,v,c,g,y)};f.exports=S},82173:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){if(m===void 0&&(m=!1),o===void 0)return o={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},o;var a=t.text,r=a.length,i=t.maxWidth,n=t.wordWrapCharCode,u=Number.MAX_VALUE,s=Number.MAX_VALUE,l=0,v=0,c=t.fontData.chars,g=t.fontData.lineHeight,y=t.letterSpacing,E=t.lineSpacing,C=0,T=0,A=0,P=null,M=t._align,w=0,L=0,F=t.fontSize/t.fontData.size,D=F*t.scaleX,N=F*t.scaleY,B=null,b=0,W=[],Y=Number.MAX_VALUE,K=0,G=0,z=0,O,V=[],U=[],X=null;if(i>0){for(O=0;O<r;O++){if(A=a.charCodeAt(O),A===10){X!==null&&(V.push({word:X.word,i:X.i,x:X.x*D,y:X.y*N,w:X.w*D,h:X.h*N,cr:!0}),X=null),C=0,T+=g+E,B=null;continue}if(P=c[A],!!P){if(B!==null)var H=P.kerning[b];A===n?X!==null&&(V.push({word:X.word,i:X.i,x:X.x*D,y:X.y*N,w:X.w*D,h:X.h*N,cr:!1}),X=null):(X===null&&(X={word:"",i:O,x:C,y:T,w:0,h:g,cr:!1}),X.word=X.word.concat(a[O]),X.w+=P.xOffset+P.xAdvance+(H!==void 0?H:0)),C+=P.xAdvance+y,B=P,b=A}}X!==null&&V.push({word:X.word,i:X.i,x:X.x*D,y:X.y*N,w:X.w*D,h:X.h*N,cr:!1}),C=0,T=0,B=null,b=0;var Q,$=0,k=[];for(O=0;O<V.length;O++){var J=V[O],Z=J.x,j=J.x+J.w;if(Q){var _=Z-(Q.x+Q.w);$=Z-(_+Q.w),Q=null}var q=Z-$,it=j-$;q>i||it>i?(k.push(J.i-1),J.cr?(k.push(J.i+J.word.length),$=0,Q=null):Q=J):J.cr&&(k.push(J.i+J.word.length),$=0,Q=null)}var ht=function($t,Zt,ne){return $t.substr(0,Zt)+ne+$t.substr(Zt+1)};for(O=k.length-1;O>=0;O--)a=ht(a,k[O],`
`);o.wrappedText=a,r=a.length,V=[],X=null}var ft=0;for(O=0;O<r;O++){if(A=a.charCodeAt(O),A===10){X!==null&&(V.push({word:X.word,i:X.i,x:X.x*D,y:X.y*N,w:X.w*D,h:X.h*N}),X=null),C=0,T+=g+E,B=null,W[G]=z,z>K&&(K=z),z<Y&&(Y=z),G++,z=0;continue}if(P=c[A],!!P){if(w=C,L=T,B!==null){var ut=P.kerning[b];w+=ut!==void 0?ut:0}u>w&&(u=w),s>L&&(s=L);var tt=w+P.xAdvance,rt=L+g;l<tt&&(l=tt),v<rt&&(v=rt);var st=P.xOffset+P.xAdvance+(ut!==void 0?ut:0);A===n?X!==null&&(V.push({word:X.word,i:X.i,x:X.x*D,y:X.y*N,w:X.w*D,h:X.h*N}),X=null):(X===null&&(X={word:"",i:ft,x:C,y:T,w:0,h:g}),X.word=X.word.concat(a[O]),X.w+=st),U.push({i:ft,idx:O,char:a[O],code:A,x:(P.xOffset+w)*F,y:(P.yOffset+T)*F,w:P.width*F,h:P.height*F,t:T*F,r:tt*F,b:g*F,line:G,glyph:P}),C+=P.xAdvance+y+(ut!==void 0?ut:0),B=P,b=A,z=tt*F,ft++}}if(X!==null&&V.push({word:X.word,i:X.i,x:X.x*D,y:X.y*N,w:X.w*D,h:X.h*N}),W[G]=z,z>K&&(K=z),z<Y&&(Y=z),M>0)for(var xt=0;xt<U.length;xt++){var gt=U[xt];if(M===1){var Xt=(K-W[gt.line])/2;gt.x+=Xt,gt.r+=Xt}else if(M===2){var Dt=K-W[gt.line];gt.x+=Dt,gt.r+=Dt}}var It=o.local,Et=o.global,Nt=o.lines;return It.x=u*F,It.y=s*F,It.width=l*F,It.height=v*F,Et.x=t.x-t._displayOriginX+u*D,Et.y=t.y-t._displayOriginY+s*N,Et.width=l*D,Et.height=v*N,Nt.shortest=Y,Nt.longest=K,Nt.lengths=W,h&&(It.x=Math.ceil(It.x),It.y=Math.ceil(It.y),It.width=Math.ceil(It.width),It.height=Math.ceil(It.height),Et.x=Math.ceil(Et.x),Et.y=Math.ceil(Et.y),Et.width=Math.ceil(Et.width),Et.height=Math.ceil(Et.height),Nt.shortest=Math.ceil(Y),Nt.longest=Math.ceil(K)),m&&(t._displayOriginX=t.originX*It.width,t._displayOriginY=t.originY*It.height,Et.x=t.x-t._displayOriginX*t.scaleX,Et.y=t.y-t._displayOriginY*t.scaleY,h&&(Et.x=Math.ceil(Et.x),Et.y=Math.ceil(Et.y))),o.words=V,o.characters=U,o.lines.height=g,o.scale=F,o.scaleX=t.scaleX,o.scaleY=t.scaleY,o};f.exports=S},68298:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(31476),m=function(o,a,r,i,n,u,s){var l=o.sys.textures.get(r),v=l.get(i),c=o.sys.cache.xml.get(n);if(v&&c){var g=h(c,v,u,s,l);return o.sys.cache.bitmapFont.add(a,{data:g,texture:r,frame:i,fromAtlas:!0}),!0}else return!1};f.exports=m},39860:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(10850),m=function(o,a){var r=a.width,i=a.height,n=Math.floor(r/2),u=Math.floor(i/2),s=h(a,"chars","");if(s!==""){var l=h(a,"image",""),v=o.sys.textures.getFrame(l),c=v.cutX,g=v.cutY,y=v.source.width,E=v.source.height,C=h(a,"offset.x",0),T=h(a,"offset.y",0),A=h(a,"spacing.x",0),P=h(a,"spacing.y",0),M=h(a,"lineSpacing",0),w=h(a,"charsPerRow",null);w===null&&(w=y/r,w>s.length&&(w=s.length));for(var L=C,F=T,D={retroFont:!0,font:l,size:r,lineHeight:i+M,chars:{}},N=0,B=0;B<s.length;B++){var b=s.charCodeAt(B),W=(c+L)/y,Y=(g+F)/E,K=(c+L+r)/y,G=(g+F+i)/E;D.chars[b]={x:L,y:F,width:r,height:i,centerX:n,centerY:u,xOffset:0,yOffset:0,xAdvance:r,data:{},kerning:{},u0:W,v0:Y,u1:K,v1:G},N++,N===w?(N=0,L=C,F+=i+P):L+=r+A}var z={data:D,frame:null,texture:l};return z}};f.exports=m},31476:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(h,m){return parseInt(h.getAttribute(m),10)}var t=function(h,m,o,a,r){o===void 0&&(o=0),a===void 0&&(a=0);var i=m.cutX,n=m.cutY,u=m.source.width,s=m.source.height,l=m.sourceIndex,v={},c=h.getElementsByTagName("info")[0],g=h.getElementsByTagName("common")[0];v.font=c.getAttribute("face"),v.size=S(c,"size"),v.lineHeight=S(g,"lineHeight")+a,v.chars={};var y=h.getElementsByTagName("char"),E=m!==void 0&&m.trimmed;if(E)var C=m.height,T=m.width;for(var A=0;A<y.length;A++){var P=y[A],M=S(P,"id"),w=String.fromCharCode(M),L=S(P,"x"),F=S(P,"y"),D=S(P,"width"),N=S(P,"height");E&&(L<T&&(T=L),F<C&&(C=F)),E&&C!==0&&T!==0&&(L-=m.x,F-=m.y);var B=(i+L)/u,b=(n+F)/s,W=(i+L+D)/u,Y=(n+F+N)/s;if(v.chars[M]={x:L,y:F,width:D,height:N,centerX:Math.floor(D/2),centerY:Math.floor(N/2),xOffset:S(P,"xoffset"),yOffset:S(P,"yoffset"),xAdvance:S(P,"xadvance")+o,data:{},kerning:{},u0:B,v0:b,u1:W,v1:Y},r&&D!==0&&N!==0){var K=r.add(w,l,L,F,D,N);K&&K.setUVs(D,N,B,b,W,Y)}}var G=h.getElementsByTagName("kerning");for(A=0;A<G.length;A++){var z=G[A],O=S(z,"first"),V=S(z,"second"),U=S(z,"amount");v.chars[V].kerning[O]=U}return v};f.exports=t},55873:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(66863),m=t(98611),o={Parse:t(39860)};o=m(!1,o,h),f.exports=o},66863:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};f.exports=S},13468:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(44616),m=t(56694),o=t(88899),a=new m({Extends:h,Mixins:[o],initialize:function(i,n,u,s,l,v,c){h.call(this,i,n,u,s,l,v,c),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(r,i){return this.cropWidth=r,this.cropHeight=i,this},setDisplayCallback:function(r){return this.displayCallback=r,this},setScrollX:function(r){return this.scrollX=r,this},setScrollY:function(r){return this.scrollY=r,this}});f.exports=a},93438:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(49584),m=function(o,a,r,i){var n=a._text,u=n.length,s=o.currentContext;if(!(u===0||!h(o,s,a,r,i))){r.addToRenderList(a);var l=a.fromAtlas?a.frame:a.texture.frames.__BASE,v=a.displayCallback,c=a.callbackData,g=a.fontData.chars,y=a.fontData.lineHeight,E=a._letterSpacing,C=0,T=0,A=0,P=null,M=0,w=0,L=0,F=0,D=0,N=0,B=null,b=0,W=a.frame.source.image,Y=l.cutX,K=l.cutY,G=0,z=0,O=a._fontSize/a.fontData.size,V=a._align,U=0,X=0;a.getTextBounds(!1);var H=a._bounds.lines;V===1?X=(H.longest-H.lengths[0])/2:V===2&&(X=H.longest-H.lengths[0]),s.translate(-a.displayOriginX,-a.displayOriginY);var Q=r.roundPixels;a.cropWidth>0&&a.cropHeight>0&&(s.beginPath(),s.rect(0,0,a.cropWidth,a.cropHeight),s.clip());for(var $=0;$<u;$++){if(z=O,G=0,A=n.charCodeAt($),A===10){U++,V===1?X=(H.longest-H.lengths[U])/2:V===2&&(X=H.longest-H.lengths[U]),C=0,T+=y,B=null;continue}if(P=g[A],!!P){if(M=Y+P.x,w=K+P.y,L=P.width,F=P.height,D=P.xOffset+C-a.scrollX,N=P.yOffset+T-a.scrollY,B!==null){var k=P.kerning[b];D+=k!==void 0?k:0}if(v){c.index=$,c.charCode=A,c.x=D,c.y=N,c.scale=z,c.rotation=G,c.data=P.data;var J=v(c);D=J.x,N=J.y,z=J.scale,G=J.rotation}D*=z,N*=z,D+=X,C+=P.xAdvance+E+(k!==void 0?k:0),B=P,b=A,!(L===0||F===0||A===32)&&(Q&&(D=Math.round(D),N=Math.round(N)),s.save(),s.translate(D,N),s.rotate(G),s.scale(z,z),s.drawImage(W,M,w,L,F,0,0,L,F),s.restore())}}s.restore()}};f.exports=m},67513:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(13468),m=t(88933),o=t(99325),a=t(20494);o.register("dynamicBitmapText",function(r,i){r===void 0&&(r={});var n=a(r,"font",""),u=a(r,"text",""),s=a(r,"size",!1),l=new h(this.scene,0,0,n,u,s);return i!==void 0&&(r.add=i),m(this.scene,l,r),l})},94145:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(13468),m=t(61286);m.register("dynamicBitmapText",function(o,a,r,i,n){return this.displayList.add(new h(this.scene,o,a,r,i,n))})},88899:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(16873),o=t(93438),f.exports={renderWebGL:m,renderCanvas:o}},16873:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(73329),m=t(69360),o=t(75512),a=new m,r=function(i,n,u,s){var l=n.text,v=l.length;if(v!==0){u.addToRenderList(n);var c=i.pipelines.set(n.pipeline,n),g=h(n,u,s);i.pipelines.preBatch(n);var y=g.sprite,E=g.calc,C=a,T=n.cropWidth>0||n.cropHeight>0;T&&(c.flush(),i.pushScissor(E.tx,E.ty,n.cropWidth*E.scaleX,n.cropHeight*E.scaleY));var A=n.frame,P=A.glTexture,M=n.tintFill,w=o.getTintAppendFloatAlpha(n.tintTopLeft,u.alpha*n._alphaTL),L=o.getTintAppendFloatAlpha(n.tintTopRight,u.alpha*n._alphaTR),F=o.getTintAppendFloatAlpha(n.tintBottomLeft,u.alpha*n._alphaBL),D=o.getTintAppendFloatAlpha(n.tintBottomRight,u.alpha*n._alphaBR),N=c.setGameObject(n),B=0,b=0,W=0,Y=0,K=n.letterSpacing,G,z=0,O=0,V,U=n.scrollX,X=n.scrollY,H=n.fontData,Q=H.chars,$=H.lineHeight,k=n.fontSize/H.size,J=0,Z=n._align,j=0,_=0,q=n.getTextBounds(!1);n.maxWidth>0&&(l=q.wrappedText,v=l.length);var it=n._bounds.lines;Z===1?_=(it.longest-it.lengths[0])/2:Z===2&&(_=it.longest-it.lengths[0]);for(var ht=u.roundPixels,ft=n.displayCallback,ut=n.callbackData,tt=0;tt<v;tt++){if(W=l.charCodeAt(tt),W===10){j++,Z===1?_=(it.longest-it.lengths[j])/2:Z===2&&(_=it.longest-it.lengths[j]),B=0,b+=$,V=null;continue}if(G=Q[W],!!G){z=G.width,O=G.height;var rt=G.xOffset+B-U,st=G.yOffset+b-X;if(V!==null){var xt=G.kerning[Y];rt+=xt!==void 0?xt:0}if(B+=G.xAdvance+K,V=G,Y=W,!(z===0||O===0||W===32)){if(k=n.fontSize/n.fontData.size,J=0,ft){ut.color=0,ut.tint.topLeft=w,ut.tint.topRight=L,ut.tint.bottomLeft=F,ut.tint.bottomRight=D,ut.index=tt,ut.charCode=W,ut.x=rt,ut.y=st,ut.scale=k,ut.rotation=J,ut.data=G.data;var gt=ft(ut);rt=gt.x,st=gt.y,k=gt.scale,J=gt.rotation,gt.color?(w=gt.color,L=gt.color,F=gt.color,D=gt.color):(w=gt.tint.topLeft,L=gt.tint.topRight,F=gt.tint.bottomLeft,D=gt.tint.bottomRight),w=o.getTintAppendFloatAlpha(w,u.alpha*n._alphaTL),L=o.getTintAppendFloatAlpha(L,u.alpha*n._alphaTR),F=o.getTintAppendFloatAlpha(F,u.alpha*n._alphaBL),D=o.getTintAppendFloatAlpha(D,u.alpha*n._alphaBR)}rt*=k,st*=k,rt-=n.displayOriginX,st-=n.displayOriginY,rt+=_,C.applyITRS(rt,st,J,k,k),E.multiply(C,y);var Xt=G.u0,Dt=G.v0,It=G.u1,Et=G.v1,Nt=z,$t=O,Zt=y.e,ne=y.f,Ce=$t*y.c+y.e,Li=$t*y.d+y.f,Oi=Nt*y.a+$t*y.c+y.e,Di=Nt*y.b+$t*y.d+y.f,Ni=Nt*y.a+y.e,Bi=Nt*y.b+y.f;ht&&(Zt=Math.round(Zt),ne=Math.round(ne),Ce=Math.round(Ce),Li=Math.round(Li),Oi=Math.round(Oi),Di=Math.round(Di),Ni=Math.round(Ni),Bi=Math.round(Bi)),c.batchQuad(n,Zt,ne,Ce,Li,Oi,Di,Ni,Bi,Xt,Dt,It,Et,w,L,F,D,M,P,N)}}}T&&(c.flush(),i.popScissor()),i.pipelines.postBatch(n)}};f.exports=r},44616:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(82897),o=t(64937),a=t(89980),r=t(82173),i=t(68298),n=t(31476),u=t(74118),s=t(84557),l=new h({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Texture,o.Tint,o.Transform,o.Visible,s],initialize:function(c,g,y,E,C,T,A){C===void 0&&(C=""),A===void 0&&(A=0),a.call(this,c,"BitmapText"),this.font=E;var P=this.scene.sys.cache.bitmapFont.get(E);P||console.warn("Invalid BitmapText key: "+E),this.fontData=P.data,this._text="",this._fontSize=T||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=A,this._bounds=r(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=P.fromAtlas,this.setTexture(P.texture,P.frame),this.setPosition(g,y),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(C)},setLeftAlign:function(){return this._align=l.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=l.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=l.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(v){return this._fontSize=v,this._dirty=!0,this},setLetterSpacing:function(v){return v===void 0&&(v=0),this._letterSpacing=v,this._dirty=!0,this},setLineSpacing:function(v){return v===void 0&&(v=0),this.lineSpacing=v,this},setText:function(v){return!v&&v!==0&&(v=""),Array.isArray(v)&&(v=v.join(`
`)),v!==this.text&&(this._text=v.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(v,c,g,y){return v===void 0&&(v=0),c===void 0&&(c=0),g===void 0&&(g=0),y===void 0&&(y=.5),this.dropShadowX=v,this.dropShadowY=c,this.dropShadowColor=g,this.dropShadowAlpha=y,this},setCharacterTint:function(v,c,g,y,E,C,T){v===void 0&&(v=0),c===void 0&&(c=1),g===void 0&&(g=!1),y===void 0&&(y=-1),E===void 0&&(E=y,C=y,T=y);var A=this.text.length;c===-1&&(c=A),v<0&&(v=A+v),v=m(v,0,A-1);for(var P=m(v+c,v,A),M=this.charColors,w=v;w<P;w++){var L=M[w];if(y===-1)M[w]=null;else{var F=g?1:0;L?(L.tintEffect=F,L.tintTL=y,L.tintTR=E,L.tintBL=C,L.tintBR=T):M[w]={tintEffect:F,tintTL:y,tintTR:E,tintBL:C,tintBR:T}}}return this},setWordTint:function(v,c,g,y,E,C,T){c===void 0&&(c=1);for(var A=this.getTextBounds(),P=A.words,M=typeof v=="number",w=0,L=0;L<P.length;L++){var F=P[L];if((M&&L===v||!M&&F.word===v)&&(this.setCharacterTint(F.i,F.word.length,g,y,E,C,T),w++,w===c))return this}return this},getTextBounds:function(v){var c=this._bounds;return(this._dirty||v||this.scaleX!==c.scaleX||this.scaleY!==c.scaleY)&&(r(this,v,!0,c),this._dirty=!1),c},getCharacterAt:function(v,c,g){for(var y=this.getLocalPoint(v,c,null,g),E=this.getTextBounds(),C=E.characters,T=new u,A=0;A<C.length;A++){var P=C[A];if(T.setTo(P.x,P.t,P.r-P.x,P.b),T.contains(y.x,y.y))return P}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(v,c,g){if(c===void 0&&(c=this._fontSize),g===void 0&&(g=this._align),v!==this.font){var y=this.scene.sys.cache.bitmapFont.get(v);y&&(this.font=v,this.fontData=y.data,this._fontSize=c,this._align=g,this.fromAtlas=y.fromAtlas===!0,this.setTexture(y.texture,y.frame),r(this,!1,!0,this._bounds))}return this},setMaxWidth:function(v,c){return this._maxWidth=v,this._dirty=!0,c!==void 0&&(this.wordWrapCharCode=c),this},align:{set:function(v){this._align=v,this._dirty=!0},get:function(){return this._align}},text:{set:function(v){this.setText(v)},get:function(){return this._text}},fontSize:{set:function(v){this._fontSize=v,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(v){this._letterSpacing=v,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(v){this._lineSpacing=v,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(v){this._maxWidth=v,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var v=o.ToJSON(this),c={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return v.data=c,v},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});l.ALIGN_LEFT=0,l.ALIGN_CENTER=1,l.ALIGN_RIGHT=2,l.ParseFromAtlas=i,l.ParseXMLBitmapFont=n,f.exports=l},97545:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(49584),m=function(o,a,r,i){var n=a._text,u=n.length,s=o.currentContext;if(!(u===0||!h(o,s,a,r,i))){r.addToRenderList(a);var l=a.fromAtlas?a.frame:a.texture.frames.__BASE,v=a.fontData.chars,c=a.fontData.lineHeight,g=a._letterSpacing,y=a._lineSpacing,E=0,C=0,T=0,A=null,P=0,M=0,w=0,L=0,F=0,D=0,N=null,B=0,b=l.source.image,W=l.cutX,Y=l.cutY,K=a._fontSize/a.fontData.size,G=a._align,z=0,O=0,V=a.getTextBounds(!1);a.maxWidth>0&&(n=V.wrappedText,u=n.length);var U=a._bounds.lines;G===1?O=(U.longest-U.lengths[0])/2:G===2&&(O=U.longest-U.lengths[0]),s.translate(-a.displayOriginX,-a.displayOriginY);for(var X=r.roundPixels,H=0;H<u;H++){if(T=n.charCodeAt(H),T===10){z++,G===1?O=(U.longest-U.lengths[z])/2:G===2&&(O=U.longest-U.lengths[z]),E=0,C+=c+y,N=null;continue}if(A=v[T],!!A){if(P=W+A.x,M=Y+A.y,w=A.width,L=A.height,F=A.xOffset+E,D=A.yOffset+C,N!==null){var Q=A.kerning[B];F+=Q!==void 0?Q:0}F*=K,D*=K,F+=O,E+=A.xAdvance+g+(Q!==void 0?Q:0),N=A,B=T,!(w===0||L===0||T===32)&&(X&&(F=Math.round(F),D=Math.round(D)),s.save(),s.translate(F,D),s.scale(K,K),s.drawImage(b,P,M,w,L,0,0,w,L),s.restore())}}s.restore()}};f.exports=m},95499:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(44616),m=t(88933),o=t(99325),a=t(20494),r=t(10850);o.register("bitmapText",function(i,n){i===void 0&&(i={});var u=r(i,"font",""),s=a(i,"text",""),l=a(i,"size",!1),v=r(i,"align",0),c=new h(this.scene,0,0,u,s,l,v);return n!==void 0&&(i.add=n),m(this.scene,c,i),c})},21797:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(44616),m=t(61286);m.register("bitmapText",function(o,a,r,i,n,u){return this.displayList.add(new h(this.scene,o,a,r,i,n,u))})},84557:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(26372),o=t(97545),f.exports={renderWebGL:m,renderCanvas:o}},26372:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(8810),m=t(73329),o=t(75512),a=function(r,i,n,u){var s=i._text,l=s.length;if(l!==0){n.addToRenderList(i);var v=r.pipelines.set(i.pipeline,i),c=m(i,n,u).calc;r.pipelines.preBatch(i);var g=n.roundPixels,y=n.alpha,E=i.charColors,C=i.tintFill,T=o.getTintAppendFloatAlpha,A=T(i.tintTopLeft,y*i._alphaTL),P=T(i.tintTopRight,y*i._alphaTR),M=T(i.tintBottomLeft,y*i._alphaBL),w=T(i.tintBottomRight,y*i._alphaBR),L=i.frame.glTexture,F=v.setGameObject(i),D=i.getTextBounds(!1),N,B,b,W=D.characters,Y=i.dropShadowX,K=i.dropShadowY,G=Y!==0||K!==0;if(G){var z=i.dropShadowColor,O=i.dropShadowAlpha,V=T(z,y*O*i._alphaTL),U=T(z,y*O*i._alphaTR),X=T(z,y*O*i._alphaBL),H=T(z,y*O*i._alphaBR);for(N=0;N<W.length;N++)B=W[N],b=B.glyph,!(B.code===32||b.width===0||b.height===0)&&h(v,i,B,b,Y,K,c,g,V,U,X,H,1,L,F)}for(N=0;N<W.length;N++)if(B=W[N],b=B.glyph,!(B.code===32||b.width===0||b.height===0))if(E[B.i]){var Q=E[B.i],$=Q.tintEffect,k=T(Q.tintTL,y*i._alphaTL),J=T(Q.tintTR,y*i._alphaTR),Z=T(Q.tintBL,y*i._alphaBL),j=T(Q.tintBR,y*i._alphaBR);h(v,i,B,b,0,0,c,g,k,J,Z,j,$,L,F)}else h(v,i,B,b,0,0,c,g,A,P,M,w,C,L,F);r.pipelines.postBatch(i)}};f.exports=a},52816:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(92246),m=t(41664),o=t(56694),a=t(64937),r=t(82047),i=t(89980),n=t(71207),u=new o({Extends:i,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Size,a.Texture,a.Transform,a.Visible,h],initialize:function(l,v,c,g,y){i.call(this,l,"Blitter"),this.setTexture(g,y),this.setPosition(v,c),this.initPipeline(),this.initPostPipeline(),this.children=new n,this.renderList=[],this.dirty=!1},create:function(s,l,v,c,g){c===void 0&&(c=!0),g===void 0&&(g=this.children.length),v===void 0?v=this.frame:v instanceof r||(v=this.texture.get(v));var y=new m(this,s,l,v,c);return this.children.addAt(y,g,!1),this.dirty=!0,y},createFromCallback:function(s,l,v,c){for(var g=this.createMultiple(l,v,c),y=0;y<g.length;y++){var E=g[y];s.call(this,E,y)}return g},createMultiple:function(s,l,v){l===void 0&&(l=this.frame.name),v===void 0&&(v=!0),Array.isArray(l)||(l=[l]);var c=[],g=this;return l.forEach(function(y){for(var E=0;E<s;E++)c.push(g.create(0,0,y,v))}),c},childCanRender:function(s){return s.visible&&s.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});f.exports=u},33177:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){var a=h.getRenderList();if(a.length!==0){var r=t.currentContext,i=m.alpha*h.alpha;if(i!==0){m.addToRenderList(h),r.globalCompositeOperation=t.blendModes[h.blendMode],r.imageSmoothingEnabled=!h.frame.source.scaleMode;var n=h.x-m.scrollX*h.scrollFactorX,u=h.y-m.scrollY*h.scrollFactorY;r.save(),o&&o.copyToContext(r);for(var s=m.roundPixels,l=0;l<a.length;l++){var v=a[l],c=v.flipX||v.flipY,g=v.frame,y=g.canvasData,E=g.x,C=g.y,T=1,A=1,P=v.alpha*i;P!==0&&(r.globalAlpha=P,c?(v.flipX&&(T=-1,E-=y.width),v.flipY&&(A=-1,C-=y.height),y.width>0&&y.height>0&&(r.save(),r.translate(v.x+n,v.y+u),r.scale(T,A),r.drawImage(g.source.image,y.x,y.y,y.width,y.height,E,C,y.width,y.height),r.restore())):(s&&(E=Math.round(E),C=Math.round(C)),y.width>0&&y.height>0&&r.drawImage(g.source.image,y.x,y.y,y.width,y.height,E+v.x+n,C+v.y+u,y.width,y.height)))}r.restore()}}};f.exports=S},68452:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(52816),m=t(88933),o=t(99325),a=t(20494);o.register("blitter",function(r,i){r===void 0&&(r={});var n=a(r,"key",null),u=a(r,"frame",null),s=new h(this.scene,0,0,n,u);return i!==void 0&&(r.add=i),m(this.scene,s,r),s})},38906:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(52816),m=t(61286);m.register("blitter",function(o,a,r,i){return this.displayList.add(new h(this.scene,o,a,r,i))})},92246:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(89165),o=t(33177),f.exports={renderWebGL:m,renderCanvas:o}},89165:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(69360),m=t(75512),o=new h,a=function(r,i,n,u){var s=i.getRenderList(),l=n.alpha*i.alpha;if(!(s.length===0||l===0)){n.addToRenderList(i);var v=r.pipelines.set(this.pipeline,i),c=n.scrollX*i.scrollFactorX,g=n.scrollY*i.scrollFactorY,y=o.copyFrom(n.matrix);u&&(y.multiplyWithOffset(u,-c,-g),c=0,g=0);var E=i.x-c,C=i.y-g,T=-1,A=!1,P=n.roundPixels;r.pipelines.preBatch(i);for(var M=0;M<s.length;M++){var w=s[M],L=w.frame,F=w.alpha*l;if(F!==0){var D=L.width,N=L.height,B=E+w.x+L.x,b=C+w.y+L.y;w.flipX&&(D*=-1,B+=L.width),w.flipY&&(N*=-1,b+=L.height);var W=y.setQuad(B,b,B+D,b+N,P),Y=m.getTintAppendFloatAlpha(w.tint,F);if(L.sourceIndex!==T){var K=v.setGameObject(i,L);T=L.sourceIndex}v.batchQuad(i,W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],L.u0,L.v0,L.u1,L.v1,Y,Y,Y,Y,A,L.glTexture,K)&&(T=-1)}}r.pipelines.postBatch(i)}};f.exports=a},41664:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(82047),o=new h({initialize:function(r,i,n,u,s){this.parent=r,this.x=i,this.y=n,this.frame=u,this.data={},this.tint=16777215,this._visible=s,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(a){return a===void 0?this.frame=this.parent.frame:a instanceof m&&a.texture===this.parent.texture?this.frame=a:this.frame=this.parent.texture.get(a),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(a,r,i){return this.x=a,this.y=r,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,i&&this.setFrame(i),this},setPosition:function(a,r){return this.x=a,this.y=r,this},setFlipX:function(a){return this.flipX=a,this},setFlipY:function(a){return this.flipY=a,this},setFlip:function(a,r){return this.flipX=a,this.flipY=r,this},setVisible:function(a){return this.visible=a,this},setAlpha:function(a){return this.alpha=a,this},setTint:function(a){return this.tint=a,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(a){this.parent.dirty|=this._visible!==a,this._visible=a}},alpha:{get:function(){return this._alpha},set:function(a){this.parent.dirty|=this._alpha>0!=a>0,this._alpha=a}}});f.exports=o},97123:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82897),m=2,o={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a,r,i,n){return a===void 0&&(a=1),r===void 0?this.alpha=a:(this._alphaTL=h(a,0,1),this._alphaTR=h(r,0,1),this._alphaBL=h(i,0,1),this._alphaBR=h(n,0,1)),this},alpha:{get:function(){return this._alpha},set:function(a){var r=h(a,0,1);this._alpha=r,this._alphaTL=r,this._alphaTR=r,this._alphaBL=r,this._alphaBR=r,r===0?this.renderFlags&=~m:this.renderFlags|=m}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(a){var r=h(a,0,1);this._alphaTL=r,r!==0&&(this.renderFlags|=m)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(a){var r=h(a,0,1);this._alphaTR=r,r!==0&&(this.renderFlags|=m)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(a){var r=h(a,0,1);this._alphaBL=r,r!==0&&(this.renderFlags|=m)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(a){var r=h(a,0,1);this._alphaBR=r,r!==0&&(this.renderFlags|=m)}}};f.exports=o},15720:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82897),m=2,o={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(a){return a===void 0&&(a=1),this.alpha=a,this},alpha:{get:function(){return this._alpha},set:function(a){var r=h(a,0,1);this._alpha=r,r===0?this.renderFlags&=~m:this.renderFlags|=m}}};f.exports=o},69732:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(95723),m={_blendMode:h.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(o){typeof o=="string"&&(o=h[o]),o|=0,o>=-1&&(this._blendMode=o)}},setBlendMode:function(o){return this.blendMode=o,this}};f.exports=m},28284:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,h){return this.width=t,this.height=h,this},setDisplaySize:function(t,h){return this.displayWidth=t,this.displayHeight=h,this}};f.exports=S},85293:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={texture:null,frame:null,isCropped:!1,setCrop:function(t,h,m,o){if(t===void 0)this.isCropped=!1;else if(this.frame){if(typeof t=="number")this.frame.setCropUVs(this._crop,t,h,m,o,this.flipX,this.flipY);else{var a=t;this.frame.setCropUVs(this._crop,a.x,a.y,a.width,a.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};f.exports=S},14975:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return t===void 0&&(t=0),this.depth=t,this}};f.exports=S},88677:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(96910),o=t(72677),a=new h({initialize:function(i,n){this.gameObject=i,this.isPost=n,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(r){return r===void 0&&(r=0),this.padding=r,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(r){if(!this.isPost){var i=this.gameObject.scene.sys.renderer;i&&i.pipelines?(this.gameObject.pipeline=i.pipelines.FX_PIPELINE,r!==void 0&&(this.padding=r),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var r=this.list,i=0;i<r.length;i++)r[i].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(r){var i;if(this.isPost){var n=this.gameObject.getPostPipeline(String(r.type));for(Array.isArray(n)||(n=[n]),i=0;i<n.length;i++){var u=n[i];if(u.controller===r){this.gameObject.removePostPipeline(u),r.destroy();break}}}else{var s=this.list;for(i=0;i<s.length;i++)s[i]===r&&(o(s,i),r.destroy())}return this.gameObject},disable:function(r){return r===void 0&&(r=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,r&&this.clear(),this.gameObject},add:function(r,i){if(this.isPost){var n=String(r.type);this.gameObject.setPostPipeline(n,i);var u=this.gameObject.getPostPipeline(n);if(u)return Array.isArray(u)&&(u=u.pop()),u.controller=r,r}else return this.enabled||this.enable(),this.list.push(r),r},addGlow:function(r,i,n,u,s,l){return this.add(new m.Glow(this.gameObject,r,i,n,u),{quality:s,distance:l})},addShadow:function(r,i,n,u,s,l,v){return this.add(new m.Shadow(this.gameObject,r,i,n,u,s,l,v))},addPixelate:function(r){return this.add(new m.Pixelate(this.gameObject,r))},addVignette:function(r,i,n,u){return this.add(new m.Vignette(this.gameObject,r,i,n,u))},addShine:function(r,i,n,u){return this.add(new m.Shine(this.gameObject,r,i,n,u))},addBlur:function(r,i,n,u,s,l){return this.add(new m.Blur(this.gameObject,r,i,n,u,s,l))},addGradient:function(r,i,n,u,s,l,v,c){return this.add(new m.Gradient(this.gameObject,r,i,n,u,s,l,v,c))},addBloom:function(r,i,n,u,s,l){return this.add(new m.Bloom(this.gameObject,r,i,n,u,s,l))},addColorMatrix:function(){return this.add(new m.ColorMatrix(this.gameObject))},addCircle:function(r,i,n,u,s){return this.add(new m.Circle(this.gameObject,r,i,n,u,s))},addBarrel:function(r){return this.add(new m.Barrel(this.gameObject,r))},addDisplacement:function(r,i,n){return this.add(new m.Displacement(this.gameObject,r,i,n))},addWipe:function(r,i,n){return this.add(new m.Wipe(this.gameObject,r,i,n))},addReveal:function(r,i,n){return this.add(new m.Wipe(this.gameObject,r,i,n,!0))},addBokeh:function(r,i,n){return this.add(new m.Bokeh(this.gameObject,r,i,n))},addTiltShift:function(r,i,n,u,s,l){return this.add(new m.Bokeh(this.gameObject,r,i,n,!0,u,s,l))},destroy:function(){this.clear(),this.gameObject=null}});f.exports=a},92972:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,h){return this.flipX=t,this.flipY=h,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};f.exports=S},80693:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(74118),m=t(2386),o=t(93736),a={prepareBoundsOutput:function(r,i){if(i===void 0&&(i=!1),this.rotation!==0&&m(r,this.x,this.y,this.rotation),i&&this.parentContainer){var n=this.parentContainer.getBoundsTransformMatrix();n.transformPoint(r.x,r.y,r)}return r},getCenter:function(r,i){return r===void 0&&(r=new o),r.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,r.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(r,i)},getTopLeft:function(r,i){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX,r.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(r,i)},getTopCenter:function(r,i){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,r.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(r,i)},getTopRight:function(r,i){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX+this.displayWidth,r.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(r,i)},getLeftCenter:function(r,i){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX,r.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(r,i)},getRightCenter:function(r,i){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX+this.displayWidth,r.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(r,i)},getBottomLeft:function(r,i){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX,r.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(r,i)},getBottomCenter:function(r,i){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,r.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(r,i)},getBottomRight:function(r,i){return r||(r=new o),r.x=this.x-this.displayWidth*this.originX+this.displayWidth,r.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(r,i)},getBounds:function(r){r===void 0&&(r=new h);var i,n,u,s,l,v,c,g;if(this.parentContainer){var y=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(r),y.transformPoint(r.x,r.y,r),i=r.x,n=r.y,this.getTopRight(r),y.transformPoint(r.x,r.y,r),u=r.x,s=r.y,this.getBottomLeft(r),y.transformPoint(r.x,r.y,r),l=r.x,v=r.y,this.getBottomRight(r),y.transformPoint(r.x,r.y,r),c=r.x,g=r.y}else this.getTopLeft(r),i=r.x,n=r.y,this.getTopRight(r),u=r.x,s=r.y,this.getBottomLeft(r),l=r.x,v=r.y,this.getBottomRight(r),c=r.x,g=r.y;return r.x=Math.min(i,u,l,c),r.y=Math.min(n,s,v,g),r.width=Math.max(i,u,l,c)-r.x,r.height=Math.max(n,s,v,g)-r.y,r}};f.exports=a},39171:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(76756),m=t(63037),o={mask:null,setMask:function(a){return this.mask=a,this},clearMask:function(a){return a===void 0&&(a=!1),a&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(a,r,i,n,u){return a===void 0&&(this.texture||this.shader||this.geom)&&(a=this),new h(this.scene,a,r,i,n,u)},createGeometryMask:function(a){return a===void 0&&(this.type==="Graphics"||this.geom)&&(a=this),new m(this.scene,a)}};f.exports=o},28072:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,h){return t===void 0&&(t=.5),h===void 0&&(h=t),this.originX=t,this.originY=h,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(t,h){return t===void 0&&(t=0),h===void 0&&(h=t),this.displayOriginX=t,this.displayOriginY=h,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};f.exports=S},54211:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(75606),m=t(63130),o=t(10850),a=t(55303),r=t(93736),i={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:a.PLAYING_FORWARD,setPath:function(n,u){u===void 0&&(u=this.pathConfig);var s=this.pathTween;return s&&s.isPlaying()&&s.stop(),this.path=n,u&&this.startFollow(u),this},setRotateToPath:function(n,u){return u===void 0&&(u=0),this.rotateToPath=n,this.pathRotationOffset=u,this},isFollowing:function(){var n=this.pathTween;return n&&n.isPlaying()},startFollow:function(n,u){n===void 0&&(n={}),u===void 0&&(u=0);var s=this.pathTween;s&&s.isPlaying()&&s.stop(),typeof n=="number"&&(n={duration:n}),n.from=o(n,"from",0),n.to=o(n,"to",1);var l=m(n,"positionOnPath",!1);this.rotateToPath=m(n,"rotateToPath",!1),this.pathRotationOffset=o(n,"rotationOffset",0);var v=o(n,"startAt",u);if(v&&(n.onStart=function(g){var y=g.data[0];y.progress=v,y.elapsed=y.duration*v;var E=y.ease(y.progress);y.current=y.start+(y.end-y.start)*E,y.setTargetValue()}),this.pathOffset||(this.pathOffset=new r(this.x,this.y)),this.pathVector||(this.pathVector=new r),this.pathDelta||(this.pathDelta=new r),this.pathDelta.reset(),n.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(n),this.path.getStartPoint(this.pathOffset),l&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=a.PLAYING_FORWARD,this.rotateToPath){var c=this.path.getPoint(.1);this.rotation=Math.atan2(c.y-this.y,c.x-this.x)+h(this.pathRotationOffset)}return this.pathConfig=n,this},pauseFollow:function(){var n=this.pathTween;return n&&n.isPlaying()&&n.pause(),this},resumeFollow:function(){var n=this.pathTween;return n&&n.isPaused()&&n.resume(),this},stopFollow:function(){var n=this.pathTween;return n&&n.isPlaying()&&n.stop(),this},pathUpdate:function(){var n=this.pathTween;if(n){var u=n.data[0],s=this.pathDelta,l=this.pathVector;if(s.copy(l).negate(),u.state===a.COMPLETE){this.path.getPoint(u.end,l),s.add(l),l.add(this.pathOffset),this.setPosition(l.x,l.y);return}else if(u.state!==a.PLAYING_FORWARD&&u.state!==a.PLAYING_BACKWARD)return;this.path.getPoint(n.getValue(),l),s.add(l),l.add(this.pathOffset);var v=this.x,c=this.y;this.setPosition(l.x,l.y);var g=this.x-v,y=this.y-c;if(g===0&&y===0)return;if(u.state!==this._prevDirection){this._prevDirection=u.state;return}this.rotateToPath&&(this.rotation=Math.atan2(y,g)+h(this.pathRotationOffset))}}};f.exports=i},58210:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(28699),m={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(o){this.pipelineData={};var a=this.scene.sys.renderer;if(!a)return!1;var r=a.pipelines;if(r){o===void 0&&(o=r.default);var i=r.get(o);if(i)return this.defaultPipeline=i,this.pipeline=i,!0}return!1},setPipeline:function(o,a,r){var i=this.scene.sys.renderer;if(!i)return this;var n=i.pipelines;if(n){var u=n.get(o);u&&(this.pipeline=u),a&&(this.pipelineData=r?h(a):a)}return this},setPipelineData:function(o,a){var r=this.pipelineData;return a===void 0?delete r[o]:r[o]=a,this},resetPipeline:function(o){return o===void 0&&(o=!1),this.pipeline=this.defaultPipeline,o&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline.name}};f.exports=m},44086:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(28699),m=t(88677),o=t(72677),a={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(r){this.postPipelines=[],this.postPipelineData={},this.postFX=new m(this,!0),r&&(this.preFX=new m(this,!1))},setPostPipeline:function(r,i,n){var u=this.scene.sys.renderer;if(!u)return this;var s=u.pipelines;if(s){Array.isArray(r)||(r=[r]);for(var l=0;l<r.length;l++){var v=s.getPostPipeline(r[l],this,i);v&&this.postPipelines.push(v)}i&&(this.postPipelineData=n?h(i):i)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(r,i){var n=this.postPipelineData;return i===void 0?delete n[r]:n[r]=i,this},getPostPipeline:function(r){for(var i=typeof r=="string",n=this.postPipelines,u=[],s=0;s<n.length;s++){var l=n[s];(i&&l.name===r||!i&&l instanceof r)&&u.push(l)}return u.length===1?u[0]:u},resetPostPipeline:function(r){r===void 0&&(r=!1);for(var i=this.postPipelines,n=0;n<i.length;n++)i[n].destroy();this.postPipelines=[],this.hasPostPipeline=!1,r&&(this.postPipelineData={})},removePostPipeline:function(r){for(var i=typeof r=="string",n=this.postPipelines,u=n.length-1;u>=0;u--){var s=n[u];(i&&s.name===r||!i&&s===r)&&(s.destroy(),o(n,u))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};f.exports=a},45900:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,h){return h===void 0&&(h=t),this.scrollFactorX=t,this.scrollFactorY=h,this}};f.exports=S},31654:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){t||(t=this.frame),this.width=t.realWidth,this.height=t.realHeight;var h=this.input;return h&&!h.customHitArea&&(h.hitArea.width=this.width,h.hitArea.height=this.height),this},setSize:function(t,h){return this.width=t,this.height=h,this},setDisplaySize:function(t,h){return this.displayWidth=t,this.displayHeight=h,this}};f.exports=S},82081:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82047),m=8,o={texture:null,frame:null,isCropped:!1,setTexture:function(a,r){return this.texture=this.scene.sys.textures.get(a),this.setFrame(r)},setFrame:function(a,r,i){return r===void 0&&(r=!0),i===void 0&&(i=!0),a instanceof h?(this.texture=this.scene.sys.textures.get(a.texture.key),this.frame=a):this.frame=this.texture.get(a),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~m:this.renderFlags|=m,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};f.exports=o},21850:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82047),m=8,o={texture:null,frame:null,isCropped:!1,setCrop:function(a,r,i,n){if(a===void 0)this.isCropped=!1;else if(this.frame){if(typeof a=="number")this.frame.setCropUVs(this._crop,a,r,i,n,this.flipX,this.flipY);else{var u=a;this.frame.setCropUVs(this._crop,u.x,u.y,u.width,u.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(a,r){return this.texture=this.scene.sys.textures.get(a),this.setFrame(r)},setFrame:function(a,r,i){return r===void 0&&(r=!0),i===void 0&&(i=!0),a instanceof h?(this.texture=this.scene.sys.textures.get(a.texture.key),this.frame=a):this.frame=this.texture.get(a),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~m:this.renderFlags|=m,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&i&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};f.exports=o},58072:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,h,m,o){return t===void 0&&(t=16777215),h===void 0&&(h=t,m=t,o=t),this.tintTopLeft=t,this.tintTopRight=h,this.tintBottomLeft=m,this.tintBottomRight=o,this.tintFill=!1,this},setTintFill:function(t,h,m,o){return this.setTint(t,h,m,o),this.tintFill=!0,this},tint:{set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}};f.exports=S},48129:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var h={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(h.textureKey=t.texture.key,h.frameKey=t.frame.name),h};f.exports=S},56584:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(83392),m=t(69360),o=t(64462),a=t(35786),r=t(62138),i=t(93736),n=4,u={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(s){this._scaleX=s,this._scaleY=s,s===0?this.renderFlags&=~n:this.renderFlags|=n}},scaleX:{get:function(){return this._scaleX},set:function(s){this._scaleX=s,s===0?this.renderFlags&=~n:this._scaleY!==0&&(this.renderFlags|=n)}},scaleY:{get:function(){return this._scaleY},set:function(s){this._scaleY=s,s===0?this.renderFlags&=~n:this._scaleX!==0&&(this.renderFlags|=n)}},angle:{get:function(){return r(this._rotation*h.RAD_TO_DEG)},set:function(s){this.rotation=r(s)*h.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(s){this._rotation=a(s)}},setPosition:function(s,l,v,c){return s===void 0&&(s=0),l===void 0&&(l=s),v===void 0&&(v=0),c===void 0&&(c=0),this.x=s,this.y=l,this.z=v,this.w=c,this},copyPosition:function(s){return s.x!==void 0&&(this.x=s.x),s.y!==void 0&&(this.y=s.y),s.z!==void 0&&(this.z=s.z),s.w!==void 0&&(this.w=s.w),this},setRandomPosition:function(s,l,v,c){return s===void 0&&(s=0),l===void 0&&(l=0),v===void 0&&(v=this.scene.sys.scale.width),c===void 0&&(c=this.scene.sys.scale.height),this.x=s+Math.random()*v,this.y=l+Math.random()*c,this},setRotation:function(s){return s===void 0&&(s=0),this.rotation=s,this},setAngle:function(s){return s===void 0&&(s=0),this.angle=s,this},setScale:function(s,l){return s===void 0&&(s=1),l===void 0&&(l=s),this.scaleX=s,this.scaleY=l,this},setX:function(s){return s===void 0&&(s=0),this.x=s,this},setY:function(s){return s===void 0&&(s=0),this.y=s,this},setZ:function(s){return s===void 0&&(s=0),this.z=s,this},setW:function(s){return s===void 0&&(s=0),this.w=s,this},getLocalTransformMatrix:function(s){return s===void 0&&(s=new m),s.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(s,l){s===void 0&&(s=new m);var v=this.parentContainer;if(!v)return this.getLocalTransformMatrix(s);for(l||(l=new m),s.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);v;)l.applyITRS(v.x,v.y,v._rotation,v._scaleX,v._scaleY),l.multiply(s,s),v=v.parentContainer;return s},getLocalPoint:function(s,l,v,c){v||(v=new i),c||(c=this.scene.sys.cameras.main);var g=c.scrollX,y=c.scrollY,E=s+g*this.scrollFactorX-g,C=l+y*this.scrollFactorY-y;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(E,C,v):o(E,C,this.x,this.y,this.rotation,this.scaleX,this.scaleY,v),this._originComponent&&(v.x+=this._displayOriginX,v.y+=this._displayOriginY),v},getParentRotation:function(){for(var s=0,l=this.parentContainer;l;)s+=l.rotation,l=l.parentContainer;return s}};f.exports=u},69360:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(83392),o=t(93736),a=new h({initialize:function(i,n,u,s,l,v){i===void 0&&(i=1),n===void 0&&(n=0),u===void 0&&(u=0),s===void 0&&(s=1),l===void 0&&(l=0),v===void 0&&(v=0),this.matrix=new Float32Array([i,n,u,s,l,v,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(r){this.matrix[0]=r}},b:{get:function(){return this.matrix[1]},set:function(r){this.matrix[1]=r}},c:{get:function(){return this.matrix[2]},set:function(r){this.matrix[2]=r}},d:{get:function(){return this.matrix[3]},set:function(r){this.matrix[3]=r}},e:{get:function(){return this.matrix[4]},set:function(r){this.matrix[4]=r}},f:{get:function(){return this.matrix[5]},set:function(r){this.matrix[5]=r}},tx:{get:function(){return this.matrix[4]},set:function(r){this.matrix[4]=r}},ty:{get:function(){return this.matrix[5]},set:function(r){this.matrix[5]=r}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var r=this.matrix,i=r[0],n=r[1],u=r[2],s=r[3];return i||n?n>0?Math.acos(i/this.scaleX):-Math.acos(i/this.scaleX):u||s?m.TAU-(s>0?Math.acos(-u/this.scaleY):-Math.acos(u/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var r=this.matrix;return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,this},translate:function(r,i){var n=this.matrix;return n[4]=n[0]*r+n[2]*i+n[4],n[5]=n[1]*r+n[3]*i+n[5],this},scale:function(r,i){var n=this.matrix;return n[0]*=r,n[1]*=r,n[2]*=i,n[3]*=i,this},rotate:function(r){var i=Math.sin(r),n=Math.cos(r),u=this.matrix,s=u[0],l=u[1],v=u[2],c=u[3];return u[0]=s*n+v*i,u[1]=l*n+c*i,u[2]=s*-i+v*n,u[3]=l*-i+c*n,this},multiply:function(r,i){var n=this.matrix,u=r.matrix,s=n[0],l=n[1],v=n[2],c=n[3],g=n[4],y=n[5],E=u[0],C=u[1],T=u[2],A=u[3],P=u[4],M=u[5],w=i===void 0?n:i.matrix;return w[0]=E*s+C*v,w[1]=E*l+C*c,w[2]=T*s+A*v,w[3]=T*l+A*c,w[4]=P*s+M*v+g,w[5]=P*l+M*c+y,w},multiplyWithOffset:function(r,i,n){var u=this.matrix,s=r.matrix,l=u[0],v=u[1],c=u[2],g=u[3],y=u[4],E=u[5],C=i*l+n*c+y,T=i*v+n*g+E,A=s[0],P=s[1],M=s[2],w=s[3],L=s[4],F=s[5];return u[0]=A*l+P*c,u[1]=A*v+P*g,u[2]=M*l+w*c,u[3]=M*v+w*g,u[4]=L*l+F*c+C,u[5]=L*v+F*g+T,this},transform:function(r,i,n,u,s,l){var v=this.matrix,c=v[0],g=v[1],y=v[2],E=v[3],C=v[4],T=v[5];return v[0]=r*c+i*y,v[1]=r*g+i*E,v[2]=n*c+u*y,v[3]=n*g+u*E,v[4]=s*c+l*y+C,v[5]=s*g+l*E+T,this},transformPoint:function(r,i,n){n===void 0&&(n={x:0,y:0});var u=this.matrix,s=u[0],l=u[1],v=u[2],c=u[3],g=u[4],y=u[5];return n.x=r*s+i*v+g,n.y=r*l+i*c+y,n},invert:function(){var r=this.matrix,i=r[0],n=r[1],u=r[2],s=r[3],l=r[4],v=r[5],c=i*s-n*u;return r[0]=s/c,r[1]=-n/c,r[2]=-u/c,r[3]=i/c,r[4]=(u*v-s*l)/c,r[5]=-(i*v-n*l)/c,this},copyFrom:function(r){var i=this.matrix;return i[0]=r.a,i[1]=r.b,i[2]=r.c,i[3]=r.d,i[4]=r.e,i[5]=r.f,this},copyFromArray:function(r){var i=this.matrix;return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],this},copyToContext:function(r){var i=this.matrix;return r.transform(i[0],i[1],i[2],i[3],i[4],i[5]),r},setToContext:function(r){var i=this.matrix;return r.setTransform(i[0],i[1],i[2],i[3],i[4],i[5]),r},copyToArray:function(r){var i=this.matrix;return r===void 0?r=[i[0],i[1],i[2],i[3],i[4],i[5]]:(r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5]),r},setTransform:function(r,i,n,u,s,l){var v=this.matrix;return v[0]=r,v[1]=i,v[2]=n,v[3]=u,v[4]=s,v[5]=l,this},decomposeMatrix:function(){var r=this.decomposedMatrix,i=this.matrix,n=i[0],u=i[1],s=i[2],l=i[3],v=n*l-u*s;if(r.translateX=i[4],r.translateY=i[5],n||u){var c=Math.sqrt(n*n+u*u);r.rotation=u>0?Math.acos(n/c):-Math.acos(n/c),r.scaleX=c,r.scaleY=v/c}else if(s||l){var g=Math.sqrt(s*s+l*l);r.rotation=Math.PI*.5-(l>0?Math.acos(-s/g):-Math.acos(s/g)),r.scaleX=v/g,r.scaleY=g}else r.rotation=0,r.scaleX=0,r.scaleY=0;return r},applyITRS:function(r,i,n,u,s){var l=this.matrix,v=Math.sin(n),c=Math.cos(n);return l[4]=r,l[5]=i,l[0]=c*u,l[1]=v*u,l[2]=-v*s,l[3]=c*s,this},applyInverse:function(r,i,n){n===void 0&&(n=new o);var u=this.matrix,s=u[0],l=u[1],v=u[2],c=u[3],g=u[4],y=u[5],E=1/(s*c+v*-l);return n.x=c*E*r+-v*E*i+(y*v-g*c)*E,n.y=s*E*i+-l*E*r+(-y*s+g*l)*E,n},setQuad:function(r,i,n,u,s,l){l===void 0&&(l=this.quad);var v=this.matrix,c=v[0],g=v[1],y=v[2],E=v[3],C=v[4],T=v[5];return l[0]=r*c+i*y+C,l[1]=r*g+i*E+T,l[2]=r*c+u*y+C,l[3]=r*g+u*E+T,l[4]=n*c+u*y+C,l[5]=n*g+u*E+T,l[6]=n*c+i*y+C,l[7]=n*g+i*E+T,s&&l.forEach(function(A,P){l[P]=Math.round(A)}),l},getX:function(r,i){return r*this.a+i*this.c+this.e},getY:function(r,i){return r*this.b+i*this.d+this.f},getXRound:function(r,i,n){var u=this.getX(r,i);return n&&(u=Math.round(u)),u},getYRound:function(r,i,n){var u=this.getY(r,i);return n&&(u=Math.round(u)),u},getCSSMatrix:function(){var r=this.matrix;return"matrix("+r[0]+","+r[1]+","+r[2]+","+r[3]+","+r[4]+","+r[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});f.exports=a},59694:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=1,t={_visible:!0,visible:{get:function(){return this._visible},set:function(h){h?(this._visible=!0,this.renderFlags|=S):(this._visible=!1,this.renderFlags&=~S)}},setVisible:function(h){return this.visible=h,this}};f.exports=t},64937:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Alpha:t(97123),AlphaSingle:t(15720),BlendMode:t(69732),ComputedSize:t(28284),Crop:t(85293),Depth:t(14975),Flip:t(92972),FX:t(88677),GetBounds:t(80693),Mask:t(39171),Origin:t(28072),PathFollower:t(54211),Pipeline:t(58210),PostPipeline:t(44086),ScrollFactor:t(45900),Size:t(31654),Texture:t(82081),TextureCrop:t(21850),Tint:t(58072),ToJSON:t(48129),Transform:t(56584),TransformMatrix:t(69360),Visible:t(59694)}},70339:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(59959),m=t(95723),o=t(56694),a=t(64937),r=t(56631),i=t(89980),n=t(74118),u=t(98524),s=t(58795),l=t(93736),v=new o({Extends:i,Mixins:[a.AlphaSingle,a.BlendMode,a.ComputedSize,a.Depth,a.Mask,a.PostPipeline,a.Transform,a.Visible,u],initialize:function(g,y,E,C){i.call(this,g,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new a.TransformMatrix,this.tempTransformMatrix=new a.TransformMatrix,this._sortKey="",this._sysEvents=g.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(y,E),this.setBlendMode(m.SKIP_CHECK),C&&this.add(C)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(c){return c===void 0&&(c=!0),this.exclusive=c,this},getBounds:function(c){if(c===void 0&&(c=new n),c.setTo(this.x,this.y,0,0),this.parentContainer){var g=this.parentContainer.getBoundsTransformMatrix(),y=g.transformPoint(this.x,this.y);c.setTo(y.x,y.y,0,0)}if(this.list.length>0){var E=this.list,C=new n,T=!1;c.setEmpty();for(var A=0;A<E.length;A++){var P=E[A];P.getBounds&&(P.getBounds(C),T?s(C,c,c):(c.setTo(C.x,C.y,C.width,C.height),T=!0))}}return c},addHandler:function(c){c.once(r.DESTROY,this.remove,this),this.exclusive&&(c.parentContainer&&c.parentContainer.remove(c),c.parentContainer=this,c.removeFromDisplayList(),c.addedToScene())},removeHandler:function(c){c.off(r.DESTROY,this.remove,this),this.exclusive&&(c.parentContainer=null,c.removedFromScene(),c.addToDisplayList())},pointToContainer:function(c,g){g===void 0&&(g=new l),this.parentContainer?this.parentContainer.pointToContainer(c,g):(g.x=c.x,g.y=c.y);var y=this.tempTransformMatrix;return y.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),y.invert(),y.transformPoint(c.x,c.y,g),g},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(c){return h.Add(this.list,c,this.maxSize,this.addHandler,this),this},addAt:function(c,g){return h.AddAt(this.list,c,g,this.maxSize,this.addHandler,this),this},getAt:function(c){return this.list[c]},getIndex:function(c){return this.list.indexOf(c)},sort:function(c,g){return c?(g===void 0&&(g=function(y,E){return y[c]-E[c]}),h.StableSort(this.list,g),this):this},getByName:function(c){return h.GetFirst(this.list,"name",c)},getRandom:function(c,g){return h.GetRandom(this.list,c,g)},getFirst:function(c,g,y,E){return h.GetFirst(this.list,c,g,y,E)},getAll:function(c,g,y,E){return h.GetAll(this.list,c,g,y,E)},count:function(c,g,y,E){return h.CountAllMatching(this.list,c,g,y,E)},swap:function(c,g){return h.Swap(this.list,c,g),this},moveTo:function(c,g){return h.MoveTo(this.list,c,g),this},moveAbove:function(c,g){return h.MoveAbove(this.list,c,g),this},moveBelow:function(c,g){return h.MoveBelow(this.list,c,g),this},remove:function(c,g){var y=h.Remove(this.list,c,this.removeHandler,this);if(g&&y){Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++)y[E].destroy()}return this},removeAt:function(c,g){var y=h.RemoveAt(this.list,c,this.removeHandler,this);return g&&y&&y.destroy(),this},removeBetween:function(c,g,y){var E=h.RemoveBetween(this.list,c,g,this.removeHandler,this);if(y)for(var C=0;C<E.length;C++)E[C].destroy();return this},removeAll:function(c){var g=this.list;if(c){for(var y=0;y<g.length;y++)g[y]&&g[y].scene&&(g[y].off(r.DESTROY,this.remove,this),g[y].destroy());this.list=[]}else h.RemoveBetween(g,0,g.length,this.removeHandler,this);return this},bringToTop:function(c){return h.BringToTop(this.list,c),this},sendToBack:function(c){return h.SendToBack(this.list,c),this},moveUp:function(c){return h.MoveUp(this.list,c),this},moveDown:function(c){return h.MoveDown(this.list,c),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return h.Shuffle(this.list),this},replace:function(c,g,y){var E=h.Replace(this.list,c,g);return E&&(this.addHandler(g),this.removeHandler(c),y&&c.destroy()),this},exists:function(c){return this.list.indexOf(c)>-1},setAll:function(c,g,y,E){return h.SetAll(this.list,c,g,y,E),this},each:function(c,g){var y=[null],E,C=this.list.slice(),T=C.length;for(E=2;E<arguments.length;E++)y.push(arguments[E]);for(E=0;E<T;E++)y[0]=C[E],c.apply(g,y);return this},iterate:function(c,g){var y=[null],E;for(E=2;E<arguments.length;E++)y.push(arguments[E]);for(E=0;E<this.list.length;E++)y[0]=this.list[E],c.apply(g,y);return this},setScrollFactor:function(c,g,y){return g===void 0&&(g=c),y===void 0&&(y=!1),this.scrollFactorX=c,this.scrollFactorY=g,y&&(h.SetAll(this.list,"scrollFactorX",c),h.SetAll(this.list,"scrollFactorY",g)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});f.exports=v},13916:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){m.addToRenderList(h);var a=h.list;if(a.length!==0){var r=h.localTransform;o?(r.loadIdentity(),r.multiply(o),r.translate(h.x,h.y),r.rotate(h.rotation),r.scale(h.scaleX,h.scaleY)):r.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY);var i=h.blendMode!==-1;i||t.setBlendMode(0);var n=h._alpha,u=h.scrollFactorX,s=h.scrollFactorY;h.mask&&h.mask.preRenderCanvas(t,null,m);for(var l=0;l<a.length;l++){var v=a[l];if(v.willRender(m)){var c=v.alpha,g=v.scrollFactorX,y=v.scrollFactorY;!i&&v.blendMode!==t.currentBlendMode&&t.setBlendMode(v.blendMode),v.setScrollFactor(g*u,y*s),v.setAlpha(c*n),v.renderCanvas(t,v,m,r),v.setAlpha(c),v.setScrollFactor(g,y)}}h.mask&&h.mask.postRenderCanvas(t)}};f.exports=S},44516:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(88933),m=t(70339),o=t(99325),a=t(20494);o.register("container",function(r,i){r===void 0&&(r={});var n=a(r,"x",0),u=a(r,"y",0),s=a(r,"children",null),l=new m(this.scene,n,u,s);return i!==void 0&&(r.add=i),h(this.scene,l,r),l})},23400:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(70339),m=t(61286);m.register("container",function(o,a,r){return this.displayList.add(new h(this.scene,o,a,r))})},98524:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(36934),o=t(13916),f.exports={renderWebGL:m,renderCanvas:o}},36934:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){m.addToRenderList(h);var a=h.list,r=a.length;if(r!==0){var i=h.localTransform;o?(i.loadIdentity(),i.multiply(o),i.translate(h.x,h.y),i.rotate(h.rotation),i.scale(h.scaleX,h.scaleY)):i.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY),t.pipelines.preBatch(h);var n=h.blendMode!==-1;n||t.setBlendMode(0);for(var u=h.alpha,s=h.scrollFactorX,l=h.scrollFactorY,v=0;v<r;v++){var c=a[v];if(c.willRender(m)){var g,y,E,C;if(c.alphaTopLeft!==void 0)g=c.alphaTopLeft,y=c.alphaTopRight,E=c.alphaBottomLeft,C=c.alphaBottomRight;else{var T=c.alpha;g=T,y=T,E=T,C=T}var A=c.scrollFactorX,P=c.scrollFactorY;!n&&c.blendMode!==t.currentBlendMode&&t.setBlendMode(c.blendMode);var M=c.mask;M&&M.preRenderWebGL(t,c,m);var w=c.type;w!==t.currentType&&(t.newType=!0,t.currentType=w),t.nextTypeMatch=v<r-1?a[v+1].type===t.currentType:!1,c.setScrollFactor(A*s,P*l),c.setAlpha(g*u,y*u,E*u,C*u),c.renderWebGL(t,c,m,i,h),c.setAlpha(g,y,E,C),c.setScrollFactor(A,P),M&&M.postRenderWebGL(t,m),t.newType=!1}}t.pipelines.postBatch(h)}};f.exports=S},2452:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},38943:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(64937),o=t(11603),a=t(89980),r=t(42911),i=t(55638),n=t(7599),u=t(51729),s=new h({Extends:a,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.Origin,m.ScrollFactor,m.Transform,m.Visible,o],initialize:function(v,c,g,y,E,C){a.call(this,v,"DOMElement"),this.parent=v.sys.game.domContainer,this.cache=v.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new u,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(c,g),typeof y=="string"?y[0]==="#"?this.setElement(y.substr(1),E,C):this.createElement(y,E,C):y&&this.setElement(y,E,C),v.sys.events.on(n.SLEEP,this.handleSceneEvent,this),v.sys.events.on(n.WAKE,this.handleSceneEvent,this),v.sys.events.on(n.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(l){var v=this.node,c=v.style;v&&(c.display=l.settings.visible?"block":"none")},setSkew:function(l,v){return l===void 0&&(l=0),v===void 0&&(v=l),this.skewX=l,this.skewY=v,this},setPerspective:function(l){return this.parent.style.perspective=l+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(l){this.parent.style.perspective=l+"px"}},addListener:function(l){if(this.node){l=l.split(" ");for(var v=0;v<l.length;v++)this.node.addEventListener(l[v],this.handler,!1)}return this},removeListener:function(l){if(this.node){l=l.split(" ");for(var v=0;v<l.length;v++)this.node.removeEventListener(l[v],this.handler)}return this},dispatchNativeEvent:function(l){this.emit(l.type,l)},createElement:function(l,v,c){return this.setElement(document.createElement(l),v,c)},setElement:function(l,v,c){this.removeElement();var g;if(typeof l=="string"?(l[0]==="#"&&(l=l.substr(1)),g=document.getElementById(l)):typeof l=="object"&&l.nodeType===1&&(g=l),!g)return this;if(this.node=g,v&&r(v))for(var y in v)g.style[y]=v[y];else typeof v=="string"&&(g.style=v);return g.style.zIndex="0",g.style.display="inline",g.style.position="absolute",g.phaser=this,this.parent&&this.parent.appendChild(g),c&&(g.innerText=c),this.updateSize()},createFromCache:function(l,v){var c=this.cache.get(l);return c&&this.createFromHTML(c,v),this},createFromHTML:function(l,v){v===void 0&&(v="div"),this.removeElement();var c=document.createElement(v);return this.node=c,c.style.zIndex="0",c.style.display="inline",c.style.position="absolute",c.phaser=this,this.parent&&this.parent.appendChild(c),c.innerHTML=l,this.updateSize()},removeElement:function(){return this.node&&(i(this.node),this.node=null),this},updateSize:function(){var l=this.node,v=l.getBoundingClientRect();return this.width=l.clientWidth,this.height=l.clientHeight,this.displayWidth=v.width||0,this.displayHeight=v.height||0,this},getChildByProperty:function(l,v){if(this.node){for(var c=this.node.querySelectorAll("*"),g=0;g<c.length;g++)if(c[g][l]===v)return c[g]}return null},getChildByID:function(l){return this.getChildByProperty("id",l)},getChildByName:function(l){return this.getChildByProperty("name",l)},setClassName:function(l){return this.node&&(this.node.className=l,this.updateSize()),this},setText:function(l){return this.node&&(this.node.innerText=l,this.updateSize()),this},setHTML:function(l){return this.node&&(this.node.innerHTML=l,this.updateSize()),this},preRender:function(){var l=this.parentContainer,v=this.node;v&&l&&!l.willRender()&&(v.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(n.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(n.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(n.PRE_RENDER,this.preRender,this)}});f.exports=s},66070:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(2452),m=t(89980),o=t(69360),a=new o,r=new o,i=new o,n=function(u,s,l,v){if(s.node){var c=s.node.style,g=s.scene.sys.settings;if(!c||!g.visible||m.RENDER_MASK!==s.renderFlags||s.cameraFilter!==0&&s.cameraFilter&l.id||s.parentContainer&&!s.parentContainer.willRender()){c.display="none";return}var y=s.parentContainer,E=l.alpha*s.alpha;y&&(E*=y.alpha);var C=a,T=r,A=i,P=0,M=0,w="0%",L="0%";v?(P=s.width*s.scaleX*s.originX,M=s.height*s.scaleY*s.originY,T.applyITRS(s.x-P,s.y-M,s.rotation,s.scaleX,s.scaleY),C.copyFrom(l.matrix),C.multiplyWithOffset(v,-l.scrollX*s.scrollFactorX,-l.scrollY*s.scrollFactorY),T.e=s.x-P,T.f=s.y-M,C.multiply(T,A)):(P=s.width*s.originX,M=s.height*s.originY,T.applyITRS(s.x-P,s.y-M,s.rotation,s.scaleX,s.scaleY),C.copyFrom(l.matrix),w=100*s.originX+"%",L=100*s.originY+"%",T.e-=l.scrollX*s.scrollFactorX,T.f-=l.scrollY*s.scrollFactorY,C.multiply(T,A)),s.transformOnly||(c.display="block",c.opacity=E,c.zIndex=s._depth,c.pointerEvents=s.pointerEvents,c.mixBlendMode=h[s._blendMode]),c.transform=A.getCSSMatrix()+" skew("+s.skewX+"rad, "+s.skewY+"rad) rotate3d("+s.rotate3d.x+","+s.rotate3d.y+","+s.rotate3d.z+","+s.rotate3d.w+s.rotate3dAngle+")",c.transformOrigin=w+" "+L}};f.exports=n},66788:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(38943),m=t(61286);m.register("dom",function(o,a,r,i,n){var u=new h(this.scene,o,a,r,i,n);return this.displayList.add(u),u})},11603:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(66070),o=t(66070),f.exports={renderWebGL:m,renderCanvas:o}},65492:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="addedtoscene"},98398:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="destroy"},40239:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="removedfromscene"},17286:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="complete"},31496:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="created"},89587:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="error"},59792:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="locked"},96342:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="loop"},6017:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="playing"},49614:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="play"},24418:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="seeked"},87318:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="seeking"},50009:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="stalled"},61922:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="stop"},79501:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="textureready"},4052:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="unlocked"},54857:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="unsupported"},56631:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={ADDED_TO_SCENE:t(65492),DESTROY:t(98398),REMOVED_FROM_SCENE:t(40239),VIDEO_COMPLETE:t(17286),VIDEO_CREATED:t(31496),VIDEO_ERROR:t(89587),VIDEO_LOCKED:t(59792),VIDEO_LOOP:t(96342),VIDEO_PLAY:t(49614),VIDEO_PLAYING:t(6017),VIDEO_SEEKED:t(24418),VIDEO_SEEKING:t(87318),VIDEO_STALLED:t(50009),VIDEO_STOP:t(61922),VIDEO_TEXTURE:t(79501),VIDEO_UNLOCKED:t(4052),VIDEO_UNSUPPORTED:t(54857)}},39419:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(64937),o=t(89980),a=t(79394),r=new h({Extends:o,Mixins:[m.Alpha,m.BlendMode,m.Depth,m.Flip,m.Origin,m.ScrollFactor,m.Size,m.Texture,m.Tint,m.Transform,m.Visible,a],initialize:function(n){o.call(this,n,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});f.exports=r},96699:()=>{},41155:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(39419),m=t(61286);m.register("extern",function(){var o=new h(this.scene);return this.displayList.add(o),o})},79394:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(81410),o=t(96699),f.exports={renderWebGL:m,renderCanvas:o}},81410:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(73329),m=function(o,a,r,i){o.pipelines.clear();var n=h(a,r,i).calc;a.render.call(a,o,r,n),o.pipelines.rebind()};f.exports=m},36266:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},33182:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(51052),m=t(56694),o=t(36266),a=t(64937),r=t(95669),i=t(89980),n=t(72632),u=t(10850),s=t(83392),l=t(60898),v=new m({Extends:i,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.PostPipeline,a.Transform,a.Visible,a.ScrollFactor,l],initialize:function(g,y){var E=u(y,"x",0),C=u(y,"y",0);i.call(this,g,"Graphics"),this.setPosition(E,C),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(y)},setDefaultStyles:function(c){return u(c,"lineStyle",null)&&(this.defaultStrokeWidth=u(c,"lineStyle.width",1),this.defaultStrokeColor=u(c,"lineStyle.color",16777215),this.defaultStrokeAlpha=u(c,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),u(c,"fillStyle",null)&&(this.defaultFillColor=u(c,"fillStyle.color",16777215),this.defaultFillAlpha=u(c,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(c,g,y){return y===void 0&&(y=1),this.commandBuffer.push(o.LINE_STYLE,c,g,y),this._lineWidth=c,this},fillStyle:function(c,g){return g===void 0&&(g=1),this.commandBuffer.push(o.FILL_STYLE,c,g),this},fillGradientStyle:function(c,g,y,E,C,T,A,P){return C===void 0&&(C=1),T===void 0&&(T=C),A===void 0&&(A=C),P===void 0&&(P=C),this.commandBuffer.push(o.GRADIENT_FILL_STYLE,C,T,A,P,c,g,y,E),this},lineGradientStyle:function(c,g,y,E,C,T){return T===void 0&&(T=1),this.commandBuffer.push(o.GRADIENT_LINE_STYLE,c,T,g,y,E,C),this},beginPath:function(){return this.commandBuffer.push(o.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(o.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(o.FILL_PATH),this},fill:function(){return this.commandBuffer.push(o.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(o.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(o.STROKE_PATH),this},fillCircleShape:function(c){return this.fillCircle(c.x,c.y,c.radius)},strokeCircleShape:function(c){return this.strokeCircle(c.x,c.y,c.radius)},fillCircle:function(c,g,y){return this.beginPath(),this.arc(c,g,y,0,s.PI2),this.fillPath(),this},strokeCircle:function(c,g,y){return this.beginPath(),this.arc(c,g,y,0,s.PI2),this.strokePath(),this},fillRectShape:function(c){return this.fillRect(c.x,c.y,c.width,c.height)},strokeRectShape:function(c){return this.strokeRect(c.x,c.y,c.width,c.height)},fillRect:function(c,g,y,E){return this.commandBuffer.push(o.FILL_RECT,c,g,y,E),this},strokeRect:function(c,g,y,E){var C=this._lineWidth/2,T=c-C,A=c+C;return this.beginPath(),this.moveTo(c,g),this.lineTo(c,g+E),this.strokePath(),this.beginPath(),this.moveTo(c+y,g),this.lineTo(c+y,g+E),this.strokePath(),this.beginPath(),this.moveTo(T,g),this.lineTo(A+y,g),this.strokePath(),this.beginPath(),this.moveTo(T,g+E),this.lineTo(A+y,g+E),this.strokePath(),this},fillRoundedRect:function(c,g,y,E,C){C===void 0&&(C=20);var T=C,A=C,P=C,M=C;typeof C!="number"&&(T=n(C,"tl",20),A=n(C,"tr",20),P=n(C,"bl",20),M=n(C,"br",20));var w=T>=0,L=A>=0,F=P>=0,D=M>=0;return T=Math.abs(T),A=Math.abs(A),P=Math.abs(P),M=Math.abs(M),this.beginPath(),this.moveTo(c+T,g),this.lineTo(c+y-A,g),L?this.arc(c+y-A,g+A,A,-s.TAU,0):this.arc(c+y,g,A,Math.PI,s.TAU,!0),this.lineTo(c+y,g+E-M),D?this.arc(c+y-M,g+E-M,M,0,s.TAU):this.arc(c+y,g+E,M,-s.TAU,Math.PI,!0),this.lineTo(c+P,g+E),F?this.arc(c+P,g+E-P,P,s.TAU,Math.PI):this.arc(c,g+E,P,0,-s.TAU,!0),this.lineTo(c,g+T),w?this.arc(c+T,g+T,T,-Math.PI,-s.TAU):this.arc(c,g,T,s.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(c,g,y,E,C){C===void 0&&(C=20);var T=C,A=C,P=C,M=C,w=Math.min(y,E)/2;typeof C!="number"&&(T=n(C,"tl",20),A=n(C,"tr",20),P=n(C,"bl",20),M=n(C,"br",20));var L=T>=0,F=A>=0,D=P>=0,N=M>=0;return T=Math.min(Math.abs(T),w),A=Math.min(Math.abs(A),w),P=Math.min(Math.abs(P),w),M=Math.min(Math.abs(M),w),this.beginPath(),this.moveTo(c+T,g),this.lineTo(c+y-A,g),this.moveTo(c+y-A,g),F?this.arc(c+y-A,g+A,A,-s.TAU,0):this.arc(c+y,g,A,Math.PI,s.TAU,!0),this.lineTo(c+y,g+E-M),this.moveTo(c+y,g+E-M),N?this.arc(c+y-M,g+E-M,M,0,s.TAU):this.arc(c+y,g+E,M,-s.TAU,Math.PI,!0),this.lineTo(c+P,g+E),this.moveTo(c+P,g+E),D?this.arc(c+P,g+E-P,P,s.TAU,Math.PI):this.arc(c,g+E,P,0,-s.TAU,!0),this.lineTo(c,g+T),this.moveTo(c,g+T),L?this.arc(c+T,g+T,T,-Math.PI,-s.TAU):this.arc(c,g,T,s.TAU,0,!0),this.strokePath(),this},fillPointShape:function(c,g){return this.fillPoint(c.x,c.y,g)},fillPoint:function(c,g,y){return!y||y<1?y=1:(c-=y/2,g-=y/2),this.commandBuffer.push(o.FILL_RECT,c,g,y,y),this},fillTriangleShape:function(c){return this.fillTriangle(c.x1,c.y1,c.x2,c.y2,c.x3,c.y3)},strokeTriangleShape:function(c){return this.strokeTriangle(c.x1,c.y1,c.x2,c.y2,c.x3,c.y3)},fillTriangle:function(c,g,y,E,C,T){return this.commandBuffer.push(o.FILL_TRIANGLE,c,g,y,E,C,T),this},strokeTriangle:function(c,g,y,E,C,T){return this.commandBuffer.push(o.STROKE_TRIANGLE,c,g,y,E,C,T),this},strokeLineShape:function(c){return this.lineBetween(c.x1,c.y1,c.x2,c.y2)},lineBetween:function(c,g,y,E){return this.beginPath(),this.moveTo(c,g),this.lineTo(y,E),this.strokePath(),this},lineTo:function(c,g){return this.commandBuffer.push(o.LINE_TO,c,g),this},moveTo:function(c,g){return this.commandBuffer.push(o.MOVE_TO,c,g),this},strokePoints:function(c,g,y,E){g===void 0&&(g=!1),y===void 0&&(y=!1),E===void 0&&(E=c.length),this.beginPath(),this.moveTo(c[0].x,c[0].y);for(var C=1;C<E;C++)this.lineTo(c[C].x,c[C].y);return g&&this.lineTo(c[0].x,c[0].y),y&&this.closePath(),this.strokePath(),this},fillPoints:function(c,g,y,E){g===void 0&&(g=!1),y===void 0&&(y=!1),E===void 0&&(E=c.length),this.beginPath(),this.moveTo(c[0].x,c[0].y);for(var C=1;C<E;C++)this.lineTo(c[C].x,c[C].y);return g&&this.lineTo(c[0].x,c[0].y),y&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(c,g){g===void 0&&(g=32);var y=c.getPoints(g);return this.strokePoints(y,!0)},strokeEllipse:function(c,g,y,E,C){C===void 0&&(C=32);var T=new r(c,g,y,E),A=T.getPoints(C);return this.strokePoints(A,!0)},fillEllipseShape:function(c,g){g===void 0&&(g=32);var y=c.getPoints(g);return this.fillPoints(y,!0)},fillEllipse:function(c,g,y,E,C){C===void 0&&(C=32);var T=new r(c,g,y,E),A=T.getPoints(C);return this.fillPoints(A,!0)},arc:function(c,g,y,E,C,T,A){return T===void 0&&(T=!1),A===void 0&&(A=0),this.commandBuffer.push(o.ARC,c,g,y,E,C,T,A),this},slice:function(c,g,y,E,C,T,A){return T===void 0&&(T=!1),A===void 0&&(A=0),this.commandBuffer.push(o.BEGIN_PATH),this.commandBuffer.push(o.MOVE_TO,c,g),this.commandBuffer.push(o.ARC,c,g,y,E,C,T,A),this.commandBuffer.push(o.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(o.SAVE),this},restore:function(){return this.commandBuffer.push(o.RESTORE),this},translateCanvas:function(c,g){return this.commandBuffer.push(o.TRANSLATE,c,g),this},scaleCanvas:function(c,g){return this.commandBuffer.push(o.SCALE,c,g),this},rotateCanvas:function(c){return this.commandBuffer.push(o.ROTATE,c),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(c,g,y){var E=this.scene.sys,C=E.game.renderer;g===void 0&&(g=E.scale.width),y===void 0&&(y=E.scale.height),v.TargetCamera.setScene(this.scene),v.TargetCamera.setViewport(0,0,g,y),v.TargetCamera.scrollX=this.x,v.TargetCamera.scrollY=this.y;var T,A,P={willReadFrequently:!0};if(typeof c=="string")if(E.textures.exists(c)){T=E.textures.get(c);var M=T.getSourceImage();M instanceof HTMLCanvasElement&&(A=M.getContext("2d",P))}else T=E.textures.createCanvas(c,g,y),A=T.getSourceImage().getContext("2d",P);else c instanceof HTMLCanvasElement&&(A=c.getContext("2d",P));return A&&(this.renderCanvas(C,this,v.TargetCamera,null,A,!1),T&&T.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});v.TargetCamera=new h,f.exports=v},91543:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(36266),m=t(49584),o=function(a,r,i,n,u,s){var l=r.commandBuffer,v=l.length,c=u||a.currentContext;if(!(v===0||!m(a,c,r,i,n))){i.addToRenderList(r);var g=1,y=1,E=0,C=0,T=1,A=0,P=0,M=0;c.beginPath();for(var w=0;w<v;++w){var L=l[w];switch(L){case h.ARC:c.arc(l[w+1],l[w+2],l[w+3],l[w+4],l[w+5],l[w+6]),w+=7;break;case h.LINE_STYLE:T=l[w+1],E=l[w+2],g=l[w+3],A=(E&16711680)>>>16,P=(E&65280)>>>8,M=E&255,c.strokeStyle="rgba("+A+","+P+","+M+","+g+")",c.lineWidth=T,w+=3;break;case h.FILL_STYLE:C=l[w+1],y=l[w+2],A=(C&16711680)>>>16,P=(C&65280)>>>8,M=C&255,c.fillStyle="rgba("+A+","+P+","+M+","+y+")",w+=2;break;case h.BEGIN_PATH:c.beginPath();break;case h.CLOSE_PATH:c.closePath();break;case h.FILL_PATH:s||c.fill();break;case h.STROKE_PATH:s||c.stroke();break;case h.FILL_RECT:s?c.rect(l[w+1],l[w+2],l[w+3],l[w+4]):c.fillRect(l[w+1],l[w+2],l[w+3],l[w+4]),w+=4;break;case h.FILL_TRIANGLE:c.beginPath(),c.moveTo(l[w+1],l[w+2]),c.lineTo(l[w+3],l[w+4]),c.lineTo(l[w+5],l[w+6]),c.closePath(),s||c.fill(),w+=6;break;case h.STROKE_TRIANGLE:c.beginPath(),c.moveTo(l[w+1],l[w+2]),c.lineTo(l[w+3],l[w+4]),c.lineTo(l[w+5],l[w+6]),c.closePath(),s||c.stroke(),w+=6;break;case h.LINE_TO:c.lineTo(l[w+1],l[w+2]),w+=2;break;case h.MOVE_TO:c.moveTo(l[w+1],l[w+2]),w+=2;break;case h.LINE_FX_TO:c.lineTo(l[w+1],l[w+2]),w+=5;break;case h.MOVE_FX_TO:c.moveTo(l[w+1],l[w+2]),w+=5;break;case h.SAVE:c.save();break;case h.RESTORE:c.restore();break;case h.TRANSLATE:c.translate(l[w+1],l[w+2]),w+=2;break;case h.SCALE:c.scale(l[w+1],l[w+2]),w+=2;break;case h.ROTATE:c.rotate(l[w+1]),w+=1;break;case h.GRADIENT_FILL_STYLE:w+=5;break;case h.GRADIENT_LINE_STYLE:w+=6;break}}c.restore()}};f.exports=o},41286:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(99325),m=t(33182);h.register("graphics",function(o,a){o===void 0&&(o={}),a!==void 0&&(o.add=a);var r=new m(this.scene,o);return o.add&&this.scene.sys.displayList.add(r),r})},13122:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(33182),m=t(61286);m.register("graphics",function(o){return this.displayList.add(new h(this.scene,o))})},60898:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(34429),o=t(91543),o=t(91543),f.exports={renderWebGL:m,renderCanvas:o}},34429:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(36266),m=t(73329),o=t(69360),a=t(75512),r=function(l,v,c){this.x=l,this.y=v,this.width=c},i=function(l,v,c){this.points=[],this.pointsLength=1,this.points[0]=new r(l,v,c)},n=[],u=new o,s=function(l,v,c,g){if(v.commandBuffer.length!==0){c.addToRenderList(v);var y=l.pipelines.set(v.pipeline,v);l.pipelines.preBatch(v);for(var E=m(v,c,g).calc,C=u.loadIdentity(),T=v.commandBuffer,A=c.alpha*v.alpha,P=1,M=y.fillTint,w=y.strokeTint,L=0,F=0,D=0,N=.01,B=Math.PI*2,b,W=[],Y=0,K=!0,G=null,z=a.getTintAppendFloatAlpha,O=0;O<T.length;O++)switch(b=T[O],b){case h.BEGIN_PATH:{W.length=0,G=null,K=!0;break}case h.CLOSE_PATH:{K=!1,G&&G.points.length&&G.points.push(G.points[0]);break}case h.FILL_PATH:{for(Y=0;Y<W.length;Y++)y.batchFillPath(W[Y].points,C,E);break}case h.STROKE_PATH:{for(Y=0;Y<W.length;Y++)y.batchStrokePath(W[Y].points,P,K,C,E);break}case h.LINE_STYLE:{P=T[++O];var V=T[++O],U=T[++O]*A,X=z(V,U);w.TL=X,w.TR=X,w.BL=X,w.BR=X;break}case h.FILL_STYLE:{var H=T[++O],Q=T[++O]*A,$=z(H,Q);M.TL=$,M.TR=$,M.BL=$,M.BR=$;break}case h.GRADIENT_FILL_STYLE:{var k=T[++O]*A,J=T[++O]*A,Z=T[++O]*A,j=T[++O]*A;M.TL=z(T[++O],k),M.TR=z(T[++O],J),M.BL=z(T[++O],Z),M.BR=z(T[++O],j);break}case h.GRADIENT_LINE_STYLE:{P=T[++O];var _=T[++O]*A;w.TL=z(T[++O],_),w.TR=z(T[++O],_),w.BL=z(T[++O],_),w.BR=z(T[++O],_);break}case h.ARC:{var q=0,it=T[++O],ht=T[++O],ft=T[++O],ut=T[++O],tt=T[++O],rt=T[++O],st=T[++O];for(tt-=ut,rt?tt<-B?tt=-B:tt>0&&(tt=-B+tt%B):tt>B?tt=B:tt<0&&(tt=B+tt%B),G===null&&(G=new i(it+Math.cos(ut)*ft,ht+Math.sin(ut)*ft,P),W.push(G),q+=N);q<1+st;)D=tt*q+ut,L=it+Math.cos(D)*ft,F=ht+Math.sin(D)*ft,G.points.push(new r(L,F,P)),q+=N;D=tt+ut,L=it+Math.cos(D)*ft,F=ht+Math.sin(D)*ft,G.points.push(new r(L,F,P));break}case h.FILL_RECT:{y.batchFillRect(T[++O],T[++O],T[++O],T[++O],C,E);break}case h.FILL_TRIANGLE:{y.batchFillTriangle(T[++O],T[++O],T[++O],T[++O],T[++O],T[++O],C,E);break}case h.STROKE_TRIANGLE:{y.batchStrokeTriangle(T[++O],T[++O],T[++O],T[++O],T[++O],T[++O],P,C,E);break}case h.LINE_TO:{G!==null?G.points.push(new r(T[++O],T[++O],P)):(G=new i(T[++O],T[++O],P),W.push(G));break}case h.MOVE_TO:{G=new i(T[++O],T[++O],P),W.push(G);break}case h.SAVE:{n.push(C.copyToArray());break}case h.RESTORE:{C.copyFromArray(n.pop());break}case h.TRANSLATE:{it=T[++O],ht=T[++O],C.translate(it,ht);break}case h.SCALE:{it=T[++O],ht=T[++O],C.scale(it,ht);break}case h.ROTATE:{C.rotate(T[++O]);break}}l.pipelines.postBatch(v)}};f.exports=s},59192:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(83979),m=t(56694),o=t(56631),a=t(6659),r=t(71608),i=t(72632),n=t(10850),u=t(19256),s=t(42911),l=t(75757),v=t(58403),c=t(13747),g=new m({Extends:a,initialize:function(E,C,T){a.call(this),T?C&&!Array.isArray(C)&&(C=[C]):Array.isArray(C)?s(C[0])&&(T=C,C=null):s(C)&&(T=C,C=null),this.scene=E,this.children=new v,this.isParent=!0,this.type="Group",this.classType=i(T,"classType",c),this.name=i(T,"name",""),this.active=i(T,"active",!0),this.maxSize=i(T,"maxSize",-1),this.defaultKey=i(T,"defaultKey",null),this.defaultFrame=i(T,"defaultFrame",null),this.runChildUpdate=i(T,"runChildUpdate",!1),this.createCallback=i(T,"createCallback",null),this.removeCallback=i(T,"removeCallback",null),this.createMultipleCallback=i(T,"createMultipleCallback",null),this.internalCreateCallback=i(T,"internalCreateCallback",null),this.internalRemoveCallback=i(T,"internalRemoveCallback",null),C&&this.addMultiple(C),T&&this.createMultiple(T),this.on(o.ADDED_TO_SCENE,this.addedToScene,this),this.on(o.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(y,E,C,T,A,P){if(y===void 0&&(y=0),E===void 0&&(E=0),C===void 0&&(C=this.defaultKey),T===void 0&&(T=this.defaultFrame),A===void 0&&(A=!0),P===void 0&&(P=!0),this.isFull())return null;var M=new this.classType(this.scene,y,E,C,T);return M.addToDisplayList(this.scene.sys.displayList),M.addToUpdateList(),M.visible=A,M.setActive(P),this.add(M),M},createMultiple:function(y){if(this.isFull())return[];Array.isArray(y)||(y=[y]);var E=[];if(y[0].key)for(var C=0;C<y.length;C++){var T=this.createFromConfig(y[C]);E=E.concat(T)}return E},createFromConfig:function(y){if(this.isFull())return[];this.classType=i(y,"classType",this.classType);var E=i(y,"key",void 0),C=i(y,"frame",null),T=i(y,"visible",!0),A=i(y,"active",!0),P=[];if(E===void 0)return P;Array.isArray(E)||(E=[E]),Array.isArray(C)||(C=[C]);var M=i(y,"repeat",0),w=i(y,"randomKey",!1),L=i(y,"randomFrame",!1),F=i(y,"yoyo",!1),D=i(y,"quantity",!1),N=i(y,"frameQuantity",1),B=i(y,"max",0),b=l(E,C,{max:B,qty:D||N,random:w,randomB:L,repeat:M,yoyo:F});y.createCallback&&(this.createCallback=y.createCallback),y.removeCallback&&(this.removeCallback=y.removeCallback);for(var W=0;W<b.length;W++){var Y=this.create(0,0,b[W].a,b[W].b,T,A);if(!Y)break;P.push(Y)}if(u(y,"setXY")){var K=n(y,"setXY.x",0),G=n(y,"setXY.y",0),z=n(y,"setXY.stepX",0),O=n(y,"setXY.stepY",0);h.SetXY(P,K,G,z,O)}if(u(y,"setRotation")){var V=n(y,"setRotation.value",0),U=n(y,"setRotation.step",0);h.SetRotation(P,V,U)}if(u(y,"setScale")){var X=n(y,"setScale.x",1),H=n(y,"setScale.y",X),Q=n(y,"setScale.stepX",0),$=n(y,"setScale.stepY",0);h.SetScale(P,X,H,Q,$)}if(u(y,"setOrigin")){var k=n(y,"setOrigin.x",.5),J=n(y,"setOrigin.y",k),Z=n(y,"setOrigin.stepX",0),j=n(y,"setOrigin.stepY",0);h.SetOrigin(P,k,J,Z,j)}if(u(y,"setAlpha")){var _=n(y,"setAlpha.value",1),q=n(y,"setAlpha.step",0);h.SetAlpha(P,_,q)}if(u(y,"setDepth")){var it=n(y,"setDepth.value",0),ht=n(y,"setDepth.step",0);h.SetDepth(P,it,ht)}if(u(y,"setScrollFactor")){var ft=n(y,"setScrollFactor.x",1),ut=n(y,"setScrollFactor.y",ft),tt=n(y,"setScrollFactor.stepX",0),rt=n(y,"setScrollFactor.stepY",0);h.SetScrollFactor(P,ft,ut,tt,rt)}var st=i(y,"hitArea",null),xt=i(y,"hitAreaCallback",null);st&&h.SetHitArea(P,st,xt);var gt=i(y,"gridAlign",!1);return gt&&h.GridAlign(P,gt),this.createMultipleCallback&&this.createMultipleCallback.call(this,P),P},preUpdate:function(y,E){if(!(!this.runChildUpdate||this.children.size===0))for(var C=this.children.entries.slice(),T=0;T<C.length;T++){var A=C[T];A.active&&A.update(y,E)}},add:function(y,E){return E===void 0&&(E=!1),this.isFull()?this:(this.children.set(y),this.internalCreateCallback&&this.internalCreateCallback.call(this,y),this.createCallback&&this.createCallback.call(this,y),E&&(y.addToDisplayList(this.scene.sys.displayList),y.addToUpdateList()),y.on(o.DESTROY,this.remove,this),this)},addMultiple:function(y,E){if(E===void 0&&(E=!1),Array.isArray(y))for(var C=0;C<y.length;C++)this.add(y[C],E);return this},remove:function(y,E,C){return E===void 0&&(E=!1),C===void 0&&(C=!1),this.children.contains(y)?(this.children.delete(y),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,y),this.removeCallback&&this.removeCallback.call(this,y),y.off(o.DESTROY,this.remove,this),C?y.destroy():E&&(y.removeFromDisplayList(),y.removeFromUpdateList()),this):this},clear:function(y,E){y===void 0&&(y=!1),E===void 0&&(E=!1);for(var C=this.children,T=0;T<C.size;T++){var A=C.entries[T];A.off(o.DESTROY,this.remove,this),E?A.destroy():y&&(A.removeFromDisplayList(),A.removeFromUpdateList())}return this.children.clear(),this},contains:function(y){return this.children.contains(y)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(y,E,C,T){return r(this.children.entries,y,E,C,T)},getFirst:function(y,E,C,T,A,P,M){return this.getHandler(!0,1,y,E,C,T,A,P,M)},getFirstNth:function(y,E,C,T,A,P,M,w){return this.getHandler(!0,y,E,C,T,A,P,M,w)},getLast:function(y,E,C,T,A,P,M){return this.getHandler(!1,1,y,E,C,T,A,P,M)},getLastNth:function(y,E,C,T,A,P,M,w){return this.getHandler(!1,y,E,C,T,A,P,M,w)},getHandler:function(y,E,C,T,A,P,M,w,L){C===void 0&&(C=!1),T===void 0&&(T=!1);var F,D,N=0,B=this.children.entries;if(y)for(D=0;D<B.length;D++)if(F=B[D],F.active===C){if(N++,N===E)break}else F=null;else for(D=B.length-1;D>=0;D--)if(F=B[D],F.active===C){if(N++,N===E)break}else F=null;return F?(typeof A=="number"&&(F.x=A),typeof P=="number"&&(F.y=P),F):T?this.create(A,P,M,w,L):null},get:function(y,E,C,T,A){return this.getFirst(!1,!0,y,E,C,T,A)},getFirstAlive:function(y,E,C,T,A,P){return this.getFirst(!0,y,E,C,T,A,P)},getFirstDead:function(y,E,C,T,A,P){return this.getFirst(!1,y,E,C,T,A,P)},playAnimation:function(y,E){return h.PlayAnimation(this.children.entries,y,E),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(y){y===void 0&&(y=!0);for(var E=0,C=0;C<this.children.size;C++)this.children.entries[C].active===y&&E++;return E},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var y=this.getTotalUsed(),E=this.maxSize===-1?999999999999:this.maxSize;return E-y},setActive:function(y){return this.active=y,this},setName:function(y){return this.name=y,this},propertyValueSet:function(y,E,C,T,A){return h.PropertyValueSet(this.children.entries,y,E,C,T,A),this},propertyValueInc:function(y,E,C,T,A){return h.PropertyValueInc(this.children.entries,y,E,C,T,A),this},setX:function(y,E){return h.SetX(this.children.entries,y,E),this},setY:function(y,E){return h.SetY(this.children.entries,y,E),this},setXY:function(y,E,C,T){return h.SetXY(this.children.entries,y,E,C,T),this},incX:function(y,E){return h.IncX(this.children.entries,y,E),this},incY:function(y,E){return h.IncY(this.children.entries,y,E),this},incXY:function(y,E,C,T){return h.IncXY(this.children.entries,y,E,C,T),this},shiftPosition:function(y,E,C){return h.ShiftPosition(this.children.entries,y,E,C),this},angle:function(y,E){return h.Angle(this.children.entries,y,E),this},rotate:function(y,E){return h.Rotate(this.children.entries,y,E),this},rotateAround:function(y,E){return h.RotateAround(this.children.entries,y,E),this},rotateAroundDistance:function(y,E,C){return h.RotateAroundDistance(this.children.entries,y,E,C),this},setAlpha:function(y,E){return h.SetAlpha(this.children.entries,y,E),this},setTint:function(y,E,C,T){return h.SetTint(this.children.entries,y,E,C,T),this},setOrigin:function(y,E,C,T){return h.SetOrigin(this.children.entries,y,E,C,T),this},scaleX:function(y,E){return h.ScaleX(this.children.entries,y,E),this},scaleY:function(y,E){return h.ScaleY(this.children.entries,y,E),this},scaleXY:function(y,E,C,T){return h.ScaleXY(this.children.entries,y,E,C,T),this},setDepth:function(y,E){return h.SetDepth(this.children.entries,y,E),this},setBlendMode:function(y){return h.SetBlendMode(this.children.entries,y),this},setHitArea:function(y,E){return h.SetHitArea(this.children.entries,y,E),this},shuffle:function(){return h.Shuffle(this.children.entries),this},kill:function(y){this.children.contains(y)&&y.setActive(!1)},killAndHide:function(y){this.children.contains(y)&&(y.setActive(!1),y.setVisible(!1))},setVisible:function(y,E,C){return h.SetVisible(this.children.entries,y,E,C),this},toggleVisible:function(){return h.ToggleVisible(this.children.entries),this},destroy:function(y,E){y===void 0&&(y=!1),E===void 0&&(E=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(o.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(E,y),this.scene=void 0,this.children=void 0)}});f.exports=g},61295:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(99325),m=t(59192);h.register("group",function(o){return new m(this.scene,null,o)})},62598:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(59192),m=t(61286);m.register("group",function(o,a){return this.updateList.add(new h(this.scene,o,a))})},1539:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(64937),o=t(89980),a=t(57322),r=new h({Extends:o,Mixins:[m.Alpha,m.BlendMode,m.Depth,m.Flip,m.GetBounds,m.Mask,m.Origin,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Size,m.TextureCrop,m.Tint,m.Transform,m.Visible,a],initialize:function(n,u,s,l,v){o.call(this,n,"Image"),this._crop=this.resetCropObject(),this.setTexture(l,v),this.setPosition(u,s),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});f.exports=r},57786:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){m.addToRenderList(h),t.batchSprite(h,h.frame,m,o)};f.exports=S},83556:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(88933),m=t(99325),o=t(20494),a=t(1539);m.register("image",function(r,i){r===void 0&&(r={});var n=o(r,"key",null),u=o(r,"frame",null),s=new a(this.scene,0,0,n,u);return i!==void 0&&(r.add=i),h(this.scene,s,r),s})},20927:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(1539),m=t(61286);m.register("image",function(o,a,r,i){return this.displayList.add(new h(this.scene,o,a,r,i))})},57322:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(59390),o=t(57786),f.exports={renderWebGL:m,renderCanvas:o}},59390:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){m.addToRenderList(h),this.pipeline.batchSprite(h,m,o)};f.exports=S},48013:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h={Events:t(56631),DisplayList:t(91713),GameObjectCreator:t(99325),GameObjectFactory:t(61286),UpdateList:t(92034),Components:t(64937),GetCalcMatrix:t(73329),BuildGameObject:t(88933),BuildGameObjectAnimation:t(32291),GameObject:t(89980),BitmapText:t(44616),Blitter:t(52816),Bob:t(41664),Container:t(70339),DOMElement:t(38943),DynamicBitmapText:t(13468),Extern:t(39419),Graphics:t(33182),Group:t(59192),Image:t(1539),Layer:t(85305),Particles:t(27684),PathFollower:t(29598),RenderTexture:t(15996),RetroFont:t(55873),Rope:t(79968),Sprite:t(13747),Text:t(76555),GetTextSize:t(32979),MeasureText:t(27030),TextStyle:t(74744),TileSprite:t(35856),Zone:t(71030),Video:t(8630),Shape:t(91461),Arc:t(28593),Curve:t(15220),Ellipse:t(28591),Grid:t(39169),IsoBox:t(4415),IsoTriangle:t(65159),Line:t(579),Polygon:t(91249),Rectangle:t(517),Star:t(77843),Triangle:t(21873),Factories:{Blitter:t(38906),Container:t(23400),DOMElement:t(66788),DynamicBitmapText:t(94145),Extern:t(41155),Graphics:t(13122),Group:t(62598),Image:t(20927),Layer:t(17676),Particles:t(81212),PathFollower:t(19626),RenderTexture:t(29599),Rope:t(31982),Sprite:t(66135),StaticBitmapText:t(21797),Text:t(94627),TileSprite:t(20509),Zone:t(34546),Video:t(215),Arc:t(10369),Curve:t(10147),Ellipse:t(99869),Grid:t(9326),IsoBox:t(88154),IsoTriangle:t(67765),Line:t(85665),Polygon:t(88203),Rectangle:t(94355),Star:t(23962),Triangle:t(79296)},Creators:{Blitter:t(68452),Container:t(44516),DynamicBitmapText:t(67513),Graphics:t(41286),Group:t(61295),Image:t(83556),Layer:t(56378),Particles:t(765),RenderTexture:t(85692),Rope:t(96027),Sprite:t(89219),StaticBitmapText:t(95499),Text:t(75397),TileSprite:t(63950),Zone:t(24067),Video:t(65601)}};h.Shader=t(27902),h.Mesh=t(83321),h.NineSlice=t(44139),h.PointLight=t(13171),h.Plane=t(33412),h.Factories.Shader=t(51979),h.Factories.Mesh=t(8767),h.Factories.NineSlice=t(53778),h.Factories.PointLight=t(91201),h.Factories.Plane=t(58322),h.Creators.Shader=t(13908),h.Creators.Mesh=t(41839),h.Creators.NineSlice=t(40964),h.Creators.PointLight=t(162),h.Creators.Plane=t(10912),h.Light=t(14455),h.LightsManager=t(26193),h.LightsPlugin=t(50296),f.exports=h},85305:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(95723),m=t(56694),o=t(64937),a=t(48129),r=t(81078),i=t(6659),n=t(56631),u=t(71207),s=t(58010),l=t(7599),v=t(17922),c=new m({Extends:u,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Mask,o.PostPipeline,o.Visible,i,s],initialize:function(y,E){u.call(this,y),i.call(this),this.scene=y,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=y.sys,this.events=y.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(h.SKIP_CHECK),E&&this.add(E),y.sys.queueDepthSort()},setActive:function(g){return this.active=g,this},setName:function(g){return this.name=g,this},setState:function(g){return this.state=g,this},setDataEnabled:function(){return this.data||(this.data=new r(this)),this},setData:function(g,y){return this.data||(this.data=new r(this)),this.data.set(g,y),this},incData:function(g,y){return this.data||(this.data=new r(this)),this.data.inc(g,y),this},toggleData:function(g){return this.data||(this.data=new r(this)),this.data.toggle(g),this},getData:function(g){return this.data||(this.data=new r(this)),this.data.get(g)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return a(this)},willRender:function(g){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&g.id)},getIndexList:function(){for(var g=this,y=this.parentContainer,E=[];y&&(E.unshift(y.getIndex(g)),g=y,y.parentContainer);)y=y.parentContainer;return E.unshift(this.displayList.getIndex(g)),E},addChildCallback:function(g){g.displayList&&g.displayList!==this&&g.removeFromDisplayList(),g.displayList||(this.queueDepthSort(),g.displayList=this,g.emit(n.ADDED_TO_SCENE,g,this.scene),this.events.emit(l.ADDED_TO_SCENE,g,this.scene))},removeChildCallback:function(g){this.queueDepthSort(),g.displayList=null,g.emit(n.REMOVED_FROM_SCENE,g,this.scene),this.events.emit(l.REMOVED_FROM_SCENE,g,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(v(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(g,y){return g._depth-y._depth},getChildren:function(){return this.list},addToDisplayList:function(g){return g===void 0&&(g=this.scene.sys.displayList),this.displayList&&this.displayList!==g&&this.removeFromDisplayList(),g.exists(this)||(this.displayList=g,g.add(this,!0),g.queueDepthSort(),this.emit(n.ADDED_TO_SCENE,this,this.scene),g.events.emit(l.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var g=this.displayList||this.scene.sys.displayList;return g.exists(this)&&(g.remove(this,!0),g.queueDepthSort(),this.displayList=null,this.emit(n.REMOVED_FROM_SCENE,this,this.scene),g.events.emit(l.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(g){if(!(!this.scene||this.ignoreDestroy)){this.emit(n.DESTROY,this);for(var y=this.list;y.length;)y[0].destroy(g);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});f.exports=c},834:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){var o=h.list;if(o.length!==0){h.depthSort();var a=h.blendMode!==-1;a||t.setBlendMode(0);var r=h._alpha;h.mask&&h.mask.preRenderCanvas(t,null,m);for(var i=0;i<o.length;i++){var n=o[i];if(n.willRender(m)){var u=n.alpha;!a&&n.blendMode!==t.currentBlendMode&&t.setBlendMode(n.blendMode),n.setAlpha(u*r),n.renderCanvas(t,n,m),n.setAlpha(u)}}h.mask&&h.mask.postRenderCanvas(t)}};f.exports=S},56378:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(88933),m=t(85305),o=t(99325),a=t(20494);o.register("layer",function(r,i){r===void 0&&(r={});var n=a(r,"children",null),u=new m(this.scene,n);return i!==void 0&&(r.add=i),h(this.scene,u,r),u})},17676:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(85305),m=t(61286);m.register("layer",function(o){return this.displayList.add(new h(this.scene,o))})},58010:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(17576),o=t(834),f.exports={renderWebGL:m,renderCanvas:o}},17576:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){var o=h.list,a=o.length;if(a!==0){h.depthSort(),t.pipelines.preBatch(h);var r=h.blendMode!==-1;r||t.setBlendMode(0);for(var i=h.alpha,n=0;n<a;n++){var u=o[n];if(u.willRender(m)){var s,l,v,c;if(u.alphaTopLeft!==void 0)s=u.alphaTopLeft,l=u.alphaTopRight,v=u.alphaBottomLeft,c=u.alphaBottomRight;else{var g=u.alpha;s=g,l=g,v=g,c=g}!r&&u.blendMode!==t.currentBlendMode&&t.setBlendMode(u.blendMode);var y=u.mask;y&&y.preRenderWebGL(t,u,m);var E=u.type;E!==t.currentType&&(t.newType=!0,t.currentType=E),t.nextTypeMatch=n<a-1?o[n+1].type===t.currentType:!1,u.setAlpha(s*i,l*i,v*i,c*i),u.renderWebGL(t,u,m),u.setAlpha(s,l,v,c),y&&y.postRenderWebGL(t,m),t.newType=!1}}t.pipelines.postBatch(h)}};f.exports=S},14455:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(26673),m=t(56694),o=t(64937),a=t(39298),r=t(75512),i=new m({Extends:h,Mixins:[o.Origin,o.ScrollFactor,o.Transform,o.Visible],initialize:function(u,s,l,v,c,g,y){h.call(this,u,s,l),this.color=new a(v,c,g),this.intensity=y,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(l)},displayWidth:{get:function(){return this.diameter},set:function(n){this.diameter=n}},displayHeight:{get:function(){return this.diameter},set:function(n){this.diameter=n}},width:{get:function(){return this.diameter},set:function(n){this.diameter=n}},height:{get:function(){return this.diameter},set:function(n){this.diameter=n}},willRender:function(n){return!(i.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&n.id)},setColor:function(n){var u=r.getFloatsFromUintRGB(n);return this.color.set(u[0],u[1],u[2]),this},setIntensity:function(n){return this.intensity=n,this},setRadius:function(n){return this.radius=n,this}});i.RENDER_MASK=15,f.exports=i},26193:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(26535),m=t(56694),o=t(53996),a=t(14455),r=t(13171),i=t(39298),n=t(72677),u=t(17922),s=t(75512),l=new m({initialize:function(){this.lights=[],this.ambientColor=new i(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(v,c,g,y,E,C){return this.systems.displayList.add(new r(this.scene,v,c,g,y,E,C))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(v){for(var c=this.lights,g=v.worldView,y=[],E=0;E<c.length;E++){var C=c[E];C.willRender(v)&&h(C,g)&&y.push({light:C,distance:o(C.x,C.y,g.centerX,g.centerY)})}return y.length>this.maxLights&&(u(y,this.sortByDistance),y=y.slice(0,this.maxLights)),this.visibleLights=y.length,y},sortByDistance:function(v,c){return v.distance>=c.distance},setAmbientColor:function(v){var c=s.getFloatsFromUintRGB(v);return this.ambientColor.set(c[0],c[1],c[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(v,c,g,y,E){v===void 0&&(v=0),c===void 0&&(c=0),g===void 0&&(g=128),y===void 0&&(y=16777215),E===void 0&&(E=1);var C=s.getFloatsFromUintRGB(y),T=new a(v,c,g,C[0],C[1],C[2],E);return this.lights.push(T),T},removeLight:function(v){var c=this.lights.indexOf(v);return c>=0&&n(this.lights,c),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});f.exports=l},50296:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(26193),o=t(91963),a=t(7599),r=new h({Extends:m,initialize:function(n){this.scene=n,this.systems=n.sys,n.sys.settings.isBooted||n.sys.events.once(a.BOOT,this.boot,this),m.call(this)},boot:function(){var i=this.systems.events;i.on(a.SHUTDOWN,this.shutdown,this),i.on(a.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});o.register("LightsPlugin",r,"lights"),f.exports=r},83321:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(64937),o=t(75606),a=t(18693),r=t(89980),i=t(53267),n=t(67623),u=t(73329),s=t(16650),l=t(23464),v=t(23701),c=t(17922),g=t(70015),y=t(85769),E=new h({Extends:r,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.Mask,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Size,m.Texture,m.Transform,m.Visible,l],initialize:function(T,A,P,M,w,L,F,D,N,B,b,W){A===void 0&&(A=0),P===void 0&&(P=0),M===void 0&&(M="__WHITE"),r.call(this,T,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new g,this.modelScale=new g(1,1,1),this.modelRotation=new g,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new s,this.viewPosition=new g,this.viewMatrix=new s,this.projectionMatrix=new s,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var Y=T.sys.renderer;this.setPosition(A,P),this.setTexture(M,w),this.setSize(Y.width,Y.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(Y.width,Y.height),L&&this.addVertices(L,F,D,N,B,b,W)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(C){return this.viewPosition.addScale(g.LEFT,C),this.dirtyCache[10]=1,this},panY:function(C){return this.viewPosition.y+=g.DOWN.y*C,this.dirtyCache[10]=1,this},panZ:function(C){return this.viewPosition.z+=C,this.dirtyCache[10]=1,this},setPerspective:function(C,T,A,P,M){return A===void 0&&(A=45),P===void 0&&(P=.01),M===void 0&&(M=1e3),this.fov=A,this.projectionMatrix.perspective(o(A),C/T,P,M),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(C,T,A,P){return C===void 0&&(C=this.scene.sys.renderer.getAspectRatio()),T===void 0&&(T=1),A===void 0&&(A=-1e3),P===void 0&&(P=1e3),this.fov=0,this.projectionMatrix.ortho(-C,C,-T,T,A,P),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(C){C.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(C,T,A,P,M,w,L,F,D){var N=this.scene.sys.cache.obj.get(C),B;return N&&(B=i(N,this,T,A,P,M,w,L,F,D)),(!B||B.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",C),this},sortByDepth:function(C,T){return C.depth-T.depth},depthSort:function(){return c(this.faces,this.sortByDepth),this},addVertex:function(C,T,A,P,M,w,L){var F=new y(C,T,A,P,M,w,L);return this.vertices.push(F),F},addFace:function(C,T,A){var P=new a(C,T,A);return this.faces.push(P),this.dirtyCache[9]=-1,P},addVertices:function(C,T,A,P,M,w,L){var F=n(C,T,A,P,M,w,L);return F?(this.faces=this.faces.concat(F.faces),this.vertices=this.vertices.concat(F.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(C){return this.faces[C]},hasFaceAt:function(C,T,A){A===void 0&&(A=this.scene.sys.cameras.main);for(var P=u(this,A).calc,M=this.faces,w=0;w<M.length;w++){var L=M[w];if(L.contains(C,T,P))return!0}return!1},getFaceAt:function(C,T,A){A===void 0&&(A=this.scene.sys.cameras.main);for(var P=u(this,A).calc,M=this.faces,w=[],L=0;L<M.length;L++){var F=M[L];F.contains(C,T,P)&&w.push(F)}return c(w,this.sortByDepth)},setDebug:function(C,T){return this.debugGraphic=C,!C&&!T?this.debugCallback=null:T?this.debugCallback=T:this.debugCallback=this.renderDebug,this},isDirty:function(){var C=this.modelPosition,T=this.modelRotation,A=this.modelScale,P=this.dirtyCache,M=C.x,w=C.y,L=C.z,F=T.x,D=T.y,N=T.z,B=A.x,b=A.y,W=A.z,Y=this.getFaceCount(),K=P[0],G=P[1],z=P[2],O=P[3],V=P[4],U=P[5],X=P[6],H=P[7],Q=P[8],$=P[9];return P[0]=M,P[1]=w,P[2]=L,P[3]=F,P[4]=D,P[5]=N,P[6]=B,P[7]=b,P[8]=W,P[9]=Y,K!==M||G!==w||z!==L||O!==F||V!==D||U!==N||X!==B||H!==b||Q!==W||$!==Y},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var C=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!C[10]&&!this.isDirty())){var T=this.width,A=this.height,P=this.viewMatrix,M=this.viewPosition;C[10]&&(P.identity(),P.translate(M),P.invert(),C[10]=0);var w=this.transformMatrix;w.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var L=M.z,F=this.faces,D=0;D<F.length;D++)F[D].transformCoordinatesLocal(w,T,A,L);this.depthSort()}},renderDebug:function(C,T){for(var A=C.debugGraphic,P=0;P<T.length;P++){var M=T[P],w=M.vertex1.tx,L=M.vertex1.ty,F=M.vertex2.tx,D=M.vertex2.ty,N=M.vertex3.tx,B=M.vertex3.ty;A.strokeTriangle(w,L,F,D,N,B)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(){var C=this.faces,T=function(A,P,M){for(var w=0;w<C.length;w++){var L=C[w];if(L.contains(P,M))return!0}return!1};return this.scene.sys.input.enable(this,T),this},setTint:function(C){C===void 0&&(C=16777215);for(var T=this.vertices,A=0;A<T.length;A++)T[A].color=C;return this},uvScroll:function(C,T){for(var A=this.faces,P=0;P<A.length;P++)A[P].scrollUV(C,T);return this},uvScale:function(C,T){for(var A=this.faces,P=0;P<A.length;P++)A[P].scaleUV(C,T);return this},tint:{set:function(C){this.setTint(C)}},rotateX:{get:function(){return v(this.modelRotation.x)},set:function(C){this.modelRotation.x=o(C)}},rotateY:{get:function(){return v(this.modelRotation.y)},set:function(C){this.modelRotation.y=o(C)}},rotateZ:{get:function(){return v(this.modelRotation.z)},set:function(C){this.modelRotation.z=o(C)}}});f.exports=E},6317:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(){};f.exports=S},41839:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(88933),m=t(99325),o=t(20494),a=t(10850),r=t(83321);m.register("mesh",function(i,n){i===void 0&&(i={});var u=o(i,"key",null),s=o(i,"frame",null),l=a(i,"vertices",[]),v=a(i,"uvs",[]),c=a(i,"indicies",[]),g=a(i,"containsZ",!1),y=a(i,"normals",[]),E=a(i,"colors",16777215),C=a(i,"alphas",1),T=new r(this.scene,0,0,u,s,l,v,c,g,y,E,C);return n!==void 0&&(i.add=n),h(this.scene,T,i),T})},8767:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(83321),m=t(61286);m.register("mesh",function(o,a,r,i,n,u,s,l,v,c,g){return this.displayList.add(new h(this.scene,o,a,r,i,n,u,s,l,v,c,g))})},23464:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(57410),o=t(6317),f.exports={renderWebGL:m,renderCanvas:o}},57410:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(73329),m=function(o,a,r,i){var n=a.faces,u=n.length;if(u!==0){r.addToRenderList(a);var s=o.pipelines.set(a.pipeline,a),l=h(a,r,i).calc;o.pipelines.preBatch(a);for(var v=s.setGameObject(a),c=s.vertexViewF32,g=s.vertexViewU32,y=s.vertexCount*s.currentShader.vertexComponentCount-1,E=a.tintFill,C=[],T=a.debugCallback,A=l.a,P=l.b,M=l.c,w=l.d,L=l.e,F=l.f,D=a.viewPosition.z,N=a.hideCCW,B=r.roundPixels,b=r.alpha*a.alpha,W=0,Y=0;Y<u;Y++){var K=n[Y];K.isInView(r,N,D,b,A,P,M,w,L,F,B)&&(s.shouldFlush(3)&&(s.flush(),v=s.setGameObject(a),y=0),y=K.load(c,g,y,v,E),W++,s.vertexCount+=3,s.currentBatch.count=s.vertexCount-s.currentBatch.start,T&&C.push(K))}a.totalFrame+=W,T&&T.call(a,a,C),o.pipelines.postBatch(a)}};f.exports=m},44139:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(64937),o=t(89980),a=t(94456),r=t(85769),i=new h({Extends:o,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.GetBounds,m.Mask,m.Origin,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Texture,m.Transform,m.Visible,a],initialize:function(u,s,l,v,c,g,y,E,C,T,A){g===void 0&&(g=256),y===void 0&&(y=256),E===void 0&&(E=10),C===void 0&&(C=10),T===void 0&&(T=0),A===void 0&&(A=0),o.call(this,u,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1,this.is3Slice=T===0&&A===0;for(var P=this.is3Slice?18:54,M=0;M<P;M++)this.vertices.push(new r);this.setPosition(s,l),this.setTexture(v,c),this.setSlices(g,y,E,C,T,A),this.setOrigin(.5,.5),this.initPipeline(),this.initPostPipeline()},setSlices:function(n,u,s,l,v,c){n===void 0&&(n=256),u===void 0&&(u=256),s===void 0&&(s=10),l===void 0&&(l=10),v===void 0&&(v=0),c===void 0&&(c=0);var g=v===0&&c===0;return this.is3Slice!==g?console.warn("Cannot change 9 slice to 3 slice"):(this._width=n,this._height=u,this.leftWidth=s,this.rightWidth=l,this.topHeight=v,this.bottomHeight=c,this.is3Slice&&(u=this.frame.height,this._height=u,this.topHeight=u,this.bottomHeight=0),this.updateVertices(),this.updateUVs()),this},updateUVs:function(){var n=this.leftWidth,u=this.rightWidth,s=this.topHeight,l=this.bottomHeight,v=this.frame.width,c=this.frame.height;this.updateQuadUVs(0,0,0,n/v,s/c),this.updateQuadUVs(6,n/v,0,1-u/v,s/c),this.updateQuadUVs(12,1-u/v,0,1,s/c),this.is3Slice||(this.updateQuadUVs(18,0,s/c,n/v,1-l/c),this.updateQuadUVs(24,n/v,s/c,1-u/v,1-l/c),this.updateQuadUVs(30,1-u/v,s/c,1,1-l/c),this.updateQuadUVs(36,0,1-l/c,n/v,1),this.updateQuadUVs(42,n/v,1-l/c,1-u/v,1),this.updateQuadUVs(48,1-u/v,1-l/c,1,1))},updateVertices:function(){var n=this.leftWidth,u=this.rightWidth,s=this.topHeight,l=this.bottomHeight,v=this.width,c=this.height;this.updateQuad(0,-.5,.5,-.5+n/v,.5-s/c),this.updateQuad(6,-.5+n/v,.5,.5-u/v,.5-s/c),this.updateQuad(12,.5-u/v,.5,.5,.5-s/c),this.is3Slice||(this.updateQuad(18,-.5,.5-s/c,-.5+n/v,-.5+l/c),this.updateQuad(24,-.5+n/v,.5-s/c,.5-u/v,-.5+l/c),this.updateQuad(30,.5-u/v,.5-s/c,.5,-.5+l/c),this.updateQuad(36,-.5,-.5+l/c,-.5+n/v,-.5),this.updateQuad(42,-.5+n/v,-.5+l/c,.5-u/v,-.5),this.updateQuad(48,.5-u/v,-.5+l/c,.5,-.5))},updateQuad:function(n,u,s,l,v){var c=this.width,g=this.height,y=this.originX,E=this.originY,C=this.vertices;C[n+0].resize(u,s,c,g,y,E),C[n+1].resize(u,v,c,g,y,E),C[n+2].resize(l,s,c,g,y,E),C[n+3].resize(u,v,c,g,y,E),C[n+4].resize(l,v,c,g,y,E),C[n+5].resize(l,s,c,g,y,E)},updateQuadUVs:function(n,u,s,l,v){var c=this.vertices,g=this.frame,y=g.u0,E=g.v0,C=g.u1,T=g.v1;if(y!==0||C!==1){var A=C-y;u=y+u*A,l=y+l*A}if(E!==0||T!==1){var P=T-E;s=E+s*P,v=E+v*P}c[n+0].setUVs(u,s),c[n+1].setUVs(u,v),c[n+2].setUVs(l,s),c[n+3].setUVs(u,v),c[n+4].setUVs(l,v),c[n+5].setUVs(l,s)},clearTint:function(){return this.setTint(16777215),this},setTint:function(n){return n===void 0&&(n=16777215),this.tint=n,this.tintFill=!1,this},setTintFill:function(n){return this.setTint(n),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(n){this._width=Math.max(n,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(n){this.is3Slice||(this._height=Math.max(n,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}},setSize:function(n,u){this.width=n,this.height=u;var s=this.input;return s&&!s.customHitArea&&(s.hitArea.width=this.width,s.hitArea.height=this.height),this},setDisplaySize:function(n,u){return this.displayWidth=n,this.displayHeight=u,this},originX:{get:function(){return this._originX},set:function(n){this._originX=n,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(n){this._originY=n,this.updateVertices()}},setOrigin:function(n,u){return n===void 0&&(n=.5),u===void 0&&(u=n),this._originX=n,this._originY=u,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var n=this.frame.height;this._height=n,this.topHeight=n,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});f.exports=i},40964:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(88933),m=t(99325),o=t(20494),a=t(10850),r=t(44139);m.register("nineslice",function(i,n){i===void 0&&(i={});var u=o(i,"key",null),s=o(i,"frame",null),l=a(i,"width",256),v=a(i,"height",256),c=a(i,"leftWidth",10),g=a(i,"rightWidth",10),y=a(i,"topHeight",0),E=a(i,"bottomHeight",0),C=new r(this.scene,0,0,u,s,l,v,c,g,y,E);return n!==void 0&&(i.add=n),h(this.scene,C,i),C})},53778:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(44139),m=t(61286);m.register("nineslice",function(o,a,r,i,n,u,s,l,v,c){return this.displayList.add(new h(this.scene,o,a,r,i,n,u,s,l,v,c))})},94456:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(27420),f.exports={renderWebGL:m,renderCanvas:o}},27420:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(73329),m=t(75512),o=function(a,r,i,n){var u=r.vertices,s=u.length;if(s!==0){i.addToRenderList(r);var l=a.pipelines.set(r.pipeline,r),v=h(r,i,n,!1).calc;a.pipelines.preBatch(r);var c=l.setGameObject(r),g=l.vertexViewF32,y=l.vertexViewU32,E=l.vertexCount*l.currentShader.vertexComponentCount-1,C=i.roundPixels,T=r.tintFill,A=i.alpha*r.alpha,P=m.getTintAppendFloatAlpha(r.tint,A),M=l.vertexAvailable(),w=-1;M<s&&(w=M);for(var L=0;L<s;L++){var F=u[L];L===w&&(l.flush(),c=l.setGameObject(r),E=0),g[++E]=v.getXRound(F.vx,F.vy,C),g[++E]=v.getYRound(F.vx,F.vy,C),g[++E]=F.u,g[++E]=F.v,g[++E]=c,g[++E]=T,y[++E]=P,l.vertexCount++,l.currentBatch.count=l.vertexCount-l.currentBatch.start}a.pipelines.postBatch(r)}};f.exports=o},19737:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(93025),o=t(22946),a=t(21902),r=t(4840),i=t(15978),n=new h({Extends:m,initialize:function(s){m.call(this,s,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var u=this.propertyValue,s=u,l=this.defaultEmit,v=this.defaultUpdate;if(this.method===9){this.start=u[0],this.ease=a("Linear"),this.interpolation=r("linear"),l=this.easedValueEmit,v=this.easeValueUpdate,s=u[0],this.active=!0;for(var c=0;c<u.length;c++){var g=i(u[c]);this.r.push(g.r),this.g.push(g.g),this.b.push(g.b)}}return this.onEmit=l,this.onUpdate=v,this.current=s,this},setEase:function(u){this.easeName=u,this.ease=a(u)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(u,s,l){var v=this.ease(l),c=this.interpolation(this.r,v),g=this.interpolation(this.g,v),y=this.interpolation(this.b,v),E=o(c,g,y);return this.current=E,E}});f.exports=n},93025:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(17489),m=t(82897),o=t(56694),a=t(61616),r=t(21902),i=t(72632),n=t(4840),u=t(88462),s=t(1071),l=new o({initialize:function(c,g,y){y===void 0&&(y=!1),this.propertyKey=c,this.propertyValue=g,this.defaultValue=g,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=y,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(v,c){v===void 0&&(v={}),c&&(this.propertyKey=c),this.propertyValue=i(v,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(v){var c;switch(this.method){case 1:case 3:case 8:c=v;break;case 2:this.propertyValue.indexOf(v)>=0&&(c=v);break;case 4:var g=(this.end-this.start)/this.steps;c=u(v,g),this.counter=c;break;case 5:case 6:case 7:c=m(v,this.start,this.end);break;case 9:c=this.start[0];break}return this.current=c,this},getMethod:function(){var v=this.propertyValue;if(v===null)return 0;var c=typeof v;if(c==="number")return 1;if(Array.isArray(v))return 2;if(c==="function")return 3;if(c==="object"){if(this.hasBoth(v,"start","end"))return this.has(v,"steps")?4:5;if(this.hasBoth(v,"min","max"))return 6;if(this.has(v,"random"))return 7;if(this.hasEither(v,"onEmit","onUpdate"))return 8;if(this.has(v,"interpolation"))return 9}return 0},setMethods:function(){var v=this.propertyValue,c=v,g=this.defaultEmit,y=this.defaultUpdate;switch(this.method){case 1:g=this.staticValueEmit;break;case 2:g=this.randomStaticValueEmit,c=v[0];break;case 3:this._onEmit=v,g=this.proxyEmit;break;case 4:this.start=v.start,this.end=v.end,this.steps=v.steps,this.counter=this.start,this.yoyo=this.has(v,"yoyo")?v.yoyo:!1,this.direction=0,g=this.steppedEmit,c=this.start;break;case 5:this.start=v.start,this.end=v.end;var E=this.has(v,"ease")?v.ease:"Linear";this.ease=r(E,v.easeParams),g=this.has(v,"random")&&v.random?this.randomRangedValueEmit:this.easedValueEmit,y=this.easeValueUpdate,c=this.start;break;case 6:this.start=v.min,this.end=v.max,g=this.has(v,"int")&&v.int?this.randomRangedIntEmit:this.randomRangedValueEmit,c=this.start;break;case 7:var C=v.random;Array.isArray(C)&&(this.start=C[0],this.end=C[1]),g=this.randomRangedIntEmit,c=this.start;break;case 8:this._onEmit=this.has(v,"onEmit")?v.onEmit:this.defaultEmit,this._onUpdate=this.has(v,"onUpdate")?v.onUpdate:this.defaultUpdate,g=this.proxyEmit,y=this.proxyUpdate;break;case 9:this.start=v.values;var T=this.has(v,"ease")?v.ease:"Linear";this.ease=r(T,v.easeParams),this.interpolation=n(v.interpolation),g=this.easedValueEmit,y=this.easeValueUpdate,c=this.start[0];break}return this.onEmit=g,this.onUpdate=y,this.current=c,this},has:function(v,c){return v.hasOwnProperty(c)},hasBoth:function(v,c,g){return v.hasOwnProperty(c)&&v.hasOwnProperty(g)},hasEither:function(v,c,g){return v.hasOwnProperty(c)||v.hasOwnProperty(g)},defaultEmit:function(v,c,g){return g},defaultUpdate:function(v,c,g,y){return y},proxyEmit:function(v,c,g){var y=this._onEmit(v,c,g);return this.current=y,y},proxyUpdate:function(v,c,g,y){var E=this._onUpdate(v,c,g,y);return this.current=E,E},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var v=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[v],this.current},randomRangedValueEmit:function(v,c){var g=a(this.start,this.end);return v&&v.data[c]&&(v.data[c].min=g,v.data[c].max=this.end),this.current=g,g},randomRangedIntEmit:function(v,c){var g=h(this.start,this.end);return v&&v.data[c]&&(v.data[c].min=g,v.data[c].max=this.end),this.current=g,g},steppedEmit:function(){var v=this.counter,c=v,g=(this.end-this.start)/this.steps;if(this.yoyo){var y;this.direction===0?(c+=g,c>=this.end&&(y=c-this.end,c=this.end-y,this.direction=1)):(c-=g,c<=this.start&&(y=this.start-c,c=this.start+y,this.direction=0)),this.counter=c}else this.counter=s(c+g,this.start,this.end);return this.current=v,v},easedValueEmit:function(v,c){if(v&&v.data[c]){var g=v.data[c];g.min=this.start,g.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(v,c,g){var y=v.data[c],E,C=this.ease(g);return this.interpolation?E=this.interpolation(this.start,C):E=(y.max-y.min)*C+y.min,this.current=E,E},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});f.exports=l},87811:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(72632),o=t(30891),a=new h({Extends:o,initialize:function(i,n,u,s,l){if(typeof i=="object"){var v=i;i=m(v,"x",0),n=m(v,"y",0),u=m(v,"power",0),s=m(v,"epsilon",100),l=m(v,"gravity",50)}else i===void 0&&(i=0),n===void 0&&(n=0),u===void 0&&(u=0),s===void 0&&(s=100),l===void 0&&(l=50);o.call(this,i,n,!0),this._gravity=l,this._power=u*l,this._epsilon=s*s},update:function(r,i){var n=this.x-r.x,u=this.y-r.y,s=n*n+u*u;if(s!==0){var l=Math.sqrt(s);s<this._epsilon&&(s=this._epsilon);var v=this._power*i/(s*l)*100;r.velocityX+=n*v,r.velocityY+=u*v}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(r){this._epsilon=r*r}},power:{get:function(){return this._power/this._gravity},set:function(r){this._power=r*this._gravity}},gravity:{get:function(){return this._gravity},set:function(r){var i=this.power;this._gravity=r,this.power=i}}});f.exports=a},14909:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(16569),m=t(82897),o=t(56694),a=t(75606),r=t(74118),i=t(2386),n=t(93736),u=new o({initialize:function(l){this.emitter=l,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new n,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=l.scene,this.anims=new h(this),this.bounds=new r},emit:function(s,l,v,c,g,y){return this.emitter.emit(s,l,v,c,g,y)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(s,l){s===void 0&&(s=0),l===void 0&&(l=0),this.x=s,this.y=l},fire:function(s,l){var v=this.emitter,c=v.ops,g=v.getAnim();if(g?this.anims.play(g):(this.frame=v.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(v.getEmitZone(this),s===void 0?this.x+=c.x.onEmit(this,"x"):c.x.steps>0?this.x+=s+c.x.onEmit(this,"x"):this.x+=s,l===void 0?this.y+=c.y.onEmit(this,"y"):c.y.steps>0?this.y+=l+c.y.onEmit(this,"y"):this.y+=l,this.life=c.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=c.delay.onEmit(this,"delay"),this.holdCurrent=c.hold.onEmit(this,"hold"),this.scaleX=c.scaleX.onEmit(this,"scaleX"),this.scaleY=c.scaleY.active?c.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=c.rotate.onEmit(this,"rotate"),this.rotation=a(this.angle),v.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&v.getDeathZone(this))return this.lifeCurrent=0,!1;var y=c.speedX.onEmit(this,"speedX"),E=c.speedY.active?c.speedY.onEmit(this,"speedY"):y;if(v.radial){var C=a(c.angle.onEmit(this,"angle"));this.velocityX=Math.cos(C)*Math.abs(y),this.velocityY=Math.sin(C)*Math.abs(E)}else if(v.moveTo){var T=c.moveToX.onEmit(this,"moveToX"),A=c.moveToY.onEmit(this,"moveToY"),P=this.life/1e3;this.velocityX=(T-this.x)/P,this.velocityY=(A-this.y)/P}else this.velocityX=y,this.velocityY=E;return v.acceleration&&(this.accelerationX=c.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=c.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=c.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=c.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=c.bounce.onEmit(this,"bounce"),this.alpha=c.alpha.onEmit(this,"alpha"),c.color.active?this.tint=c.color.onEmit(this,"tint"):this.tint=c.tint.onEmit(this,"tint"),!0},update:function(s,l,v){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=s,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=s,!1;this.anims.update(0,s);var c=this.emitter,g=c.ops,y=1-this.lifeCurrent/this.life;if(this.lifeT=y,this.x=g.x.onUpdate(this,"x",y,this.x),this.y=g.y.onUpdate(this,"y",y,this.y),c.moveTo){var E=g.moveToX.onUpdate(this,"moveToX",y,c.moveToX),C=g.moveToY.onUpdate(this,"moveToY",y,c.moveToY),T=this.lifeCurrent/1e3;this.velocityX=(E-this.x)/T,this.velocityY=(C-this.y)/T}return this.computeVelocity(c,s,l,v,y),this.scaleX=g.scaleX.onUpdate(this,"scaleX",y,this.scaleX),this.scaleY=this.scaleX,g.scaleY.active&&(this.scaleY=g.scaleY.onUpdate(this,"scaleY",y,this.scaleY)),this.angle=g.rotate.onUpdate(this,"rotate",y,this.angle),this.rotation=a(this.angle),c.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=g.alpha.onUpdate(this,"alpha",y,this.alpha),g.color.active?this.tint=g.color.onUpdate(this,"color",y,this.tint):this.tint=g.tint.onUpdate(this,"tint",y,this.tint),this.lifeCurrent-=s,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(s,l,v,c,g){var y=s.ops,E=this.velocityX,C=this.velocityY,T=y.accelerationX.onUpdate(this,"accelerationX",g,this.accelerationX),A=y.accelerationY.onUpdate(this,"accelerationY",g,this.accelerationY),P=y.maxVelocityX.onUpdate(this,"maxVelocityX",g,this.maxVelocityX),M=y.maxVelocityY.onUpdate(this,"maxVelocityY",g,this.maxVelocityY);this.bounce=y.bounce.onUpdate(this,"bounce",g,this.bounce),E+=s.gravityX*v+T*v,C+=s.gravityY*v+A*v,E=m(E,-P,P),C=m(C,-M,M),this.velocityX=E,this.velocityY=C,this.x+=E*v,this.y+=C*v,s.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var w=0;w<c.length;w++){var L=c[w];L.active&&L.update(this,l,v,g)}},setSizeToFrame:function(){},getBounds:function(s){s===void 0&&(s=this.emitter.getWorldTransformMatrix());var l=Math.abs(s.scaleX)*this.scaleX,v=Math.abs(s.scaleY)*this.scaleY,c=this.x,g=this.y,y=this.rotation,E=this.frame.width*l/2,C=this.frame.height*v/2,T=this.bounds,A=new n(c-E,g-C),P=new n(c+E,g-C),M=new n(c-E,g+C),w=new n(c+E,g+C);return y!==0&&(i(A,c,g,y),i(P,c,g,y),i(M,c,g,y),i(w,c,g,y)),s.transformPoint(A.x,A.y,A),s.transformPoint(P.x,P.y,P),s.transformPoint(M.x,M.y,M),s.transformPoint(w.x,w.y,w),T.x=Math.min(A.x,P.x,M.x,w.x),T.y=Math.min(A.y,P.y,M.y,w.y),T.width=Math.max(A.x,P.x,M.x,w.x)-T.x,T.height=Math.max(A.y,P.y,M.y,w.y)-T.y,T},destroy:function(){this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});f.exports=u},73106:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(30891),o=t(74118),a=new h({Extends:m,initialize:function(i,n,u,s,l,v,c,g){l===void 0&&(l=!0),v===void 0&&(v=!0),c===void 0&&(c=!0),g===void 0&&(g=!0),m.call(this,i,n,!0),this.bounds=new o(i,n,u,s),this.collideLeft=l,this.collideRight=v,this.collideTop=c,this.collideBottom=g},update:function(r){var i=this.bounds,n=-r.bounce,u=r.worldPosition;u.x<i.x&&this.collideLeft?(r.x+=i.x-u.x,r.velocityX*=n):u.x>i.right&&this.collideRight&&(r.x-=u.x-i.right,r.velocityX*=n),u.y<i.y&&this.collideTop?(r.y+=i.y-u.y,r.velocityY*=n):u.y>i.bottom&&this.collideBottom&&(r.y-=u.y-i.bottom,r.velocityY*=n)}});f.exports=a},9216:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(64937),o=t(48129),a=t(29538),r=t(69361),i=t(54213),n=t(19737),u=t(93025),s=t(40629),l=t(89980),v=t(72632),c=t(72861),g=t(87811),y=t(53523),E=t(19256),C=t(7782),T=t(71207),A=t(14655),P=t(14909),M=t(68433),w=t(74118),L=t(90205),F=t(66458),D=t(69116),N=t(17922),B=t(69360),b=t(93736),W=t(1071),Y=t(73106),K=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],G=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],z=new h({Extends:l,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.Mask,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Texture,m.Transform,m.Visible,D],initialize:function(V,U,X,H,Q){l.call(this,V,"ParticleEmitter"),this.particleClass=P,this.ops={accelerationX:new u("accelerationX",0),accelerationY:new u("accelerationY",0),alpha:new u("alpha",1),angle:new u("angle",{min:0,max:360},!0),bounce:new u("bounce",0),color:new n("color"),delay:new u("delay",0,!0),hold:new u("hold",0,!0),lifespan:new u("lifespan",1e3,!0),maxVelocityX:new u("maxVelocityX",1e4),maxVelocityY:new u("maxVelocityY",1e4),moveToX:new u("moveToX",0),moveToY:new u("moveToY",0),quantity:new u("quantity",1,!0),rotate:new u("rotate",0),scaleX:new u("scaleX",1),scaleY:new u("scaleY",1),speedX:new u("speedX",0,!0),speedY:new u("speedY",0,!0),tint:new u("tint",16777215),x:new u("x",0),y:new u("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new b,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new B,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new T(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(U,X),this.setTexture(H),Q&&this.setConfig(Q)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(O){if(!O)return this;var V=0,U="",X=this.ops;for(V=0;V<G.length;V++)U=G[V],X[U].loadConfig(O);for(V=0;V<K.length;V++)U=K[V],E(O,U)&&(this[U]=v(O,U));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,E(O,"speed")&&(X.speedX.loadConfig(O,"speed"),X.speedY.active=!1),(y(O,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),E(O,"scale")&&(X.scaleX.loadConfig(O,"scale"),X.scaleY.active=!1),E(O,"callbackScope")){var H=v(O,"callbackScope",null);this.emitCallbackScope=H,this.deathCallbackScope=H}if(E(O,"emitZone")&&this.addEmitZone(O.emitZone),E(O,"deathZone")&&this.addDeathZone(O.deathZone),E(O,"bounds")){var Q=this.addParticleBounds(O.bounds);Q.collideLeft=v(O,"collideLeft",!0),Q.collideRight=v(O,"collideRight",!0),Q.collideTop=v(O,"collideTop",!0),Q.collideBottom=v(O,"collideBottom",!0)}return E(O,"followOffset")&&this.followOffset.setFromObject(v(O,"followOffset",0)),E(O,"texture")&&this.setTexture(O.texture),E(O,"frame")?this.setEmitterFrame(O.frame):E(O,"anim")&&this.setAnim(O.anim),E(O,"reserve")&&this.reserve(O.reserve),E(O,"advance")&&this.fastForward(O.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(s.START,this),this},toJSON:function(){var O=o(this),V=0,U="";for(V=0;V<K.length;V++)U=K[V],O[U]=this[U];var X=this.ops;for(V=0;V<G.length;V++)U=G[V],X[U]&&(O[U]=X[U].toJSON());return X.speedY.active||(delete O.speedX,O.speed=X.speedX.toJSON()),this.scaleX===this.scaleY&&(delete O.scaleX,delete O.scaleY,O.scale=X.scaleX.toJSON()),O},resetCounters:function(O,V){var U=this.counters;U.fill(0),U[0]=O,V&&(U[5]=1)},startFollow:function(O,V,U,X){return V===void 0&&(V=0),U===void 0&&(U=0),X===void 0&&(X=!1),this.follow=O,this.followOffset.set(V,U),this.trackVisible=X,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var O=this.frames,V=O.length,U;return V===1?U=O[0]:this.randomFrame?U=c(O):(U=O[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===V&&(this.currentFrame=0))),this.texture.get(U)},setEmitterFrame:function(O,V,U){V===void 0&&(V=!0),U===void 0&&(U=1),this.randomFrame=V,this.frameQuantity=U,this.currentFrame=0;var X=typeof O;if(this.frames.length=0,Array.isArray(O))this.frames=this.frames.concat(O);else if(X==="string"||X==="number")this.frames.push(O);else if(X==="object"){var H=O;O=v(H,"frames",null),O&&(this.frames=this.frames.concat(O));var Q=v(H,"cycle",!1);this.randomFrame=!Q,this.frameQuantity=v(H,"quantity",U)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var O=this.anims,V=O.length;if(V===0)return null;if(V===1)return O[0];if(this.randomAnim)return c(O);var U=O[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=W(this.currentAnim+1,0,V-1)),U},setAnim:function(O,V,U){V===void 0&&(V=!0),U===void 0&&(U=1),this.randomAnim=V,this.animQuantity=U,this.currentAnim=0;var X=typeof O;if(this.anims.length=0,Array.isArray(O))this.anims=this.anims.concat(O);else if(X==="string")this.anims.push(O);else if(X==="object"){var H=O;O=v(H,"anims",null),O&&(this.anims=this.anims.concat(O));var Q=v(H,"cycle",!1);this.randomAnim=!Q,this.animQuantity=v(H,"quantity",U)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(O){return O===void 0&&(O=!0),this.radial=O,this},addParticleBounds:function(O,V,U,X,H,Q,$,k){if(typeof O=="object"){var J=O;O=J.x,V=J.y,U=E(J,"w")?J.w:J.width,X=E(J,"h")?J.h:J.height}return this.addParticleProcessor(new Y(O,V,U,X,H,Q,$,k))},setParticleSpeed:function(O,V){return V===void 0&&(V=O),this.ops.speedX.onChange(O),O===V?this.ops.speedY.active=!1:this.ops.speedY.onChange(V),this.radial=!0,this},setParticleScale:function(O,V){return O===void 0&&(O=1),V===void 0&&(V=O),this.ops.scaleX.onChange(O),this.ops.scaleY.onChange(V),this},setParticleGravity:function(O,V){return this.gravityX=O,this.gravityY=V,this},setParticleAlpha:function(O){return this.ops.alpha.onChange(O),this},setParticleTint:function(O){return this.ops.tint.onChange(O),this},setEmitterAngle:function(O){return this.ops.angle.onChange(O),this},setParticleLifespan:function(O){return this.ops.lifespan.onChange(O),this},setQuantity:function(O){return this.quantity=O,this},setFrequency:function(O,V){return this.frequency=O,this.flowCounter=O>0?O:0,V&&(this.quantity=V),this},addDeathZone:function(O){Array.isArray(O)||(O=[O]);for(var V,U=this.deathZones,X=0;X<O.length;X++)if(V=O[X],V instanceof r)U.push(V);else if(typeof V.contains=="function")V=new r(V,!0),U.push(V);else{var H=v(V,"type","onEnter"),Q=v(V,"source",null);if(Q&&typeof Q.contains=="function"){var $=H==="onEnter";V=new r(Q,$),U.push(V)}}return V},removeDeathZone:function(O){return F(this.deathZones,O),this},addEmitZone:function(O){Array.isArray(O)||(O=[O]);for(var V,U=this.emitZones,X=[],H=0;H<O.length;H++){if(V=O[H],V instanceof M||V instanceof i)U.push(V);else{var Q=v(V,"type","random"),$=v(V,"source",null);if(Q==="random")V=new M($);else if(Q==="edge"){var k=v(V,"quantity",1),J=v(V,"stepRate",0),Z=v(V,"yoyo",!1),j=v(V,"seamless",!0),_=v(V,"total",-1);V=new i($,k,J,Z,j,_)}V&&U.push(V)}X.push(V)}return X},removeEmitZone:function(O){return F(this.emitZones,O),this.zoneIndex=0,this},getEmitZone:function(O){var V=this.emitZones,U=V.length;if(U!==0){var X=V[this.zoneIndex];X.getPoint(O),X.total>-1&&(this.zoneTotal++,this.zoneTotal===X.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===U&&(this.zoneIndex=0)))}},getDeathZone:function(O){for(var V=this.deathZones,U=0;U<V.length;U++){var X=V[U];if(X.willKill(O))return this.emit(s.DEATH_ZONE,this,O,X),!0}return!1},setEmitZone:function(O){var V;return isFinite(O)?V=O:V=this.emitZones.indexOf(O),V>=0&&(this.zoneIndex=V),this},addParticleProcessor:function(O){return this.processors.exists(O)||(O.emitter&&O.emitter.removeParticleProcessor(O),this.processors.add(O),O.emitter=this),O},removeParticleProcessor:function(O){return this.processors.exists(O)&&(this.processors.remove(O,!0),O.emitter=null),O},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(O){return this.addParticleProcessor(new g(O))},reserve:function(O){var V=this.dead;if(this.maxParticles>0){var U=this.getParticleCount();U+O>this.maxParticles&&(O=this.maxParticles-(U+O))}for(var X=0;X<O;X++)V.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(O,V){return O===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof O=="function"&&(this.emitCallback=O,V&&(this.emitCallbackScope=V)),this},onParticleDeath:function(O,V){return O===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof O=="function"&&(this.deathCallback=O,V&&(this.deathCallbackScope=V)),this},killAll:function(){for(var O=this.dead,V=this.alive;V.length>0;)O.push(V.pop());return this},forEachAlive:function(O,V){for(var U=this.alive,X=U.length,H=0;H<X;H++)O.call(V,U[H],this);return this},forEachDead:function(O,V){for(var U=this.dead,X=U.length,H=0;H<X;H++)O.call(V,U[H],this);return this},start:function(O,V){return O===void 0&&(O=0),this.emitting||(O>0&&this.fastForward(O),this.emitting=!0,this.resetCounters(this.frequency,!0),V!==void 0&&(this.duration=Math.abs(V)),this.emit(s.START,this)),this},stop:function(O){return O===void 0&&(O=!1),this.emitting&&(this.emitting=!1,O&&this.killAll(),this.emit(s.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(O,V){return O===void 0&&(O=""),V===void 0&&(V=this.true),this.sortProperty=O,this.sortOrderAsc=V,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(O){return this.sortProperty!==""?O=this.depthSortCallback:O=null,this.sortCallback=O,this},depthSort:function(){return N(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(O,V){var U=this.sortProperty;return this.sortOrderAsc?O[U]-V[U]:V[U]-O[U]},flow:function(O,V,U){return V===void 0&&(V=1),this.emitting=!1,this.frequency=O,this.quantity=V,U!==void 0&&(this.stopAfter=U),this.start()},explode:function(O,V,U){this.frequency=-1,this.resetCounters(-1,!0);var X=this.emitParticle(O,V,U);return this.emit(s.EXPLODE,this,X),X},emitParticleAt:function(O,V,U){return this.emitParticle(U,O,V)},emitParticle:function(O,V,U){if(!this.atLimit()){O===void 0&&(O=this.ops.quantity.onEmit());for(var X=this.dead,H=this.stopAfter,Q=this.follow?this.follow.x+this.followOffset.x:V,$=this.follow?this.follow.y+this.followOffset.y:U,k=0;k<O;k++){var J=X.pop();if(J||(J=new this.particleClass(this)),J.fire(Q,$)?(this.particleBringToTop?this.alive.push(J):this.alive.unshift(J),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,J,this)):this.dead.push(J),H>0&&(this.stopCounter++,this.stopCounter>=H)||this.atLimit())break}return J}},fastForward:function(O,V){V===void 0&&(V=1e3/60);var U=0;for(this.skipping=!0;U<Math.abs(O);)this.preUpdate(0,V),U+=V;return this.skipping=!1,this},preUpdate:function(O,V){V*=this.timeScale;var U=V/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var X=this.getProcessors(),H=this.alive,Q=this.dead,$=0,k=[],J=H.length;for($=0;$<J;$++){var Z=H[$];Z.update(V,U,X)&&k.push({index:$,particle:Z})}if(J=k.length,J>0){var j=this.deathCallback,_=this.deathCallbackScope;for($=J-1;$>=0;$--){var q=k[$];H.splice(q.index,1),Q.push(q.particle),j&&j.call(_,q.particle),q.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&H.length===0&&(this.completeFlag=0,this.emit(s.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=V;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=V,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(O){for(var V=this.getWorldTransformMatrix(),U=this.alive,X=U.length,H=[],Q=0;Q<X;Q++){var $=U[Q];L(O,$.getBounds(V))&&H.push($)}return H},getBounds:function(O,V,U,X){O===void 0&&(O=0),V===void 0&&(V=0),U===void 0&&(U=1e3/60),X===void 0&&(X=new w);var H=this.getWorldTransformMatrix(),Q,$,k=this.alive,J=!1;if(X.setTo(0,0,0,0),V>0){var Z=0;for(this.skipping=!0;Z<Math.abs(V);){for(this.preUpdate(0,U),Q=0;Q<k.length;Q++)$=k[Q].getBounds(H),J?A(X,$):(J=!0,a($,X));Z+=U}this.skipping=!1}else for(Q=0;Q<k.length;Q++)$=k[Q].getBounds(H),J?A(X,$):(J=!0,a($,X));return O>0&&C(X,O,O),X},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(O){this.ops.x.onChange(O)}},particleY:{get:function(){return this.ops.y.current},set:function(O){this.ops.y.onChange(O)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(O){this.ops.accelerationX.onChange(O)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(O){this.ops.accelerationY.onChange(O)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(O){this.ops.maxVelocityX.onChange(O)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(O){this.ops.maxVelocityY.onChange(O)}},speed:{get:function(){return this.ops.speedX.current},set:function(O){this.ops.speedX.onChange(O),this.ops.speedY.onChange(O)}},speedX:{get:function(){return this.ops.speedX.current},set:function(O){this.ops.speedX.onChange(O)}},speedY:{get:function(){return this.ops.speedY.current},set:function(O){this.ops.speedY.onChange(O)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(O){this.ops.moveToX.onChange(O)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(O){this.ops.moveToY.onChange(O)}},bounce:{get:function(){return this.ops.bounce.current},set:function(O){this.ops.bounce.onChange(O)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(O){this.ops.scaleX.onChange(O)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(O){this.ops.scaleY.onChange(O)}},particleColor:{get:function(){return this.ops.color.current},set:function(O){this.ops.color.onChange(O)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(O){this.ops.color.setEase(O)}},particleTint:{get:function(){return this.ops.tint.current},set:function(O){this.ops.tint.onChange(O)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(O){this.ops.alpha.onChange(O)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(O){this.ops.lifespan.onChange(O)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(O){this.ops.angle.onChange(O)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(O){this.ops.rotate.onChange(O)}},quantity:{get:function(){return this.ops.quantity.current},set:function(O){this.ops.quantity.onChange(O)}},delay:{get:function(){return this.ops.delay.current},set:function(O){this.ops.delay.onChange(O)}},hold:{get:function(){return this.ops.hold.current},set:function(O){this.ops.hold.onChange(O)}},flowCounter:{get:function(){return this.counters[0]},set:function(O){this.counters[0]=O}},frameCounter:{get:function(){return this.counters[1]},set:function(O){this.counters[1]=O}},animCounter:{get:function(){return this.counters[2]},set:function(O){this.counters[2]=O}},elapsed:{get:function(){return this.counters[3]},set:function(O){this.counters[3]=O}},stopCounter:{get:function(){return this.counters[4]},set:function(O){this.counters[4]=O}},completeFlag:{get:function(){return this.counters[5]},set:function(O){this.counters[5]=O}},zoneIndex:{get:function(){return this.counters[6]},set:function(O){this.counters[6]=O}},zoneTotal:{get:function(){return this.counters[7]},set:function(O){this.counters[7]=O}},currentFrame:{get:function(){return this.counters[8]},set:function(O){this.counters[8]=O}},currentAnim:{get:function(){return this.counters[9]},set:function(O){this.counters[9]=O}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var O,V=this.ops;for(O=0;O<G.length;O++){var U=G[O];V[U].destroy()}for(O=0;O<this.alive.length;O++)this.alive[O].destroy();for(O=0;O<this.dead.length;O++)this.dead[O].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});f.exports=z},10456:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(90205),m=t(69360),o=new m,a=new m,r=new m,i=new m,n=function(u,s,l,v){var c=o,g=a,y=r,E=i;v?(E.loadIdentity(),E.multiply(v),E.translate(s.x,s.y),E.rotate(s.rotation),E.scale(s.scaleX,s.scaleY)):E.applyITRS(s.x,s.y,s.rotation,s.scaleX,s.scaleY);var C=u.currentContext,T=l.roundPixels,A=l.alpha,P=s.alpha,M=s.alive,w=M.length,L=s.viewBounds;if(!(!s.visible||w===0||L&&!h(L,l.worldView))){s.sortCallback&&s.depthSort(),l.addToRenderList(s);var F=s.scrollFactorX,D=s.scrollFactorY;C.save(),C.globalCompositeOperation=u.blendModes[s.blendMode];for(var N=0;N<w;N++){var B=M[N],b=B.alpha*P*A;if(!(b<=0||B.scaleX===0||B.scaleY===0)){y.applyITRS(B.x,B.y,B.rotation,B.scaleX,B.scaleY),c.copyFrom(l.matrix),c.multiplyWithOffset(E,-l.scrollX*F,-l.scrollY*D),y.e=B.x,y.f=B.y,c.multiply(y,g);var W=B.frame,Y=W.canvasData;if(Y.width>0&&Y.height>0){var K=-W.halfWidth,G=-W.halfHeight;C.globalAlpha=b,C.save(),g.setToContext(C),T&&(K=Math.round(K),G=Math.round(G)),C.imageSmoothingEnabled=!W.source.scaleMode,C.drawImage(W.source.image,Y.x,Y.y,Y.width,Y.height,K,G,Y.width,Y.height),C.restore()}}}C.restore()}};f.exports=n},765:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(88933),m=t(99325),o=t(20494),a=t(72632),r=t(9216);m.register("particles",function(i,n){i===void 0&&(i={});var u=o(i,"key",null),s=a(i,"config",null),l=new r(this.scene,0,0,u);return n!==void 0&&(i.add=n),h(this.scene,l,i),s&&l.setConfig(s),l})},81212:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61286),m=t(9216);h.register("particles",function(o,a,r,i){return o!==void 0&&typeof o=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new m(this.scene,o,a,r,i))})},69116:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(10275),o=t(10456),f.exports={renderWebGL:m,renderCanvas:o}},10275:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(90205),m=t(69360),o=t(75512),a=new m,r=new m,i=new m,n=new m,u=function(s,l,v,c){var g=s.pipelines.set(l.pipeline),y=a,E=r,C=i,T=n;c?(T.loadIdentity(),T.multiply(c),T.translate(l.x,l.y),T.rotate(l.rotation),T.scale(l.scaleX,l.scaleY)):T.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY);var A=v.roundPixels,P=o.getTintAppendFloatAlpha,M=v.alpha,w=l.alpha,L=l.frame.glTexture;s.pipelines.preBatch(l);var F=l.alive,D=F.length,N=l.viewBounds;if(!(D===0||N&&!h(N,v.worldView))){l.sortCallback&&l.depthSort();var B=g.setGameObject(l,l.frame);v.addToRenderList(l),y.copyFrom(v.matrix),y.multiplyWithOffset(T,-v.scrollX*l.scrollFactorX,-v.scrollY*l.scrollFactorY),s.setBlendMode(l.blendMode),l.mask&&(l.mask.preRenderWebGL(s,l,v),s.pipelines.set(l.pipeline));for(var b=l.tintFill,W=0;W<D;W++){var Y=F[W],K=Y.alpha*w*M;if(!(K<=0||Y.scaleX===0||Y.scaleY===0)){C.applyITRS(Y.x,Y.y,Y.rotation,Y.scaleX,Y.scaleY),C.e=Y.x,C.f=Y.y,y.multiply(C,E);var G=Y.frame,z=-G.halfWidth,O=-G.halfHeight,V=E.setQuad(z,O,z+G.width,O+G.height,A),U=P(Y.tint,K);g.shouldFlush(6)&&(g.flush(),B=g.setGameObject(l,l.frame)),g.batchQuad(l,V[0],V[1],V[2],V[3],V[4],V[5],V[6],V[7],G.u0,G.v0,G.u1,G.v1,U,U,U,U,b,L,B)}}l.mask&&l.mask.postRenderWebGL(s,v),s.pipelines.postBatch(l)}};f.exports=u},30891:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=new h({initialize:function(a,r,i){a===void 0&&(a=0),r===void 0&&(r=0),i===void 0&&(i=!0),this.emitter,this.x=a,this.y=r,this.active=i},update:function(){},destroy:function(){this.emitter=null}});f.exports=m},76100:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="complete"},26677:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="deathzone"},62736:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="explode"},56490:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="start"},85715:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="stop"},40629:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={COMPLETE:t(76100),DEATH_ZONE:t(26677),EXPLODE:t(62736),START:t(56490),STOP:t(85715)}},27684:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={EmitterColorOp:t(19737),EmitterOp:t(93025),Events:t(40629),GravityWell:t(87811),Particle:t(14909),ParticleBounds:t(73106),ParticleEmitter:t(9216),ParticleProcessor:t(30891),Zones:t(25962)}},69361:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=new h({initialize:function(a,r){this.source=a,this.killOnEnter=r},willKill:function(o){var a=o.worldPosition,r=this.source.contains(a.x,a.y);return r&&this.killOnEnter||!r&&!this.killOnEnter}});f.exports=m},54213:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=new h({initialize:function(a,r,i,n,u,s){n===void 0&&(n=!1),u===void 0&&(u=!0),s===void 0&&(s=-1),this.source=a,this.points=[],this.quantity=r,this.stepRate=i,this.yoyo=n,this.counter=-1,this.seamless=u,this._length=0,this._direction=0,this.total=s,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var o=this.points[0],a=this.points[this.points.length-1];o.x===a.x&&o.y===a.y&&this.points.pop()}var r=this._length;return this._length=this.points.length,this._length<r&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(o){return this.source=o,this.updateSource()},getPoint:function(o){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var a=this.points[this.counter];a&&(o.x=a.x,o.y=a.y)}});f.exports=m},68433:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(93736),o=new h({initialize:function(r){this.source=r,this._tempVec=new m,this.total=-1},getPoint:function(a){var r=this._tempVec;this.source.getRandomPoint(r),a.x=r.x,a.y=r.y}});f.exports=o},25962:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={DeathZone:t(69361),EdgeZone:t(54213),RandomZone:t(68433)}},29598:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(64937),o=t(13747),a=new h({Extends:o,Mixins:[m.PathFollower],initialize:function(i,n,u,s,l,v){o.call(this,i,u,s,l,v),this.path=n},preUpdate:function(r,i){this.anims.update(r,i),this.pathUpdate(r)}});f.exports=a},19626:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61286),m=t(29598);h.register("follower",function(o,a,r,i,n){var u=new m(this.scene,o,a,r,i,n);return this.displayList.add(u),this.updateList.add(u),u})},33412:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(16569),m=t(56694),o=t(99425),a=t(15978),r=t(83321),i=t(76583),n=new m({Extends:r,initialize:function(s,l,v,c,g,y,E,C){c||(c="__DEFAULT"),r.call(this,s,l,v,c,g),this.type="Plane",this.anims=new h(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(y,E,C),this.setSizeToFrame(!1),this.setViewHeight()},setGridSize:function(u,s,l){u===void 0&&(u=8),s===void 0&&(s=8),l===void 0&&(l=!1);var v=!1;return l&&(v=!0),this.gridWidth=u,this.gridHeight=s,this.isTiled=l,this.clear(),o({mesh:this,widthSegments:u,heightSegments:s,isOrtho:!1,tile:l,flipY:v}),this},setSizeToFrame:function(u){u===void 0&&(u=!0);var s=this.frame;if(this.setPerspective(this.width/s.width,this.height/s.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!u)return this;var l=this.gridWidth,v=this.gridHeight,c=this.vertices,g=s.u0,y=s.u1,E=s.v0,C=s.v1,T,A,P=0;if(this.isTiled)for(E=s.v1,C=s.v0,A=0;A<v;A++)for(T=0;T<l;T++)c[P++].setUVs(g,C),c[P++].setUVs(g,E),c[P++].setUVs(y,C),c[P++].setUVs(g,E),c[P++].setUVs(y,E),c[P++].setUVs(y,C);else{var M=l+1,w=v+1,L=y-g,F=C-E,D=[];for(A=0;A<w;A++)for(T=0;T<M;T++){var N=g+L*(T/l),B=E+F*(A/v);D.push(N,B)}for(A=0;A<v;A++)for(T=0;T<l;T++){var b=(T+M*A)*2,W=(T+M*(A+1))*2,Y=(T+1+M*(A+1))*2,K=(T+1+M*A)*2;c[P++].setUVs(D[b],D[b+1]),c[P++].setUVs(D[W],D[W+1]),c[P++].setUVs(D[K],D[K+1]),c[P++].setUVs(D[W],D[W+1]),c[P++].setUVs(D[Y],D[Y+1]),c[P++].setUVs(D[K],D[K+1])}}return this},setViewHeight:function(u){u===void 0&&(u=this.frame.height);var s=this.fov*(Math.PI/180);this.viewPosition.z=this.height/u/Math.tan(s/2),this.dirtyCache[10]=1},createCheckerboard:function(u,s,l,v,c){u===void 0&&(u=16777215),s===void 0&&(s=255),l===void 0&&(l=255),v===void 0&&(v=255),c===void 0&&(c=128);var g=this.scene.sys.renderer.gl,y=g.createTexture();g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,y),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);for(var E=a(u),C=a(s),T=[],A=0;A<16;A++)for(var P=0;P<16;P++)A<8&&P<8||A>7&&P>7?T.push(E.r,E.g,E.b,l):T.push(C.r,C.g,C.b,v);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,16,16,0,g.RGBA,g.UNSIGNED_BYTE,new Uint8Array(T)),y.isAlphaPremultiplied=!0,y.isRenderTexture=!1,y.width=16,y.height=16;var M=this.scene.sys.textures.addGLTexture(i(),y,16,16);return this.removeCheckerboard(),this._checkerboard=M,g.bindTexture(g.TEXTURE_2D,null),this.setTexture(M),this.setSizeToFrame(),this.setViewHeight(c),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(u,s){return this.anims.play(u,s)},playReverse:function(u,s){return this.anims.playReverse(u,s)},playAfterDelay:function(u,s){return this.anims.playAfterDelay(u,s)},playAfterRepeat:function(u,s){return this.anims.playAfterRepeat(u,s)},stop:function(){return this.anims.stop()},stopAfterDelay:function(u){return this.anims.stopAfterDelay(u)},stopAfterRepeat:function(u){return this.anims.stopAfterRepeat(u)},stopOnFrame:function(u){return this.anims.stopOnFrame(u)},preUpdate:function(u,s){r.prototype.preUpdate.call(this,u,s),this.anims.update(u,s)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});f.exports=n},10912:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(88933),m=t(32291),o=t(99325),a=t(20494),r=t(10850),i=t(33412);o.register("plane",function(n,u){n===void 0&&(n={});var s=a(n,"key",null),l=a(n,"frame",null),v=r(n,"width",8),c=r(n,"height",8),g=r(n,"tile",!1),y=new i(this.scene,0,0,s,l,v,c,g);u!==void 0&&(n.add=u);var E=r(n,"checkerboard",null);if(E){var C=r(E,"color1",16777215),T=r(E,"color2",255),A=r(E,"alpha1",255),P=r(E,"alpha2",255),M=r(E,"height",128);y.createCheckerboard(C,T,A,P,M)}return h(this.scene,y,n),m(y,n),y})},58322:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(33412),m=t(61286);m.register("plane",function(o,a,r,i,n,u,s){return this.displayList.add(new h(this.scene,o,a,r,i,n,u,s))})},13171:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(64937),o=t(89980),a=t(74853),r=t(65641),i=t(71606),n=new h({Extends:o,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.Mask,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Transform,m.Visible,i],initialize:function(s,l,v,c,g,y,E){c===void 0&&(c=16777215),g===void 0&&(g=128),y===void 0&&(y=1),E===void 0&&(E=.1),o.call(this,s,"PointLight"),this.initPipeline(r.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(l,v),this.color=a(c),this.intensity=y,this.attenuation=E,this.width=g*2,this.height=g*2,this._radius=g},radius:{get:function(){return this._radius},set:function(u){this._radius=u,this.width=u*2,this.height=u*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});f.exports=n},162:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(88933),m=t(99325),o=t(20494),a=t(13171);m.register("pointlight",function(r,i){r===void 0&&(r={});var n=o(r,"color",16777215),u=o(r,"radius",128),s=o(r,"intensity",1),l=o(r,"attenuation",.1),v=new a(this.scene,0,0,n,u,s,l);return i!==void 0&&(r.add=i),h(this.scene,v,r),v})},91201:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61286),m=t(13171);h.register("pointlight",function(o,a,r,i,n,u){return this.displayList.add(new m(this.scene,o,a,r,i,n,u))})},71606:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(80590),f.exports={renderWebGL:m,renderCanvas:o}},80590:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(73329),m=function(o,a,r,i){r.addToRenderList(a);var n=o.pipelines.set(a.pipeline),u=h(a,r,i).calc,s=a.width,l=a.height,v=-a._radius,c=-a._radius,g=v+s,y=c+l,E=u.getX(0,0),C=u.getY(0,0),T=u.getX(v,c),A=u.getY(v,c),P=u.getX(v,y),M=u.getY(v,y),w=u.getX(g,y),L=u.getY(g,y),F=u.getX(g,c),D=u.getY(g,c);o.pipelines.preBatch(a),n.batchPointLight(a,r,T,A,P,M,w,L,F,D,E,C),o.pipelines.postBatch(a)};f.exports=m},15996:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(845),o=t(1539),a=new h({Extends:o,initialize:function(i,n,u,s,l){n===void 0&&(n=0),u===void 0&&(u=0),s===void 0&&(s=32),l===void 0&&(l=32);var v=new m(i.sys.textures,"",s,l);o.call(this,i,n,u,v),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(r,i){this.width=r,this.height=i,this.texture.setSize(r,i),this.updateDisplayOrigin();var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=r,n.hitArea.height=i),this},resize:function(r,i){return this.setSize(r,i),this},saveTexture:function(r){var i=this.texture;return i.key=r,i.manager.addDynamicTexture(i)&&(this._saved=!0),i},fill:function(r,i,n,u,s,l){return this.texture.fill(r,i,n,u,s,l),this},clear:function(){return this.texture.clear(),this},stamp:function(r,i,n,u,s){return this.texture.stamp(r,i,n,u,s),this},erase:function(r,i,n){return this.texture.erase(r,i,n),this},draw:function(r,i,n,u,s){return this.texture.draw(r,i,n,u,s),this},drawFrame:function(r,i,n,u,s,l){return this.texture.drawFrame(r,i,n,u,s,l),this},repeat:function(r,i,n,u,s,l,v,c,g){return this.texture.repeat(r,i,n,u,s,l,v,c,g),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(r,i,n,u,s){return this.texture.batchDraw(r,i,n,u,s),this},batchDrawFrame:function(r,i,n,u,s,l){return this.texture.batchDrawFrame(r,i,n,u,s,l),this},endDraw:function(r){return this.texture.endDraw(r),this},snapshotArea:function(r,i,n,u,s,l,v){return this.texture.snapshotArea(r,i,n,u,s,l,v),this},snapshot:function(r,i,n){return this.snapshotArea(0,0,this.width,this.height,r,i,n)},snapshotPixel:function(r,i,n){return this.snapshotArea(r,i,1,1,n,"pixel")},preDestroy:function(){this._saved||this.texture.destroy()}});f.exports=a},85692:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(88933),m=t(99325),o=t(20494),a=t(15996);m.register("renderTexture",function(r,i){r===void 0&&(r={});var n=o(r,"x",0),u=o(r,"y",0),s=o(r,"width",32),l=o(r,"height",32),v=new a(this.scene,n,u,s,l);return i!==void 0&&(r.add=i),h(this.scene,v,r),v})},29599:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61286),m=t(15996);h.register("renderTexture",function(o,a,r,i){return this.displayList.add(new m(this.scene,o,a,r,i))})},79968:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(16569),m=t(56694),o=t(64937),a=t(89980),r=t(65641),i=t(58912),n=t(93736),u=new m({Extends:a,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Flip,o.Mask,o.Pipeline,o.PostPipeline,o.Size,o.Texture,o.Transform,o.Visible,o.ScrollFactor,i],initialize:function(l,v,c,g,y,E,C,T,A){g===void 0&&(g="__DEFAULT"),E===void 0&&(E=2),C===void 0&&(C=!0),a.call(this,l,"Rope"),this.anims=new h(this),this.points=E,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=g==="__DEFAULT",this.dirty=!1,this.horizontal=C,this._flipX=!1,this._flipY=!1,this._perp=new n,this.debugCallback=null,this.debugGraphic=null,this.setTexture(g,y),this.setPosition(v,c),this.setSizeToFrame(),this.initPipeline(r.ROPE_PIPELINE),Array.isArray(E)&&this.resizeArrays(E.length),this.setPoints(E,T,A),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(s,l){var v=this.anims.currentFrame;this.anims.update(s,l),this.anims.currentFrame!==v&&(this.updateUVs(),this.updateVertices())},play:function(s,l,v){return this.anims.play(s,l,v),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(s,l,v){return s===void 0&&(s=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(s,l,v))},setVertical:function(s,l,v){return s===void 0&&(s=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(s,l,v)):this},setTintFill:function(s){return s===void 0&&(s=!1),this.tintFill=s,this},setAlphas:function(s,l){var v=this.points.length;if(v<1)return this;var c=this.alphas;s===void 0?s=[1]:!Array.isArray(s)&&l===void 0&&(s=[s]);var g,y=0;if(l!==void 0)for(g=0;g<v;g++)y=g*2,c[y]=s,c[y+1]=l;else if(s.length===v)for(g=0;g<v;g++)y=g*2,c[y]=s[g],c[y+1]=s[g];else{var E=s[0];for(g=0;g<v;g++)y=g*2,s.length>y&&(E=s[y]),c[y]=E,s.length>y+1&&(E=s[y+1]),c[y+1]=E}return this},setColors:function(s){var l=this.points.length;if(l<1)return this;var v=this.colors;s===void 0?s=[16777215]:Array.isArray(s)||(s=[s]);var c,g=0;if(s.length===l)for(c=0;c<l;c++)g=c*2,v[g]=s[c],v[g+1]=s[c];else{var y=s[0];for(c=0;c<l;c++)g=c*2,s.length>g&&(y=s[g]),v[g]=y,s.length>g+1&&(y=s[g+1]),v[g+1]=y}return this},setPoints:function(s,l,v){if(s===void 0&&(s=2),typeof s=="number"){var c=s;c<2&&(c=2),s=[];var g,y,E;if(this.horizontal)for(E=-this.frame.halfWidth,y=this.frame.width/(c-1),g=0;g<c;g++)s.push({x:E+g*y,y:0});else for(E=-this.frame.halfHeight,y=this.frame.height/(c-1),g=0;g<c;g++)s.push({x:0,y:E+g*y})}var C=s.length,T=this.points.length;return C<1?(console.warn("Rope: Not enough points given"),this):(C===1&&(s.unshift({x:0,y:0}),C++),T!==C&&this.resizeArrays(C),this.dirty=!0,this.points=s,this.updateUVs(),l!=null&&this.setColors(l),v!=null&&this.setAlphas(v),this)},updateUVs:function(){for(var s=this.uv,l=this.points.length,v=this.frame.u0,c=this.frame.v0,g=this.frame.u1,y=this.frame.v1,E=(g-v)/(l-1),C=(y-c)/(l-1),T=0;T<l;T++){var A=T*4,P,M,w,L;this.horizontal?(this._flipX?(P=g-T*E,w=g-T*E):(P=v+T*E,w=v+T*E),this._flipY?(M=y,L=c):(M=c,L=y)):(this._flipX?(P=v,w=g):(P=g,w=v),this._flipY?(M=y-T*C,L=y-T*C):(M=c+T*C,L=c+T*C)),s[A+0]=P,s[A+1]=M,s[A+2]=w,s[A+3]=L}return this},resizeArrays:function(s){var l=this.colors,v=this.alphas;this.vertices=new Float32Array(s*4),this.uv=new Float32Array(s*4),l=new Uint32Array(s*2),v=new Float32Array(s*2);for(var c=0;c<s*2;c++)l[c]=16777215,v[c]=1;return this.colors=l,this.alphas=v,this.dirty=!0,this},updateVertices:function(){var s=this._perp,l=this.points,v=this.vertices,c=l.length;if(this.dirty=!1,!(c<1)){for(var g,y=l[0],E=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,C=0;C<c;C++){var T=l[C],A=C*4;C<c-1?g=l[C+1]:g=T,s.x=g.y-y.y,s.y=-(g.x-y.x);var P=s.length();s.x/=P,s.y/=P,s.x*=E,s.y*=E,v[A]=T.x+s.x,v[A+1]=T.y+s.y,v[A+2]=T.x-s.x,v[A+3]=T.y-s.y,y=T}return this}},setDebug:function(s,l){return this.debugGraphic=s,!s&&!l?this.debugCallback=null:l?this.debugCallback=l:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(s,l,v){var c=s.debugGraphic,g=v[0],y=v[1],E=v[2],C=v[3];c.lineBetween(g,y,E,C);for(var T=4;T<l;T+=4){var A=v[T+0],P=v[T+1],M=v[T+2],w=v[T+3];c.lineBetween(g,y,A,P),c.lineBetween(E,C,M,w),c.lineBetween(E,C,A,P),c.lineBetween(A,P,M,w),g=A,y=P,E=M,C=w}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(s){return this._flipX=s,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(s){return this._flipY=s,this.updateUVs()}}});f.exports=u},44598:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(){};f.exports=S},96027:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(88933),m=t(99325),o=t(20494),a=t(10850),r=t(79968);m.register("rope",function(i,n){i===void 0&&(i={});var u=o(i,"key",null),s=o(i,"frame",null),l=o(i,"horizontal",!0),v=a(i,"points",void 0),c=a(i,"colors",void 0),g=a(i,"alphas",void 0),y=new r(this.scene,0,0,u,s,v,l,c,g);return n!==void 0&&(i.add=n),h(this.scene,y,i),y})},31982:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79968),m=t(61286);m.register("rope",function(o,a,r,i,n,u,s,l){return this.displayList.add(new h(this.scene,o,a,r,i,n,u,s,l))})},58912:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(49489),o=t(44598),f.exports={renderWebGL:m,renderCanvas:o}},49489:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(73329),m=t(75512),o=function(a,r,i,n){i.addToRenderList(r);var u=a.pipelines.set(r.pipeline,r),s=h(r,i,n).calc,l=r.vertices,v=r.uv,c=r.colors,g=r.alphas,y=r.alpha,E=m.getTintAppendFloatAlpha,C=i.roundPixels,T=l.length,A=Math.floor(T*.5);u.flush(),a.pipelines.preBatch(r);var P=u.setGameObject(r),M=u.vertexViewF32,w=u.vertexViewU32,L=u.vertexCount*u.currentShader.vertexComponentCount-1,F=0,D=r.tintFill;r.dirty&&r.updateVertices();for(var N=r.debugCallback,B=[],b=0;b<T;b+=2){var W=l[b+0],Y=l[b+1],K=W*s.a+Y*s.c+s.e,G=W*s.b+Y*s.d+s.f;C&&(K=Math.round(K),G=Math.round(G)),M[++L]=K,M[++L]=G,M[++L]=v[b+0],M[++L]=v[b+1],M[++L]=P,M[++L]=D,w[++L]=E(c[F],i.alpha*(g[F]*y)),F++,N&&(B[b+0]=K,B[b+1]=G)}N&&N.call(r,r,T,B),u.vertexCount+=A,u.currentBatch.count=u.vertexCount-u.currentBatch.start,a.pipelines.postBatch(r)};f.exports=o},27902:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(64937),o=t(89980),a=t(72632),r=t(98611),i=t(22440),n=t(24252),u=t(69360),s=new h({Extends:o,Mixins:[m.ComputedSize,m.Depth,m.GetBounds,m.Mask,m.Origin,m.ScrollFactor,m.Transform,m.Visible,n],initialize:function(v,c,g,y,E,C,T,A){g===void 0&&(g=0),y===void 0&&(y=0),E===void 0&&(E=128),C===void 0&&(C=128),o.call(this,v,"Shader"),this.blendMode=-1,this.shader;var P=v.sys.renderer;this.renderer=P,this.gl=P.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=P.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new u,this._tempMatrix2=new u,this._tempMatrix3=new u,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=P.width,this._rendererHeight=P.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(g,y),this.setSize(E,C),this.setOrigin(.5,.5),this.setShader(c,T,A)},willRender:function(l){return this.renderToTexture?!0:!(o.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&l.id)},setRenderToTexture:function(l,v){if(v===void 0&&(v=!1),!this.renderToTexture){var c=this.width,g=this.height,y=this.renderer;this.glTexture=y.createTextureFromSource(null,c,g,0),this.glTexture.flipY=v,this.framebuffer=y.createFramebuffer(c,g,this.glTexture,!1),this._rendererWidth=c,this._rendererHeight=g,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),l&&(this.texture=this.scene.sys.textures.addGLTexture(l,this.glTexture,c,g))}return this.shader&&(y.pipelines.clear(),this.load(),this.flush(),y.pipelines.rebind()),this},setShader:function(l,v,c){if(v===void 0&&(v=[]),typeof l=="string"){var g=this.scene.sys.cache.shader;if(!g.has(l))return console.warn("Shader missing: "+l),this;this.shader=g.get(l)}else this.shader=l;var y=this.gl,E=this.renderer;this.program&&y.deleteProgram(this.program);var C=E.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);y.uniformMatrix4fv(y.getUniformLocation(C,"uViewMatrix"),!1,this.viewMatrix),y.uniformMatrix4fv(y.getUniformLocation(C,"uProjectionMatrix"),!1,this.projectionMatrix),y.uniform2f(y.getUniformLocation(C,"uResolution"),this.width,this.height),this.program=C;var T=new Date,A={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[T.getFullYear(),T.getMonth(),T.getDate(),T.getHours()*60*60+T.getMinutes()*60+T.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=r(!0,{},this.shader.uniforms,A):this.uniforms=A;for(var P=0;P<4;P++)v[P]&&this.setSampler2D("iChannel"+P,v[P],P,c);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(l){return this.pointer=l,this},projOrtho:function(l,v,c,g){var y=-1e3,E=1e3,C=1/(l-v),T=1/(c-g),A=1/(y-E),P=this.projectionMatrix;P[0]=-2*C,P[5]=-2*T,P[10]=2*A,P[12]=(l+v)*C,P[13]=(g+c)*T,P[14]=(E+y)*A;var M=this.program,w=this.gl,L=this.renderer;L.setProgram(M),w.uniformMatrix4fv(w.getUniformLocation(M,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=v,this._rendererHeight=c},initUniforms:function(){var l=this.gl,v=this.renderer.glFuncMap,c=this.program;this._textureCount=0;for(var g in this.uniforms){var y=this.uniforms[g],E=y.type,C=v[E];y.uniformLocation=l.getUniformLocation(c,g),E!=="sampler2D"&&(y.glMatrix=C.matrix,y.glValueLength=C.length,y.glFunc=C.func)}},setSampler2DBuffer:function(l,v,c,g,y,E){y===void 0&&(y=0),E===void 0&&(E={});var C=this.uniforms[l];return C.value=v,E.width=c,E.height=g,C.textureData=E,this._textureCount=y,this.initSampler2D(C),this},setSampler2D:function(l,v,c,g){c===void 0&&(c=0);var y=this.scene.sys.textures;if(y.exists(v)){var E=y.getFrame(v);if(E.glTexture&&E.glTexture.isRenderTexture)return this.setSampler2DBuffer(l,E.glTexture,E.width,E.height,c,g);var C=this.uniforms[l],T=E.source;C.textureKey=v,C.source=T.image,C.value=E.glTexture,T.isGLTexture&&(g||(g={}),g.width=T.width,g.height=T.height),g&&(C.textureData=g),this._textureCount=c,this.initSampler2D(C)}return this},setUniform:function(l,v){return i(this.uniforms,l,v),this},getUniform:function(l){return a(this.uniforms,l,null)},setChannel0:function(l,v){return this.setSampler2D("iChannel0",l,0,v)},setChannel1:function(l,v){return this.setSampler2D("iChannel1",l,1,v)},setChannel2:function(l,v){return this.setSampler2D("iChannel2",l,2,v)},setChannel3:function(l,v){return this.setSampler2D("iChannel3",l,3,v)},initSampler2D:function(l){if(l.value){var v=this.gl;v.activeTexture(v.TEXTURE0+this._textureCount),v.bindTexture(v.TEXTURE_2D,l.value);var c=l.textureData;if(c&&!l.value.isRenderTexture){var g=v[a(c,"magFilter","linear").toUpperCase()],y=v[a(c,"minFilter","linear").toUpperCase()],E=v[a(c,"wrapS","repeat").toUpperCase()],C=v[a(c,"wrapT","repeat").toUpperCase()],T=v[a(c,"format","rgba").toUpperCase()];if(c.repeat&&(E=v.REPEAT,C=v.REPEAT),v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,!!c.flipY),c.width){var A=a(c,"width",512),P=a(c,"height",2),M=a(c,"border",0);v.texImage2D(v.TEXTURE_2D,0,T,A,P,M,T,v.UNSIGNED_BYTE,null)}else v.texImage2D(v.TEXTURE_2D,0,T,v.RGBA,v.UNSIGNED_BYTE,l.source);v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,g),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,y),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,E),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,C)}this.renderer.setProgram(this.program),v.uniform1i(l.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var l=this.gl,v=this.uniforms,c,g,y,E,C,T=0;for(var A in v)c=v[A],y=c.glFunc,g=c.glValueLength,E=c.uniformLocation,C=c.value,C!==null&&(g===1?c.glMatrix?y.call(l,E,c.transpose,C):y.call(l,E,C):g===2?y.call(l,E,C.x,C.y):g===3?y.call(l,E,C.x,C.y,C.z):g===4?y.call(l,E,C.x,C.y,C.z,C.w):c.type==="sampler2D"&&(l.activeTexture(l.TEXTURE0+T),l.bindTexture(l.TEXTURE_2D,C),l.uniform1i(E,T),T++))},load:function(l){var v=this.gl,c=this.width,g=this.height,y=this.renderer,E=this.program,C=this.viewMatrix;if(!this.renderToTexture){var T=-this._displayOriginX,A=-this._displayOriginY;C[0]=l[0],C[1]=l[1],C[4]=l[2],C[5]=l[3],C[8]=l[4],C[9]=l[5],C[12]=C[0]*T+C[4]*A,C[13]=C[1]*T+C[5]*A}v.useProgram(E),v.uniformMatrix4fv(v.getUniformLocation(E,"uViewMatrix"),!1,C),v.uniform2f(v.getUniformLocation(E,"uResolution"),this.width,this.height);var P=this.uniforms,M=P.resolution;M.value.x=c,M.value.y=g,P.time.value=y.game.loop.getDuration();var w=this.pointer;if(w){var L=P.mouse,F=w.x/c,D=1-w.y/g;L.value.x=F.toFixed(2),L.value.y=D.toFixed(2)}this.syncUniforms()},flush:function(){var l=this.width,v=this.height,c=this.program,g=this.gl,y=this.vertexBuffer,E=this.renderer,C=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(E.setFramebuffer(this.framebuffer),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT)),g.bindBuffer(g.ARRAY_BUFFER,y);var T=g.getAttribLocation(c,"inPosition");T!==-1&&(g.enableVertexAttribArray(T),g.vertexAttribPointer(T,2,g.FLOAT,!1,C,0));var A=this.vertexViewF32;A[3]=v,A[4]=l,A[5]=v,A[8]=l,A[9]=v,A[10]=l;var P=6;g.bufferSubData(g.ARRAY_BUFFER,0,this.bytes.subarray(0,P*C)),g.drawArrays(g.TRIANGLES,0,P),this.renderToTexture&&E.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var l=this.gl;l.deleteProgram(this.program),l.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});f.exports=s},10612:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(){};f.exports=S},13908:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(88933),m=t(99325),o=t(20494),a=t(27902);m.register("shader",function(r,i){r===void 0&&(r={});var n=o(r,"key",null),u=o(r,"x",0),s=o(r,"y",0),l=o(r,"width",128),v=o(r,"height",128),c=new a(this.scene,n,u,s,l,v);return i!==void 0&&(r.add=i),h(this.scene,c,r),c})},51979:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(27902),m=t(61286);m.register("shader",function(o,a,r,i,n,u,s){return this.displayList.add(new h(this.scene,o,a,r,i,n,u,s))})},24252:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(19782),o=t(10612),f.exports={renderWebGL:m,renderCanvas:o}},19782:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(73329),m=function(o,a,r,i){if(a.shader){if(r.addToRenderList(a),o.pipelines.clear(),a.renderToTexture)a.load(),a.flush();else{var n=h(a,r,i).calc;(o.width!==a._rendererWidth||o.height!==a._rendererHeight)&&a.projOrtho(0,o.width,o.height,0),a.load(n.matrix),a.flush()}o.pipelines.rebind()}};f.exports=m},19543:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(75512),m=function(o,a,r,i,n,u){for(var s=h.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*i),l=r.pathData,v=r.pathIndexes,c=0;c<v.length;c+=3){var g=v[c]*2,y=v[c+1]*2,E=v[c+2]*2,C=l[g+0]-n,T=l[g+1]-u,A=l[y+0]-n,P=l[y+1]-u,M=l[E+0]-n,w=l[E+1]-u,L=a.getX(C,T),F=a.getY(C,T),D=a.getX(A,P),N=a.getY(A,P),B=a.getX(M,w),b=a.getY(M,w);o.batchTri(r,L,F,D,N,B,b,0,0,1,1,s,s,s,2)}};f.exports=m},15608:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){var a=m||h.fillColor,r=o||h.fillAlpha,i=(a&16711680)>>>16,n=(a&65280)>>>8,u=a&255;t.fillStyle="rgba("+i+","+n+","+u+","+r+")"};f.exports=S},17876:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){var a=m||h.strokeColor,r=o||h.strokeAlpha,i=(a&16711680)>>>16,n=(a&65280)>>>8,u=a&255;t.strokeStyle="rgba("+i+","+n+","+u+","+r+")",t.lineWidth=h.lineWidth};f.exports=S},91461:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(64937),o=t(89980),a=t(88829),r=new h({Extends:o,Mixins:[m.AlphaSingle,m.BlendMode,m.Depth,m.GetBounds,m.Mask,m.Origin,m.Pipeline,m.PostPipeline,m.ScrollFactor,m.Transform,m.Visible],initialize:function(n,u,s){u===void 0&&(u="Shape"),o.call(this,n,u),this.geom=s,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new a,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(i,n){return n===void 0&&(n=1),i===void 0?this.isFilled=!1:(this.fillColor=i,this.fillAlpha=n,this.isFilled=!0),this},setStrokeStyle:function(i,n,u){return u===void 0&&(u=1),i===void 0?this.isStroked=!1:(this.lineWidth=i,this.strokeColor=n,this.strokeAlpha=u,this.isStroked=!0),this},setClosePath:function(i){return this.closePath=i,this},setSize:function(i,n){return this.width=i,this.height=n,this},setDisplaySize:function(i,n){return this.displayWidth=i,this.displayHeight=n,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(i){this.scaleX=i/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(i){this.scaleY=i/this.height}}});f.exports=r},50262:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(75512),m=function(o,a,r,i,n){var u=o.strokeTint,s=h.getTintAppendFloatAlpha(a.strokeColor,a.strokeAlpha*r);u.TL=s,u.TR=s,u.BL=s,u.BR=s;var l=a.pathData,v=l.length-1,c=a.lineWidth,g=c/2,y=l[0]-i,E=l[1]-n;a.closePath||(v-=2);for(var C=2;C<v;C+=2){var T=l[C]-i,A=l[C+1]-n;o.batchLine(y,E,T,A,g,g,c,C-2,a.closePath?C===v-1:!1),y=T,E=A}};f.exports=m},28593:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(2213),m=t(56694),o=t(75606),a=t(11117),r=t(26673),i=t(83392),n=t(91461),u=new m({Extends:n,Mixins:[h],initialize:function(l,v,c,g,y,E,C,T,A){v===void 0&&(v=0),c===void 0&&(c=0),g===void 0&&(g=128),y===void 0&&(y=0),E===void 0&&(E=360),C===void 0&&(C=!1),n.call(this,l,"Arc",new r(0,0,g)),this._startAngle=y,this._endAngle=E,this._anticlockwise=C,this._iterations=.01,this.setPosition(v,c);var P=this.geom.radius*2;this.setSize(P,P),T!==void 0&&this.setFillStyle(T,A),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(s){this._iterations=s,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(s){this.geom.radius=s;var l=s*2;this.setSize(l,l),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(s){this._startAngle=s,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(s){this._endAngle=s,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(s){this._anticlockwise=s,this.updateData()}},setRadius:function(s){return this.radius=s,this},setIterations:function(s){return s===void 0&&(s=.01),this.iterations=s,this},setStartAngle:function(s,l){return this._startAngle=s,l!==void 0&&(this._anticlockwise=l),this.updateData()},setEndAngle:function(s,l){return this._endAngle=s,l!==void 0&&(this._anticlockwise=l),this.updateData()},updateData:function(){var s=this._iterations,l=s,v=this.geom.radius,c=o(this._startAngle),g=o(this._endAngle),y=this._anticlockwise,E=v,C=v;g-=c,y?g<-i.PI2?g=-i.PI2:g>0&&(g=-i.PI2+g%i.PI2):g>i.PI2?g=i.PI2:g<0&&(g=i.PI2+g%i.PI2);for(var T=[E+Math.cos(c)*v,C+Math.sin(c)*v],A;l<1;)A=g*l+c,T.push(E+Math.cos(A)*v,C+Math.sin(A)*v),l+=s;return A=g+c,T.push(E+Math.cos(A)*v,C+Math.sin(A)*v),T.push(E+Math.cos(c)*v,C+Math.sin(c)*v),this.pathIndexes=a(T),this.pathData=T,this}});f.exports=u},23560:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(75606),m=t(15608),o=t(17876),a=t(49584),r=function(i,n,u,s){u.addToRenderList(n);var l=i.currentContext;if(a(i,l,n,u,s)){var v=n.radius;l.beginPath(),l.arc(v-n.originX*(v*2),v-n.originY*(v*2),v,h(n._startAngle),h(n._endAngle),n.anticlockwise),n.closePath&&l.closePath(),n.isFilled&&(m(l,n),l.fill()),n.isStroked&&(o(l,n),l.stroke()),l.restore()}};f.exports=r},10369:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(28593),m=t(61286);m.register("arc",function(o,a,r,i,n,u,s,l){return this.displayList.add(new h(this.scene,o,a,r,i,n,u,s,l))}),m.register("circle",function(o,a,r,i,n){return this.displayList.add(new h(this.scene,o,a,r,0,360,!1,i,n))})},2213:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(58356),o=t(23560),f.exports={renderWebGL:m,renderCanvas:o}},58356:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(73329),m=t(19543),o=t(50262),a=function(r,i,n,u){n.addToRenderList(i);var s=r.pipelines.set(i.pipeline),l=h(i,n,u),v=s.calcMatrix.copyFrom(l.calc),c=i._displayOriginX,g=i._displayOriginY,y=n.alpha*i.alpha;r.pipelines.preBatch(i),i.isFilled&&m(s,v,i,y,c,g),i.isStroked&&o(s,i,y,c,g),r.pipelines.postBatch(i)};f.exports=a},15220:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(87203),o=t(11117),a=t(74118),r=t(91461),i=new h({Extends:r,Mixins:[m],initialize:function(u,s,l,v,c,g){s===void 0&&(s=0),l===void 0&&(l=0),r.call(this,u,"Curve",v),this._smoothness=32,this._curveBounds=new a,this.closePath=!1,this.setPosition(s,l),c!==void 0&&this.setFillStyle(c,g),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(n){this._smoothness=n,this.updateData()}},setSmoothness:function(n){return this._smoothness=n,this.updateData()},updateData:function(){var n=this._curveBounds,u=this._smoothness;this.geom.getBounds(n,u),this.setSize(n.width,n.height),this.updateDisplayOrigin();for(var s=[],l=this.geom.getPoints(u),v=0;v<l.length;v++)s.push(l[v].x,l[v].y);return s.push(l[0].x,l[0].y),this.pathIndexes=o(s),this.pathData=s,this}});f.exports=i},4024:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(15608),m=t(17876),o=t(49584),a=function(r,i,n,u){n.addToRenderList(i);var s=r.currentContext;if(o(r,s,i,n,u)){var l=i._displayOriginX+i._curveBounds.x,v=i._displayOriginY+i._curveBounds.y,c=i.pathData,g=c.length-1,y=c[0]-l,E=c[1]-v;s.beginPath(),s.moveTo(y,E),i.closePath||(g-=2);for(var C=2;C<g;C+=2){var T=c[C]-l,A=c[C+1]-v;s.lineTo(T,A)}i.closePath&&s.closePath(),i.isFilled&&(h(s,i),s.fill()),i.isStroked&&(m(s,i),s.stroke()),s.restore()}};f.exports=a},10147:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61286),m=t(15220);h.register("curve",function(o,a,r,i,n){return this.displayList.add(new m(this.scene,o,a,r,i,n))})},87203:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(82958),o=t(4024),f.exports={renderWebGL:m,renderCanvas:o}},82958:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(19543),m=t(73329),o=t(50262),a=function(r,i,n,u){n.addToRenderList(i);var s=r.pipelines.set(i.pipeline),l=m(i,n,u),v=s.calcMatrix.copyFrom(l.calc),c=i._displayOriginX+i._curveBounds.x,g=i._displayOriginY+i._curveBounds.y,y=n.alpha*i.alpha;r.pipelines.preBatch(i),i.isFilled&&h(s,v,i,y,c,g),i.isStroked&&o(s,i,y,c,g),r.pipelines.postBatch(i)};f.exports=a},28591:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(11117),o=t(84171),a=t(95669),r=t(91461),i=new h({Extends:r,Mixins:[o],initialize:function(u,s,l,v,c,g,y){s===void 0&&(s=0),l===void 0&&(l=0),v===void 0&&(v=128),c===void 0&&(c=128),r.call(this,u,"Ellipse",new a(v/2,c/2,v,c)),this._smoothness=64,this.setPosition(s,l),this.width=v,this.height=c,g!==void 0&&this.setFillStyle(g,y),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(n){this._smoothness=n,this.updateData()}},setSize:function(n,u){return this.width=n,this.height=u,this.geom.setPosition(n/2,u/2),this.geom.setSize(n,u),this.updateData()},setSmoothness:function(n){return this._smoothness=n,this.updateData()},updateData:function(){for(var n=[],u=this.geom.getPoints(this._smoothness),s=0;s<u.length;s++)n.push(u[s].x,u[s].y);return n.push(u[0].x,u[0].y),this.pathIndexes=m(n),this.pathData=n,this}});f.exports=i},55881:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(15608),m=t(17876),o=t(49584),a=function(r,i,n,u){n.addToRenderList(i);var s=r.currentContext;if(o(r,s,i,n,u)){var l=i._displayOriginX,v=i._displayOriginY,c=i.pathData,g=c.length-1,y=c[0]-l,E=c[1]-v;s.beginPath(),s.moveTo(y,E),i.closePath||(g-=2);for(var C=2;C<g;C+=2){var T=c[C]-l,A=c[C+1]-v;s.lineTo(T,A)}s.closePath(),i.isFilled&&(h(s,i),s.fill()),i.isStroked&&(m(s,i),s.stroke()),s.restore()}};f.exports=a},99869:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(28591),m=t(61286);m.register("ellipse",function(o,a,r,i,n,u){return this.displayList.add(new h(this.scene,o,a,r,i,n,u))})},84171:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(17554),o=t(55881),f.exports={renderWebGL:m,renderCanvas:o}},17554:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(19543),m=t(73329),o=t(50262),a=function(r,i,n,u){n.addToRenderList(i);var s=r.pipelines.set(i.pipeline),l=m(i,n,u),v=s.calcMatrix.copyFrom(l.calc),c=i._displayOriginX,g=i._displayOriginY,y=n.alpha*i.alpha;r.pipelines.preBatch(i),i.isFilled&&h(s,v,i,y,c,g),i.isStroked&&o(s,i,y,c,g),r.pipelines.postBatch(i)};f.exports=a},39169:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(91461),o=t(88059),a=new h({Extends:m,Mixins:[o],initialize:function(i,n,u,s,l,v,c,g,y,E,C){n===void 0&&(n=0),u===void 0&&(u=0),s===void 0&&(s=128),l===void 0&&(l=128),v===void 0&&(v=32),c===void 0&&(c=32),m.call(this,i,"Grid",null),this.cellWidth=v,this.cellHeight=c,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(n,u),this.setSize(s,l),this.setFillStyle(g,y),E!==void 0&&this.setOutlineStyle(E,C),this.updateDisplayOrigin()},setFillStyle:function(r,i){return i===void 0&&(i=1),r===void 0?this.showCells=!1:(this.fillColor=r,this.fillAlpha=i,this.showCells=!0),this},setAltFillStyle:function(r,i){return i===void 0&&(i=1),r===void 0?this.showAltCells=!1:(this.altFillColor=r,this.altFillAlpha=i,this.showAltCells=!0),this},setOutlineStyle:function(r,i){return i===void 0&&(i=1),r===void 0?this.showOutline=!1:(this.outlineFillColor=r,this.outlineFillAlpha=i,this.showOutline=!0),this}});f.exports=a},95525:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(15608),m=t(17876),o=t(49584),a=function(r,i,n,u){n.addToRenderList(i);var s=r.currentContext;if(o(r,s,i,n,u)){var l=-i._displayOriginX,v=-i._displayOriginY,c=n.alpha*i.alpha,g=i.width,y=i.height,E=i.cellWidth,C=i.cellHeight,T=Math.ceil(g/E),A=Math.ceil(y/C),P=E,M=C,w=E-(T*E-g),L=C-(A*C-y),F=i.showCells,D=i.showAltCells,N=i.showOutline,B=0,b=0,W=0,Y=0,K=0;if(N&&(P--,M--,w===E&&w--,L===C&&L--),F&&i.fillAlpha>0)for(h(s,i),b=0;b<A;b++)for(D&&(W=b%2),B=0;B<T;B++){if(D&&W){W=0;continue}W++,Y=B<T-1?P:w,K=b<A-1?M:L,s.fillRect(l+B*E,v+b*C,Y,K)}if(D&&i.altFillAlpha>0)for(h(s,i,i.altFillColor,i.altFillAlpha*c),b=0;b<A;b++)for(D&&(W=b%2),B=0;B<T;B++){if(D&&!W){W=1;continue}W=0,Y=B<T-1?P:w,K=b<A-1?M:L,s.fillRect(l+B*E,v+b*C,Y,K)}if(N&&i.outlineFillAlpha>0){for(m(s,i,i.outlineFillColor,i.outlineFillAlpha*c),B=1;B<T;B++){var G=B*E;s.beginPath(),s.moveTo(G+l,v),s.lineTo(G+l,y+v),s.stroke()}for(b=1;b<A;b++){var z=b*C;s.beginPath(),s.moveTo(l,z+v),s.lineTo(l+g,z+v),s.stroke()}}s.restore()}};f.exports=a},9326:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61286),m=t(39169);h.register("grid",function(o,a,r,i,n,u,s,l,v,c){return this.displayList.add(new m(this.scene,o,a,r,i,n,u,s,l,v,c))})},88059:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(50639),o=t(95525),f.exports={renderWebGL:m,renderCanvas:o}},50639:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(73329),m=t(75512),o=function(a,r,i,n){i.addToRenderList(r);var u=a.pipelines.set(r.pipeline),s=h(r,i,n),l=u.calcMatrix.copyFrom(s.calc);l.translate(-r._displayOriginX,-r._displayOriginY);var v=i.alpha*r.alpha,c=r.width,g=r.height,y=r.cellWidth,E=r.cellHeight,C=Math.ceil(c/y),T=Math.ceil(g/E),A=y,P=E,M=y-(C*y-c),w=E-(T*E-g),L,F,D=r.showCells,N=r.showAltCells,B=r.showOutline,b=0,W=0,Y=0,K=0,G=0;if(B&&(A--,P--,M===y&&M--,w===E&&w--),a.pipelines.preBatch(r),D&&r.fillAlpha>0)for(L=u.fillTint,F=m.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*v),L.TL=F,L.TR=F,L.BL=F,L.BR=F,W=0;W<T;W++)for(N&&(Y=W%2),b=0;b<C;b++){if(N&&Y){Y=0;continue}Y++,K=b<C-1?A:M,G=W<T-1?P:w,u.batchFillRect(b*y,W*E,K,G)}if(N&&r.altFillAlpha>0)for(L=u.fillTint,F=m.getTintAppendFloatAlpha(r.altFillColor,r.altFillAlpha*v),L.TL=F,L.TR=F,L.BL=F,L.BR=F,W=0;W<T;W++)for(N&&(Y=W%2),b=0;b<C;b++){if(N&&!Y){Y=1;continue}Y=0,K=b<C-1?A:M,G=W<T-1?P:w,u.batchFillRect(b*y,W*E,K,G)}if(B&&r.outlineFillAlpha>0){var z=u.strokeTint,O=m.getTintAppendFloatAlpha(r.outlineFillColor,r.outlineFillAlpha*v);for(z.TL=O,z.TR=O,z.BL=O,z.BR=O,b=1;b<C;b++){var V=b*y;u.batchLine(V,0,V,g,1,1,1,0,!1)}for(W=1;W<T;W++){var U=W*E;u.batchLine(0,U,c,U,1,1,1,0,!1)}}a.pipelines.postBatch(r)};f.exports=o},4415:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72296),m=t(56694),o=t(91461),a=new m({Extends:o,Mixins:[h],initialize:function(i,n,u,s,l,v,c,g){n===void 0&&(n=0),u===void 0&&(u=0),s===void 0&&(s=48),l===void 0&&(l=32),v===void 0&&(v=15658734),c===void 0&&(c=10066329),g===void 0&&(g=13421772),o.call(this,i,"IsoBox",null),this.projection=4,this.fillTop=v,this.fillLeft=c,this.fillRight=g,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(n,u),this.setSize(s,l),this.updateDisplayOrigin()},setProjection:function(r){return this.projection=r,this},setFaces:function(r,i,n){return r===void 0&&(r=!0),i===void 0&&(i=!0),n===void 0&&(n=!0),this.showTop=r,this.showLeft=i,this.showRight=n,this},setFillStyle:function(r,i,n){return this.fillTop=r,this.fillLeft=i,this.fillRight=n,this.isFilled=!0,this}});f.exports=a},32884:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(15608),m=t(49584),o=function(a,r,i,n){i.addToRenderList(r);var u=a.currentContext;if(m(a,u,r,i,n)&&r.isFilled){var s=r.width,l=r.height,v=s/2,c=s/r.projection;r.showTop&&(h(u,r,r.fillTop),u.beginPath(),u.moveTo(-v,-l),u.lineTo(0,-c-l),u.lineTo(v,-l),u.lineTo(v,-1),u.lineTo(0,c-1),u.lineTo(-v,-1),u.lineTo(-v,-l),u.fill()),r.showLeft&&(h(u,r,r.fillLeft),u.beginPath(),u.moveTo(-v,0),u.lineTo(0,c),u.lineTo(0,c-l),u.lineTo(-v,-l),u.lineTo(-v,0),u.fill()),r.showRight&&(h(u,r,r.fillRight),u.beginPath(),u.moveTo(v,0),u.lineTo(0,c),u.lineTo(0,c-l),u.lineTo(v,-l),u.lineTo(v,0),u.fill()),u.restore()}};f.exports=o},88154:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61286),m=t(4415);h.register("isobox",function(o,a,r,i,n,u,s){return this.displayList.add(new m(this.scene,o,a,r,i,n,u,s))})},72296:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(33101),o=t(32884),f.exports={renderWebGL:m,renderCanvas:o}},33101:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(73329),m=t(75512),o=function(a,r,i,n){i.addToRenderList(r);var u=a.pipelines.set(r.pipeline),s=h(r,i,n),l=u.calcMatrix.copyFrom(s.calc),v=r.width,c=r.height,g=v/2,y=v/r.projection,E=i.alpha*r.alpha;if(r.isFilled){var C,T,A,P,M,w,L,F,D;a.pipelines.preBatch(r),r.showTop&&(C=m.getTintAppendFloatAlpha(r.fillTop,E),T=l.getX(-g,-c),A=l.getY(-g,-c),P=l.getX(0,-y-c),M=l.getY(0,-y-c),w=l.getX(g,-c),L=l.getY(g,-c),F=l.getX(0,y-c),D=l.getY(0,y-c),u.batchQuad(r,T,A,P,M,w,L,F,D,0,0,1,1,C,C,C,C,2)),r.showLeft&&(C=m.getTintAppendFloatAlpha(r.fillLeft,E),T=l.getX(-g,0),A=l.getY(-g,0),P=l.getX(0,y),M=l.getY(0,y),w=l.getX(0,y-c),L=l.getY(0,y-c),F=l.getX(-g,-c),D=l.getY(-g,-c),u.batchQuad(r,T,A,P,M,w,L,F,D,0,0,1,1,C,C,C,C,2)),r.showRight&&(C=m.getTintAppendFloatAlpha(r.fillRight,E),T=l.getX(g,0),A=l.getY(g,0),P=l.getX(0,y),M=l.getY(0,y),w=l.getX(0,y-c),L=l.getY(0,y-c),F=l.getX(g,-c),D=l.getY(g,-c),u.batchQuad(r,T,A,P,M,w,L,F,D,0,0,1,1,C,C,C,C,2)),a.pipelines.postBatch(r)}};f.exports=o},65159:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(93387),o=t(91461),a=new h({Extends:o,Mixins:[m],initialize:function(i,n,u,s,l,v,c,g,y){n===void 0&&(n=0),u===void 0&&(u=0),s===void 0&&(s=48),l===void 0&&(l=32),v===void 0&&(v=!1),c===void 0&&(c=15658734),g===void 0&&(g=10066329),y===void 0&&(y=13421772),o.call(this,i,"IsoTriangle",null),this.projection=4,this.fillTop=c,this.fillLeft=g,this.fillRight=y,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=v,this.isFilled=!0,this.setPosition(n,u),this.setSize(s,l),this.updateDisplayOrigin()},setProjection:function(r){return this.projection=r,this},setReversed:function(r){return this.isReversed=r,this},setFaces:function(r,i,n){return r===void 0&&(r=!0),i===void 0&&(i=!0),n===void 0&&(n=!0),this.showTop=r,this.showLeft=i,this.showRight=n,this},setFillStyle:function(r,i,n){return this.fillTop=r,this.fillLeft=i,this.fillRight=n,this.isFilled=!0,this}});f.exports=a},9923:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(15608),m=t(49584),o=function(a,r,i,n){i.addToRenderList(r);var u=a.currentContext;if(m(a,u,r,i,n)&&r.isFilled){var s=r.width,l=r.height,v=s/2,c=s/r.projection,g=r.isReversed;r.showTop&&g&&(h(u,r,r.fillTop),u.beginPath(),u.moveTo(-v,-l),u.lineTo(0,-c-l),u.lineTo(v,-l),u.lineTo(0,c-l),u.fill()),r.showLeft&&(h(u,r,r.fillLeft),u.beginPath(),g?(u.moveTo(-v,-l),u.lineTo(0,c),u.lineTo(0,c-l)):(u.moveTo(-v,0),u.lineTo(0,c),u.lineTo(0,c-l)),u.fill()),r.showRight&&(h(u,r,r.fillRight),u.beginPath(),g?(u.moveTo(v,-l),u.lineTo(0,c),u.lineTo(0,c-l)):(u.moveTo(v,0),u.lineTo(0,c),u.lineTo(0,c-l)),u.fill()),u.restore()}};f.exports=o},67765:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61286),m=t(65159);h.register("isotriangle",function(o,a,r,i,n,u,s,l){return this.displayList.add(new m(this.scene,o,a,r,i,n,u,s,l))})},93387:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(54946),o=t(9923),f.exports={renderWebGL:m,renderCanvas:o}},54946:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(73329),m=t(75512),o=function(a,r,i,n){i.addToRenderList(r);var u=a.pipelines.set(r.pipeline),s=h(r,i,n),l=u.calcMatrix.copyFrom(s.calc),v=r.width,c=r.height,g=v/2,y=v/r.projection,E=r.isReversed,C=i.alpha*r.alpha;if(r.isFilled){a.pipelines.preBatch(r);var T,A,P,M,w,L,F;if(r.showTop&&E){T=m.getTintAppendFloatAlpha(r.fillTop,C),A=l.getX(-g,-c),P=l.getY(-g,-c),M=l.getX(0,-y-c),w=l.getY(0,-y-c),L=l.getX(g,-c),F=l.getY(g,-c);var D=l.getX(0,y-c),N=l.getY(0,y-c);u.batchQuad(r,A,P,M,w,L,F,D,N,0,0,1,1,T,T,T,T,2)}r.showLeft&&(T=m.getTintAppendFloatAlpha(r.fillLeft,C),E?(A=l.getX(-g,-c),P=l.getY(-g,-c),M=l.getX(0,y),w=l.getY(0,y),L=l.getX(0,y-c),F=l.getY(0,y-c)):(A=l.getX(-g,0),P=l.getY(-g,0),M=l.getX(0,y),w=l.getY(0,y),L=l.getX(0,y-c),F=l.getY(0,y-c)),u.batchTri(r,A,P,M,w,L,F,0,0,1,1,T,T,T,2)),r.showRight&&(T=m.getTintAppendFloatAlpha(r.fillRight,C),E?(A=l.getX(g,-c),P=l.getY(g,-c),M=l.getX(0,y),w=l.getY(0,y),L=l.getX(0,y-c),F=l.getY(0,y-c)):(A=l.getX(g,0),P=l.getY(g,0),M=l.getX(0,y),w=l.getY(0,y),L=l.getX(0,y-c),F=l.getY(0,y-c)),u.batchTri(r,A,P,M,w,L,F,0,0,1,1,T,T,T,2)),a.pipelines.postBatch(r)}};f.exports=o},579:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(91461),o=t(88829),a=t(52660),r=new h({Extends:m,Mixins:[a],initialize:function(n,u,s,l,v,c,g,y,E){u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=0),v===void 0&&(v=0),c===void 0&&(c=128),g===void 0&&(g=0),m.call(this,n,"Line",new o(l,v,c,g));var C=Math.max(1,this.geom.right-this.geom.left),T=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(u,s),this.setSize(C,T),y!==void 0&&this.setStrokeStyle(1,y,E),this.updateDisplayOrigin()},setLineWidth:function(i,n){return n===void 0&&(n=i),this._startWidth=i,this._endWidth=n,this.lineWidth=i,this},setTo:function(i,n,u,s){return this.geom.setTo(i,n,u,s),this}});f.exports=r},52044:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(17876),m=t(49584),o=function(a,r,i,n){i.addToRenderList(r);var u=a.currentContext;if(m(a,u,r,i,n)){var s=r._displayOriginX,l=r._displayOriginY;r.isStroked&&(h(u,r),u.beginPath(),u.moveTo(r.geom.x1-s,r.geom.y1-l),u.lineTo(r.geom.x2-s,r.geom.y2-l),u.stroke()),u.restore()}};f.exports=o},85665:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61286),m=t(579);h.register("line",function(o,a,r,i,n,u,s,l){return this.displayList.add(new m(this.scene,o,a,r,i,n,u,s,l))})},52660:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(46952),o=t(52044),f.exports={renderWebGL:m,renderCanvas:o}},46952:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(73329),m=t(75512),o=function(a,r,i,n){i.addToRenderList(r);var u=a.pipelines.set(r.pipeline),s=h(r,i,n);u.calcMatrix.copyFrom(s.calc);var l=r._displayOriginX,v=r._displayOriginY,c=i.alpha*r.alpha;if(a.pipelines.preBatch(r),r.isStroked){var g=u.strokeTint,y=m.getTintAppendFloatAlpha(r.strokeColor,r.strokeAlpha*c);g.TL=y,g.TR=y,g.BL=y,g.BR=y;var E=r._startWidth,C=r._endWidth;u.batchLine(r.geom.x1-l,r.geom.y1-v,r.geom.x2-l,r.geom.y2-v,E,C,1,0,!1,s.sprite,s.camera)}a.pipelines.postBatch(r)};f.exports=o},91249:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(70573),m=t(56694),o=t(11117),a=t(14045),r=t(8580),i=t(91461),n=t(18974),u=new m({Extends:i,Mixins:[h],initialize:function(l,v,c,g,y,E){v===void 0&&(v=0),c===void 0&&(c=0),i.call(this,l,"Polygon",new r(g));var C=a(this.geom);this.setPosition(v,c),this.setSize(C.width,C.height),y!==void 0&&this.setFillStyle(y,E),this.updateDisplayOrigin(),this.updateData()},smooth:function(s){s===void 0&&(s=1);for(var l=0;l<s;l++)n(this.geom);return this.updateData()},setTo:function(s){this.geom.setTo(s);var l=a(this.geom);return this.setSize(l.width,l.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var s=[],l=this.geom.points,v=0;v<l.length;v++)s.push(l[v].x,l[v].y);return s.push(l[0].x,l[0].y),this.pathIndexes=o(s),this.pathData=s,this}});f.exports=u},40834:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(15608),m=t(17876),o=t(49584),a=function(r,i,n,u){n.addToRenderList(i);var s=r.currentContext;if(o(r,s,i,n,u)){var l=i._displayOriginX,v=i._displayOriginY,c=i.pathData,g=c.length-1,y=c[0]-l,E=c[1]-v;s.beginPath(),s.moveTo(y,E),i.closePath||(g-=2);for(var C=2;C<g;C+=2){var T=c[C]-l,A=c[C+1]-v;s.lineTo(T,A)}i.closePath&&s.closePath(),i.isFilled&&(h(s,i),s.fill()),i.isStroked&&(m(s,i),s.stroke()),s.restore()}};f.exports=a},88203:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61286),m=t(91249);h.register("polygon",function(o,a,r,i,n){return this.displayList.add(new m(this.scene,o,a,r,i,n))})},70573:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(72841),o=t(40834),f.exports={renderWebGL:m,renderCanvas:o}},72841:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(19543),m=t(73329),o=t(50262),a=function(r,i,n,u){n.addToRenderList(i);var s=r.pipelines.set(i.pipeline),l=m(i,n,u),v=s.calcMatrix.copyFrom(l.calc),c=i._displayOriginX,g=i._displayOriginY,y=n.alpha*i.alpha;r.pipelines.preBatch(i),i.isFilled&&h(s,v,i,y,c,g),i.isStroked&&o(s,i,y,c,g),r.pipelines.postBatch(i)};f.exports=a},517:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(74118),o=t(91461),a=t(37673),r=new h({Extends:o,Mixins:[a],initialize:function(n,u,s,l,v,c,g){u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=128),v===void 0&&(v=128),o.call(this,n,"Rectangle",new m(0,0,l,v)),this.setPosition(u,s),this.setSize(l,v),c!==void 0&&this.setFillStyle(c,g),this.updateDisplayOrigin(),this.updateData()},setSize:function(i,n){this.width=i,this.height=n,this.geom.setSize(i,n),this.updateData(),this.updateDisplayOrigin();var u=this.input;return u&&!u.customHitArea&&(u.hitArea.width=i,u.hitArea.height=n),this},updateData:function(){var i=[],n=this.geom,u=this._tempLine;return n.getLineA(u),i.push(u.x1,u.y1,u.x2,u.y2),n.getLineB(u),i.push(u.x2,u.y2),n.getLineC(u),i.push(u.x2,u.y2),n.getLineD(u),i.push(u.x2,u.y2),this.pathData=i,this}});f.exports=r},4091:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(15608),m=t(17876),o=t(49584),a=function(r,i,n,u){n.addToRenderList(i);var s=r.currentContext;if(o(r,s,i,n,u)){var l=i._displayOriginX,v=i._displayOriginY;i.isFilled&&(h(s,i),s.fillRect(-l,-v,i.width,i.height)),i.isStroked&&(m(s,i),s.beginPath(),s.rect(-l,-v,i.width,i.height),s.stroke()),s.restore()}};f.exports=a},94355:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61286),m=t(517);h.register("rectangle",function(o,a,r,i,n,u){return this.displayList.add(new m(this.scene,o,a,r,i,n,u))})},37673:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(43532),o=t(4091),f.exports={renderWebGL:m,renderCanvas:o}},43532:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(73329),m=t(50262),o=t(75512),a=function(r,i,n,u){n.addToRenderList(i);var s=r.pipelines.set(i.pipeline),l=h(i,n,u);s.calcMatrix.copyFrom(l.calc);var v=i._displayOriginX,c=i._displayOriginY,g=n.alpha*i.alpha;if(r.pipelines.preBatch(i),i.isFilled){var y=s.fillTint,E=o.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*g);y.TL=E,y.TR=E,y.BL=E,y.BR=E,s.batchFillRect(-v,-c,i.width,i.height)}i.isStroked&&m(s,i,g,v,c),r.pipelines.postBatch(i)};f.exports=a},77843:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(87956),m=t(56694),o=t(11117),a=t(91461),r=new m({Extends:a,Mixins:[h],initialize:function(n,u,s,l,v,c,g,y){u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=5),v===void 0&&(v=32),c===void 0&&(c=64),a.call(this,n,"Star",null),this._points=l,this._innerRadius=v,this._outerRadius=c,this.setPosition(u,s),this.setSize(c*2,c*2),g!==void 0&&this.setFillStyle(g,y),this.updateDisplayOrigin(),this.updateData()},setPoints:function(i){return this._points=i,this.updateData()},setInnerRadius:function(i){return this._innerRadius=i,this.updateData()},setOuterRadius:function(i){return this._outerRadius=i,this.updateData()},points:{get:function(){return this._points},set:function(i){this._points=i,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(i){this._innerRadius=i,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(i){this._outerRadius=i,this.updateData()}},updateData:function(){var i=[],n=this._points,u=this._innerRadius,s=this._outerRadius,l=Math.PI/2*3,v=Math.PI/n,c=s,g=s;i.push(c,g+-s);for(var y=0;y<n;y++)i.push(c+Math.cos(l)*s,g+Math.sin(l)*s),l+=v,i.push(c+Math.cos(l)*u,g+Math.sin(l)*u),l+=v;return i.push(c,g+-s),this.pathIndexes=o(i),this.pathData=i,this}});f.exports=r},11401:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(15608),m=t(17876),o=t(49584),a=function(r,i,n,u){n.addToRenderList(i);var s=r.currentContext;if(o(r,s,i,n,u)){var l=i._displayOriginX,v=i._displayOriginY,c=i.pathData,g=c.length-1,y=c[0]-l,E=c[1]-v;s.beginPath(),s.moveTo(y,E),i.closePath||(g-=2);for(var C=2;C<g;C+=2){var T=c[C]-l,A=c[C+1]-v;s.lineTo(T,A)}s.closePath(),i.isFilled&&(h(s,i),s.fill()),i.isStroked&&(m(s,i),s.stroke()),s.restore()}};f.exports=a},23962:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(77843),m=t(61286);m.register("star",function(o,a,r,i,n,u,s){return this.displayList.add(new h(this.scene,o,a,r,i,n,u,s))})},87956:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(12037),o=t(11401),f.exports={renderWebGL:m,renderCanvas:o}},12037:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(19543),m=t(73329),o=t(50262),a=function(r,i,n,u){n.addToRenderList(i);var s=r.pipelines.set(i.pipeline),l=m(i,n,u),v=s.calcMatrix.copyFrom(l.calc),c=i._displayOriginX,g=i._displayOriginY,y=n.alpha*i.alpha;r.pipelines.preBatch(i),i.isFilled&&h(s,v,i,y,c,g),i.isStroked&&o(s,i,y,c,g),r.pipelines.postBatch(i)};f.exports=a},21873:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(91461),o=t(66349),a=t(70498),r=new h({Extends:m,Mixins:[a],initialize:function(n,u,s,l,v,c,g,y,E,C,T){u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=0),v===void 0&&(v=128),c===void 0&&(c=64),g===void 0&&(g=0),y===void 0&&(y=128),E===void 0&&(E=128),m.call(this,n,"Triangle",new o(l,v,c,g,y,E));var A=this.geom.right-this.geom.left,P=this.geom.bottom-this.geom.top;this.setPosition(u,s),this.setSize(A,P),C!==void 0&&this.setFillStyle(C,T),this.updateDisplayOrigin(),this.updateData()},setTo:function(i,n,u,s,l,v){return this.geom.setTo(i,n,u,s,l,v),this.updateData()},updateData:function(){var i=[],n=this.geom,u=this._tempLine;return n.getLineA(u),i.push(u.x1,u.y1,u.x2,u.y2),n.getLineB(u),i.push(u.x2,u.y2),n.getLineC(u),i.push(u.x2,u.y2),this.pathData=i,this}});f.exports=r},60213:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(15608),m=t(17876),o=t(49584),a=function(r,i,n,u){n.addToRenderList(i);var s=r.currentContext;if(o(r,s,i,n,u)){var l=i._displayOriginX,v=i._displayOriginY,c=i.geom.x1-l,g=i.geom.y1-v,y=i.geom.x2-l,E=i.geom.y2-v,C=i.geom.x3-l,T=i.geom.y3-v;s.beginPath(),s.moveTo(c,g),s.lineTo(y,E),s.lineTo(C,T),s.closePath(),i.isFilled&&(h(s,i),s.fill()),i.isStroked&&(m(s,i),s.stroke()),s.restore()}};f.exports=a},79296:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61286),m=t(21873);h.register("triangle",function(o,a,r,i,n,u,s,l,v,c){return this.displayList.add(new m(this.scene,o,a,r,i,n,u,s,l,v,c))})},70498:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(72291),o=t(60213),f.exports={renderWebGL:m,renderCanvas:o}},72291:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(73329),m=t(50262),o=t(75512),a=function(r,i,n,u){n.addToRenderList(i);var s=r.pipelines.set(i.pipeline),l=h(i,n,u);s.calcMatrix.copyFrom(l.calc);var v=i._displayOriginX,c=i._displayOriginY,g=n.alpha*i.alpha;if(r.pipelines.preBatch(i),i.isFilled){var y=s.fillTint,E=o.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*g);y.TL=E,y.TR=E,y.BL=E,y.BR=E;var C=i.geom.x1-v,T=i.geom.y1-c,A=i.geom.x2-v,P=i.geom.y2-c,M=i.geom.x3-v,w=i.geom.y3-c;s.batchFillTriangle(C,T,A,P,M,w,l.sprite,l.camera)}i.isStroked&&m(s,i,g,v,c),r.pipelines.postBatch(i)};f.exports=a},13747:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(16569),m=t(56694),o=t(64937),a=t(89980),r=t(20791),i=new m({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Size,o.TextureCrop,o.Tint,o.Transform,o.Visible,r],initialize:function(u,s,l,v,c){a.call(this,u,"Sprite"),this._crop=this.resetCropObject(),this.anims=new h(this),this.setTexture(v,c),this.setPosition(s,l),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(n,u){this.anims.update(n,u)},play:function(n,u){return this.anims.play(n,u)},playReverse:function(n,u){return this.anims.playReverse(n,u)},playAfterDelay:function(n,u){return this.anims.playAfterDelay(n,u)},playAfterRepeat:function(n,u){return this.anims.playAfterRepeat(n,u)},chain:function(n){return this.anims.chain(n)},stop:function(){return this.anims.stop()},stopAfterDelay:function(n){return this.anims.stopAfterDelay(n)},stopAfterRepeat:function(n){return this.anims.stopAfterRepeat(n)},stopOnFrame:function(n){return this.anims.stopOnFrame(n)},toJSON:function(){return o.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});f.exports=i},27573:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){m.addToRenderList(h),t.batchSprite(h,h.frame,m,o)};f.exports=S},89219:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(88933),m=t(32291),o=t(99325),a=t(20494),r=t(13747);o.register("sprite",function(i,n){i===void 0&&(i={});var u=a(i,"key",null),s=a(i,"frame",null),l=new r(this.scene,0,0,u,s);return n!==void 0&&(i.add=n),h(this.scene,l,i),m(l,i),l})},66135:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61286),m=t(13747);h.register("sprite",function(o,a,r,i){return this.displayList.add(new m(this.scene,o,a,r,i))})},20791:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(21034),o=t(27573),f.exports={renderWebGL:m,renderCanvas:o}},21034:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){m.addToRenderList(h),h.pipeline.batchSprite(h,m,o)};f.exports=S},32979:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){var o=t.canvas,a=t.context,r=t.style,i=[],n=0,u=m.length;r.maxLines>0&&r.maxLines<m.length&&(u=r.maxLines),r.syncFont(o,a);for(var s=0;s<u;s++){var l=r.strokeThickness;l+=a.measureText(m[s]).width,r.wordWrap&&(l-=a.measureText(" ").width),i[s]=Math.ceil(l),n=Math.max(n,i[s])}var v=h.fontSize+r.strokeThickness,c=v*u,g=t.lineSpacing;return u>1&&(c+=g*(u-1)),{width:n,height:c,lines:u,lineWidths:i,lineSpacing:g,lineHeight:v}};f.exports=S},27030:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61068),m=function(o){var a=h.create(this),r=a.getContext("2d",{willReadFrequently:!0});o.syncFont(a,r);var i=r.measureText(o.testString);if("actualBoundingBoxAscent"in i){var n=i.actualBoundingBoxAscent,u=i.actualBoundingBoxDescent;return h.remove(a),{ascent:n,descent:u,fontSize:n+u}}var s=Math.ceil(i.width*o.baselineX),l=s,v=2*l;l=l*o.baselineY|0,a.width=s,a.height=v,r.fillStyle="#f00",r.fillRect(0,0,s,v),r.font=o._font,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(o.testString,0,l);var c={ascent:0,descent:0,fontSize:0},g=r.getImageData(0,0,s,v);if(!g)return c.ascent=l,c.descent=l+6,c.fontSize=c.ascent+c.descent,h.remove(a),c;var y=g.data,E=y.length,C=s*4,T,A,P=0,M=!1;for(T=0;T<l;T++){for(A=0;A<C;A+=4)if(y[P+A]!==255){M=!0;break}if(!M)P+=C;else break}for(c.ascent=l-T,P=E-C,M=!1,T=v;T>l;T--){for(A=0;A<C;A+=4)if(y[P+A]!==255){M=!0;break}if(!M)P-=C;else break}return c.descent=T-l,c.fontSize=c.ascent+c.descent,h.remove(a),c};f.exports=m},76555:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(99584),m=t(61068),o=t(56694),a=t(64937),r=t(89980),i=t(32979),n=t(10850),u=t(55638),s=t(80032),l=t(74744),v=new o({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,s],initialize:function(g,y,E,C,T){y===void 0&&(y=0),E===void 0&&(E=0),r.call(this,g,"Text"),this.renderer=g.sys.renderer,this.setPosition(y,E),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=m.create(this),this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.style=new l(this,T),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=g.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(C),T&&T.padding&&this.setPadding(T.padding),T&&T.lineSpacing&&this.setLineSpacing(T.lineSpacing)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",h(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(c){var g=this.style;if(g.wordWrapCallback){var y=g.wordWrapCallback.call(g.wordWrapCallbackScope,c,this);return Array.isArray(y)&&(y=y.join(`
`)),y}else return g.wordWrapWidth?g.wordWrapUseAdvanced?this.advancedWordWrap(c,this.context,this.style.wordWrapWidth):this.basicWordWrap(c,this.context,this.style.wordWrapWidth):c},advancedWordWrap:function(c,g,y){for(var E="",C=c.replace(/ +/gi," ").split(this.splitRegExp),T=C.length,A=0;A<T;A++){var P=C[A],M="";P=P.replace(/^ *|\s*$/gi,"");var w=g.measureText(P).width;if(w<y){E+=P+`
`;continue}for(var L=y,F=P.split(" "),D=0;D<F.length;D++){var N=F[D],B=N+" ",b=g.measureText(B).width;if(b>L){if(D===0){for(var W=B;W.length&&(W=W.slice(0,-1),b=g.measureText(W).width,!(b<=L)););if(!W.length)throw new Error("wordWrapWidth < a single character");var Y=N.substr(W.length);F[D]=Y,M+=W}var K=F[D].length?D:D+1,G=F.slice(K).join(" ").replace(/[ \n]*$/gi,"");C.splice(A+1,0,G),T=C.length;break}else M+=B,L-=b}E+=M.replace(/[ \n]*$/gi,"")+`
`}return E=E.replace(/[\s|\n]*$/gi,""),E},basicWordWrap:function(c,g,y){for(var E="",C=c.split(this.splitRegExp),T=C.length-1,A=g.measureText(" ").width,P=0;P<=T;P++){for(var M=y,w=C[P].split(" "),L=w.length-1,F=0;F<=L;F++){var D=w[F],N=g.measureText(D).width,B=N;F<L&&(B+=A),B>M&&F>0&&(E+=`
`,M=y),E+=D,F<L?(E+=" ",M-=B):M-=N}P<T&&(E+=`
`)}return E},getWrappedText:function(c){c===void 0&&(c=this._text),this.style.syncFont(this.canvas,this.context);var g=this.runWordWrap(c);return g.split(this.splitRegExp)},setText:function(c){return!c&&c!==0&&(c=""),Array.isArray(c)&&(c=c.join(`
`)),c!==this._text&&(this._text=c.toString(),this.updateText()),this},appendText:function(c,g){g===void 0&&(g=!0),!c&&c!==0&&(c=""),Array.isArray(c)&&(c=c.join(`
`)),c=c.toString();var y=this._text.concat(g?`
`+c:c);return y!==this._text&&(this._text=y,this.updateText()),this},setStyle:function(c){return this.style.setStyle(c)},setFont:function(c){return this.style.setFont(c)},setFontFamily:function(c){return this.style.setFontFamily(c)},setFontSize:function(c){return this.style.setFontSize(c)},setFontStyle:function(c){return this.style.setFontStyle(c)},setFixedSize:function(c,g){return this.style.setFixedSize(c,g)},setBackgroundColor:function(c){return this.style.setBackgroundColor(c)},setFill:function(c){return this.style.setFill(c)},setColor:function(c){return this.style.setColor(c)},setStroke:function(c,g){return this.style.setStroke(c,g)},setShadow:function(c,g,y,E,C,T){return this.style.setShadow(c,g,y,E,C,T)},setShadowOffset:function(c,g){return this.style.setShadowOffset(c,g)},setShadowColor:function(c){return this.style.setShadowColor(c)},setShadowBlur:function(c){return this.style.setShadowBlur(c)},setShadowStroke:function(c){return this.style.setShadowStroke(c)},setShadowFill:function(c){return this.style.setShadowFill(c)},setWordWrapWidth:function(c,g){return this.style.setWordWrapWidth(c,g)},setWordWrapCallback:function(c,g){return this.style.setWordWrapCallback(c,g)},setAlign:function(c){return this.style.setAlign(c)},setResolution:function(c){return this.style.setResolution(c)},setLineSpacing:function(c){return this.lineSpacing=c,this.updateText()},setPadding:function(c,g,y,E){if(typeof c=="object"){var C=c,T=n(C,"x",null);T!==null?(c=T,y=T):(c=n(C,"left",0),y=n(C,"right",c));var A=n(C,"y",null);A!==null?(g=A,E=A):(g=n(C,"top",0),E=n(C,"bottom",g))}else c===void 0&&(c=0),g===void 0&&(g=c),y===void 0&&(y=c),E===void 0&&(E=g);return this.padding.left=c,this.padding.top=g,this.padding.right=y,this.padding.bottom=E,this.updateText()},setMaxLines:function(c){return this.style.setMaxLines(c)},updateText:function(){var c=this.canvas,g=this.context,y=this.style,E=y.resolution,C=y.metrics;y.syncFont(c,g);var T=this._text;(y.wordWrapWidth||y.wordWrapCallback)&&(T=this.runWordWrap(this._text));var A=T.split(this.splitRegExp),P=i(this,C,A),M=this.padding,w;y.fixedWidth===0?(this.width=P.width+M.left+M.right,w=P.width):(this.width=y.fixedWidth,w=this.width-M.left-M.right,w<P.width&&(w=P.width)),y.fixedHeight===0?this.height=P.height+M.top+M.bottom:this.height=y.fixedHeight;var L=this.width,F=this.height;this.updateDisplayOrigin(),L*=E,F*=E,L=Math.max(L,1),F=Math.max(F,1),c.width!==L||c.height!==F?(c.width=L,c.height=F,this.frame.setSize(L,F),y.syncFont(c,g),y.rtl&&(g.direction="rtl")):g.clearRect(0,0,L,F),g.save(),g.scale(E,E),y.backgroundColor&&(g.fillStyle=y.backgroundColor,g.fillRect(0,0,L,F)),y.syncStyle(c,g),g.translate(M.left,M.top);for(var D,N,B=0;B<P.lines;B++){if(D=y.strokeThickness/2,N=y.strokeThickness/2+B*P.lineHeight+C.ascent,B>0&&(N+=P.lineSpacing*B),y.rtl)D=L-D-M.left-M.right;else if(y.align==="right")D+=w-P.lineWidths[B];else if(y.align==="center")D+=(w-P.lineWidths[B])/2;else if(y.align==="justify"){var b=.85;if(P.lineWidths[B]/P.width>=b){var W=P.width-P.lineWidths[B],Y=g.measureText(" ").width,K=A[B].trim(),G=K.split(" ");W+=(A[B].length-K.length)*Y;for(var z=Math.floor(W/Y),O=0;z>0;)G[O]+=" ",O=(O+1)%(G.length-1||1),--z;A[B]=G.join(" ")}}this.autoRound&&(D=Math.round(D),N=Math.round(N)),y.strokeThickness&&(y.syncShadow(g,y.shadowStroke),g.strokeText(A[B],D,N)),y.color&&(y.syncShadow(g,y.shadowFill),g.fillText(A[B],D,N))}g.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(c,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var V=this.input;return V&&!V.customHitArea&&(V.hitArea.width=this.width,V.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(c){this.setText(c)}},toJSON:function(){var c=a.ToJSON(this),g={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return c.data=g,c},preDestroy:function(){this.style.rtl&&u(this.canvas),m.remove(this.canvas),this.texture.destroy()}});f.exports=v},71649:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){h.width===0||h.height===0||(m.addToRenderList(h),t.batchSprite(h,h.frame,m,o))};f.exports=S},75397:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(88933),m=t(99325),o=t(20494),a=t(76555);m.register("text",function(r,i){r===void 0&&(r={});var n=o(r,"text",""),u=o(r,"style",null),s=o(r,"padding",null);s!==null&&(u.padding=s);var l=new a(this.scene,0,0,n,u);return i!==void 0&&(r.add=i),h(this.scene,l,r),l.autoRound=o(r,"autoRound",!0),l.resolution=o(r,"resolution",1),l})},94627:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(76555),m=t(61286);m.register("text",function(o,a,r,i){return this.displayList.add(new h(this.scene,o,a,r,i))})},80032:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(76128),o=t(71649),f.exports={renderWebGL:m,renderCanvas:o}},74744:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(20494),o=t(10850),a=t(27030),r={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},i=new h({initialize:function(u,s){this.parent=u,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(s,!1,!0)},setStyle:function(n,u,s){u===void 0&&(u=!0),s===void 0&&(s=!1),n&&n.hasOwnProperty("fontSize")&&typeof n.fontSize=="number"&&(n.fontSize=n.fontSize.toString()+"px");for(var l in r){var v=s?r[l][1]:this[l];l==="wordWrapCallback"||l==="wordWrapCallbackScope"?this[l]=o(n,r[l][0],v):this[l]=m(n,r[l][0],v)}var c=o(n,"font",null);c!==null&&this.setFont(c,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var g=o(n,"fill",null);g!==null&&(this.color=g);var y=o(n,"metrics",!1);return y?this.metrics={ascent:o(y,"ascent",0),descent:o(y,"descent",0),fontSize:o(y,"fontSize",0)}:(u||!this.metrics)&&(this.metrics=a(this)),u?this.parent.updateText():this.parent},syncFont:function(n,u){u.font=this._font},syncStyle:function(n,u){u.textBaseline="alphabetic",u.fillStyle=this.color,u.strokeStyle=this.stroke,u.lineWidth=this.strokeThickness,u.lineCap="round",u.lineJoin="round"},syncShadow:function(n,u){u?(n.shadowOffsetX=this.shadowOffsetX,n.shadowOffsetY=this.shadowOffsetY,n.shadowColor=this.shadowColor,n.shadowBlur=this.shadowBlur):(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowColor=0,n.shadowBlur=0)},update:function(n){return n&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=a(this)),this.parent.updateText()},setFont:function(n,u){u===void 0&&(u=!0);var s=n,l="",v="";if(typeof n!="string")s=o(n,"fontFamily","Courier"),l=o(n,"fontSize","16px"),v=o(n,"fontStyle","");else{var c=n.split(" "),g=0;v=c.length>2?c[g++]:"",l=c[g++]||"16px",s=c[g++]||"Courier"}return(s!==this.fontFamily||l!==this.fontSize||v!==this.fontStyle)&&(this.fontFamily=s,this.fontSize=l,this.fontStyle=v,u&&this.update(!0)),this.parent},setFontFamily:function(n){return this.fontFamily!==n&&(this.fontFamily=n,this.update(!0)),this.parent},setFontStyle:function(n){return this.fontStyle!==n&&(this.fontStyle=n,this.update(!0)),this.parent},setFontSize:function(n){return typeof n=="number"&&(n=n.toString()+"px"),this.fontSize!==n&&(this.fontSize=n,this.update(!0)),this.parent},setTestString:function(n){return this.testString=n,this.update(!0)},setFixedSize:function(n,u){return this.fixedWidth=n,this.fixedHeight=u,n&&(this.parent.width=n),u&&(this.parent.height=u),this.update(!1)},setBackgroundColor:function(n){return this.backgroundColor=n,this.update(!1)},setFill:function(n){return this.color=n,this.update(!1)},setColor:function(n){return this.color=n,this.update(!1)},setResolution:function(n){return this.resolution=n,this.update(!1)},setStroke:function(n,u){return u===void 0&&(u=this.strokeThickness),n===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==n||this.strokeThickness!==u)&&(this.stroke=n,this.strokeThickness=u,this.update(!0)),this.parent},setShadow:function(n,u,s,l,v,c){return n===void 0&&(n=0),u===void 0&&(u=0),s===void 0&&(s="#000"),l===void 0&&(l=0),v===void 0&&(v=!1),c===void 0&&(c=!0),this.shadowOffsetX=n,this.shadowOffsetY=u,this.shadowColor=s,this.shadowBlur=l,this.shadowStroke=v,this.shadowFill=c,this.update(!1)},setShadowOffset:function(n,u){return n===void 0&&(n=0),u===void 0&&(u=n),this.shadowOffsetX=n,this.shadowOffsetY=u,this.update(!1)},setShadowColor:function(n){return n===void 0&&(n="#000"),this.shadowColor=n,this.update(!1)},setShadowBlur:function(n){return n===void 0&&(n=0),this.shadowBlur=n,this.update(!1)},setShadowStroke:function(n){return this.shadowStroke=n,this.update(!1)},setShadowFill:function(n){return this.shadowFill=n,this.update(!1)},setWordWrapWidth:function(n,u){return u===void 0&&(u=!1),this.wordWrapWidth=n,this.wordWrapUseAdvanced=u,this.update(!1)},setWordWrapCallback:function(n,u){return u===void 0&&(u=null),this.wordWrapCallback=n,this.wordWrapCallbackScope=u,this.update(!1)},setAlign:function(n){return n===void 0&&(n="left"),this.align=n,this.update(!1)},setMaxLines:function(n){return n===void 0&&(n=0),this.maxLines=n,this.update(!1)},getTextMetrics:function(){var n=this.metrics;return{ascent:n.ascent,descent:n.descent,fontSize:n.fontSize}},toJSON:function(){var n={};for(var u in r)n[u]=this[u];return n.metrics=this.getTextMetrics(),n},destroy:function(){this.parent=void 0}});f.exports=i},76128:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(75512),m=function(o,a,r,i){if(!(a.width===0||a.height===0)){r.addToRenderList(a);var n=a.frame,u=n.width,s=n.height,l=h.getTintAppendFloatAlpha,v=o.pipelines.set(a.pipeline,a),c=v.setTexture2D(n.glTexture,a);v.batchTexture(a,n.glTexture,u,s,a.x,a.y,u/a.style.resolution,s/a.style.resolution,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.displayOriginX,a.displayOriginY,0,0,u,s,l(a.tintTopLeft,r.alpha*a._alphaTL),l(a.tintTopRight,r.alpha*a._alphaTR),l(a.tintBottomLeft,r.alpha*a._alphaBL),l(a.tintBottomRight,r.alpha*a._alphaBR),a.tintFill,0,0,r,i,!1,c)}};f.exports=m},35856:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61068),m=t(56694),o=t(64937),a=t(89980),r=t(3504),i=t(8213),n=t(9271),u=t(93736),s=8,l=new m({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,n],initialize:function(c,g,y,E,C,T,A){var P=c.sys.renderer;a.call(this,c,"TileSprite");var M=c.sys.textures.get(T),w=M.get(A);w.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),M=c.sys.textures.get("__MISSING"),w=M.get()),M.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),M=c.sys.textures.get("__MISSING"),w=M.get()),!E||!C?(E=w.width,C=w.height):(E=Math.floor(E),C=Math.floor(C)),this._tilePosition=new u,this._tileScale=new u(1,1),this.dirty=!1,this.renderer=P,this.canvas=h.create(this,E,C),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=M,this.displayFrame=w,this._crop=this.resetCropObject(),this.texture=c.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=r(w.width),this.potHeight=r(w.height),this.fillCanvas=h.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(g,y),this.setSize(E,C),this.setFrame(A),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(v,c){return this.displayTexture=this.scene.sys.textures.get(v),this.setFrame(c)},setFrame:function(v){var c=this.displayTexture.get(v);return this.potWidth=r(c.width),this.potHeight=r(c.height),this.canvas.width=0,!c.cutWidth||!c.cutHeight?this.renderFlags&=~s:this.renderFlags|=s,this.displayFrame=c,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(v,c){return v!==void 0&&(this.tilePositionX=v),c!==void 0&&(this.tilePositionY=c),this},setTileScale:function(v,c){return v===void 0&&(v=this.tileScaleX),c===void 0&&(c=v),this.tileScaleX=v,this.tileScaleY=c,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var v=this.displayFrame;if(v.source.isRenderTexture||v.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var c=this.fillContext,g=this.fillCanvas,y=this.potWidth,E=this.potHeight;(!this.renderer||!this.renderer.gl)&&(y=v.cutWidth,E=v.cutHeight),c.clearRect(0,0,y,E),g.width=y,g.height=E,c.drawImage(v.source.image,v.cutX,v.cutY,v.cutWidth,v.cutHeight,0,0,y,E),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(g,this.fillPattern):this.fillPattern=c.createPattern(g,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var v=this.canvas;if((v.width!==this.width||v.height!==this.height)&&(v.width=this.width,v.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var c=this.context;this.scene.sys.game.config.antialias||i.disable(c);var g=this._tileScale.x,y=this._tileScale.y,E=this._tilePosition.x,C=this._tilePosition.y;c.clearRect(0,0,this.width,this.height),c.save(),c.scale(g,y),c.translate(-E,-C),c.fillStyle=this.fillPattern,c.fillRect(E,C,this.width/g,this.height/y),c.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),h.remove(this.canvas),h.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(v){this._tilePosition.x=v,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(v){this._tilePosition.y=v,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(v){this._tileScale.x=v,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(v){this._tileScale.y=v,this.dirty=!0}}});f.exports=l},93305:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){h.updateCanvas(),m.addToRenderList(h),t.batchSprite(h,h.frame,m,o)};f.exports=S},63950:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(88933),m=t(99325),o=t(20494),a=t(35856);m.register("tileSprite",function(r,i){r===void 0&&(r={});var n=o(r,"x",0),u=o(r,"y",0),s=o(r,"width",512),l=o(r,"height",512),v=o(r,"key",""),c=o(r,"frame",""),g=new a(this.scene,n,u,s,l,v,c);return i!==void 0&&(r.add=i),h(this.scene,g,r),g})},20509:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(35856),m=t(61286);m.register("tileSprite",function(o,a,r,i,n,u){return this.displayList.add(new h(this.scene,o,a,r,i,n,u))})},9271:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(74287),o=t(93305),f.exports={renderWebGL:m,renderCanvas:o}},74287:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(75512),m=function(o,a,r,i){a.updateCanvas();var n=a.width,u=a.height;if(!(n===0||u===0)){r.addToRenderList(a);var s=h.getTintAppendFloatAlpha,l=o.pipelines.set(a.pipeline,a),v=l.setTexture2D(a.fillPattern,a);l.batchTexture(a,a.fillPattern,a.displayFrame.width*a.tileScaleX,a.displayFrame.height*a.tileScaleY,a.x,a.y,n,u,a.scaleX,a.scaleY,a.rotation,a.flipX,a.flipY,a.scrollFactorX,a.scrollFactorY,a.originX*n,a.originY*u,0,0,n,u,s(a.tintTopLeft,r.alpha*a._alphaTL),s(a.tintTopRight,r.alpha*a._alphaTR),s(a.tintBottomLeft,r.alpha*a._alphaBL),s(a.tintBottomRight,r.alpha*a._alphaBR),a.tintFill,a.tilePositionX%a.displayFrame.width/a.displayFrame.width,a.tilePositionY%a.displayFrame.height/a.displayFrame.height,r,i,!1,v)}};f.exports=m},8630:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82897),m=t(56694),o=t(64937),a=t(56631),r=t(97081),i=t(89980),n=t(83392),u=t(76038),s=t(76583),l=t(77974),v=new m({Extends:i,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.PostPipeline,o.ScrollFactor,o.Size,o.TextureCrop,o.Tint,o.Transform,o.Visible,l],initialize:function(g,y,E,C){i.call(this,g,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=s(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._rfvCallbackId=0;var T=g.sys.game;this._device=T.device.video,this.setPosition(y,E),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),T.events.on(r.PAUSE,this.globalPause,this),T.events.on(r.RESUME,this.globalResume,this);var A=g.sys.sound;A&&A.on(u.GLOBAL_MUTE,this.globalMute,this),C&&this.load(C)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(c){var g=this.scene.sys.cache.video.get(c);return g?(this.cacheKey=c,this.loadHandler(g.url,g.noAudio,g.crossOrigin)):console.warn("No video in cache for key: "+c),this},changeSource:function(c,g,y,E,C){g===void 0&&(g=!0),y===void 0&&(y=!1),this.cacheKey!==c&&(this.load(c),g&&this.play(y,E,C))},getVideoKey:function(){return this.cacheKey},loadURL:function(c,g,y){g===void 0&&(g=!1);var E=this._device.getVideoURL(c);return E?(this.cacheKey="",this.loadHandler(E.url,g,y)):console.warn("No supported video format found for "+c),this},loadMediaStream:function(c,g,y){return this.loadHandler(null,g,y,c)},loadHandler:function(c,g,y,E){g||(g=!1);var C=this.video;if(C?(this.removeLoadEventHandlers(),this.stop()):(C=document.createElement("video"),C.controls=!1,C.setAttribute("playsinline","playsinline"),C.setAttribute("preload","auto"),C.setAttribute("disablePictureInPicture","true")),g?(C.muted=!0,C.defaultMuted=!0,C.setAttribute("autoplay","autoplay")):(C.muted=!1,C.defaultMuted=!1,C.removeAttribute("autoplay")),y?C.setAttribute("crossorigin",y):C.removeAttribute("crossorigin"),E)if("srcObject"in C)try{C.srcObject=E}catch(T){if(T.name!=="TypeError")throw T;C.src=URL.createObjectURL(E)}else C.src=URL.createObjectURL(E);else C.src=c;return this.addLoadEventHandlers(),this.retry=0,this.video=C,this._playCalled=!1,C.load(),this},requestVideoFrame:function(c,g){var y=this.video;if(y){var E=g.width,C=g.height,T=this.videoTexture,A=this.videoTextureSource,P=!T||A.source!==y;P?(this._codePaused=y.paused,this._codeMuted=y.muted,T?(A.source=y,A.width=E,A.height=C,T.get().setSize(E,C)):(T=this.scene.sys.textures.create(this._key,y,E,C),T.add("__BASE",0,0,0,E,C),this.setTexture(T),this.videoTexture=T,this.videoTextureSource=T.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(a.VIDEO_TEXTURE,this,T)),this.setSizeToFrame(),this.updateDisplayOrigin()):A.update(),this.isStalled=!1,this.metadata=g;var M=g.mediaTime;P&&(this._lastUpdate=M,this.emit(a.VIDEO_CREATED,this,E,C),this.frameReady||(this.frameReady=!0,this.emit(a.VIDEO_PLAY,this))),this._playingMarker?M>=this._markerOut&&(y.loop?(y.currentTime=this._markerIn,this.emit(a.VIDEO_LOOP,this)):(this.stop(!1),this.emit(a.VIDEO_COMPLETE,this))):M<this._lastUpdate&&this.emit(a.VIDEO_LOOP,this),this._lastUpdate=M,this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(c,g,y){g===void 0&&(g=-1),y===void 0&&(y=n.MAX_SAFE_INTEGER);var E=this.video;return!E||this.isPlaying()?(E||console.warn("Video not loaded"),this):(c===void 0&&(c=E.loop),E.loop=c,this._markerIn=g,this._markerOut=y,this._playingMarker=g>-1&&y>g&&y<n.MAX_SAFE_INTEGER,this._playCalled||(this._rfvCallbackId=E.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},addLoadEventHandlers:function(){var c=this.video;c&&(c.addEventListener("error",this._loadCallbackHandler),c.addEventListener("abort",this._loadCallbackHandler))},removeLoadEventHandlers:function(){var c=this.video;c&&(c.removeEventListener("error",this._loadCallbackHandler),c.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var c=this.video;if(c){var g=this._callbacks;for(var y in g)c.addEventListener(y,g[y])}},removeEventHandlers:function(){var c=this.video;if(c){var g=this._callbacks;for(var y in g)c.removeEventListener(y,g[y])}},createPlayPromise:function(c){c===void 0&&(c=!0);var g=this.video,y=g.play();if(y!==void 0){var E=this.playSuccess.bind(this),C=this.playError.bind(this);if(!c){var T=this;C=function(){T.failedPlayAttempts++}}y.then(E).catch(C)}else g.addEventListener("playing",this._callbacks.legacy),c||this.failedPlayAttempts++},addMarker:function(c,g,y){return!isNaN(g)&&g>=0&&!isNaN(y)&&y>g&&(this.markers[c]=[g,y]),this},playMarker:function(c,g){var y=this.markers[c];return y&&this.play(g,y[0],y[1]),this},removeMarker:function(c){return delete this.markers[c],this},snapshot:function(c,g){return c===void 0&&(c=this.width),g===void 0&&(g=this.height),this.snapshotArea(0,0,this.width,this.height,c,g)},snapshotArea:function(c,g,y,E,C,T){c===void 0&&(c=0),g===void 0&&(g=0),y===void 0&&(y=this.width),E===void 0&&(E=this.height),C===void 0&&(C=y),T===void 0&&(T=E);var A=this.video,P=this.snapshotTexture;return P?(P.setSize(C,T),A&&P.context.drawImage(A,c,g,y,E,0,0,C,T)):(P=this.scene.sys.textures.createCanvas(s(),C,T),this.snapshotTexture=P,A&&P.context.drawImage(A,c,g,y,E,0,0,C,T)),P.update()},saveSnapshotTexture:function(c){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,c):this.snapshotTexture=this.scene.sys.textures.createCanvas(c,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(a.VIDEO_UNLOCKED,this));var c=this.scene.sys.sound;c&&c.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(c){var g=c.name;g==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(a.VIDEO_LOCKED,this)):g==="NotSupportedError"?(this.stop(!1),this.emit(a.VIDEO_UNSUPPORTED,this,c)):(this.stop(!1),this.emit(a.VIDEO_ERROR,this,c))},legacyPlayHandler:function(){var c=this.video;c&&(this.playSuccess(),c.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(a.VIDEO_PLAYING,this)},loadErrorHandler:function(c){this.stop(!1),this.emit(a.VIDEO_ERROR,this,c)},stalledHandler:function(c){this.isStalled=!0,this.emit(a.VIDEO_STALLED,this,c)},completeHandler:function(){this._playCalled=!1,this.emit(a.VIDEO_COMPLETE,this)},preUpdate:function(c,g){var y=this.video;!y||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=g,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(c){var g=this.video;if(g){var y=g.duration;if(y!==1/0&&!isNaN(y)){var E=y*c;this.setCurrentTime(E)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(c){var g=this.video;if(g){if(typeof c=="string"){var y=c[0],E=parseFloat(c.substr(1));y==="+"?c=g.currentTime+E:y==="-"&&(c=g.currentTime-E)}g.currentTime=c}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(a.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(a.VIDEO_SEEKED,this)},getProgress:function(){var c=this.video;if(c){var g=c.duration;if(g!==1/0&&!isNaN(g))return c.currentTime/g}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(c){c===void 0&&(c=!0),this._codeMuted=c;var g=this.video;return g&&(g.muted=this._systemMuted?!0:c),this},isMuted:function(){return this._codeMuted},globalMute:function(c,g){this._systemMuted=g;var y=this.video;y&&(y.muted=this._codeMuted?!0:g)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(c){c===void 0&&(c=!0);var g=this.video;return this._codePaused=c,g&&!g.ended&&(c?g.paused||(this.removeEventHandlers(),g.pause()):c||(this._playCalled?g.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(c){return c===void 0&&(c=1),this.video&&(this.video.volume=h(c,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(c){return this.video&&(this.video.playbackRate=c),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(c){return c===void 0&&(c=!0),this.video&&(this.video.loop=c),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(c,g){return g===void 0&&(g=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,c),this.videoTextureSource.setFlipY(g)),this._key=c,this.flipY=g,!!this.videoTexture},stop:function(c){c===void 0&&(c=!0);var g=this.video;return g&&(this.removeEventHandlers(),g.cancelVideoFrameCallback(this._rfvCallbackId),g.pause()),this.retry=0,this._playCalled=!1,c&&this.emit(a.VIDEO_STOP,this),this},removeVideoElement:function(){var c=this.video;if(c){for(c.parentNode&&c.parentNode.removeChild(c);c.hasChildNodes();)c.removeChild(c.firstChild);c.removeAttribute("autoplay"),c.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var c=this.scene.sys.game.events;c.off(r.PAUSE,this.globalPause,this),c.off(r.RESUME,this.globalResume,this);var g=this.scene.sys.sound;g&&g.off(u.GLOBAL_MUTE,this.globalMute,this)}});f.exports=v},56933:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){h.videoTexture&&(m.addToRenderList(h),t.batchSprite(h,h.frame,m,o))};f.exports=S},65601:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(88933),m=t(99325),o=t(20494),a=t(8630);m.register("video",function(r,i){r===void 0&&(r={});var n=o(r,"key",null),u=new a(this.scene,0,0,n);return i!==void 0&&(r.add=i),h(this.scene,u,r),u})},215:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(8630),m=t(61286);m.register("video",function(o,a,r){return this.displayList.add(new h(this.scene,o,a,r))})},77974:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(83572),o=t(56933),f.exports={renderWebGL:m,renderCanvas:o}},83572:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){h.videoTexture&&(m.addToRenderList(h),h.pipeline.batchSprite(h,m,o))};f.exports=S},71030:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(95723),m=t(26673),o=t(65650),a=t(56694),r=t(64937),i=t(89980),n=t(74118),u=t(94287),s=new a({Extends:i,Mixins:[r.Depth,r.GetBounds,r.Origin,r.Transform,r.ScrollFactor,r.Visible],initialize:function(v,c,g,y,E){y===void 0&&(y=1),E===void 0&&(E=y),i.call(this,v,"Zone"),this.setPosition(c,g),this.width=y,this.height=E,this.blendMode=h.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(l){this.scaleX=l/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(l){this.scaleY=l/this.height}},setSize:function(l,v,c){c===void 0&&(c=!0),this.width=l,this.height=v,this.updateDisplayOrigin();var g=this.input;return c&&g&&!g.customHitArea&&(g.hitArea.width=l,g.hitArea.height=v),this},setDisplaySize:function(l,v){return this.displayWidth=l,this.displayHeight=v,this},setCircleDropZone:function(l){return this.setDropZone(new m(0,0,l),o)},setRectangleDropZone:function(l,v){return this.setDropZone(new n(0,0,l,v),u)},setDropZone:function(l,v){return this.input||this.setInteractive(l,v,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(l,v,c){c.addToRenderList(v)},renderWebGL:function(l,v,c){c.addToRenderList(v)}});f.exports=s},24067:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(99325),m=t(20494),o=t(71030);h.register("zone",function(a){var r=m(a,"x",0),i=m(a,"y",0),n=m(a,"width",1),u=m(a,"height",n);return new o(this.scene,r,i,n,u)})},34546:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(71030),m=t(61286);m.register("zone",function(o,a,r,i){return this.displayList.add(new h(this.scene,o,a,r,i))})},95847:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.radius>0?Math.PI*t.radius*t.radius:0};f.exports=S},26673:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(65650),o=t(94026),a=t(62941),r=t(52394),i=t(30977),n=new h({initialize:function(s,l,v){s===void 0&&(s=0),l===void 0&&(l=0),v===void 0&&(v=0),this.type=r.CIRCLE,this.x=s,this.y=l,this._radius=v,this._diameter=v*2},contains:function(u,s){return m(this,u,s)},getPoint:function(u,s){return o(this,u,s)},getPoints:function(u,s,l){return a(this,u,s,l)},getRandomPoint:function(u){return i(this,u)},setTo:function(u,s,l){return this.x=u,this.y=s,this._radius=l,this._diameter=l*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(u,s){return s===void 0&&(s=u),this.x=u,this.y=s,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(u){this._radius=u,this._diameter=u*2}},diameter:{get:function(){return this._diameter},set:function(u){this._diameter=u,this._radius=u*.5}},left:{get:function(){return this.x-this._radius},set:function(u){this.x=u+this._radius}},right:{get:function(){return this.x+this._radius},set:function(u){this.x=u-this._radius}},top:{get:function(){return this.y-this._radius},set:function(u){this.y=u+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(u){this.y=u-this._radius}}});f.exports=n},37964:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return 2*(Math.PI*t.radius)};f.exports=S},72233:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=function(o,a,r){return r===void 0&&(r=new h),r.x=o.x+o.radius*Math.cos(a),r.y=o.y+o.radius*Math.sin(a),r};f.exports=m},61761:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(26673),m=function(o){return new h(o.x,o.y,o.radius)};f.exports=m},65650:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){if(t.radius>0&&h>=t.left&&h<=t.right&&m>=t.top&&m<=t.bottom){var o=(t.x-h)*(t.x-h),a=(t.y-m)*(t.y-m);return o+a<=t.radius*t.radius}else return!1};f.exports=S},39187:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(65650),m=function(o,a){return h(o,a.x,a.y)};f.exports=m},58672:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(65650),m=function(o,a){return h(o,a.x,a.y)&&h(o,a.right,a.y)&&h(o,a.x,a.bottom)&&h(o,a.right,a.bottom)};f.exports=m},42997:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return h.setTo(t.x,t.y,t.radius)};f.exports=S},94894:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.x===h.x&&t.y===h.y&&t.radius===h.radius};f.exports=S},48027:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(74118),m=function(o,a){return a===void 0&&(a=new h),a.x=o.left,a.y=o.top,a.width=o.diameter,a.height=o.diameter,a};f.exports=m},94026:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72233),m=t(91806),o=t(83392),a=t(79967),r=function(i,n,u){u===void 0&&(u=new a);var s=m(n,0,o.PI2);return h(i,s,u)};f.exports=r},62941:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(37964),m=t(72233),o=t(91806),a=t(83392),r=function(i,n,u,s){s===void 0&&(s=[]),!n&&u>0&&(n=h(i)/u);for(var l=0;l<n;l++){var v=o(l/n,0,a.PI2);s.push(m(i,v))}return s};f.exports=r},34585:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return t.x+=h,t.y+=m,t};f.exports=S},88665:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.x+=h.x,t.y+=h.y,t};f.exports=S},30977:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=function(o,a){a===void 0&&(a=new h);var r=2*Math.PI*Math.random(),i=Math.random()+Math.random(),n=i>1?2-i:i,u=n*Math.cos(r),s=n*Math.sin(r);return a.x=o.x+u*o.radius,a.y=o.y+s*o.radius,a};f.exports=m},6112:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(26673);h.Area=t(95847),h.Circumference=t(37964),h.CircumferencePoint=t(72233),h.Clone=t(61761),h.Contains=t(65650),h.ContainsPoint=t(39187),h.ContainsRect=t(58672),h.CopyFrom=t(42997),h.Equals=t(94894),h.GetBounds=t(48027),h.GetPoint=t(94026),h.GetPoints=t(62941),h.Offset=t(34585),h.OffsetPoint=t(88665),h.Random=t(30977),f.exports=h},52394:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};f.exports=S},58605:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI};f.exports=S},39507:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var h=t.width/2,m=t.height/2,o=Math.pow(h-m,2)/Math.pow(h+m,2);return Math.PI*(h+m)*(1+3*o/(10+Math.sqrt(4-3*o)))};f.exports=S},86998:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=function(o,a,r){r===void 0&&(r=new h);var i=o.width/2,n=o.height/2;return r.x=o.x+i*Math.cos(a),r.y=o.y+n*Math.sin(a),r};f.exports=m},81773:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(95669),m=function(o){return new h(o.x,o.y,o.width,o.height)};f.exports=m},72313:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){if(t.width<=0||t.height<=0)return!1;var o=(h-t.x)/t.width,a=(m-t.y)/t.height;return o*=o,a*=a,o+a<.25};f.exports=S},34368:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72313),m=function(o,a){return h(o,a.x,a.y)};f.exports=m},71431:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72313),m=function(o,a){return h(o,a.x,a.y)&&h(o,a.right,a.y)&&h(o,a.x,a.bottom)&&h(o,a.right,a.bottom)};f.exports=m},75459:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return h.setTo(t.x,t.y,t.width,t.height)};f.exports=S},95669:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(72313),o=t(95340),a=t(54978),r=t(52394),i=t(72006),n=new h({initialize:function(s,l,v,c){s===void 0&&(s=0),l===void 0&&(l=0),v===void 0&&(v=0),c===void 0&&(c=0),this.type=r.ELLIPSE,this.x=s,this.y=l,this.width=v,this.height=c},contains:function(u,s){return m(this,u,s)},getPoint:function(u,s){return o(this,u,s)},getPoints:function(u,s,l){return a(this,u,s,l)},getRandomPoint:function(u){return i(this,u)},setTo:function(u,s,l,v){return this.x=u,this.y=s,this.width=l,this.height=v,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(u,s){return s===void 0&&(s=u),this.x=u,this.y=s,this},setSize:function(u,s){return s===void 0&&(s=u),this.width=u,this.height=s,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(u){this.x=u+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(u){this.x=u-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(u){this.y=u+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(u){this.y=u-this.height/2}}});f.exports=n},98068:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.x===h.x&&t.y===h.y&&t.width===h.width&&t.height===h.height};f.exports=S},72897:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(74118),m=function(o,a){return a===void 0&&(a=new h),a.x=o.left,a.y=o.top,a.width=o.width,a.height=o.height,a};f.exports=m},95340:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(86998),m=t(91806),o=t(83392),a=t(79967),r=function(i,n,u){u===void 0&&(u=new a);var s=m(n,0,o.PI2);return h(i,s,u)};f.exports=r},54978:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(39507),m=t(86998),o=t(91806),a=t(83392),r=function(i,n,u,s){s===void 0&&(s=[]),!n&&u>0&&(n=h(i)/u);for(var l=0;l<n;l++){var v=o(l/n,0,a.PI2);s.push(m(i,v))}return s};f.exports=r},77951:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return t.x+=h,t.y+=m,t};f.exports=S},36233:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.x+=h.x,t.y+=h.y,t};f.exports=S},72006:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=function(o,a){a===void 0&&(a=new h);var r=Math.random()*Math.PI*2,i=Math.sqrt(Math.random());return a.x=o.x+i*Math.cos(r)*o.width/2,a.y=o.y+i*Math.sin(r)*o.height/2,a};f.exports=m},40652:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(95669);h.Area=t(58605),h.Circumference=t(39507),h.CircumferencePoint=t(86998),h.Clone=t(81773),h.Contains=t(72313),h.ContainsPoint=t(34368),h.ContainsRect=t(71431),h.CopyFrom=t(75459),h.Equals=t(98068),h.GetBounds=t(72897),h.GetPoint=t(95340),h.GetPoints=t(54978),h.Offset=t(77951),h.OffsetPoint=t(36233),h.Random=t(72006),f.exports=h},84068:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(52394),m=t(98611),o={Circle:t(6112),Ellipse:t(40652),Intersects:t(7563),Line:t(28482),Mesh:t(14293),Point:t(63472),Polygon:t(44359),Rectangle:t(66658),Triangle:t(87619)};o=m(!1,o,h),f.exports=o},22184:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(53996),m=function(o,a){return h(o.x,o.y,a.x,a.y)<=o.radius+a.radius};f.exports=m},26535:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){var m=h.width/2,o=h.height/2,a=Math.abs(t.x-h.x-m),r=Math.abs(t.y-h.y-o),i=m+t.radius,n=o+t.radius;if(a>i||r>n)return!1;if(a<=m||r<=o)return!0;var u=a-m,s=r-o,l=u*u,v=s*s,c=t.radius*t.radius;return l+v<=c};f.exports=S},71145:(f,S,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=t(22184),o=function(a,r,i){if(i===void 0&&(i=[]),m(a,r)){var n=a.x,u=a.y,s=a.radius,l=r.x,v=r.y,c=r.radius,g,y,E,C,T;if(u===v)T=(c*c-s*s-l*l+n*n)/(2*(n-l)),g=1,y=-2*v,E=l*l+T*T-2*l*T+v*v-c*c,C=y*y-4*g*E,C===0?i.push(new h(T,-y/(2*g))):C>0&&(i.push(new h(T,(-y+Math.sqrt(C))/(2*g))),i.push(new h(T,(-y-Math.sqrt(C))/(2*g))));else{var A=(n-l)/(u-v),P=(c*c-s*s-l*l+n*n-v*v+u*u)/(2*(u-v));g=A*A+1,y=2*u*A-2*P*A-2*n,E=n*n+u*u+P*P-s*s-2*u*P,C=y*y-4*g*E,C===0?(T=-y/(2*g),i.push(new h(T,P-T*A))):C>0&&(T=(-y+Math.sqrt(C))/(2*g),i.push(new h(T,P-T*A)),T=(-y-Math.sqrt(C))/(2*g),i.push(new h(T,P-T*A)))}}return i};f.exports=o},62508:(f,S,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(26111),m=t(26535),o=function(a,r,i){if(i===void 0&&(i=[]),m(a,r)){var n=r.getLineA(),u=r.getLineB(),s=r.getLineC(),l=r.getLineD();h(n,a,i),h(u,a,i),h(s,a,i),h(l,a,i)}return i};f.exports=o},26111:(f,S,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=t(61472),o=function(a,r,i){if(i===void 0&&(i=[]),m(a,r)){var n=a.x1,u=a.y1,s=a.x2,l=a.y2,v=r.x,c=r.y,g=r.radius,y=s-n,E=l-u,C=n-v,T=u-c,A=y*y+E*E,P=2*(y*C+E*T),M=C*C+T*T-g*g,w=P*P-4*A*M,L,F;if(w===0){var D=-P/(2*A);L=n+D*y,F=u+D*E,D>=0&&D<=1&&i.push(new h(L,F))}else if(w>0){var N=(-P-Math.sqrt(w))/(2*A);L=n+N*y,F=u+N*E,N>=0&&N<=1&&i.push(new h(L,F));var B=(-P+Math.sqrt(w))/(2*A);L=n+B*y,F=u+B*E,B>=0&&B<=1&&i.push(new h(L,F))}}return i};f.exports=o},96537:(f,S,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(70015),m=function(o,a,r,i){r===void 0&&(r=!1);var n=o.x1,u=o.y1,s=o.x2,l=o.y2,v=a.x1,c=a.y1,g=a.x2,y=a.y2,E=s-n,C=l-u,T=g-v,A=y-c,P=E*A-C*T;if(P===0)return null;var M,w,L;if(r){if(M=(E*(c-u)+C*(n-v))/(T*C-A*E),w=(v+T*M-n)/E,w<0||M<0||M>1)return null;L=w}else{if(M=((v-n)*A-(c-u)*T)/P,w=((u-c)*E-(n-v)*C)/P,M<0||M>1||w<0||w>1)return null;L=M}return i===void 0&&(i=new h),i.set(n+E*L,u+C*L,L)};f.exports=m},17647:(f,S,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(96537),m=t(88829),o=t(70015),a=new m,r=new o,i=function(n,u,s,l){s===void 0&&(s=!1),l===void 0&&(l=new o);var v=!1;l.set(),r.set();for(var c=u[0],g=1;g<u.length;g++){var y=u[g];a.setTo(c.x,c.y,y.x,y.y),c=y,h(n,a,s,r)&&(!v||r.z<l.z)&&(l.copy(r),v=!0)}return v?l:null};f.exports=i},68439:(f,S,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(70015),m=t(51729),o=t(17647),a=new h,r=function(i,n,u,s){s===void 0&&(s=new m),Array.isArray(n)||(n=[n]);var l=!1;s.set(),a.set();for(var v=0;v<n.length;v++)o(i,n[v].points,u,a)&&(!l||a.z<s.z)&&(s.set(a.x,a.y,a.z,v),l=!0);return l?s:null};f.exports=r},9569:(f,S,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=t(25227),o=t(47910),a=function(r,i,n){if(n===void 0&&(n=[]),o(r,i))for(var u=i.getLineA(),s=i.getLineB(),l=i.getLineC(),v=i.getLineD(),c=[new h,new h,new h,new h],g=[m(u,r,c[0]),m(s,r,c[1]),m(l,r,c[2]),m(v,r,c[3])],y=0;y<4;y++)g[y]&&n.push(c[y]);return n};f.exports=a},7449:(f,S,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(51729),m=t(68439),o=t(88829),a=new o;function r(u,s,l,v,c){var g=Math.cos(u),y=Math.sin(u);a.setTo(s,l,s+g,l+y);var E=m(a,v,!0);E&&c.push(new h(E.x,E.y,u,E.w))}function i(u,s){return u.z-s.z}var n=function(u,s,l){Array.isArray(l)||(l=[l]);for(var v=[],c=[],g=0;g<l.length;g++)for(var y=l[g].points,E=0;E<y.length;E++){var C=Math.atan2(y[E].y-s,y[E].x-u);c.indexOf(C)===-1&&(r(C,u,s,l,v),r(C-1e-5,u,s,l,v),r(C+1e-5,u,s,l,v),c.push(C))}return v.sort(i)};f.exports=n},82931:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(74118),m=t(90205),o=function(a,r,i){return i===void 0&&(i=new h),m(a,r)&&(i.x=Math.max(a.x,r.x),i.y=Math.max(a.y,r.y),i.width=Math.min(a.right,r.right)-i.x,i.height=Math.min(a.bottom,r.bottom)-i.y),i};f.exports=o},1946:(f,S,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(9569),m=t(90205),o=function(a,r,i){if(i===void 0&&(i=[]),m(a,r)){var n=a.getLineA(),u=a.getLineB(),s=a.getLineC(),l=a.getLineD();h(n,r,i),h(u,r,i),h(s,r,i),h(l,r,i)}return i};f.exports=o},34211:(f,S,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(20370),m=t(9569),o=function(a,r,i){if(i===void 0&&(i=[]),h(a,r)){var n=r.getLineA(),u=r.getLineB(),s=r.getLineC();m(n,a,i),m(u,a,i),m(s,a,i)}return i};f.exports=o},80511:(f,S,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(26111),m=t(48411),o=function(a,r,i){if(i===void 0&&(i=[]),m(a,r)){var n=a.getLineA(),u=a.getLineB(),s=a.getLineC();h(n,r,i),h(u,r,i),h(s,r,i)}return i};f.exports=o},31343:(f,S,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=t(86117),o=t(25227),a=function(r,i,n){if(n===void 0&&(n=[]),m(r,i))for(var u=r.getLineA(),s=r.getLineB(),l=r.getLineC(),v=[new h,new h,new h],c=[o(u,i,v[0]),o(s,i,v[1]),o(l,i,v[2])],g=0;g<3;g++)c[g]&&n.push(v[g]);return n};f.exports=a},70534:(f,S,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(23589),m=t(31343),o=function(a,r,i){if(i===void 0&&(i=[]),h(a,r)){var n=r.getLineA(),u=r.getLineB(),s=r.getLineC();m(a,n,i),m(a,u,i),m(a,s,i)}return i};f.exports=o},61472:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(65650),m=t(79967),o=new m,a=function(r,i,n){if(n===void 0&&(n=o),h(i,r.x1,r.y1))return n.x=r.x1,n.y=r.y1,!0;if(h(i,r.x2,r.y2))return n.x=r.x2,n.y=r.y2,!0;var u=r.x2-r.x1,s=r.y2-r.y1,l=i.x-r.x1,v=i.y-r.y1,c=u*u+s*s,g=u,y=s;if(c>0){var E=(l*u+v*s)/c;g*=E,y*=E}n.x=r.x1+g,n.y=r.y1+y;var C=g*g+y*y;return C<=c&&g*u+y*s>=0&&h(i,n.x,n.y)};f.exports=a},25227:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){var o=t.x1,a=t.y1,r=t.x2,i=t.y2,n=h.x1,u=h.y1,s=h.x2,l=h.y2;if(o===r&&a===i||n===s&&u===l)return!1;var v=(l-u)*(r-o)-(s-n)*(i-a);if(v===0)return!1;var c=((s-n)*(a-u)-(l-u)*(o-n))/v,g=((r-o)*(a-u)-(i-a)*(o-n))/v;return c<0||c>1||g<0||g>1?!1:(m&&(m.x=o+c*(r-o),m.y=a+c*(i-a)),!0)};f.exports=S},47910:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){var m=t.x1,o=t.y1,a=t.x2,r=t.y2,i=h.x,n=h.y,u=h.right,s=h.bottom,l=0;if(m>=i&&m<=u&&o>=n&&o<=s||a>=i&&a<=u&&r>=n&&r<=s)return!0;if(m<i&&a>=i){if(l=o+(r-o)*(i-m)/(a-m),l>n&&l<=s)return!0}else if(m>u&&a<=u&&(l=o+(r-o)*(u-m)/(a-m),l>=n&&l<=s))return!0;if(o<n&&r>=n){if(l=m+(a-m)*(n-o)/(r-o),l>=i&&l<=u)return!0}else if(o>s&&r<=s&&(l=m+(a-m)*(s-o)/(r-o),l>=i&&l<=u))return!0;return!1};f.exports=S},34426:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){m===void 0&&(m=1);var o=h.x1,a=h.y1,r=h.x2,i=h.y2,n=t.x,u=t.y,s=(r-o)*(r-o)+(i-a)*(i-a);if(s===0)return!1;var l=((n-o)*(r-o)+(u-a)*(i-a))/s;if(l<0)return Math.sqrt((o-n)*(o-n)+(a-u)*(a-u))<=m;if(l>=0&&l<=1){var v=((a-u)*(r-o)-(o-n)*(i-a))/s;return Math.abs(v)*Math.sqrt(s)<=m}else return Math.sqrt((r-n)*(r-n)+(i-u)*(i-u))<=m};f.exports=S},81414:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(34426),m=function(o,a){if(!h(o,a))return!1;var r=Math.min(a.x1,a.x2),i=Math.max(a.x1,a.x2),n=Math.min(a.y1,a.y2),u=Math.max(a.y1,a.y2);return o.x>=r&&o.x<=i&&o.y>=n&&o.y<=u};f.exports=m},90205:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.width<=0||t.height<=0||h.width<=0||h.height<=0?!1:!(t.right<h.x||t.bottom<h.y||t.x>h.right||t.y>h.bottom)};f.exports=S},20370:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(25227),m=t(94287),o=t(86875),a=t(87279),r=function(i,n){if(n.left>i.right||n.right<i.left||n.top>i.bottom||n.bottom<i.top)return!1;var u=n.getLineA(),s=n.getLineB(),l=n.getLineC();if(m(i,u.x1,u.y1)||m(i,u.x2,u.y2)||m(i,s.x1,s.y1)||m(i,s.x2,s.y2)||m(i,l.x1,l.y1)||m(i,l.x2,l.y2))return!0;var v=i.getLineA(),c=i.getLineB(),g=i.getLineC(),y=i.getLineD();if(h(u,v)||h(u,c)||h(u,g)||h(u,y)||h(s,v)||h(s,c)||h(s,g)||h(s,y)||h(l,v)||h(l,c)||h(l,g)||h(l,y))return!0;var E=a(i),C=o(n,E,!0);return C.length>0};f.exports=r},8786:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o,a,r){return r===void 0&&(r=0),!(h>t.right+r||m<t.left-r||o>t.bottom+r||a<t.top-r)};f.exports=S},48411:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61472),m=t(60689),o=function(a,r){return a.left>r.right||a.right<r.left||a.top>r.bottom||a.bottom<r.top?!1:!!(m(a,r.x,r.y)||h(a.getLineA(),r)||h(a.getLineB(),r)||h(a.getLineC(),r))};f.exports=o},86117:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(25227),m=function(o,a){return!!(o.contains(a.x1,a.y1)||o.contains(a.x2,a.y2)||h(o.getLineA(),a)||h(o.getLineB(),a)||h(o.getLineC(),a))};f.exports=m},23589:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(86875),m=t(18680),o=t(25227),a=function(r,i){if(r.left>i.right||r.right<i.left||r.top>i.bottom||r.bottom<i.top)return!1;var n=r.getLineA(),u=r.getLineB(),s=r.getLineC(),l=i.getLineA(),v=i.getLineB(),c=i.getLineC();if(o(n,l)||o(n,v)||o(n,c)||o(u,l)||o(u,v)||o(u,c)||o(s,l)||o(s,v)||o(s,c))return!0;var g=m(r),y=h(i,g,!0);return y.length>0||(g=m(i),y=h(r,g,!0),y.length>0)};f.exports=a},7563:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={CircleToCircle:t(22184),CircleToRectangle:t(26535),GetCircleToCircle:t(71145),GetCircleToRectangle:t(62508),GetLineToCircle:t(26111),GetLineToLine:t(96537),GetLineToPoints:t(17647),GetLineToPolygon:t(68439),GetLineToRectangle:t(9569),GetRaysFromPointToPolygon:t(7449),GetRectangleIntersection:t(82931),GetRectangleToRectangle:t(1946),GetRectangleToTriangle:t(34211),GetTriangleToCircle:t(80511),GetTriangleToLine:t(31343),GetTriangleToTriangle:t(70534),LineToCircle:t(61472),LineToLine:t(25227),LineToRectangle:t(47910),PointToLine:t(34426),PointToLineSegment:t(81414),RectangleToRectangle:t(90205),RectangleToTriangle:t(20370),RectangleToValues:t(8786),TriangleToCircle:t(48411),TriangleToLine:t(86117),TriangleToTriangle:t(23589)}},50599:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)};f.exports=S},58813:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){h===void 0&&(h=1),m===void 0&&(m=[]);var o=Math.round(t.x1),a=Math.round(t.y1),r=Math.round(t.x2),i=Math.round(t.y2),n=Math.abs(r-o),u=Math.abs(i-a),s=o<r?1:-1,l=a<i?1:-1,v=n-u;m.push({x:o,y:a});for(var c=1;!(o===r&&a===i);){var g=v<<1;g>-u&&(v-=u,o+=s),g<n&&(v+=n,a+=l),c%h===0&&m.push({x:o,y:a}),c++}return m};f.exports=S},88513:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){var o=h-(t.x1+t.x2)/2,a=m-(t.y1+t.y2)/2;return t.x1+=o,t.y1+=a,t.x2+=o,t.y2+=a,t};f.exports=S},26718:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(88829),m=function(o){return new h(o.x1,o.y1,o.x2,o.y2)};f.exports=m},88930:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return h.setTo(t.x1,t.y1,t.x2,t.y2)};f.exports=S},90656:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.x1===h.x1&&t.y1===h.y1&&t.x2===h.x2&&t.y2===h.y2};f.exports=S},30897:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(16028),m=function(o,a,r){r===void 0&&(r=a);var i=h(o),n=o.x2-o.x1,u=o.y2-o.y1;return a&&(o.x1=o.x1-n/i*a,o.y1=o.y1-u/i*a),r&&(o.x2=o.x2+n/i*r,o.y2=o.y2+u/i*r),o};f.exports=m},30684:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(92951),m=t(21902),o=t(79967),a=function(r,i,n,u,s){u===void 0&&(u=0),s===void 0&&(s=[]);var l=[],v=r.x1,c=r.y1,g=r.x2-v,y=r.y2-c,E=m(i,s),C,T,A=n-1;for(C=0;C<A;C++)T=E(C/A),l.push(new o(v+g*T,c+y*T));if(T=E(1),l.push(new o(v+g*T,c+y*T)),u>0){var P=l[0],M=[P];for(C=1;C<l.length-1;C++){var w=l[C];h(P,w)>=u&&(M.push(w),P=w)}var L=l[l.length-1];return h(P,L)<u&&M.pop(),M.push(L),M}else return l};f.exports=a},20487:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=function(o,a){return a===void 0&&(a=new h),a.x=(o.x1+o.x2)/2,a.y=(o.y1+o.y2)/2,a};f.exports=m},11222:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=function(o,a,r){r===void 0&&(r=new h);var i=o.x1,n=o.y1,u=o.x2,s=o.y2,l=(u-i)*(u-i)+(s-n)*(s-n);if(l===0)return r;var v=((a.x-i)*(u-i)+(a.y-n)*(s-n))/l;return r.x=i+v*(u-i),r.y=n+v*(s-n),r};f.exports=m},7377:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(83392),m=t(50599),o=t(79967),a=function(r,i){i===void 0&&(i=new o);var n=m(r)-h.TAU;return i.x=Math.cos(n),i.y=Math.sin(n),i};f.exports=a},66464:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=function(o,a,r){return r===void 0&&(r=new h),r.x=o.x1+(o.x2-o.x1)*a,r.y=o.y1+(o.y2-o.y1)*a,r};f.exports=m},8570:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(16028),m=t(79967),o=function(a,r,i,n){n===void 0&&(n=[]),!r&&i>0&&(r=h(a)/i);for(var u=a.x1,s=a.y1,l=a.x2,v=a.y2,c=0;c<r;c++){var g=c/r,y=u+(l-u)*g,E=s+(v-s)*g;n.push(new m(y,E))}return n};f.exports=o},65269:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){var m=t.x1,o=t.y1,a=t.x2,r=t.y2,i=(a-m)*(a-m)+(r-o)*(r-o);if(i===0)return!1;var n=((o-h.y)*(a-m)-(m-h.x)*(r-o))/i;return Math.abs(n)*Math.sqrt(i)};f.exports=S},82996:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return Math.abs(t.y1-t.y2)};f.exports=S},16028:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))};f.exports=S},88829:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(66464),o=t(8570),a=t(52394),r=t(74077),i=t(93736),n=new h({initialize:function(s,l,v,c){s===void 0&&(s=0),l===void 0&&(l=0),v===void 0&&(v=0),c===void 0&&(c=0),this.type=a.LINE,this.x1=s,this.y1=l,this.x2=v,this.y2=c},getPoint:function(u,s){return m(this,u,s)},getPoints:function(u,s,l){return o(this,u,s,l)},getRandomPoint:function(u){return r(this,u)},setTo:function(u,s,l,v){return u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=0),v===void 0&&(v=0),this.x1=u,this.y1=s,this.x2=l,this.y2=v,this},getPointA:function(u){return u===void 0&&(u=new i),u.set(this.x1,this.y1),u},getPointB:function(u){return u===void 0&&(u=new i),u.set(this.x2,this.y2),u},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(u){this.x1<=this.x2?this.x1=u:this.x2=u}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(u){this.x1>this.x2?this.x1=u:this.x2=u}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(u){this.y1<=this.y2?this.y1=u:this.y2=u}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(u){this.y1>this.y2?this.y1=u:this.y2=u}}});f.exports=n},73273:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(83392),m=t(1071),o=t(50599),a=function(r){var i=o(r)-h.TAU;return m(i,-Math.PI,Math.PI)};f.exports=a},96936:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(83392),m=t(50599),o=function(a){return Math.cos(m(a)-h.TAU)};f.exports=o},43581:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(83392),m=t(50599),o=function(a){return Math.sin(m(a)-h.TAU)};f.exports=o},13990:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return t.x1+=h,t.y1+=m,t.x2+=h,t.y2+=m,t};f.exports=S},1298:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return-((t.x2-t.x1)/(t.y2-t.y1))};f.exports=S},74077:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=function(o,a){a===void 0&&(a=new h);var r=Math.random();return a.x=o.x1+r*(o.x2-o.x1),a.y=o.y1+r*(o.y2-o.y1),a};f.exports=m},30473:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(50599),m=t(73273),o=function(a,r){return 2*m(r)-Math.PI-h(a)};f.exports=o},25968:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(1809),m=function(o,a){var r=(o.x1+o.x2)/2,i=(o.y1+o.y2)/2;return h(o,r,i,a)};f.exports=m},24296:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(1809),m=function(o,a,r){return h(o,a.x,a.y,r)};f.exports=m},1809:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){var a=Math.cos(o),r=Math.sin(o),i=t.x1-h,n=t.y1-m;return t.x1=i*a-n*r+h,t.y1=i*r+n*a+m,i=t.x2-h,n=t.y2-m,t.x2=i*a-n*r+h,t.y2=i*r+n*a+m,t};f.exports=S},88171:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o,a){return t.x1=h,t.y1=m,t.x2=h+Math.cos(o)*a,t.y2=m+Math.sin(o)*a,t};f.exports=S},82797:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return(t.y2-t.y1)/(t.x2-t.x1)};f.exports=S},41067:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return Math.abs(t.x1-t.x2)};f.exports=S},28482:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(88829);h.Angle=t(50599),h.BresenhamPoints=t(58813),h.CenterOn=t(88513),h.Clone=t(26718),h.CopyFrom=t(88930),h.Equals=t(90656),h.Extend=t(30897),h.GetEasedPoints=t(30684),h.GetMidPoint=t(20487),h.GetNearestPoint=t(11222),h.GetNormal=t(7377),h.GetPoint=t(66464),h.GetPoints=t(8570),h.GetShortestDistance=t(65269),h.Height=t(82996),h.Length=t(16028),h.NormalAngle=t(73273),h.NormalX=t(96936),h.NormalY=t(43581),h.Offset=t(13990),h.PerpSlope=t(1298),h.Random=t(74077),h.ReflectAngle=t(30473),h.Rotate=t(25968),h.RotateAroundPoint=t(24296),h.RotateAroundXY=t(1809),h.SetToAngle=t(88171),h.Slope=t(82797),h.Width=t(41067),f.exports=h},18693:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(74118),o=t(93736);function a(i,n,u,s){var l=i-u,v=n-s,c=l*l+v*v;return Math.sqrt(c)}var r=new h({initialize:function(n,u,s){this.vertex1=n,this.vertex2=u,this.vertex3=s,this.bounds=new m,this._inCenter=new o},getInCenter:function(i){i===void 0&&(i=!0);var n=this.vertex1,u=this.vertex2,s=this.vertex3,l,v,c,g,y,E;i?(l=n.x,v=n.y,c=u.x,g=u.y,y=s.x,E=s.y):(l=n.vx,v=n.vy,c=u.vx,g=u.vy,y=s.vx,E=s.vy);var C=a(y,E,c,g),T=a(l,v,y,E),A=a(c,g,l,v),P=C+T+A;return this._inCenter.set((l*C+c*T+y*A)/P,(v*C+g*T+E*A)/P)},contains:function(i,n,u){var s=this.vertex1,l=this.vertex2,v=this.vertex3,c=s.vx,g=s.vy,y=l.vx,E=l.vy,C=v.vx,T=v.vy;if(u){var A=u.a,P=u.b,M=u.c,w=u.d,L=u.e,F=u.f;c=s.vx*A+s.vy*M+L,g=s.vx*P+s.vy*w+F,y=l.vx*A+l.vy*M+L,E=l.vx*P+l.vy*w+F,C=v.vx*A+v.vy*M+L,T=v.vx*P+v.vy*w+F}var D=C-c,N=T-g,B=y-c,b=E-g,W=i-c,Y=n-g,K=D*D+N*N,G=D*B+N*b,z=D*W+N*Y,O=B*B+b*b,V=B*W+b*Y,U=K*O-G*G,X=U===0?0:1/U,H=(O*z-G*V)*X,Q=(K*V-G*z)*X;return H>=0&&Q>=0&&H+Q<1},isCounterClockwise:function(i){var n=this.vertex1,u=this.vertex2,s=this.vertex3,l=(u.vx-n.vx)*(s.vy-n.vy)-(u.vy-n.vy)*(s.vx-n.vx);return i<=0?l>=0:l<0},load:function(i,n,u,s,l){return u=this.vertex1.load(i,n,u,s,l),u=this.vertex2.load(i,n,u,s,l),u=this.vertex3.load(i,n,u,s,l),u},transformCoordinatesLocal:function(i,n,u,s){return this.vertex1.transformCoordinatesLocal(i,n,u,s),this.vertex2.transformCoordinatesLocal(i,n,u,s),this.vertex3.transformCoordinatesLocal(i,n,u,s),this},updateBounds:function(){var i=this.vertex1,n=this.vertex2,u=this.vertex3,s=this.bounds;return s.x=Math.min(i.vx,n.vx,u.vx),s.y=Math.min(i.vy,n.vy,u.vy),s.width=Math.max(i.vx,n.vx,u.vx)-s.x,s.height=Math.max(i.vy,n.vy,u.vy)-s.y,this},isInView:function(i,n,u,s,l,v,c,g,y,E,C){this.update(s,l,v,c,g,y,E,C);var T=this.vertex1,A=this.vertex2,P=this.vertex3;if(T.ta<=0&&A.ta<=0&&P.ta<=0||n&&!this.isCounterClockwise(u))return!1;var M=this.bounds;M.x=Math.min(T.tx,A.tx,P.tx),M.y=Math.min(T.ty,A.ty,P.ty),M.width=Math.max(T.tx,A.tx,P.tx)-M.x,M.height=Math.max(T.ty,A.ty,P.ty)-M.y;var w=i.x+i.width,L=i.y+i.height;return M.width<=0||M.height<=0||i.width<=0||i.height<=0?!1:!(M.right<i.x||M.bottom<i.y||M.x>w||M.y>L)},scrollUV:function(i,n){return this.vertex1.scrollUV(i,n),this.vertex2.scrollUV(i,n),this.vertex3.scrollUV(i,n),this},scaleUV:function(i,n){return this.vertex1.scaleUV(i,n),this.vertex2.scaleUV(i,n),this.vertex3.scaleUV(i,n),this},setColor:function(i){return this.vertex1.color=i,this.vertex2.color=i,this.vertex3.color=i,this},update:function(i,n,u,s,l,v,c,g){return this.vertex1.update(n,u,s,l,v,c,g,i),this.vertex2.update(n,u,s,l,v,c,g,i),this.vertex3.update(n,u,s,l,v,c,g,i),this},translate:function(i,n){n===void 0&&(n=0);var u=this.vertex1,s=this.vertex2,l=this.vertex3;return u.x+=i,u.y+=n,s.x+=i,s.y+=n,l.x+=i,l.y+=n,this},x:{get:function(){return this.getInCenter().x},set:function(i){var n=this.getInCenter();this.translate(i-n.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(i){var n=this.getInCenter();this.translate(0,i-n.y)}},alpha:{get:function(){var i=this.vertex1,n=this.vertex2,u=this.vertex3;return(i.alpha+n.alpha+u.alpha)/3},set:function(i){this.vertex1.alpha=i,this.vertex2.alpha=i,this.vertex3.alpha=i}},depth:{get:function(){var i=this.vertex1,n=this.vertex2,u=this.vertex3;return(i.vz+n.vz+u.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});f.exports=r},99425:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(18693),m=t(72632),o=t(16650),a=t(70015),r=t(85769),i=new a,n=new a,u=new o,s=function(l){var v=m(l,"mesh"),c=m(l,"texture",null),g=m(l,"frame"),y=m(l,"width",1),E=m(l,"height",y),C=m(l,"widthSegments",1),T=m(l,"heightSegments",C),A=m(l,"x",0),P=m(l,"y",0),M=m(l,"z",0),w=m(l,"rotateX",0),L=m(l,"rotateY",0),F=m(l,"rotateZ",0),D=m(l,"zIsUp",!0),N=m(l,"isOrtho",v?v.dirtyCache[11]:!1),B=m(l,"colors",[16777215]),b=m(l,"alphas",[1]),W=m(l,"tile",!1),Y=m(l,"flipY",!1),K=m(l,"width",null),G={faces:[],verts:[]};i.set(A,P,M),n.set(w,L,F),u.fromRotationXYTranslation(n,i,D);var z;if(!c&&v)c=v.texture,g||(z=v.frame);else if(v&&typeof c=="string")c=v.scene.sys.textures.get(c);else if(!c)return G;z||(z=c.get(g)),!K&&N&&c&&v&&(y=z.width/v.height,E=z.height/v.height);var O=y/2,V=E/2,U=Math.floor(C),X=Math.floor(T),H=U+1,Q=X+1,$=y/U,k=E/X,J=[],Z=[],j,_,q=0,it=1,ht=0,ft=1;z&&(q=z.u0,it=z.u1,Y?(ht=z.v1,ft=z.v0):(ht=z.v0,ft=z.v1));var ut=it-q,tt=ft-ht;for(_=0;_<Q;_++){var rt=_*k-V;for(j=0;j<H;j++){var st=j*$-O;Z.push(st,-rt);var xt=q+ut*(j/U),gt=ht+tt*(_/X);J.push(xt,gt)}}Array.isArray(B)||(B=[B]),Array.isArray(b)||(b=[b]);var Xt=0,Dt=0;for(_=0;_<X;_++)for(j=0;j<U;j++){var It=(j+H*_)*2,Et=(j+H*(_+1))*2,Nt=(j+1+H*(_+1))*2,$t=(j+1+H*_)*2,Zt=B[Dt],ne=b[Xt],Ce=new r(Z[It],Z[It+1],0,J[It],J[It+1],Zt,ne).transformMat4(u),Li=new r(Z[Et],Z[Et+1],0,J[Et],J[Et+1],Zt,ne).transformMat4(u),Oi=new r(Z[$t],Z[$t+1],0,J[$t],J[$t+1],Zt,ne).transformMat4(u),Di=new r(Z[Et],Z[Et+1],0,J[Et],J[Et+1],Zt,ne).transformMat4(u),Ni=new r(Z[Nt],Z[Nt+1],0,J[Nt],J[Nt+1],Zt,ne).transformMat4(u),Bi=new r(Z[$t],Z[$t+1],0,J[$t],J[$t+1],Zt,ne).transformMat4(u);W&&(Ce.setUVs(q,ft),Li.setUVs(q,ht),Oi.setUVs(it,ft),Di.setUVs(q,ht),Ni.setUVs(it,ht),Bi.setUVs(it,ft)),Dt++,Dt===B.length&&(Dt=0),Xt++,Xt===b.length&&(Xt=0),G.verts.push(Ce,Li,Oi,Di,Ni,Bi),G.faces.push(new h(Ce,Li,Oi),new h(Di,Ni,Bi))}return v&&(v.faces=v.faces.concat(G.faces),v.vertices=v.vertices.concat(G.verts)),G};f.exports=s},53267:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(18693),m=t(16650),o=t(70015),a=t(85769),r=new o,i=new o,n=new m,u=function(s,l,v,c,g,y,E,C,T,A){v===void 0&&(v=1),c===void 0&&(c=0),g===void 0&&(g=0),y===void 0&&(y=0),E===void 0&&(E=0),C===void 0&&(C=0),T===void 0&&(T=0),A===void 0&&(A=!0);var P={faces:[],verts:[]},M=s.materials;r.set(c,g,y),i.set(E,C,T),n.fromRotationXYTranslation(i,r,A);for(var w=0;w<s.models.length;w++)for(var L=s.models[w],F=L.vertices,D=L.textureCoords,N=L.faces,B=0;B<N.length;B++){var b=N[B],W=b.vertices[0],Y=b.vertices[1],K=b.vertices[2],G=F[W.vertexIndex],z=F[Y.vertexIndex],O=F[K.vertexIndex],V=W.textureCoordsIndex,U=Y.textureCoordsIndex,X=K.textureCoordsIndex,H=V===-1?{u:0,v:1}:D[V],Q=U===-1?{u:0,v:0}:D[U],$=X===-1?{u:1,v:1}:D[X],k=16777215;b.material!==""&&M[b.material]&&(k=M[b.material]);var J=new a(G.x*v,G.y*v,G.z*v,H.u,H.v,k).transformMat4(n),Z=new a(z.x*v,z.y*v,z.z*v,Q.u,Q.v,k).transformMat4(n),j=new a(O.x*v,O.y*v,O.z*v,$.u,$.v,k).transformMat4(n);P.verts.push(J,Z,j),P.faces.push(new h(J,Z,j))}return l&&(l.faces=l.faces.concat(P.faces),l.vertices=l.vertices.concat(P.verts)),P};f.exports=u},67623:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(18693),m=t(85769),o=function(a,r,i,n,u,s,l,v){if(n===void 0&&(n=!1),s===void 0&&(s=16777215),l===void 0&&(l=1),v===void 0&&(v=!1),a.length!==r.length&&!n){console.warn("GenerateVerts: vertices and uvs count not equal");return}var c={faces:[],vertices:[]},g,y,E,C,T,A,P,M,w,L,F,D=n?3:2,N=Array.isArray(s),B=Array.isArray(l);if(Array.isArray(i)&&i.length>0)for(g=0;g<i.length;g++){var b=i[g],W=i[g]*2,Y=i[g]*D;y=a[Y],E=a[Y+1],C=n?a[Y+2]:0,T=r[W],A=r[W+1],v&&(A=1-A),P=N?s[b]:s,M=B?l[b]:l,w=0,L=0,F=0,u&&(w=u[Y],L=u[Y+1],F=n?u[Y+2]:0),c.vertices.push(new m(y,E,C,T,A,P,M,w,L,F))}else{var K=0,G=0;for(g=0;g<a.length;g+=D)y=a[g],E=a[g+1],C=n?a[g+2]:0,T=r[K],A=r[K+1],P=N?s[G]:s,M=B?l[G]:l,w=0,L=0,F=0,u&&(w=u[g],L=u[g+1],F=n?u[g+2]:0),c.vertices.push(new m(y,E,C,T,A,P,M,w,L,F)),K+=2,G++}for(g=0;g<c.vertices.length;g+=3){var z=c.vertices[g],O=c.vertices[g+1],V=c.vertices[g+2];c.faces.push(new h(z,O,V))}return c};f.exports=o},27291:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=!0,t="untitled",h="",m="";function o(y){var E=y.indexOf("#");return E>-1?y.substring(0,E):y}function a(y){return y.models.length===0&&y.models.push({faces:[],name:t,textureCoords:[],vertexNormals:[],vertices:[]}),h="",y.models[y.models.length-1]}function r(y,E){var C=y.length>=2?y[1]:t;E.models.push({faces:[],name:C,textureCoords:[],vertexNormals:[],vertices:[]}),h=""}function i(y){y.length===2&&(h=y[1])}function n(y,E){var C=y.length,T=C>=2?parseFloat(y[1]):0,A=C>=3?parseFloat(y[2]):0,P=C>=4?parseFloat(y[3]):0;a(E).vertices.push({x:T,y:A,z:P})}function u(y,E){var C=y.length,T=C>=2?parseFloat(y[1]):0,A=C>=3?parseFloat(y[2]):0,P=C>=4?parseFloat(y[3]):0;isNaN(T)&&(T=0),isNaN(A)&&(A=0),isNaN(P)&&(P=0),S&&(A=1-A),a(E).textureCoords.push({u:T,v:A,w:P})}function s(y,E){var C=y.length,T=C>=2?parseFloat(y[1]):0,A=C>=3?parseFloat(y[2]):0,P=C>=4?parseFloat(y[3]):0;a(E).vertexNormals.push({x:T,y:A,z:P})}function l(y,E){var C=y.length-1;if(!(C<3)){for(var T={group:h,material:m,vertices:[]},A=0;A<C;A++){var P=y[A+1],M=P.split("/"),w=M.length;if(!(w<1||w>3)){var L=0,F=0,D=0;L=parseInt(M[0],10),w>1&&M[1]!==""&&(F=parseInt(M[1],10)),w>2&&(D=parseInt(M[2],10)),L!==0&&(L<0&&(L=a(E).vertices.length+1+L),F-=1,L-=1,D-=1,T.vertices.push({textureCoordsIndex:F,vertexIndex:L,vertexNormalIndex:D}))}}a(E).faces.push(T)}}function v(y,E){y.length>=2&&E.materialLibraries.push(y[1])}function c(y){y.length>=2&&(m=y[1])}var g=function(y,E){E===void 0&&(E=!0),S=E;var C={materials:{},materialLibraries:[],models:[]};h="",m="";for(var T=y.split(`
`),A=0;A<T.length;A++){var P=o(T[A]),M=P.replace(/\s\s+/g," ").trim().split(" ");switch(M[0].toLowerCase()){case"o":r(M,C);break;case"g":i(M);break;case"v":n(M,C);break;case"vt":u(M,C);break;case"vn":s(M,C);break;case"f":l(M,C);break;case"mtllib":v(M,C);break;case"usemtl":c(M);break}}return C};f.exports=g},76799:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(22946),m=function(o){for(var a={},r=o.split(`
`),i="",n=0;n<r.length;n++){var u=r[n].trim();if(!(u.indexOf("#")===0||u==="")){var s=u.replace(/\s\s+/g," ").trim().split(" ");switch(s[0].toLowerCase()){case"newmtl":{i=s[1];break}case"kd":{var l=Math.floor(s[1]*255),v=s.length>=2?Math.floor(s[2]*255):l,c=s.length>=3?Math.floor(s[3]*255):l;a[i]=h(l,v,c);break}}}}return a};f.exports=m},15313:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){var a,r;if(m===void 0&&o===void 0){var i=t.getInCenter();a=i.x,r=i.y}var n=Math.cos(h),u=Math.sin(h),s=t.vertex1,l=t.vertex2,v=t.vertex3,c=s.x-a,g=s.y-r;s.set(c*n-g*u+a,c*u+g*n+r),c=l.x-a,g=l.y-r,l.set(c*n-g*u+a,c*u+g*n+r),c=v.x-a,g=v.y-r,v.set(c*n-g*u+a,c*u+g*n+r)};f.exports=S},85769:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(75512),o=t(70015),a=new h({Extends:o,initialize:function(i,n,u,s,l,v,c,g,y,E){v===void 0&&(v=16777215),c===void 0&&(c=1),g===void 0&&(g=0),y===void 0&&(y=0),E===void 0&&(E=0),o.call(this,i,n,u),this.vx=0,this.vy=0,this.vz=0,this.nx=g,this.ny=y,this.nz=E,this.u=s,this.v=l,this.color=v,this.alpha=c,this.tx=0,this.ty=0,this.ta=0,this.tu=s,this.tv=l},setUVs:function(r,i){return this.u=r,this.v=i,this.tu=r,this.tv=i,this},scrollUV:function(r,i){return this.tu+=r,this.tv+=i,this},scaleUV:function(r,i){return this.tu=this.u*r,this.tv=this.v*i,this},transformCoordinatesLocal:function(r,i,n,u){var s=this.x,l=this.y,v=this.z,c=r.val,g=s*c[0]+l*c[4]+v*c[8]+c[12],y=s*c[1]+l*c[5]+v*c[9]+c[13],E=s*c[2]+l*c[6]+v*c[10]+c[14],C=s*c[3]+l*c[7]+v*c[11]+c[15];this.vx=g/C*i,this.vy=-(y/C)*n,u<=0?this.vz=E/C:this.vz=-(E/C)},resize:function(r,i,n,u,s,l){return this.x=r,this.y=i,this.vx=this.x*n,this.vy=-this.y*u,this.vz=0,s<.5?this.vx+=n*(.5-s):s>.5&&(this.vx-=n*(s-.5)),l<.5?this.vy+=u*(.5-l):l>.5&&(this.vy-=u*(l-.5)),this},update:function(r,i,n,u,s,l,v,c){var g=this.vx*r+this.vy*n+s,y=this.vx*i+this.vy*u+l;return v&&(g=Math.round(g),y=Math.round(y)),this.tx=g,this.ty=y,this.ta=this.alpha*c,this},load:function(r,i,n,u,s){return r[++n]=this.tx,r[++n]=this.ty,r[++n]=this.tu,r[++n]=this.tv,r[++n]=u,r[++n]=s,i[++n]=m.getTintAppendFloatAlpha(this.color,this.ta),n}});f.exports=a},14293:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h={Face:t(18693),GenerateGridVerts:t(99425),GenerateObjVerts:t(53267),GenerateVerts:t(67623),ParseObj:t(27291),ParseObjMaterial:t(76799),RotateFace:t(15313),Vertex:t(85769)};f.exports=h},77601:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))};f.exports=S},38933:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=function(o){return new h(o.x,o.y)};f.exports=m},47103:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return h.setTo(t.x,t.y)};f.exports=S},13625:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.x===h.x&&t.y===h.y};f.exports=S},12536:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))};f.exports=S},54205:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=function(o,a){if(a===void 0&&(a=new h),!Array.isArray(o))throw new Error("GetCentroid points argument must be an array");var r=o.length;if(r<1)throw new Error("GetCentroid points array must not be empty");if(r===1)a.x=o[0].x,a.y=o[0].y;else{for(var i=0;i<r;i++)a.x+=o[i].x,a.y+=o[i].y;a.x/=r,a.y/=r}return a};f.exports=m},50083:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)};f.exports=S},82712:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.x*t.x+t.y*t.y};f.exports=S},20052:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(74118),m=function(o,a){a===void 0&&(a=new h);for(var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY,s=0;s<o.length;s++){var l=o[s];l.x>r&&(r=l.x),l.x<i&&(i=l.x),l.y>n&&(n=l.y),l.y<u&&(u=l.y)}return a.x=i,a.y=u,a.width=r-i,a.height=n-u,a};f.exports=m},77154:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=function(o,a,r,i){return r===void 0&&(r=0),i===void 0&&(i=new h),i.x=o.x+(a.x-o.x)*r,i.y=o.y+(a.y-o.y)*r,i};f.exports=m},42397:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.setTo(t.y,t.x)};f.exports=S},59464:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=function(o,a){return a===void 0&&(a=new h),a.setTo(-o.x,-o.y)};f.exports=m},79967:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(52394),o=new h({initialize:function(r,i){r===void 0&&(r=0),i===void 0&&(i=r),this.type=m.POINT,this.x=r,this.y=i},setTo:function(a,r){return a===void 0&&(a=0),r===void 0&&(r=a),this.x=a,this.y=r,this}});f.exports=o},53581:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=t(82712),o=function(a,r,i){i===void 0&&(i=new h);var n=a.x*r.x+a.y*r.y,u=n/m(r);return u!==0&&(i.x=u*r.x,i.y=u*r.y),i};f.exports=o},50817:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=function(o,a,r){r===void 0&&(r=new h);var i=o.x*a.x+o.y*a.y;return i!==0&&(r.x=i*a.x,r.y=i*a.y),r};f.exports=m},40525:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(50083),m=function(o,a){if(o.x!==0||o.y!==0){var r=h(o);o.x/=r,o.y/=r}return o.x*=a,o.y*=a,o};f.exports=m},63472:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967);h.Ceil=t(77601),h.Clone=t(38933),h.CopyFrom=t(47103),h.Equals=t(13625),h.Floor=t(12536),h.GetCentroid=t(54205),h.GetMagnitude=t(50083),h.GetMagnitudeSq=t(82712),h.GetRectangleFromPoints=t(20052),h.Interpolate=t(77154),h.Invert=t(42397),h.Negative=t(59464),h.Project=t(53581),h.ProjectUnit=t(50817),h.SetMagnitude=t(40525),f.exports=h},19631:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(8580),m=function(o){return new h(o.points)};f.exports=m},45604:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){for(var o=!1,a=-1,r=t.points.length-1;++a<t.points.length;r=a){var i=t.points[a].x,n=t.points[a].y,u=t.points[r].x,s=t.points[r].y;(n<=m&&m<s||s<=m&&m<n)&&h<(u-i)*(m-n)/(s-n)+i&&(o=!o)}return o};f.exports=S},87289:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(45604),m=function(o,a){return h(o,a.x,a.y)};f.exports=m},11117:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(G,z,O){O=O||2;var V=z&&z.length,U=V?z[0]*O:G.length,X=t(G,0,U,O,!0),H=[];if(!X||X.next===X.prev)return H;var Q,$,k,J,Z,j,_;if(V&&(X=n(G,z,X,O)),G.length>80*O){Q=k=G[0],$=J=G[1];for(var q=O;q<U;q+=O)Z=G[q],j=G[q+1],Z<Q&&(Q=Z),j<$&&($=j),Z>k&&(k=Z),j>J&&(J=j);_=Math.max(k-Q,J-$),_=_!==0?32767/_:0}return m(X,H,O,Q,$,_,0),H}function t(G,z,O,V,U){var X,H;if(U===K(G,z,O,V)>0)for(X=z;X<O;X+=V)H=b(X,G[X],G[X+1],H);else for(X=O-V;X>=z;X-=V)H=b(X,G[X],G[X+1],H);return H&&P(H,H.next)&&(W(H),H=H.next),H}function h(G,z){if(!G)return G;z||(z=G);var O=G,V;do if(V=!1,!O.steiner&&(P(O,O.next)||A(O.prev,O,O.next)===0)){if(W(O),O=z=O.prev,O===O.next)break;V=!0}else O=O.next;while(V||O!==z);return z}function m(G,z,O,V,U,X,H){if(G){!H&&X&&c(G,V,U,X);for(var Q=G,$,k;G.prev!==G.next;){if($=G.prev,k=G.next,X?a(G,V,U,X):o(G)){z.push($.i/O|0),z.push(G.i/O|0),z.push(k.i/O|0),W(G),G=k.next,Q=k.next;continue}if(G=k,G===Q){H?H===1?(G=r(h(G),z,O),m(G,z,O,V,U,X,2)):H===2&&i(G,z,O,V,U,X):m(h(G),z,O,V,U,X,1);break}}}}function o(G){var z=G.prev,O=G,V=G.next;if(A(z,O,V)>=0)return!1;for(var U=z.x,X=O.x,H=V.x,Q=z.y,$=O.y,k=V.y,J=U<X?U<H?U:H:X<H?X:H,Z=Q<$?Q<k?Q:k:$<k?$:k,j=U>X?U>H?U:H:X>H?X:H,_=Q>$?Q>k?Q:k:$>k?$:k,q=V.next;q!==z;){if(q.x>=J&&q.x<=j&&q.y>=Z&&q.y<=_&&C(U,Q,X,$,H,k,q.x,q.y)&&A(q.prev,q,q.next)>=0)return!1;q=q.next}return!0}function a(G,z,O,V){var U=G.prev,X=G,H=G.next;if(A(U,X,H)>=0)return!1;for(var Q=U.x,$=X.x,k=H.x,J=U.y,Z=X.y,j=H.y,_=Q<$?Q<k?Q:k:$<k?$:k,q=J<Z?J<j?J:j:Z<j?Z:j,it=Q>$?Q>k?Q:k:$>k?$:k,ht=J>Z?J>j?J:j:Z>j?Z:j,ft=y(_,q,z,O,V),ut=y(it,ht,z,O,V),tt=G.prevZ,rt=G.nextZ;tt&&tt.z>=ft&&rt&&rt.z<=ut;){if(tt.x>=_&&tt.x<=it&&tt.y>=q&&tt.y<=ht&&tt!==U&&tt!==H&&C(Q,J,$,Z,k,j,tt.x,tt.y)&&A(tt.prev,tt,tt.next)>=0||(tt=tt.prevZ,rt.x>=_&&rt.x<=it&&rt.y>=q&&rt.y<=ht&&rt!==U&&rt!==H&&C(Q,J,$,Z,k,j,rt.x,rt.y)&&A(rt.prev,rt,rt.next)>=0))return!1;rt=rt.nextZ}for(;tt&&tt.z>=ft;){if(tt.x>=_&&tt.x<=it&&tt.y>=q&&tt.y<=ht&&tt!==U&&tt!==H&&C(Q,J,$,Z,k,j,tt.x,tt.y)&&A(tt.prev,tt,tt.next)>=0)return!1;tt=tt.prevZ}for(;rt&&rt.z<=ut;){if(rt.x>=_&&rt.x<=it&&rt.y>=q&&rt.y<=ht&&rt!==U&&rt!==H&&C(Q,J,$,Z,k,j,rt.x,rt.y)&&A(rt.prev,rt,rt.next)>=0)return!1;rt=rt.nextZ}return!0}function r(G,z,O){var V=G;do{var U=V.prev,X=V.next.next;!P(U,X)&&M(U,V,V.next,X)&&D(U,X)&&D(X,U)&&(z.push(U.i/O|0),z.push(V.i/O|0),z.push(X.i/O|0),W(V),W(V.next),V=G=X),V=V.next}while(V!==G);return h(V)}function i(G,z,O,V,U,X){var H=G;do{for(var Q=H.next.next;Q!==H.prev;){if(H.i!==Q.i&&T(H,Q)){var $=B(H,Q);H=h(H,H.next),$=h($,$.next),m(H,z,O,V,U,X,0),m($,z,O,V,U,X,0);return}Q=Q.next}H=H.next}while(H!==G)}function n(G,z,O,V){var U=[],X,H,Q,$,k;for(X=0,H=z.length;X<H;X++)Q=z[X]*V,$=X<H-1?z[X+1]*V:G.length,k=t(G,Q,$,V,!1),k===k.next&&(k.steiner=!0),U.push(E(k));for(U.sort(u),X=0;X<U.length;X++)O=s(U[X],O);return O}function u(G,z){return G.x-z.x}function s(G,z){var O=l(G,z);if(!O)return z;var V=B(O,G);return h(V,V.next),h(O,O.next)}function l(G,z){var O=z,V=G.x,U=G.y,X=-1/0,H;do{if(U<=O.y&&U>=O.next.y&&O.next.y!==O.y){var Q=O.x+(U-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(Q<=V&&Q>X&&(X=Q,H=O.x<O.next.x?O:O.next,Q===V))return H}O=O.next}while(O!==z);if(!H)return null;var $=H,k=H.x,J=H.y,Z=1/0,j;O=H;do V>=O.x&&O.x>=k&&V!==O.x&&C(U<J?V:X,U,k,J,U<J?X:V,U,O.x,O.y)&&(j=Math.abs(U-O.y)/(V-O.x),D(O,G)&&(j<Z||j===Z&&(O.x>H.x||O.x===H.x&&v(H,O)))&&(H=O,Z=j)),O=O.next;while(O!==$);return H}function v(G,z){return A(G.prev,G,z.prev)<0&&A(z.next,G,G.next)<0}function c(G,z,O,V){var U=G;do U.z===0&&(U.z=y(U.x,U.y,z,O,V)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==G);U.prevZ.nextZ=null,U.prevZ=null,g(U)}function g(G){var z,O,V,U,X,H,Q,$,k=1;do{for(O=G,G=null,X=null,H=0;O;){for(H++,V=O,Q=0,z=0;z<k&&(Q++,V=V.nextZ,!!V);z++);for($=k;Q>0||$>0&&V;)Q!==0&&($===0||!V||O.z<=V.z)?(U=O,O=O.nextZ,Q--):(U=V,V=V.nextZ,$--),X?X.nextZ=U:G=U,U.prevZ=X,X=U;O=V}X.nextZ=null,k*=2}while(H>1);return G}function y(G,z,O,V,U){return G=(G-O)*U|0,z=(z-V)*U|0,G=(G|G<<8)&16711935,G=(G|G<<4)&252645135,G=(G|G<<2)&858993459,G=(G|G<<1)&1431655765,z=(z|z<<8)&16711935,z=(z|z<<4)&252645135,z=(z|z<<2)&858993459,z=(z|z<<1)&1431655765,G|z<<1}function E(G){var z=G,O=G;do(z.x<O.x||z.x===O.x&&z.y<O.y)&&(O=z),z=z.next;while(z!==G);return O}function C(G,z,O,V,U,X,H,Q){return(U-H)*(z-Q)>=(G-H)*(X-Q)&&(G-H)*(V-Q)>=(O-H)*(z-Q)&&(O-H)*(X-Q)>=(U-H)*(V-Q)}function T(G,z){return G.next.i!==z.i&&G.prev.i!==z.i&&!F(G,z)&&(D(G,z)&&D(z,G)&&N(G,z)&&(A(G.prev,G,z.prev)||A(G,z.prev,z))||P(G,z)&&A(G.prev,G,G.next)>0&&A(z.prev,z,z.next)>0)}function A(G,z,O){return(z.y-G.y)*(O.x-z.x)-(z.x-G.x)*(O.y-z.y)}function P(G,z){return G.x===z.x&&G.y===z.y}function M(G,z,O,V){var U=L(A(G,z,O)),X=L(A(G,z,V)),H=L(A(O,V,G)),Q=L(A(O,V,z));return!!(U!==X&&H!==Q||U===0&&w(G,O,z)||X===0&&w(G,V,z)||H===0&&w(O,G,V)||Q===0&&w(O,z,V))}function w(G,z,O){return z.x<=Math.max(G.x,O.x)&&z.x>=Math.min(G.x,O.x)&&z.y<=Math.max(G.y,O.y)&&z.y>=Math.min(G.y,O.y)}function L(G){return G>0?1:G<0?-1:0}function F(G,z){var O=G;do{if(O.i!==G.i&&O.next.i!==G.i&&O.i!==z.i&&O.next.i!==z.i&&M(O,O.next,G,z))return!0;O=O.next}while(O!==G);return!1}function D(G,z){return A(G.prev,G,G.next)<0?A(G,z,G.next)>=0&&A(G,G.prev,z)>=0:A(G,z,G.prev)<0||A(G,G.next,z)<0}function N(G,z){var O=G,V=!1,U=(G.x+z.x)/2,X=(G.y+z.y)/2;do O.y>X!=O.next.y>X&&O.next.y!==O.y&&U<(O.next.x-O.x)*(X-O.y)/(O.next.y-O.y)+O.x&&(V=!V),O=O.next;while(O!==G);return V}function B(G,z){var O=new Y(G.i,G.x,G.y),V=new Y(z.i,z.x,z.y),U=G.next,X=z.prev;return G.next=z,z.prev=G,O.next=U,U.prev=O,V.next=O,O.prev=V,X.next=V,V.prev=X,V}function b(G,z,O,V){var U=new Y(G,z,O);return V?(U.next=V.next,U.prev=V,V.next.prev=U,V.next=U):(U.prev=U,U.next=U),U}function W(G){G.next.prev=G.prev,G.prev.next=G.next,G.prevZ&&(G.prevZ.nextZ=G.nextZ),G.nextZ&&(G.nextZ.prevZ=G.prevZ)}function Y(G,z,O){this.i=G,this.x=z,this.y=O,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}S.deviation=function(G,z,O,V){var U=z&&z.length,X=U?z[0]*O:G.length,H=Math.abs(K(G,0,X,O));if(U)for(var Q=0,$=z.length;Q<$;Q++){var k=z[Q]*O,J=Q<$-1?z[Q+1]*O:G.length;H-=Math.abs(K(G,k,J,O))}var Z=0;for(Q=0;Q<V.length;Q+=3){var j=V[Q]*O,_=V[Q+1]*O,q=V[Q+2]*O;Z+=Math.abs((G[j]-G[q])*(G[_+1]-G[j+1])-(G[j]-G[_])*(G[q+1]-G[j+1]))}return H===0&&Z===0?0:Math.abs((Z-H)/H)};function K(G,z,O,V){for(var U=0,X=z,H=O-V;X<O;X+=V)U+=(G[H]-G[X])*(G[X+1]+G[H+1]),H=X;return U}S.flatten=function(G){for(var z=G[0][0].length,O={vertices:[],holes:[],dimensions:z},V=0,U=0;U<G.length;U++){for(var X=0;X<G[U].length;X++)for(var H=0;H<z;H++)O.vertices.push(G[U][X][H]);U>0&&(V+=G[U-1].length,O.holes.push(V))}return O},f.exports=S},14045:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(74118),m=function(o,a){a===void 0&&(a=new h);for(var r=1/0,i=1/0,n=-r,u=-i,s,l=0;l<o.points.length;l++)s=o.points[l],r=Math.min(r,s.x),i=Math.min(i,s.y),n=Math.max(n,s.x),u=Math.max(u,s.y);return a.x=r,a.y=i,a.width=n-r,a.height=u-i,a};f.exports=m},98286:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){h===void 0&&(h=[]);for(var m=0;m<t.points.length;m++)h.push(t.points[m].x),h.push(t.points[m].y);return h};f.exports=S},89294:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(16028),m=t(88829),o=t(5159),a=function(r,i,n,u){u===void 0&&(u=[]);var s=r.points,l=o(r);!i&&n>0&&(i=l/n);for(var v=0;v<i;v++)for(var c=l*(v/i),g=0,y=0;y<s.length;y++){var E=s[y],C=s[(y+1)%s.length],T=new m(E.x,E.y,C.x,C.y),A=h(T);if(c<g||c>g+A){g+=A;continue}var P=T.getPoint((c-g)/A);u.push(P);break}return u};f.exports=a},5159:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(16028),m=t(88829),o=function(a){for(var r=a.points,i=0,n=0;n<r.length;n++){var u=r[n],s=r[(n+1)%r.length],l=new m(u.x,u.y,s.x,s.y);i+=h(l)}return i};f.exports=o},8580:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(45604),o=t(89294),a=t(52394),r=new h({initialize:function(n){this.type=a.POLYGON,this.area=0,this.points=[],n&&this.setTo(n)},contains:function(i,n){return m(this,i,n)},setTo:function(i){if(this.area=0,this.points=[],typeof i=="string"&&(i=i.split(" ")),!Array.isArray(i))return this;for(var n,u=Number.MAX_VALUE,s=0;s<i.length;s++)n={x:0,y:0},typeof i[s]=="number"||typeof i[s]=="string"?(n.x=parseFloat(i[s]),n.y=parseFloat(i[s+1]),s++):Array.isArray(i[s])?(n.x=i[s][0],n.y=i[s][1]):(n.x=i[s].x,n.y=i[s].y),this.points.push(n),n.y<u&&(u=n.y);return this.calculateArea(u),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var i=0,n,u,s=0;s<this.points.length-1;s++)n=this.points[s],u=this.points[s+1],i+=(u.x-n.x)*(n.y+u.y);return n=this.points[0],u=this.points[this.points.length-1],i+=(n.x-u.x)*(u.y+n.y),this.area=-i*.5,this.area},getPoints:function(i,n,u){return o(this,i,n,u)}});f.exports=r},32244:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.points.reverse(),t};f.exports=S},95874:f=>{function S(r,i){var n=r.x-i.x,u=r.y-i.y;return n*n+u*u}function t(r,i,n){var u=i.x,s=i.y,l=n.x-u,v=n.y-s;if(l!==0||v!==0){var c=((r.x-u)*l+(r.y-s)*v)/(l*l+v*v);c>1?(u=n.x,s=n.y):c>0&&(u+=l*c,s+=v*c)}return l=r.x-u,v=r.y-s,l*l+v*v}function h(r,i){for(var n=r[0],u=[n],s,l=1,v=r.length;l<v;l++)s=r[l],S(s,n)>i&&(u.push(s),n=s);return n!==s&&u.push(s),u}function m(r,i,n,u,s){for(var l=u,v,c=i+1;c<n;c++){var g=t(r[c],r[i],r[n]);g>l&&(v=c,l=g)}l>u&&(v-i>1&&m(r,i,v,u,s),s.push(r[v]),n-v>1&&m(r,v,n,u,s))}function o(r,i){var n=r.length-1,u=[r[0]];return m(r,0,n,i,u),u.push(r[n]),u}var a=function(r,i,n){i===void 0&&(i=1),n===void 0&&(n=!1);var u=r.points;if(u.length>2){var s=i*i;n||(u=h(u,s)),r.setTo(o(u,s))}return r};f.exports=a},18974:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(h,m){return h[0]=m[0],h[1]=m[1],h},t=function(h){var m,o=[],a=h.points;for(m=0;m<a.length;m++)o.push([a[m].x,a[m].y]);var r=[];for(o.length>0&&r.push(S([0,0],o[0])),m=0;m<o.length-1;m++){var i=o[m],n=o[m+1],u=i[0],s=i[1],l=n[0],v=n[1];r.push([.85*u+.15*l,.85*s+.15*v]),r.push([.15*u+.85*l,.15*s+.85*v])}return o.length>1&&r.push(S([0,0],o[o.length-1])),h.setTo(r)};f.exports=t},23490:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){for(var o=t.points,a=0;a<o.length;a++)o[a].x+=h,o[a].y+=m;return t};f.exports=S},44359:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(8580);h.Clone=t(19631),h.Contains=t(45604),h.ContainsPoint=t(87289),h.Earcut=t(11117),h.GetAABB=t(14045),h.GetNumberArray=t(98286),h.GetPoints=t(89294),h.Perimeter=t(5159),h.Reverse=t(32244),h.Simplify=t(95874),h.Smooth=t(18974),h.Translate=t(23490),f.exports=h},1653:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.width*t.height};f.exports=S},33943:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t};f.exports=S},58662:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t};f.exports=S},79993:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return t.x=h-t.width/2,t.y=m-t.height/2,t};f.exports=S},81572:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(74118),m=function(o){return new h(o.x,o.y,o.width,o.height)};f.exports=m},94287:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return t.width<=0||t.height<=0?!1:t.x<=h&&t.x+t.width>=h&&t.y<=m&&t.y+t.height>=m};f.exports=S},28687:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(94287),m=function(o,a){return h(o,a.x,a.y)};f.exports=m},73222:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return h.width*h.height>t.width*t.height?!1:h.x>t.x&&h.x<t.right&&h.right>t.x&&h.right<t.right&&h.y>t.y&&h.y<t.bottom&&h.bottom>t.y&&h.bottom<t.bottom};f.exports=S},29538:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return h.setTo(t.x,t.y,t.width,t.height)};f.exports=S},87279:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return h===void 0&&(h=[]),h.push({x:t.x,y:t.y}),h.push({x:t.right,y:t.y}),h.push({x:t.right,y:t.bottom}),h.push({x:t.x,y:t.bottom}),h};f.exports=S},19989:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.x===h.x&&t.y===h.y&&t.width===h.width&&t.height===h.height};f.exports=S},92628:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(6700),m=function(o,a){var r=h(o);return r<h(a)?o.setSize(a.height*r,a.height):o.setSize(a.width,a.width/r),o.setPosition(a.centerX-o.width/2,a.centerY-o.height/2)};f.exports=m},85028:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(6700),m=function(o,a){var r=h(o);return r>h(a)?o.setSize(a.height*r,a.height):o.setSize(a.width,a.width/r),o.setPosition(a.centerX-o.width/2,a.centerY-o.height/2)};f.exports=m},71356:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t};f.exports=S},21687:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t};f.exports=S},80222:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(74118),m=t(83392),o=function(a,r){if(r===void 0&&(r=new h),a.length===0)return r;for(var i=Number.MAX_VALUE,n=Number.MAX_VALUE,u=m.MIN_SAFE_INTEGER,s=m.MIN_SAFE_INTEGER,l,v,c,g=0;g<a.length;g++)l=a[g],Array.isArray(l)?(v=l[0],c=l[1]):(v=l.x,c=l.y),i=Math.min(i,v),n=Math.min(n,c),u=Math.max(u,v),s=Math.max(s,c);return r.x=i,r.y=n,r.width=u-i,r.height=s-n,r};f.exports=o},75785:(f,S,t)=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(74118),m=function(o,a,r,i,n){return n===void 0&&(n=new h),n.setTo(Math.min(o,r),Math.min(a,i),Math.abs(o-r),Math.abs(a-i))};f.exports=m},6700:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.height===0?NaN:t.width/t.height};f.exports=S},35242:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=function(o,a){return a===void 0&&(a=new h),a.x=o.centerX,a.y=o.centerY,a};f.exports=m},47698:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(85876),m=t(79967),o=function(a,r,i){if(i===void 0&&(i=new m),r<=0||r>=1)return i.x=a.x,i.y=a.y,i;var n=h(a)*r;return r>.5?(n-=a.width+a.height,n<=a.width?(i.x=a.right-n,i.y=a.bottom):(i.x=a.x,i.y=a.bottom-(n-a.width))):n<=a.width?(i.x=a.x+n,i.y=a.y):(i.x=a.right,i.y=a.y+(n-a.width)),i};f.exports=o},54932:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(47698),m=t(85876),o=function(a,r,i,n){n===void 0&&(n=[]),!r&&i>0&&(r=m(a)/i);for(var u=0;u<r;u++){var s=u/r;n.push(h(a,s))}return n};f.exports=o},31591:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=function(o,a){return a===void 0&&(a=new h),a.x=o.width,a.y=o.height,a};f.exports=m},7782:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79993),m=function(o,a,r){var i=o.centerX,n=o.centerY;return o.setSize(o.width+a*2,o.height+r*2),h(o,i,n)};f.exports=m},66217:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(74118),m=t(90205),o=function(a,r,i){return i===void 0&&(i=new h),m(a,r)?(i.x=Math.max(a.x,r.x),i.y=Math.max(a.y,r.y),i.width=Math.min(a.right,r.right)-i.x,i.height=Math.min(a.bottom,r.bottom)-i.y):i.setEmpty(),i};f.exports=o},40053:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(85876),m=t(79967),o=function(a,r,i,n){if(n===void 0&&(n=[]),!r&&!i)return n;r?i=Math.round(h(a)/r):r=h(a)/i;for(var u=a.x,s=a.y,l=0,v=0;v<i;v++)switch(n.push(new m(u,s)),l){case 0:u+=r,u>=a.right&&(l=1,s+=u-a.right,u=a.right);break;case 1:s+=r,s>=a.bottom&&(l=2,u-=s-a.bottom,s=a.bottom);break;case 2:u-=r,u<=a.left&&(l=3,s-=a.left-u,u=a.left);break;case 3:s-=r,s<=a.top&&(l=0,s=a.top);break}return n};f.exports=o},86673:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){for(var m=t.x,o=t.right,a=t.y,r=t.bottom,i=0;i<h.length;i++)m=Math.min(m,h[i].x),o=Math.max(o,h[i].x),a=Math.min(a,h[i].y),r=Math.max(r,h[i].y);return t.x=m,t.y=a,t.width=o-m,t.height=r-a,t};f.exports=S},14655:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){var m=Math.min(t.x,h.x),o=Math.max(t.right,h.right);t.x=m,t.width=o-m;var a=Math.min(t.y,h.y),r=Math.max(t.bottom,h.bottom);return t.y=a,t.height=r-a,t};f.exports=S},44755:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){var o=Math.min(t.x,h),a=Math.max(t.right,h);t.x=o,t.width=a-o;var r=Math.min(t.y,m),i=Math.max(t.bottom,m);return t.y=r,t.height=i-r,t};f.exports=S},74466:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return t.x+=h,t.y+=m,t};f.exports=S},55946:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.x+=h.x,t.y+=h.y,t};f.exports=S},97474:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.x<h.right&&t.right>h.x&&t.y<h.bottom&&t.bottom>h.y};f.exports=S},85876:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return 2*(t.width+t.height)};f.exports=S},20243:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=t(75606),o=function(a,r,i){i===void 0&&(i=new h),r=m(r);var n=Math.sin(r),u=Math.cos(r),s=u>0?a.width/2:a.width/-2,l=n>0?a.height/2:a.height/-2;return Math.abs(s*n)<Math.abs(l*u)?l=s*n/u:s=l*u/n,i.x=s+a.centerX,i.y=l+a.centerY,i};f.exports=o},30001:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=function(o,a){return a===void 0&&(a=new h),a.x=o.x+Math.random()*o.width,a.y=o.y+Math.random()*o.height,a};f.exports=m},97691:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(17489),m=t(73222),o=t(79967),a=function(r,i,n){if(n===void 0&&(n=new o),m(r,i))switch(h(0,3)){case 0:n.x=r.x+Math.random()*(i.right-r.x),n.y=r.y+Math.random()*(i.top-r.y);break;case 1:n.x=i.x+Math.random()*(r.right-i.x),n.y=i.bottom+Math.random()*(r.bottom-i.bottom);break;case 2:n.x=r.x+Math.random()*(i.x-r.x),n.y=i.y+Math.random()*(r.bottom-i.y);break;case 3:n.x=i.right+Math.random()*(r.right-i.right),n.y=r.y+Math.random()*(i.bottom-r.y);break}return n};f.exports=a},74118:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(94287),o=t(47698),a=t(54932),r=t(52394),i=t(88829),n=t(30001),u=new h({initialize:function(l,v,c,g){l===void 0&&(l=0),v===void 0&&(v=0),c===void 0&&(c=0),g===void 0&&(g=0),this.type=r.RECTANGLE,this.x=l,this.y=v,this.width=c,this.height=g},contains:function(s,l){return m(this,s,l)},getPoint:function(s,l){return o(this,s,l)},getPoints:function(s,l,v){return a(this,s,l,v)},getRandomPoint:function(s){return n(this,s)},setTo:function(s,l,v,c){return this.x=s,this.y=l,this.width=v,this.height=c,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(s,l){return l===void 0&&(l=s),this.x=s,this.y=l,this},setSize:function(s,l){return l===void 0&&(l=s),this.width=s,this.height=l,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(s){return s===void 0&&(s=new i),s.setTo(this.x,this.y,this.right,this.y),s},getLineB:function(s){return s===void 0&&(s=new i),s.setTo(this.right,this.y,this.right,this.bottom),s},getLineC:function(s){return s===void 0&&(s=new i),s.setTo(this.right,this.bottom,this.x,this.bottom),s},getLineD:function(s){return s===void 0&&(s=new i),s.setTo(this.x,this.bottom,this.x,this.y),s},left:{get:function(){return this.x},set:function(s){s>=this.right?this.width=0:this.width=this.right-s,this.x=s}},right:{get:function(){return this.x+this.width},set:function(s){s<=this.x?this.width=0:this.width=s-this.x}},top:{get:function(){return this.y},set:function(s){s>=this.bottom?this.height=0:this.height=this.bottom-s,this.y=s}},bottom:{get:function(){return this.y+this.height},set:function(s){s<=this.y?this.height=0:this.height=s-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(s){this.x=s-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(s){this.y=s-this.height/2}}});f.exports=u},51828:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.width===h.width&&t.height===h.height};f.exports=S},5691:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return m===void 0&&(m=h),t.width*=h,t.height*=m,t};f.exports=S},58795:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(74118),m=function(o,a,r){r===void 0&&(r=new h);var i=Math.min(o.x,a.x),n=Math.min(o.y,a.y),u=Math.max(o.right,a.right)-i,s=Math.max(o.bottom,a.bottom)-n;return r.setTo(i,n,u,s)};f.exports=m},66658:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(74118);h.Area=t(1653),h.Ceil=t(33943),h.CeilAll=t(58662),h.CenterOn=t(79993),h.Clone=t(81572),h.Contains=t(94287),h.ContainsPoint=t(28687),h.ContainsRect=t(73222),h.CopyFrom=t(29538),h.Decompose=t(87279),h.Equals=t(19989),h.FitInside=t(92628),h.FitOutside=t(85028),h.Floor=t(71356),h.FloorAll=t(21687),h.FromPoints=t(80222),h.FromXY=t(75785),h.GetAspectRatio=t(6700),h.GetCenter=t(35242),h.GetPoint=t(47698),h.GetPoints=t(54932),h.GetSize=t(31591),h.Inflate=t(7782),h.Intersection=t(66217),h.MarchingAnts=t(40053),h.MergePoints=t(86673),h.MergeRect=t(14655),h.MergeXY=t(44755),h.Offset=t(74466),h.OffsetPoint=t(55946),h.Overlaps=t(97474),h.Perimeter=t(85876),h.PerimeterPoint=t(20243),h.Random=t(30001),h.RandomOutside=t(97691),h.SameDimensions=t(51828),h.Scale=t(5691),h.Union=t(58795),f.exports=h},19108:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var h=t.x1,m=t.y1,o=t.x2,a=t.y2,r=t.x3,i=t.y3;return Math.abs(((r-h)*(a-m)-(o-h)*(i-m))/2)};f.exports=S},41199:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(66349),m=function(o,a,r){var i=r*(Math.sqrt(3)/2),n=o,u=a,s=o+r/2,l=a+i,v=o-r/2,c=a+i;return new h(n,u,s,l,v,c)};f.exports=m},88730:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(11117),m=t(66349),o=function(a,r,i,n,u){r===void 0&&(r=null),i===void 0&&(i=1),n===void 0&&(n=1),u===void 0&&(u=[]);for(var s=h(a,r),l,v,c,g,y,E,C,T,A,P=0;P<s.length;P+=3)l=s[P],v=s[P+1],c=s[P+2],g=a[l*2]*i,y=a[l*2+1]*n,E=a[v*2]*i,C=a[v*2+1]*n,T=a[c*2]*i,A=a[c*2+1]*n,u.push(new m(g,y,E,C,T,A));return u};f.exports=o},3635:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(66349),m=function(o,a,r,i){i===void 0&&(i=r);var n=o,u=a,s=o,l=a-i,v=o+r,c=a;return new h(n,u,s,l,v,c)};f.exports=m},1882:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56595),m=t(9640),o=function(a,r,i,n){n===void 0&&(n=h);var u=n(a),s=r-u.x,l=i-u.y;return m(a,s,l)};f.exports=o},56595:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=function(o,a){return a===void 0&&(a=new h),a.x=(o.x1+o.x2+o.x3)/3,a.y=(o.y1+o.y2+o.y3)/3,a};f.exports=m},91835:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(93736);function m(a,r,i,n){return a*n-r*i}var o=function(a,r){r===void 0&&(r=new h);var i=a.x3,n=a.y3,u=a.x1-i,s=a.y1-n,l=a.x2-i,v=a.y2-n,c=2*m(u,s,l,v),g=m(s,u*u+s*s,v,l*l+v*v),y=m(u,u*u+s*s,l,l*l+v*v);return r.x=i-g/c,r.y=n+y/c,r};f.exports=o},97073:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(26673),m=function(o,a){a===void 0&&(a=new h);var r=o.x1,i=o.y1,n=o.x2,u=o.y2,s=o.x3,l=o.y3,v=n-r,c=u-i,g=s-r,y=l-i,E=v*(r+n)+c*(i+u),C=g*(r+s)+y*(i+l),T=2*(v*(l-u)-c*(s-n)),A,P;if(Math.abs(T)<1e-6){var M=Math.min(r,n,s),w=Math.min(i,u,l);A=(Math.max(r,n,s)-M)*.5,P=(Math.max(i,u,l)-w)*.5,a.x=M+A,a.y=w+P,a.radius=Math.sqrt(A*A+P*P)}else a.x=(y*E-c*C)/T,a.y=(v*C-g*E)/T,A=a.x-r,P=a.y-i,a.radius=Math.sqrt(A*A+P*P);return a};f.exports=m},75974:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(66349),m=function(o){return new h(o.x1,o.y1,o.x2,o.y2,o.x3,o.y3)};f.exports=m},60689:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){var o=t.x3-t.x1,a=t.y3-t.y1,r=t.x2-t.x1,i=t.y2-t.y1,n=h-t.x1,u=m-t.y1,s=o*o+a*a,l=o*r+a*i,v=o*n+a*u,c=r*r+i*i,g=r*n+i*u,y=s*c-l*l,E=y===0?0:1/y,C=(c*v-l*g)*E,T=(s*g-l*v)*E;return C>=0&&T>=0&&C+T<1};f.exports=S},86875:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){m===void 0&&(m=!1),o===void 0&&(o=[]);for(var a=t.x3-t.x1,r=t.y3-t.y1,i=t.x2-t.x1,n=t.y2-t.y1,u=a*a+r*r,s=a*i+r*n,l=i*i+n*n,v=u*l-s*s,c=v===0?0:1/v,g,y,E,C,T,A,P=t.x1,M=t.y1,w=0;w<h.length&&(E=h[w].x-P,C=h[w].y-M,T=a*E+r*C,A=i*E+n*C,g=(l*T-s*A)*c,y=(u*A-s*T)*c,!(g>=0&&y>=0&&g+y<1&&(o.push({x:h[w].x,y:h[w].y}),m)));w++);return o};f.exports=S},51532:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(60689),m=function(o,a){return h(o,a.x,a.y)};f.exports=m},42538:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return h.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)};f.exports=S},18680:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return h===void 0&&(h=[]),h.push({x:t.x1,y:t.y1}),h.push({x:t.x2,y:t.y2}),h.push({x:t.x3,y:t.y3}),h};f.exports=S},29977:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.x1===h.x1&&t.y1===h.y1&&t.x2===h.x2&&t.y2===h.y2&&t.x3===h.x3&&t.y3===h.y3};f.exports=S},56088:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=t(16028),o=function(a,r,i){i===void 0&&(i=new h);var n=a.getLineA(),u=a.getLineB(),s=a.getLineC();if(r<=0||r>=1)return i.x=n.x1,i.y=n.y1,i;var l=m(n),v=m(u),c=m(s),g=l+v+c,y=g*r,E=0;return y<l?(E=y/l,i.x=n.x1+(n.x2-n.x1)*E,i.y=n.y1+(n.y2-n.y1)*E):y>l+v?(y-=l+v,E=y/c,i.x=s.x1+(s.x2-s.x1)*E,i.y=s.y1+(s.y2-s.y1)*E):(y-=l,E=y/v,i.x=u.x1+(u.x2-u.x1)*E,i.y=u.y1+(u.y2-u.y1)*E),i};f.exports=o},24402:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(16028),m=t(79967),o=function(a,r,i,n){n===void 0&&(n=[]);var u=a.getLineA(),s=a.getLineB(),l=a.getLineC(),v=h(u),c=h(s),g=h(l),y=v+c+g;!r&&i>0&&(r=y/i);for(var E=0;E<r;E++){var C=y*(E/r),T=0,A=new m;C<v?(T=C/v,A.x=u.x1+(u.x2-u.x1)*T,A.y=u.y1+(u.y2-u.y1)*T):C>v+c?(C-=v+c,T=C/g,A.x=l.x1+(l.x2-l.x1)*T,A.y=l.y1+(l.y2-l.y1)*T):(C-=v,T=C/c,A.x=s.x1+(s.x2-s.x1)*T,A.y=s.y1+(s.y2-s.y1)*T),n.push(A)}return n};f.exports=o},83648:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967);function m(a,r,i,n){var u=a-i,s=r-n,l=u*u+s*s;return Math.sqrt(l)}var o=function(a,r){r===void 0&&(r=new h);var i=a.x1,n=a.y1,u=a.x2,s=a.y2,l=a.x3,v=a.y3,c=m(l,v,u,s),g=m(i,n,l,v),y=m(u,s,i,n),E=c+g+y;return r.x=(i*c+u*g+l*y)/E,r.y=(n*c+s*g+v*y)/E,r};f.exports=o},9640:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return t.x1+=h,t.y1+=m,t.x2+=h,t.y2+=m,t.x3+=h,t.y3+=m,t};f.exports=S},95290:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(16028),m=function(o){var a=o.getLineA(),r=o.getLineB(),i=o.getLineC();return h(a)+h(r)+h(i)};f.exports=m},99761:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(79967),m=function(o,a){a===void 0&&(a=new h);var r=o.x2-o.x1,i=o.y2-o.y1,n=o.x3-o.x1,u=o.y3-o.y1,s=Math.random(),l=Math.random();return s+l>=1&&(s=1-s,l=1-l),a.x=o.x1+(r*s+n*l),a.y=o.y1+(i*s+u*l),a};f.exports=m},21934:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(19211),m=t(83648),o=function(a,r){var i=m(a);return h(a,i.x,i.y,r)};f.exports=o},68454:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(19211),m=function(o,a,r){return h(o,a.x,a.y,r)};f.exports=m},19211:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){var a=Math.cos(o),r=Math.sin(o),i=t.x1-h,n=t.y1-m;return t.x1=i*a-n*r+h,t.y1=i*r+n*a+m,i=t.x2-h,n=t.y2-m,t.x2=i*a-n*r+h,t.y2=i*r+n*a+m,i=t.x3-h,n=t.y3-m,t.x3=i*a-n*r+h,t.y3=i*r+n*a+m,t};f.exports=S},66349:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(60689),o=t(56088),a=t(24402),r=t(52394),i=t(88829),n=t(99761),u=new h({initialize:function(l,v,c,g,y,E){l===void 0&&(l=0),v===void 0&&(v=0),c===void 0&&(c=0),g===void 0&&(g=0),y===void 0&&(y=0),E===void 0&&(E=0),this.type=r.TRIANGLE,this.x1=l,this.y1=v,this.x2=c,this.y2=g,this.x3=y,this.y3=E},contains:function(s,l){return m(this,s,l)},getPoint:function(s,l){return o(this,s,l)},getPoints:function(s,l,v){return a(this,s,l,v)},getRandomPoint:function(s){return n(this,s)},setTo:function(s,l,v,c,g,y){return s===void 0&&(s=0),l===void 0&&(l=0),v===void 0&&(v=0),c===void 0&&(c=0),g===void 0&&(g=0),y===void 0&&(y=0),this.x1=s,this.y1=l,this.x2=v,this.y2=c,this.x3=g,this.y3=y,this},getLineA:function(s){return s===void 0&&(s=new i),s.setTo(this.x1,this.y1,this.x2,this.y2),s},getLineB:function(s){return s===void 0&&(s=new i),s.setTo(this.x2,this.y2,this.x3,this.y3),s},getLineC:function(s){return s===void 0&&(s=new i),s.setTo(this.x3,this.y3,this.x1,this.y1),s},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(s){var l=0;this.x1<=this.x2&&this.x1<=this.x3?l=this.x1-s:this.x2<=this.x1&&this.x2<=this.x3?l=this.x2-s:l=this.x3-s,this.x1-=l,this.x2-=l,this.x3-=l}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(s){var l=0;this.x1>=this.x2&&this.x1>=this.x3?l=this.x1-s:this.x2>=this.x1&&this.x2>=this.x3?l=this.x2-s:l=this.x3-s,this.x1-=l,this.x2-=l,this.x3-=l}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(s){var l=0;this.y1<=this.y2&&this.y1<=this.y3?l=this.y1-s:this.y2<=this.y1&&this.y2<=this.y3?l=this.y2-s:l=this.y3-s,this.y1-=l,this.y2-=l,this.y3-=l}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(s){var l=0;this.y1>=this.y2&&this.y1>=this.y3?l=this.y1-s:this.y2>=this.y1&&this.y2>=this.y3?l=this.y2-s:l=this.y3-s,this.y1-=l,this.y2-=l,this.y3-=l}}});f.exports=u},87619:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(66349);h.Area=t(19108),h.BuildEquilateral=t(41199),h.BuildFromPolygon=t(88730),h.BuildRight=t(3635),h.CenterOn=t(1882),h.Centroid=t(56595),h.CircumCenter=t(91835),h.CircumCircle=t(97073),h.Clone=t(75974),h.Contains=t(60689),h.ContainsArray=t(86875),h.ContainsPoint=t(51532),h.CopyFrom=t(42538),h.Decompose=t(18680),h.Equals=t(29977),h.GetPoint=t(56088),h.GetPoints=t(24402),h.InCenter=t(83648),h.Perimeter=t(95290),h.Offset=t(9640),h.Random=t(99761),h.Rotate=t(21934),h.RotateAroundPoint=t(68454),h.RotateAroundXY=t(19211),f.exports=h},27395:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return{gameObject:t,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:h,hitAreaCallback:m,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};f.exports=S},18104:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return function(m,o,a,r){var i=t.getPixelAlpha(o,a,r.texture.key,r.frame.name);return i&&i>=h}};f.exports=S},69898:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(72687),o=t(6659),a=t(33963),r=t(97081),i=t(71064),n=t(7905),u=t(40398),s=t(37579),l=t(69360),v=t(64462),c=new h({initialize:function(y,E){this.game=y,this.scaleManager,this.canvas,this.config=E,this.enabled=!0,this.events=new o,this.isOver=!0,this.defaultCursor="",this.keyboard=E.inputKeyboard?new i(this):null,this.mouse=E.inputMouse?new n(this):null,this.touch=E.inputTouch?new s(this):null,this.pointers=[],this.pointersTotal=E.inputActivePointers,E.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var C=0;C<=this.pointersTotal;C++){var T=new u(this,C);T.smoothFactor=E.inputSmoothFactor,this.pointers.push(T)}this.mousePointer=E.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new l,this._tempMatrix2=new l,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],y.events.once(r.BOOT,this.boot,this)},boot:function(){var g=this.game,y=g.events;this.canvas=g.canvas,this.scaleManager=g.scale,this.events.emit(a.MANAGER_BOOT),y.on(r.PRE_RENDER,this.preRender,this),y.once(r.DESTROY,this.destroy,this)},setCanvasOver:function(g){this.isOver=!0,this.events.emit(a.GAME_OVER,g)},setCanvasOut:function(g){this.isOver=!1,this.events.emit(a.GAME_OUT,g)},preRender:function(){var g=this.game.loop.now,y=this.game.loop.delta,E=this.game.scene.getScenes(!0,!0);this.time=g,this.events.emit(a.MANAGER_UPDATE);for(var C=0;C<E.length;C++){var T=E[C];if(T.sys.input&&T.sys.input.updatePoll(g,y)&&this.globalTopOnly)return}},setDefaultCursor:function(g){this.defaultCursor=g,this.canvas.style.cursor!==g&&(this.canvas.style.cursor=g)},setCursor:function(g){g.cursor&&(this.canvas.style.cursor=g.cursor)},resetCursor:function(g){g.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(g){g===void 0&&(g=1);var y=[];this.pointersTotal+g>10&&(g=10-this.pointersTotal);for(var E=0;E<g;E++){var C=this.pointers.length,T=new u(this,C);T.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(T),this.pointersTotal++,y.push(T)}return y},updateInputPlugins:function(g,y){var E=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var C=0;C<E.length;C++){var T=E[C];if(T.sys.input){var A=T.sys.input.update(g,y);if(A&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(g){for(var y=this.pointers,E=[],C=0;C<g.changedTouches.length;C++)for(var T=g.changedTouches[C],A=1;A<this.pointersTotal;A++){var P=y[A];if(!P.active){P.touchstart(T,g),this.activePointer=P,E.push(P);break}}this.updateInputPlugins(m.TOUCH_START,E)},onTouchMove:function(g){for(var y=this.pointers,E=[],C=0;C<g.changedTouches.length;C++)for(var T=g.changedTouches[C],A=1;A<this.pointersTotal;A++){var P=y[A];if(P.active&&P.identifier===T.identifier){var M=document.elementFromPoint(T.pageX,T.pageY),w=M===this.canvas;!this.isOver&&w?this.setCanvasOver(g):this.isOver&&!w&&this.setCanvasOut(g),this.isOver&&(P.touchmove(T,g),this.activePointer=P,E.push(P));break}}this.updateInputPlugins(m.TOUCH_MOVE,E)},onTouchEnd:function(g){for(var y=this.pointers,E=[],C=0;C<g.changedTouches.length;C++)for(var T=g.changedTouches[C],A=1;A<this.pointersTotal;A++){var P=y[A];if(P.active&&P.identifier===T.identifier){P.touchend(T,g),E.push(P);break}}this.updateInputPlugins(m.TOUCH_END,E)},onTouchCancel:function(g){for(var y=this.pointers,E=[],C=0;C<g.changedTouches.length;C++)for(var T=g.changedTouches[C],A=1;A<this.pointersTotal;A++){var P=y[A];if(P.active&&P.identifier===T.identifier){P.touchcancel(T,g),E.push(P);break}}this.updateInputPlugins(m.TOUCH_CANCEL,E)},onMouseDown:function(g){var y=this.mousePointer;y.down(g),y.updateMotion(),this.activePointer=y,this.updateInputPlugins(m.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(g){var y=this.mousePointer;y.move(g),y.updateMotion(),this.activePointer=y,this.updateInputPlugins(m.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(g){var y=this.mousePointer;y.up(g),y.updateMotion(),this.activePointer=y,this.updateInputPlugins(m.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(g){var y=this.mousePointer;y.wheel(g),this.activePointer=y,this.updateInputPlugins(m.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(g){var y=this.mouse.locked;this.mousePointer.locked=y,this.events.emit(a.POINTERLOCK_CHANGE,g,y)},inputCandidate:function(g,y){var E=g.input;if(!E||!E.enabled||!g.willRender(y))return!1;var C=!0,T=g.parentContainer;if(T)do{if(!T.willRender(y)){C=!1;break}T=T.parentContainer}while(T);return C},hitTest:function(g,y,E,C){C===void 0&&(C=this._tempHitTest);var T=this._tempPoint,A=E.scrollX,P=E.scrollY;C.length=0;var M=g.x,w=g.y;E.getWorldPoint(M,w,T),g.worldX=T.x,g.worldY=T.y;for(var L={x:0,y:0},F=this._tempMatrix,D=this._tempMatrix2,N=0;N<y.length;N++){var B=y[N];if(this.inputCandidate(B,E)){var b=T.x+A*B.scrollFactorX-A,W=T.y+P*B.scrollFactorY-P;B.parentContainer?(B.getWorldTransformMatrix(F,D),F.applyInverse(b,W,L)):v(b,W,B.x,B.y,B.rotation,B.scaleX,B.scaleY,L),this.pointWithinHitArea(B,L.x,L.y)&&C.push(B)}}return C},pointWithinHitArea:function(g,y,E){y+=g.displayOriginX,E+=g.displayOriginY;var C=g.input;return C&&C.hitAreaCallback(C.hitArea,y,E,g)?(C.localX=y,C.localY=E,!0):!1},pointWithinInteractiveObject:function(g,y,E){return g.hitArea?(y+=g.gameObject.displayOriginX,E+=g.gameObject.displayOriginY,g.localX=y,g.localY=E,g.hitAreaCallback(g.hitArea,y,E,g)):!1},transformPointer:function(g,y,E,C){var T=g.position,A=g.prevPosition;A.x=T.x,A.y=T.y;var P=this.scaleManager.transformX(y),M=this.scaleManager.transformY(E),w=g.smoothFactor;!C||w===0?(T.x=P,T.y=M):(T.x=P*w+A.x*(1-w),T.y=M*w+A.y*(1-w))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(r.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var g=0;g<this.pointers.length;g++)this.pointers[g].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});f.exports=c},12499:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(26673),m=t(65650),o=t(56694),a=t(72687),r=t(27395),i=t(18104),n=t(53996),u=t(95669),s=t(72313),l=t(33963),v=t(6659),c=t(72632),g=t(52394),y=t(63399),E=t(42911),C=t(91963),T=t(74118),A=t(94287),P=t(7599),M=t(66349),w=t(60689),L=new o({Extends:v,initialize:function(D){v.call(this),this.scene=D,this.systems=D.sys,this.settings=D.sys.settings,this.manager=D.sys.game.input,this.pluginEvents=new v,this.enabled=!0,this.displayList,this.cameras,y.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var N={cancelled:!1};this._eventContainer={stopPropagation:function(){N.cancelled=!0}},this._eventData=N,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,D.sys.events.once(P.BOOT,this.boot,this),D.sys.events.on(P.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(P.DESTROY,this.destroy,this),this.pluginEvents.emit(l.BOOT)},start:function(){var F=this.systems.events;F.on(P.TRANSITION_START,this.transitionIn,this),F.on(P.TRANSITION_OUT,this.transitionOut,this),F.on(P.TRANSITION_COMPLETE,this.transitionComplete,this),F.on(P.PRE_UPDATE,this.preUpdate,this),F.once(P.SHUTDOWN,this.shutdown,this),this.manager.events.on(l.GAME_OUT,this.onGameOut,this),this.manager.events.on(l.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(l.START)},onGameOver:function(F){this.isActive()&&this.emit(l.GAME_OVER,F.timeStamp,F)},onGameOut:function(F){this.isActive()&&this.emit(l.GAME_OUT,F.timeStamp,F)},preUpdate:function(){this.pluginEvents.emit(l.PRE_UPDATE);var F=this._pendingRemoval,D=this._pendingInsertion,N=F.length,B=D.length;if(!(N===0&&B===0)){for(var b=this._list,W=0;W<N;W++){var Y=F[W],K=b.indexOf(Y);K>-1&&(b.splice(K,1),this.clear(Y,!0))}this._pendingRemoval.length=0,this._list=b.concat(D.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.canInput()},updatePoll:function(F,D){if(!this.isActive())return!1;if(this.pluginEvents.emit(l.UPDATE,F,D),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var N,B=this.manager,b=B.pointers,W=B.pointersTotal;for(N=0;N<W;N++)b[N].updateMotion();if(this._list.length===0)return!1;var Y=this.pollRate;if(Y===-1)return!1;if(Y>0)if(this._pollTimer-=D,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var K=!1;for(N=0;N<W;N++){var G=0,z=b[N];this._tempZones=[],this._temp=this.hitTestPointer(z),this.sortGameObjects(this._temp,z),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),G+=this.processOverOutEvents(z),this.getDragState(z)===2&&this.processDragThresholdEvent(z,F),G>0&&(K=!0)}return K},update:function(F,D){if(!this.isActive())return!1;for(var N=D.length,B=!1,b=0;b<N;b++){var W=0,Y=D[b];switch(this._tempZones=[],this._temp=this.hitTestPointer(Y),this.sortGameObjects(this._temp,Y),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),F){case a.MOUSE_DOWN:W+=this.processDragDownEvent(Y),W+=this.processDownEvents(Y),W+=this.processOverOutEvents(Y);break;case a.MOUSE_UP:W+=this.processDragUpEvent(Y),W+=this.processUpEvents(Y),W+=this.processOverOutEvents(Y);break;case a.TOUCH_START:W+=this.processDragDownEvent(Y),W+=this.processDownEvents(Y),W+=this.processOverEvents(Y);break;case a.TOUCH_END:case a.TOUCH_CANCEL:W+=this.processDragUpEvent(Y),W+=this.processUpEvents(Y),W+=this.processOutEvents(Y);break;case a.MOUSE_MOVE:case a.TOUCH_MOVE:W+=this.processDragMoveEvent(Y),W+=this.processMoveEvents(Y),W+=this.processOverOutEvents(Y);break;case a.MOUSE_WHEEL:W+=this.processWheelEvent(Y);break}W>0&&(B=!0)}return this._updatedThisFrame=!0,B},clear:function(F,D){D===void 0&&(D=!1),this.disable(F);var N=F.input;N&&(this.removeDebug(F),N.gameObject=void 0,N.target=void 0,N.hitArea=void 0,N.hitAreaCallback=void 0,N.callbackContext=void 0,F.input=null),D||this.queueForRemoval(F);var B=this._draggable.indexOf(F);return B>-1&&this._draggable.splice(B,1),F},disable:function(F){var D=F.input;D&&(D.enabled=!1,D.dragState=0);var N=this._temp,B=this._drag,b=this._over,W=this.manager,Y=N.indexOf(F);Y>-1&&N.splice(Y,1);for(var K=0;K<W.pointersTotal;K++)Y=B[K].indexOf(F),Y>-1&&B[K].splice(Y,1),Y=b[K].indexOf(F),Y>-1&&(b[K].splice(Y,1),W.resetCursor(D));return this},enable:function(F,D,N,B){return B===void 0&&(B=!1),F.input?F.input.enabled=!0:this.setHitArea(F,D,N),F.input&&B&&!F.input.dropZone&&(F.input.dropZone=B),this},hitTestPointer:function(F){for(var D=this.cameras.getCamerasBelowPointer(F),N=0;N<D.length;N++){for(var B=D[N],b=this.manager.hitTest(F,this._list,B),W=0;W<b.length;W++){var Y=b[W];Y.input.dropZone&&this._tempZones.push(Y)}if(b.length>0)return F.camera=B,b}return F.camera=D[0],[]},processDownEvents:function(F){var D=0,N=this._temp,B=this._eventData,b=this._eventContainer;B.cancelled=!1;for(var W=!1,Y=0;Y<N.length;Y++){var K=N[Y];if(!(!K.input||!K.input.enabled)){if(D++,K.emit(l.GAMEOBJECT_POINTER_DOWN,F,K.input.localX,K.input.localY,b),B.cancelled||!K.input||!K.input.enabled){W=!0;break}if(this.emit(l.GAMEOBJECT_DOWN,F,K,b),B.cancelled||!K.input){W=!0;break}}}return!W&&this.manager&&(F.downElement===this.manager.game.canvas?this.emit(l.POINTER_DOWN,F,N):this.emit(l.POINTER_DOWN_OUTSIDE,F)),D},getDragState:function(F){return this._dragState[F.id]},setDragState:function(F,D){this._dragState[F.id]=D},processDragThresholdEvent:function(F,D){var N=!1,B=this.dragTimeThreshold,b=this.dragDistanceThreshold;if((b>0&&n(F.x,F.y,F.downX,F.downY)>=b||B>0&&D>=F.downTime+B)&&(N=!0),N)return this.setDragState(F,3),this.processDragStartList(F)},processDragStartList:function(F){if(this.getDragState(F)!==3)return 0;for(var D=this._drag[F.id],N=0;N<D.length;N++){var B=D[N],b=B.input;b.dragState=2,b.dragStartX=B.x,b.dragStartY=B.y,b.dragStartXGlobal=F.worldX,b.dragStartYGlobal=F.worldY,b.dragX=b.dragStartXGlobal-b.dragStartX,b.dragY=b.dragStartYGlobal-b.dragStartY,B.emit(l.GAMEOBJECT_DRAG_START,F,b.dragX,b.dragY),this.emit(l.DRAG_START,F,B)}return this.setDragState(F,4),D.length},processDragDownEvent:function(F){var D=this._temp;if(this._draggable.length===0||D.length===0||!F.primaryDown||this.getDragState(F)!==0)return 0;this.setDragState(F,1);for(var N=[],B=0;B<D.length;B++){var b=D[B];b.input.draggable&&b.input.dragState===0&&N.push(b)}return N.length===0?(this.setDragState(F,0),0):(N.length>1&&(this.sortGameObjects(N,F),this.topOnly&&N.splice(1)),this._drag[F.id]=N,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(F,3),this.processDragStartList(F)):(this.setDragState(F,2),0))},processDragMoveEvent:function(F){if(this.getDragState(F)===2&&this.processDragThresholdEvent(F,this.manager.game.loop.now),this.getDragState(F)!==4)return 0;for(var D=this._tempZones,N=this._drag[F.id],B=0;B<N.length;B++){var b=N[B],W=b.input,Y=W.target;if(Y){var K=D.indexOf(Y);K===0?(b.emit(l.GAMEOBJECT_DRAG_OVER,F,Y),this.emit(l.DRAG_OVER,F,b,Y)):K>0?(b.emit(l.GAMEOBJECT_DRAG_LEAVE,F,Y),this.emit(l.DRAG_LEAVE,F,b,Y),W.target=D[0],Y=W.target,b.emit(l.GAMEOBJECT_DRAG_ENTER,F,Y),this.emit(l.DRAG_ENTER,F,b,Y)):(b.emit(l.GAMEOBJECT_DRAG_LEAVE,F,Y),this.emit(l.DRAG_LEAVE,F,b,Y),D[0]?(W.target=D[0],Y=W.target,b.emit(l.GAMEOBJECT_DRAG_ENTER,F,Y),this.emit(l.DRAG_ENTER,F,b,Y)):W.target=null)}else!Y&&D[0]&&(W.target=D[0],Y=W.target,b.emit(l.GAMEOBJECT_DRAG_ENTER,F,Y),this.emit(l.DRAG_ENTER,F,b,Y));var G,z;if(!b.parentContainer)G=F.worldX-W.dragX,z=F.worldY-W.dragY;else{var O=F.worldX-W.dragStartXGlobal,V=F.worldY-W.dragStartYGlobal,U=b.getParentRotation(),X=O*Math.cos(U)+V*Math.sin(U),H=V*Math.cos(U)-O*Math.sin(U);X*=1/b.parentContainer.scaleX,H*=1/b.parentContainer.scaleY,G=X+W.dragStartX,z=H+W.dragStartY}b.emit(l.GAMEOBJECT_DRAG,F,G,z),this.emit(l.DRAG,F,b,G,z)}return N.length},processDragUpEvent:function(F){for(var D=this._drag[F.id],N=0;N<D.length;N++){var B=D[N],b=B.input;if(b&&b.dragState===2){b.dragState=0,b.dragX=b.localX-B.displayOriginX,b.dragY=b.localY-B.displayOriginY;var W=!1,Y=b.target;Y&&(B.emit(l.GAMEOBJECT_DROP,F,Y),this.emit(l.DROP,F,B,Y),b.target=null,W=!0),B.input&&B.input.enabled&&(B.emit(l.GAMEOBJECT_DRAG_END,F,b.dragX,b.dragY,W),this.emit(l.DRAG_END,F,B,W))}}return this.setDragState(F,0),D.splice(0),0},processMoveEvents:function(F){var D=0,N=this._temp,B=this._eventData,b=this._eventContainer;B.cancelled=!1;for(var W=!1,Y=0;Y<N.length;Y++){var K=N[Y];if(!(!K.input||!K.input.enabled)){if(D++,K.emit(l.GAMEOBJECT_POINTER_MOVE,F,K.input.localX,K.input.localY,b),B.cancelled||!K.input||!K.input.enabled){W=!0;break}if(this.emit(l.GAMEOBJECT_MOVE,F,K,b),B.cancelled||!K.input||!K.input.enabled){W=!0;break}if(this.topOnly)break}}return W||this.emit(l.POINTER_MOVE,F,N),D},processWheelEvent:function(F){var D=0,N=this._temp,B=this._eventData,b=this._eventContainer;B.cancelled=!1;for(var W=!1,Y=F.deltaX,K=F.deltaY,G=F.deltaZ,z=0;z<N.length;z++){var O=N[z];if(!(!O.input||!O.input.enabled)){if(D++,O.emit(l.GAMEOBJECT_POINTER_WHEEL,F,Y,K,G,b),B.cancelled||!O.input||!O.input.enabled){W=!0;break}if(this.emit(l.GAMEOBJECT_WHEEL,F,O,Y,K,G,b),B.cancelled||!O.input||!O.input.enabled){W=!0;break}}}return W||this.emit(l.POINTER_WHEEL,F,N,Y,K,G),D},processOverEvents:function(F){var D=this._temp,N=0,B=D.length,b=[];if(B>0){var W=this.manager,Y=this._eventData,K=this._eventContainer;Y.cancelled=!1;for(var G=!1,z=0;z<B;z++){var O=D[z];if(!(!O.input||!O.input.enabled)){if(b.push(O),W.setCursor(O.input),O.emit(l.GAMEOBJECT_POINTER_OVER,F,O.input.localX,O.input.localY,K),N++,Y.cancelled||!O.input||!O.input.enabled){G=!0;break}if(this.emit(l.GAMEOBJECT_OVER,F,O,K),Y.cancelled||!O.input||!O.input.enabled){G=!0;break}}}G||this.emit(l.POINTER_OVER,F,b)}return this._over[F.id]=b,N},processOutEvents:function(F){var D=this._over[F.id],N=0,B=D.length;if(B>0){var b=this.manager,W=this._eventData,Y=this._eventContainer;W.cancelled=!1;var K=!1;this.sortGameObjects(D,F);for(var G=0;G<B;G++){var z=D[G];if(z=D[G],!(!z.input||!z.input.enabled)){if(b.resetCursor(z.input),z.emit(l.GAMEOBJECT_POINTER_OUT,F,Y),N++,W.cancelled||!z.input||!z.input.enabled){K=!0;break}if(this.emit(l.GAMEOBJECT_OUT,F,z,Y),W.cancelled||!z.input||!z.input.enabled){K=!0;break}K||this.emit(l.POINTER_OUT,F,D)}}this._over[F.id]=[]}return N},processOverOutEvents:function(F){var D=this._temp,N,B,b=[],W=[],Y=[],K=this._over[F.id],G=this._drag[F.id],z=this.manager;for(N=0;N<K.length;N++)B=K[N],D.indexOf(B)===-1&&G.indexOf(B)===-1?b.push(B):Y.push(B);for(N=0;N<D.length;N++)B=D[N],K.indexOf(B)===-1&&W.push(B);var O=b.length,V=0,U=this._eventData,X=this._eventContainer;U.cancelled=!1;var H=!1;if(O>0){for(this.sortGameObjects(b,F),N=0;N<O;N++)if(B=b[N],!(!B.input||!B.input.enabled)){if(z.resetCursor(B.input),B.emit(l.GAMEOBJECT_POINTER_OUT,F,X),V++,U.cancelled||!B.input||!B.input.enabled){H=!0;break}if(this.emit(l.GAMEOBJECT_OUT,F,B,X),U.cancelled||!B.input||!B.input.enabled){H=!0;break}}H||this.emit(l.POINTER_OUT,F,b)}if(O=W.length,U.cancelled=!1,H=!1,O>0){for(this.sortGameObjects(W,F),N=0;N<O;N++)if(B=W[N],!(!B.input||!B.input.enabled)){if(z.setCursor(B.input),B.emit(l.GAMEOBJECT_POINTER_OVER,F,B.input.localX,B.input.localY,X),V++,U.cancelled||!B.input||!B.input.enabled){H=!0;break}if(this.emit(l.GAMEOBJECT_OVER,F,B,X),U.cancelled||!B.input||!B.input.enabled){H=!0;break}}H||this.emit(l.POINTER_OVER,F,W)}return K=Y.concat(W),this._over[F.id]=this.sortGameObjects(K,F),V},processUpEvents:function(F){var D=this._temp,N=this._eventData,B=this._eventContainer;N.cancelled=!1;for(var b=!1,W=0;W<D.length;W++){var Y=D[W];if(!(!Y.input||!Y.input.enabled)){if(Y.emit(l.GAMEOBJECT_POINTER_UP,F,Y.input.localX,Y.input.localY,B),N.cancelled||!Y.input||!Y.input.enabled){b=!0;break}if(this.emit(l.GAMEOBJECT_UP,F,Y,B),N.cancelled||!Y.input||!Y.input.enabled){b=!0;break}}}return!b&&this.manager&&(F.upElement===this.manager.game.canvas?this.emit(l.POINTER_UP,F,D):this.emit(l.POINTER_UP_OUTSIDE,F)),D.length},queueForInsertion:function(F){return this._pendingInsertion.indexOf(F)===-1&&this._list.indexOf(F)===-1&&this._pendingInsertion.push(F),this},queueForRemoval:function(F){return this._pendingRemoval.push(F),this},setDraggable:function(F,D){D===void 0&&(D=!0),Array.isArray(F)||(F=[F]);for(var N=0;N<F.length;N++){var B=F[N];B.input.draggable=D;var b=this._draggable.indexOf(B);D&&b===-1?this._draggable.push(B):!D&&b>-1&&this._draggable.splice(b,1)}return this},makePixelPerfect:function(F){F===void 0&&(F=1);var D=this.systems.textures;return i(D,F)},setHitArea:function(F,D,N){if(D===void 0)return this.setHitAreaFromTexture(F);Array.isArray(F)||(F=[F]);var B=!1,b=!1,W=!1,Y=!1,K=!1,G=!0;if(E(D)){var z=D;D=c(z,"hitArea",null),N=c(z,"hitAreaCallback",null),B=c(z,"draggable",!1),b=c(z,"dropZone",!1),W=c(z,"cursor",!1),Y=c(z,"useHandCursor",!1),K=c(z,"pixelPerfect",!1);var O=c(z,"alphaTolerance",1);K&&(D={},N=this.makePixelPerfect(O)),(!D||!N)&&(this.setHitAreaFromTexture(F),G=!1)}else typeof D=="function"&&!N&&(N=D,D={});for(var V=0;V<F.length;V++){var U=F[V];if(K&&U.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var X=U.input?U.input:r(U,D,N);X.customHitArea=G,X.dropZone=b,X.cursor=Y?"pointer":W,U.input=X,B&&this.setDraggable(U),this.queueForInsertion(U)}return this},setHitAreaCircle:function(F,D,N,B,b){b===void 0&&(b=m);var W=new h(D,N,B);return this.setHitArea(F,W,b)},setHitAreaEllipse:function(F,D,N,B,b,W){W===void 0&&(W=s);var Y=new u(D,N,B,b);return this.setHitArea(F,Y,W)},setHitAreaFromTexture:function(F,D){D===void 0&&(D=A),Array.isArray(F)||(F=[F]);for(var N=0;N<F.length;N++){var B=F[N],b=B.frame,W=0,Y=0;if(B.width?(W=B.width,Y=B.height):b&&(W=b.realWidth,Y=b.realHeight),B.type==="Container"&&(W===0||Y===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}W!==0&&Y!==0&&(B.input=r(B,new T(0,0,W,Y),D),this.queueForInsertion(B))}return this},setHitAreaRectangle:function(F,D,N,B,b,W){W===void 0&&(W=A);var Y=new T(D,N,B,b);return this.setHitArea(F,Y,W)},setHitAreaTriangle:function(F,D,N,B,b,W,Y,K){K===void 0&&(K=w);var G=new M(D,N,B,b,W,Y);return this.setHitArea(F,G,K)},enableDebug:function(F,D){D===void 0&&(D=65280);var N=F.input;if(!N||!N.hitArea)return this;var B=N.hitArea,b=B.type,W=N.hitAreaDebug,Y=this.systems.add,K=this.systems.updateList;W&&(K.remove(W),W.destroy(),W=null);var G=0,z=0;switch(b){case g.CIRCLE:W=Y.arc(0,0,B.radius),G=B.x-B.radius,z=B.y-B.radius;break;case g.ELLIPSE:W=Y.ellipse(0,0,B.width,B.height),G=B.x-B.width/2,z=B.y-B.height/2;break;case g.LINE:W=Y.line(0,0,B.x1,B.y1,B.x2,B.y2);break;case g.POLYGON:W=Y.polygon(0,0,B.points);break;case g.RECTANGLE:W=Y.rectangle(0,0,B.width,B.height),G=B.x,z=B.y;break;case g.TRIANGLE:W=Y.triangle(0,0,B.x1,B.y1,B.x2,B.y2,B.x3,B.y3);break}return W&&(W.isFilled=!1,W.strokeColor=D,W.preUpdate=function(){W.setStrokeStyle(1/F.scale,W.strokeColor),W.setDisplayOrigin(F.displayOriginX,F.displayOriginY);var O=F.x,V=F.y,U=F.rotation,X=F.scaleX,H=F.scaleY;if(F.parentContainer){var Q=F.getWorldTransformMatrix();O=Q.tx,V=Q.ty,U=Q.rotation,X=Q.scaleX,H=Q.scaleY}W.setRotation(U),W.setScale(X,H),W.setPosition(O+G*X,V+z*H),W.setScrollFactor(F.scrollFactorX,F.scrollFactorY),W.setDepth(F.depth)},K.add(W),N.hitAreaDebug=W),this},removeDebug:function(F){var D=F.input;if(D&&D.hitAreaDebug){var N=D.hitAreaDebug;this.systems.updateList.remove(N),N.destroy(),D.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(F){return this.pollRate=F,this._pollTimer=0,this},setGlobalTopOnly:function(F){return this.manager.globalTopOnly=F,this},setTopOnly:function(F){return this.topOnly=F,this},sortGameObjects:function(F,D){if(F.length<2||!D.camera)return F;var N=D.camera.renderList;return F.sort(function(B,b){var W=Math.max(N.indexOf(B),0),Y=Math.max(N.indexOf(b),0);return Y-W})},sortDropZones:function(F){return F.length<2?F:(this.scene.sys.depthSort(),F.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(F,D){if(!F.parentContainer&&!D.parentContainer)return this.displayList.getIndex(D)-this.displayList.getIndex(F);if(F.parentContainer===D.parentContainer)return D.parentContainer.getIndex(D)-F.parentContainer.getIndex(F);if(F.parentContainer===D)return-1;if(D.parentContainer===F)return 1;for(var N=F.getIndexList(),B=D.getIndexList(),b=Math.min(N.length,B.length),W=0;W<b;W++){var Y=N[W],K=B[W];if(Y!==K)return K-Y}return B.length-N.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(F){return this.manager.addPointer(F)},setDefaultCursor:function(F){return this.manager.setDefaultCursor(F),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(l.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var F=0;F<10;F++)this._drag[F]=[],this._over[F]=[];this.removeAllListeners();var D=this.manager;D.canvas.style.cursor=D.defaultCursor;var N=this.systems.events;N.off(P.TRANSITION_START,this.transitionIn,this),N.off(P.TRANSITION_OUT,this.transitionOut,this),N.off(P.TRANSITION_COMPLETE,this.transitionComplete,this),N.off(P.PRE_UPDATE,this.preUpdate,this),D.events.off(l.GAME_OUT,this.onGameOut,this),D.events.off(l.GAME_OVER,this.onGameOver,this),N.off(P.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var F=this.manager.pointers,D=0;D<F.length;D++)F[D].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(l.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(P.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});C.register("InputPlugin",L,"input"),f.exports=L},63399:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(10850),m={},o={};o.register=function(a,r,i,n,u){m[a]={plugin:r,mapping:i,settingsKey:n,configKey:u}},o.getPlugin=function(a){return m[a]},o.install=function(a){var r=a.scene.sys,i=r.settings.input,n=r.game.config;for(var u in m){var s=m[u].plugin,l=m[u].mapping,v=m[u].settingsKey,c=m[u].configKey;h(i,v,n[c])&&(a[l]=new s(a))}},o.remove=function(a){m.hasOwnProperty(a)&&delete m[a]},f.exports=o},40398:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(90447),m=t(56694),o=t(53996),a=t(88456),r=t(44521),i=t(93736),n=t(36580),u=new m({initialize:function(l,v){this.manager=l,this.id=v,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new i,this.prevPosition=new i,this.midPoint=new i(-1,-1),this.velocity=new i,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=v===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(s){var l=s.getWorldPoint(this.x,this.y);return this.worldX=l.x,this.worldY=l.y,this},positionToCamera:function(s,l){return s.getWorldPoint(this.x,this.y,l)},updateMotion:function(){var s=this.position.x,l=this.position.y,v=this.midPoint.x,c=this.midPoint.y;if(!(s===v&&l===c)){var g=r(this.motionFactor,v,s),y=r(this.motionFactor,c,l);a(g,s,.1)&&(g=s),a(y,l,.1)&&(y=l),this.midPoint.set(g,y);var E=s-g,C=l-y;this.velocity.set(E,C),this.angle=h(g,y,s,l),this.distance=Math.sqrt(E*E+C*C)}},up:function(s){"buttons"in s&&(this.buttons=s.buttons),this.event=s,this.button=s.button,this.upElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),s.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=s.timeStamp,this.wasTouch=!1)},down:function(s){"buttons"in s&&(this.buttons=s.buttons),this.event=s,this.button=s.button,this.downElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),s.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),n.macOS&&s.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=s.timeStamp),this.wasTouch=!1},move:function(s){"buttons"in s&&(this.buttons=s.buttons),this.event=s,this.manager.transformPointer(this,s.pageX,s.pageY,!0),this.locked&&(this.movementX=s.movementX||s.mozMovementX||s.webkitMovementX||0,this.movementY=s.movementY||s.mozMovementY||s.webkitMovementY||0),this.moveTime=s.timeStamp,this.wasTouch=!1},wheel:function(s){"buttons"in s&&(this.buttons=s.buttons),this.event=s,this.manager.transformPointer(this,s.pageX,s.pageY,!1),this.deltaX=s.deltaX,this.deltaY=s.deltaY,this.deltaZ=s.deltaZ,this.wasTouch=!1},touchstart:function(s,l){s.pointerId&&(this.pointerId=s.pointerId),this.identifier=s.identifier,this.target=s.target,this.active=!0,this.buttons=1,this.event=l,this.downElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=l.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(s,l){this.event=l,this.manager.transformPointer(this,s.pageX,s.pageY,!0),this.moveTime=l.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(s,l){this.buttons=0,this.event=l,this.upElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=l.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(s,l){this.buttons=0,this.event=l,this.upElement=s.target,this.manager.transformPointer(this,s.pageX,s.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=l.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?o(this.downX,this.downY,this.x,this.y):o(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?h(this.downX,this.downY,this.x,this.y):h(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(s,l){s===void 0&&(s=10),l===void 0&&(l=[]);for(var v=this.prevPosition.x,c=this.prevPosition.y,g=this.position.x,y=this.position.y,E=0;E<s;E++){var C=1/s*E;l[E]={x:r(C,v,g),y:r(C,c,y)}}return l},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(s){this.position.x=s}},y:{get:function(){return this.position.y},set:function(s){this.position.y=s}},time:{get:function(){return this.event?this.event.timeStamp:0}}});f.exports=u},72687:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};f.exports=S},14874:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="boot"},54168:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="destroy"},526:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="dragend"},81623:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="dragenter"},94472:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="drag"},9304:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="dragleave"},34265:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="dragover"},50151:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="dragstart"},98134:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="drop"},56773:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="gameobjectdown"},45824:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="dragend"},39578:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="dragenter"},72072:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="drag"},82569:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="dragleave"},70833:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="dragover"},81442:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="dragstart"},32936:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="drop"},99658:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="gameobjectmove"},60515:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="gameobjectout"},55254:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="gameobjectover"},34782:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pointerdown"},41769:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pointermove"},65588:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pointerout"},61640:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pointerover"},49342:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pointerup"},82662:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="wheel"},13058:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="gameobjectup"},52426:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="gameobjectwheel"},78072:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="gameout"},1545:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="gameover"},67137:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="boot"},27678:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="process"},22257:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="update"},90379:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pointerlockchange"},88909:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pointerdown"},36548:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pointerdownoutside"},18483:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pointermove"},22355:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pointerout"},7997:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pointerover"},66318:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pointerup"},94812:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pointerupoutside"},37310:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="wheel"},24196:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="preupdate"},27053:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="shutdown"},29413:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="start"},25165:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="update"},33963:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={BOOT:t(14874),DESTROY:t(54168),DRAG_END:t(526),DRAG_ENTER:t(81623),DRAG:t(94472),DRAG_LEAVE:t(9304),DRAG_OVER:t(34265),DRAG_START:t(50151),DROP:t(98134),GAME_OUT:t(78072),GAME_OVER:t(1545),GAMEOBJECT_DOWN:t(56773),GAMEOBJECT_DRAG_END:t(45824),GAMEOBJECT_DRAG_ENTER:t(39578),GAMEOBJECT_DRAG:t(72072),GAMEOBJECT_DRAG_LEAVE:t(82569),GAMEOBJECT_DRAG_OVER:t(70833),GAMEOBJECT_DRAG_START:t(81442),GAMEOBJECT_DROP:t(32936),GAMEOBJECT_MOVE:t(99658),GAMEOBJECT_OUT:t(60515),GAMEOBJECT_OVER:t(55254),GAMEOBJECT_POINTER_DOWN:t(34782),GAMEOBJECT_POINTER_MOVE:t(41769),GAMEOBJECT_POINTER_OUT:t(65588),GAMEOBJECT_POINTER_OVER:t(61640),GAMEOBJECT_POINTER_UP:t(49342),GAMEOBJECT_POINTER_WHEEL:t(82662),GAMEOBJECT_UP:t(13058),GAMEOBJECT_WHEEL:t(52426),MANAGER_BOOT:t(67137),MANAGER_PROCESS:t(27678),MANAGER_UPDATE:t(22257),POINTER_DOWN:t(88909),POINTER_DOWN_OUTSIDE:t(36548),POINTER_MOVE:t(18483),POINTER_OUT:t(22355),POINTER_OVER:t(7997),POINTER_UP:t(66318),POINTER_UP_OUTSIDE:t(94812),POINTER_WHEEL:t(37310),POINTERLOCK_CHANGE:t(90379),PRE_UPDATE:t(24196),SHUTDOWN:t(27053),START:t(29413),UPDATE:t(25165)}},70848:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=new h({initialize:function(a,r){this.pad=a,this.events=a.events,this.index=r,this.value=0,this.threshold=.1},update:function(o){this.value=o},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});f.exports=m},21274:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(43200),o=new h({initialize:function(r,i){this.pad=r,this.events=r.manager,this.index=i,this.value=0,this.threshold=1,this.pressed=!1},update:function(a){this.value=a;var r=this.pad,i=this.index;a>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(m.BUTTON_DOWN,r,this,a),this.pad.emit(m.GAMEPAD_BUTTON_DOWN,i,a,this)):this.pressed&&(this.pressed=!1,this.events.emit(m.BUTTON_UP,r,this,a),this.pad.emit(m.GAMEPAD_BUTTON_UP,i,a,this))},destroy:function(){this.pad=null,this.events=null}});f.exports=o},75956:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(70848),m=t(21274),o=t(56694),a=t(6659),r=t(93736),i=new o({Extends:a,initialize:function(u,s){a.call(this),this.manager=u,this.pad=s,this.id=s.id,this.index=s.index;for(var l=[],v=0;v<s.buttons.length;v++)l.push(new m(this,v));this.buttons=l;var c=[];for(v=0;v<s.axes.length;v++)c.push(new h(this,v));this.axes=c,this.vibration=s.vibrationActuator;var g={value:0,pressed:!1};this._LCLeft=l[14]?l[14]:g,this._LCRight=l[15]?l[15]:g,this._LCTop=l[12]?l[12]:g,this._LCBottom=l[13]?l[13]:g,this._RCLeft=l[2]?l[2]:g,this._RCRight=l[1]?l[1]:g,this._RCTop=l[3]?l[3]:g,this._RCBottom=l[0]?l[0]:g,this._FBLeftTop=l[4]?l[4]:g,this._FBLeftBottom=l[6]?l[6]:g,this._FBRightTop=l[5]?l[5]:g,this._FBRightBottom=l[7]?l[7]:g;var y={value:0};this._HAxisLeft=c[0]?c[0]:y,this._VAxisLeft=c[1]?c[1]:y,this._HAxisRight=c[2]?c[2]:y,this._VAxisRight=c[3]?c[3]:y,this.leftStick=new r,this.rightStick=new r,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(n){return this.axes[n].getValue()},setAxisThreshold:function(n){for(var u=0;u<this.axes.length;u++)this.axes[u].threshold=n},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(n){return this.buttons[n].value},isButtonDown:function(n){return this.buttons[n].pressed},update:function(n){if(!(n.timestamp<this._created)){var u,s=this.buttons,l=n.buttons,v=s.length;for(u=0;u<v;u++)s[u].update(l[u].value);var c=this.axes,g=n.axes;for(v=c.length,u=0;u<v;u++)c[u].update(g[u]);v>=2&&(this.leftStick.set(c[0].getValue(),c[1].getValue()),v>=4&&this.rightStick.set(c[2].getValue(),c[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var n;for(n=0;n<this.buttons.length;n++)this.buttons[n].destroy();for(n=0;n<this.axes.length;n++)this.axes[n].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});f.exports=i},1379:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(6659),o=t(43200),a=t(75956),r=t(10850),i=t(63399),n=t(33963),u=new h({Extends:m,initialize:function(l){m.call(this),this.scene=l.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=l,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,l.pluginEvents.once(n.BOOT,this.boot,this),l.pluginEvents.on(n.START,this.start,this)},boot:function(){var s=this.scene.sys.game,l=this.settings.input,v=s.config;this.enabled=r(l,"gamepad",v.inputGamepad)&&s.device.input.gamepads,this.target=r(l,"gamepad.target",v.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(n.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(n.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var s=this,l=this.target,v=function(c){c.defaultPrevented||!s.isActive()||(s.refreshPads(),s.queue.push(c))};this.onGamepadHandler=v,l.addEventListener("gamepadconnected",v,!1),l.addEventListener("gamepaddisconnected",v,!1),this.sceneInputPlugin.pluginEvents.on(n.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(n.UPDATE,this.update);for(var s=0;s<this.gamepads.length;s++)this.gamepads[s].removeAllListeners()},disconnectAll:function(){for(var s=0;s<this.gamepads.length;s++)this.gamepads[s].pad.connected=!1},refreshPads:function(){var s=navigator.getGamepads();if(!s)this.disconnectAll();else for(var l=this.gamepads,v=0;v<s.length;v++){var c=s[v];if(c){var g=c.id,y=c.index,E=l[y];if(E)E.id!==g?(E.destroy(),l[y]=new a(this,c)):E.update(c);else{var C=new a(this,c);l[y]=C,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=C):this._pad3=C:this._pad2=C:this._pad1=C}}}},getAll:function(){for(var s=[],l=this.gamepads,v=0;v<l.length;v++)l[v]&&s.push(l[v]);return s},getPad:function(s){for(var l=this.gamepads,v=0;v<l.length;v++)if(l[v]&&l[v].index===s)return l[v]},update:function(){if(this.enabled){this.refreshPads();var s=this.queue.length;if(s!==0)for(var l=this.queue.splice(0,s),v=0;v<s;v++){var c=l[v],g=this.getPad(c.gamepad.index);c.type==="gamepadconnected"?this.emit(o.CONNECTED,g,c):c.type==="gamepaddisconnected"&&this.emit(o.DISCONNECTED,g,c)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var s=0;s<this.gamepads.length;s++)this.gamepads[s]&&this.gamepads[s].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});i.register("GamepadPlugin",u,"gamepad","gamepad","inputGamepad"),f.exports=u},33171:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},74982:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},43247:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},4898:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={DUALSHOCK_4:t(74982),SNES_USB:t(33171),XBOX_360:t(43247)}},17344:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="down"},36635:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="up"},85724:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="connected"},55832:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="disconnected"},772:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="down"},33608:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="up"},43200:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={BUTTON_DOWN:t(17344),BUTTON_UP:t(36635),CONNECTED:t(85724),DISCONNECTED:t(55832),GAMEPAD_BUTTON_DOWN:t(772),GAMEPAD_BUTTON_UP:t(33608)}},92636:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Axis:t(70848),Button:t(21274),Events:t(43200),Gamepad:t(75956),GamepadPlugin:t(1379),Configs:t(4898)}},20873:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72687),m=t(98611),o={CreatePixelPerfectHandler:t(18104),CreateInteractiveObject:t(27395),Events:t(33963),Gamepad:t(92636),InputManager:t(69898),InputPlugin:t(12499),InputPluginCache:t(63399),Keyboard:t(28388),Mouse:t(11343),Pointer:t(40398),Touch:t(77423)};o=m(!1,o,h),f.exports=o},71064:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(66458),m=t(56694),o=t(97081),a=t(33963),r=t(11873),i=t(72283),n=new m({initialize:function(s){this.manager=s,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=i,this.onKeyUp=i,s.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var u=this.manager.config;this.enabled=u.inputKeyboard,this.target=u.inputKeyboardEventTarget,this.addCapture(u.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(o.POST_STEP,this.postUpdate,this)},startListeners:function(){var u=this;this.onKeyDown=function(l){if(!(l.defaultPrevented||!u.enabled||!u.manager)){u.queue.push(l),u.manager.events.emit(a.MANAGER_PROCESS);var v=l.altKey||l.ctrlKey||l.shiftKey||l.metaKey;u.preventDefault&&!v&&u.captures.indexOf(l.keyCode)>-1&&l.preventDefault()}},this.onKeyUp=function(l){if(!(l.defaultPrevented||!u.enabled||!u.manager)){u.queue.push(l),u.manager.events.emit(a.MANAGER_PROCESS);var v=l.altKey||l.ctrlKey||l.shiftKey||l.metaKey;u.preventDefault&&!v&&u.captures.indexOf(l.keyCode)>-1&&l.preventDefault()}};var s=this.target;s&&(s.addEventListener("keydown",this.onKeyDown,!1),s.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var u=this.target;u.removeEventListener("keydown",this.onKeyDown,!1),u.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(u){typeof u=="string"&&(u=u.split(",")),Array.isArray(u)||(u=[u]);for(var s=this.captures,l=0;l<u.length;l++){var v=u[l];typeof v=="string"&&(v=r[v.trim().toUpperCase()]),s.indexOf(v)===-1&&s.push(v)}this.preventDefault=s.length>0},removeCapture:function(u){typeof u=="string"&&(u=u.split(",")),Array.isArray(u)||(u=[u]);for(var s=this.captures,l=0;l<u.length;l++){var v=u[l];typeof v=="string"&&(v=r[v.toUpperCase()]),h(s,v)}this.preventDefault=s.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(o.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});f.exports=n},89666:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(6659),o=t(94030),a=t(97081),r=t(10850),i=t(33963),n=t(63399),u=t(50165),s=t(11873),l=t(95625),v=t(48044),c=t(7599),g=t(84314),y=new h({Extends:m,initialize:function(C){m.call(this),this.game=C.systems.game,this.scene=C.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=C,this.manager=C.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,C.pluginEvents.once(i.BOOT,this.boot,this),C.pluginEvents.on(i.START,this.start,this)},boot:function(){var E=this.settings.input;this.enabled=r(E,"keyboard",!0);var C=r(E,"keyboard.capture",null);C&&this.addCaptures(C),this.sceneInputPlugin.pluginEvents.once(i.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(i.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(i.SHUTDOWN,this.shutdown,this),this.game.events.on(a.BLUR,this.resetKeys,this),this.scene.sys.events.on(c.PAUSE,this.resetKeys,this),this.scene.sys.events.on(c.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(E){return this.manager.addCapture(E),this},removeCapture:function(E){return this.manager.removeCapture(E),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:s.UP,down:s.DOWN,left:s.LEFT,right:s.RIGHT,space:s.SPACE,shift:s.SHIFT})},addKeys:function(E,C,T){C===void 0&&(C=!0),T===void 0&&(T=!1);var A={};if(typeof E=="string"){E=E.split(",");for(var P=0;P<E.length;P++){var M=E[P].trim();M&&(A[M]=this.addKey(M,C,T))}}else for(var w in E)A[w]=this.addKey(E[w],C,T);return A},addKey:function(E,C,T){C===void 0&&(C=!0),T===void 0&&(T=!1);var A=this.keys;if(E instanceof u){var P=A.indexOf(E);return P>-1?A[P]=E:A[E.keyCode]=E,C&&this.addCapture(E.keyCode),E.setEmitOnRepeat(T),E}return typeof E=="string"&&(E=s[E.toUpperCase()]),A[E]||(A[E]=new u(this,E),C&&this.addCapture(E),A[E].setEmitOnRepeat(T)),A[E]},removeKey:function(E,C,T){C===void 0&&(C=!1),T===void 0&&(T=!1);var A=this.keys,P;if(E instanceof u){var M=A.indexOf(E);M>-1&&(P=this.keys[M],this.keys[M]=void 0)}else typeof E=="string"&&(E=s[E.toUpperCase()]);return A[E]&&(P=A[E],A[E]=void 0),P&&(P.plugin=null,T&&this.removeCapture(P.keyCode),C&&P.destroy()),this},removeAllKeys:function(E,C){E===void 0&&(E=!1),C===void 0&&(C=!1);for(var T=this.keys,A=0;A<T.length;A++){var P=T[A];P&&(T[A]=void 0,C&&this.removeCapture(P.keyCode),E&&P.destroy())}return this},createCombo:function(E,C){return new l(this,E,C)},checkDown:function(E,C){if(C===void 0&&(C=0),this.enabled&&E.isDown){var T=g(this.time-E.timeDown,C);if(T>E._tick)return E._tick=T,!0}return!1},update:function(){var E=this.manager.queue,C=E.length;if(!(!this.isActive()||C===0))for(var T=this.keys,A=0;A<C;A++){var P=E[A],M=P.keyCode,w=T[M],L=!1;P.cancelled===void 0&&(P.cancelled=0,P.stopImmediatePropagation=function(){P.cancelled=1},P.stopPropagation=function(){P.cancelled=-1}),P.cancelled!==-1&&(M===this.prevCode&&P.timeStamp===this.prevTime&&P.type===this.prevType||(this.prevCode=M,this.prevTime=P.timeStamp,this.prevType=P.type,P.type==="keydown"?(w&&(L=w.isDown,w.onDown(P)),!P.cancelled&&(!w||!L)&&(v[M]&&this.emit(o.KEY_DOWN+v[M],P),P.cancelled||this.emit(o.ANY_KEY_DOWN,P))):(w&&w.onUp(P),P.cancelled||(v[M]&&this.emit(o.KEY_UP+v[M],P),P.cancelled||this.emit(o.ANY_KEY_UP,P))),P.cancelled===1&&(P.cancelled=0)))}},resetKeys:function(){for(var E=this.keys,C=0;C<E.length;C++)E[C]&&E[C].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(i.MANAGER_PROCESS,this.update,this),this.game.events.off(a.BLUR,this.resetKeys),this.scene.sys.events.off(c.PAUSE,this.resetKeys,this),this.scene.sys.events.off(c.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var E=this.keys,C=0;C<E.length;C++)E[C]&&E[C].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});n.register("KeyboardPlugin",y,"keyboard","keyboard","inputKeyboard"),f.exports=y},60258:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return h.timeLastMatched=t.timeStamp,h.index++,h.index===h.size?!0:(h.current=h.keyCodes[h.index],!1)};f.exports=S},95625:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(94030),o=t(72632),a=t(2544),r=t(88754),i=new h({initialize:function(u,s,l){if(l===void 0&&(l={}),s.length<2)return!1;this.manager=u,this.enabled=!0,this.keyCodes=[];for(var v=0;v<s.length;v++){var c=s[v];typeof c=="string"?this.keyCodes.push(c.toUpperCase().charCodeAt(0)):typeof c=="number"?this.keyCodes.push(c):c.hasOwnProperty("keyCode")&&this.keyCodes.push(c.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=o(l,"resetOnWrongKey",!0),this.maxKeyDelay=o(l,"maxKeyDelay",0),this.resetOnMatch=o(l,"resetOnMatch",!1),this.deleteOnMatch=o(l,"deleteOnMatch",!1);var g=this,y=function(E){if(!(g.matched||!g.enabled)){var C=a(E,g);C&&(g.manager.emit(m.COMBO_MATCH,g,E),g.resetOnMatch?r(g):g.deleteOnMatch&&g.destroy())}};this.onKeyDown=y,this.manager.on(m.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(m.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});f.exports=i},2544:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(60258),m=function(o,a){if(a.matched)return!0;var r=!1,i=!1;if(o.keyCode===a.current)if(a.index>0&&a.maxKeyDelay>0){var n=a.timeLastMatched+a.maxKeyDelay;o.timeStamp<=n&&(i=!0,r=h(o,a))}else i=!0,r=h(o,a);return!i&&a.resetOnWrongKey&&(a.index=0,a.current=a.keyCodes[0]),r&&(a.timeLastMatched=o.timeStamp,a.matched=!0,a.timeMatched=o.timeStamp),r};f.exports=m},88754:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t};f.exports=S},5044:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="keydown"},40813:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="keyup"},89319:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="keycombomatch"},43267:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="down"},78595:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="keydown-"},30056:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="keyup-"},81939:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="up"},94030:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={ANY_KEY_DOWN:t(5044),ANY_KEY_UP:t(40813),COMBO_MATCH:t(89319),DOWN:t(43267),KEY_DOWN:t(78595),KEY_UP:t(30056),UP:t(81939)}},28388:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Events:t(94030),KeyboardManager:t(71064),KeyboardPlugin:t(89666),Key:t(50165),KeyCodes:t(11873),KeyCombo:t(95625),AdvanceKeyCombo:t(60258),ProcessKeyCombo:t(2544),ResetKeyCombo:t(88754),JustDown:t(42460),JustUp:t(53162),DownDuration:t(64964),UpDuration:t(70331)}},64964:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){h===void 0&&(h=50);var m=t.plugin.game.loop.time-t.timeDown;return t.isDown&&m<h};f.exports=S},42460:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t._justDown?(t._justDown=!1,!0):!1};f.exports=S},53162:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t._justUp?(t._justUp=!1,!0):!1};f.exports=S},50165:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(6659),o=t(94030),a=new h({Extends:m,initialize:function(i,n){m.call(this),this.plugin=i,this.keyCode=n,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(r){return this.emitOnRepeat=r,this},onDown:function(r){this.originalEvent=r,this.enabled&&(this.altKey=r.altKey,this.ctrlKey=r.ctrlKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.location=r.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(o.DOWN,this,r):(this.isDown=!0,this.isUp=!1,this.timeDown=r.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(o.DOWN,this,r)))},onUp:function(r){this.originalEvent=r,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=r.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(o.UP,this,r))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});f.exports=a},11873:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};f.exports=S},48044:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(11873),m={};for(var o in h)m[h[o]]=o;f.exports=m},70331:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){h===void 0&&(h=50);var m=t.plugin.game.loop.time-t.timeUp;return t.isUp&&m<h};f.exports=S},7905:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(90185),o=t(33963),a=t(72283),r=new h({initialize:function(n){this.manager=n,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=a,this.onMouseDown=a,this.onMouseUp=a,this.onMouseDownWindow=a,this.onMouseUpWindow=a,this.onMouseOver=a,this.onMouseOut=a,this.onMouseWheel=a,this.pointerLockChange=a,this.isTop=!0,n.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var i=this.manager.config;this.enabled=i.inputMouse,this.target=i.inputMouseEventTarget,this.passive=i.inputMousePassive,this.preventDefaultDown=i.inputMousePreventDefaultDown,this.preventDefaultUp=i.inputMousePreventDefaultUp,this.preventDefaultMove=i.inputMousePreventDefaultMove,this.preventDefaultWheel=i.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,i.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(i){return i.preventDefault(),!1}),this},requestPointerLock:function(){if(m.pointerLock){var i=this.target;i.requestPointerLock=i.requestPointerLock||i.mozRequestPointerLock||i.webkitRequestPointerLock,i.requestPointerLock()}},releasePointerLock:function(){m.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var i=this.target;if(i){var n=this,u=this.manager,s=u.canvas,l=window&&window.focus&&u.game.config.autoFocus;this.onMouseMove=function(c){!c.defaultPrevented&&n.enabled&&u&&u.enabled&&(u.onMouseMove(c),n.preventDefaultMove&&c.preventDefault())},this.onMouseDown=function(c){l&&window.focus(),!c.defaultPrevented&&n.enabled&&u&&u.enabled&&(u.onMouseDown(c),n.preventDefaultDown&&c.target===s&&c.preventDefault())},this.onMouseDownWindow=function(c){!c.defaultPrevented&&n.enabled&&u&&u.enabled&&c.target!==s&&u.onMouseDown(c)},this.onMouseUp=function(c){!c.defaultPrevented&&n.enabled&&u&&u.enabled&&(u.onMouseUp(c),n.preventDefaultUp&&c.target===s&&c.preventDefault())},this.onMouseUpWindow=function(c){!c.defaultPrevented&&n.enabled&&u&&u.enabled&&c.target!==s&&u.onMouseUp(c)},this.onMouseOver=function(c){!c.defaultPrevented&&n.enabled&&u&&u.enabled&&u.setCanvasOver(c)},this.onMouseOut=function(c){!c.defaultPrevented&&n.enabled&&u&&u.enabled&&u.setCanvasOut(c)},this.onMouseWheel=function(c){!c.defaultPrevented&&n.enabled&&u&&u.enabled&&u.onMouseWheel(c),n.preventDefaultWheel&&c.target===s&&c.preventDefault()};var v={passive:!0};if(i.addEventListener("mousemove",this.onMouseMove),i.addEventListener("mousedown",this.onMouseDown),i.addEventListener("mouseup",this.onMouseUp),i.addEventListener("mouseover",this.onMouseOver,v),i.addEventListener("mouseout",this.onMouseOut,v),this.preventDefaultWheel?i.addEventListener("wheel",this.onMouseWheel,{passive:!1}):i.addEventListener("wheel",this.onMouseWheel,v),window&&u.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,v),window.top.addEventListener("mouseup",this.onMouseUpWindow,v)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,v),window.addEventListener("mouseup",this.onMouseUpWindow,v),this.isTop=!1}m.pointerLock&&(this.pointerLockChange=function(c){var g=n.target;n.locked=document.pointerLockElement===g||document.mozPointerLockElement===g||document.webkitPointerLockElement===g,u.onPointerLockChange(c)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var i=this.target;i.removeEventListener("mousemove",this.onMouseMove),i.removeEventListener("mousedown",this.onMouseDown),i.removeEventListener("mouseup",this.onMouseUp),i.removeEventListener("mouseover",this.onMouseOver),i.removeEventListener("mouseout",this.onMouseOut),window&&(i=this.isTop?window.top:window,i.removeEventListener("mousedown",this.onMouseDownWindow),i.removeEventListener("mouseup",this.onMouseUpWindow)),m.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});f.exports=r},11343:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={MouseManager:t(7905)}},37579:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(33963),o=t(72283),a=new h({initialize:function(i){this.manager=i,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=o,this.onTouchStartWindow=o,this.onTouchMove=o,this.onTouchEnd=o,this.onTouchEndWindow=o,this.onTouchCancel=o,this.onTouchCancelWindow=o,this.isTop=!0,i.events.once(m.MANAGER_BOOT,this.boot,this)},boot:function(){var r=this.manager.config;this.enabled=r.inputTouch,this.target=r.inputTouchEventTarget,this.capture=r.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,r.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),this},startListeners:function(){var r=this.target;if(r){var i=this,n=this.manager,u=n.canvas,s=window&&window.focus&&n.game.config.autoFocus;this.onTouchMove=function(g){!g.defaultPrevented&&i.enabled&&n&&n.enabled&&(n.onTouchMove(g),i.capture&&g.cancelable&&g.preventDefault())},this.onTouchStart=function(g){s&&window.focus(),!g.defaultPrevented&&i.enabled&&n&&n.enabled&&(n.onTouchStart(g),i.capture&&g.cancelable&&g.target===u&&g.preventDefault())},this.onTouchStartWindow=function(g){!g.defaultPrevented&&i.enabled&&n&&n.enabled&&g.target!==u&&n.onTouchStart(g)},this.onTouchEnd=function(g){!g.defaultPrevented&&i.enabled&&n&&n.enabled&&(n.onTouchEnd(g),i.capture&&g.cancelable&&g.target===u&&g.preventDefault())},this.onTouchEndWindow=function(g){!g.defaultPrevented&&i.enabled&&n&&n.enabled&&g.target!==u&&n.onTouchEnd(g)},this.onTouchCancel=function(g){!g.defaultPrevented&&i.enabled&&n&&n.enabled&&(n.onTouchCancel(g),i.capture&&g.preventDefault())},this.onTouchCancelWindow=function(g){!g.defaultPrevented&&i.enabled&&n&&n.enabled&&n.onTouchCancel(g)};var l=this.capture,v={passive:!0},c={passive:!1};if(r.addEventListener("touchstart",this.onTouchStart,l?c:v),r.addEventListener("touchmove",this.onTouchMove,l?c:v),r.addEventListener("touchend",this.onTouchEnd,l?c:v),r.addEventListener("touchcancel",this.onTouchCancel,l?c:v),window&&n.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,c),window.top.addEventListener("touchend",this.onTouchEndWindow,c),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,c)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,c),window.addEventListener("touchend",this.onTouchEndWindow,c),window.addEventListener("touchcancel",this.onTouchCancelWindow,c),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var r=this.target;r.removeEventListener("touchstart",this.onTouchStart),r.removeEventListener("touchmove",this.onTouchMove),r.removeEventListener("touchend",this.onTouchEnd),r.removeEventListener("touchcancel",this.onTouchCancel),window&&(r=this.isTop?window.top:window,r.removeEventListener("touchstart",this.onTouchStartWindow),r.removeEventListener("touchend",this.onTouchEndWindow),r.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});f.exports=a},77423:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={TouchManager:t(37579)}},98035:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(683),a=t(72632),r=t(30750),i=t(43531),n=t(88490),u=t(33868),s=new h({initialize:function(v,c){if(this.loader=v,this.cache=a(c,"cache",!1),this.type=a(c,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=a(c,"key",!1);var g=this.key;if(v.prefix&&v.prefix!==""&&(this.key=v.prefix+g),!this.key)throw new Error("Invalid File key: "+this.key);var y=a(c,"url");y===void 0?y=v.path+g+"."+a(c,"extension",""):typeof y=="string"&&!y.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(y=v.path+y),this.url=y,this.src="",this.xhrSettings=u(a(c,"responseType",void 0)),a(c,"xhrSettings",!1)&&(this.xhrSettings=i(this.xhrSettings,a(c,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?m.FILE_POPULATED:m.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=a(c,"config",{}),this.multiFile,this.linkFile},setLink:function(l){this.linkFile=l,l.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===m.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=m.FILE_LOADING,this.src=r(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=n(this,this.loader.xhr))},onLoad:function(l,v){var c=l.responseURL&&this.loader.localSchemes.some(function(E){return l.responseURL.indexOf(E)===0}),g=c&&v.target.status===0,y=!(v.target&&v.target.status!==200)||g;l.readyState===4&&l.status>=400&&l.status<=599&&(y=!1),this.state=m.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,y)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(l){l.lengthComputable&&(this.bytesLoaded=l.loaded,this.bytesTotal=l.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(o.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=m.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=m.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=m.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(l){if(this.state!==m.FILE_PENDING_DESTROY){l===void 0&&(l=this.data);var v=this.key,c=this.type;this.loader.emit(o.FILE_COMPLETE,v,c,l),this.loader.emit(o.FILE_KEY_COMPLETE+c+"-"+v,v,c,l),this.loader.flagForRemoval(this),this.state=m.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});s.createObjectURL=function(l,v,c){if(typeof URL=="function")l.src=URL.createObjectURL(v);else{var g=new FileReader;g.onload=function(){l.removeAttribute("crossOrigin"),l.src="data:"+(v.type||c)+";base64,"+g.result.split(",")[1]},g.onerror=l.onerror,g.readAsDataURL(v)}},s.revokeObjectURL=function(l){typeof URL=="function"&&URL.revokeObjectURL(l.src)},f.exports=s},76846:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={},t={install:function(h){for(var m in S)h[m]=S[m]},register:function(h,m){S[h]=m},destroy:function(){S={}}};f.exports=t},30750:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.url?t.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?t.url:h+t.url:!1};f.exports=S},67285:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(58403),a=t(6659),r=t(683),i=t(76846),n=t(72632),u=t(10850),s=t(91963),l=t(7599),v=t(33868),c=new h({Extends:a,initialize:function(y){a.call(this);var E=y.sys.game.config,C=y.sys.settings.loader;this.scene=y,this.systems=y.sys,this.cacheManager=y.sys.cache,this.textureManager=y.sys.textures,this.sceneManager=y.sys.game.scene,i.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(n(C,"baseURL",E.loaderBaseURL)),this.setPath(n(C,"path",E.loaderPath)),this.setPrefix(n(C,"prefix",E.loaderPrefix)),this.maxParallelDownloads=n(C,"maxParallelDownloads",E.loaderMaxParallelDownloads),this.xhr=v(n(C,"responseType",E.loaderResponseType),n(C,"async",E.loaderAsync),n(C,"user",E.loaderUser),n(C,"password",E.loaderPassword),n(C,"timeout",E.loaderTimeout),n(C,"withCredentials",E.loaderWithCredentials)),this.crossOrigin=n(C,"crossOrigin",E.loaderCrossOrigin),this.imageLoadType=n(C,"imageLoadType",E.loaderImageLoadType),this.localSchemes=n(C,"localScheme",E.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new o,this.inflight=new o,this.queue=new o,this._deleteQueue=new o,this.totalFailed=0,this.totalComplete=0,this.state=m.LOADER_IDLE,this.multiKeyIndex=0,y.sys.events.once(l.BOOT,this.boot,this),y.sys.events.on(l.START,this.pluginStart,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(l.SHUTDOWN,this.shutdown,this)},setBaseURL:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.baseURL=g,this},setPath:function(g){return g===void 0&&(g=""),g!==""&&g.substr(-1)!=="/"&&(g=g.concat("/")),this.path=g,this},setPrefix:function(g){return g===void 0&&(g=""),this.prefix=g,this},setCORS:function(g){return this.crossOrigin=g,this},addFile:function(g){Array.isArray(g)||(g=[g]);for(var y=0;y<g.length;y++){var E=g[y];this.keyExists(E)||(this.list.set(E),this.emit(r.ADD,E.key,E.type,this,E),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(g){var y=g.hasCacheConflict();return y||this.list.iterate(function(E){if(E.type===g.type&&E.key===g.key)return y=!0,!1}),!y&&this.isLoading()&&(this.inflight.iterate(function(E){if(E.type===g.type&&E.key===g.key)return y=!0,!1}),this.queue.iterate(function(E){if(E.type===g.type&&E.key===g.key)return y=!0,!1})),y},addPack:function(g,y){if(typeof y=="string"){var E=u(g,y);E&&(g={packKey:E})}var C=0,T=this.baseURL,A=this.path,P=this.prefix;for(var M in g)if(Object.prototype.hasOwnProperty.call(g,M)){var w=g[M],L=n(w,"baseURL",T),F=n(w,"path",A),D=n(w,"prefix",P),N=n(w,"files",null),B=n(w,"defaultType","void");if(Array.isArray(N)){this.setBaseURL(L),this.setPath(F),this.setPrefix(D);for(var b=0;b<N.length;b++){var W=N[b],Y=W.hasOwnProperty("type")?W.type:B;this[Y]&&(this[Y](W),C++)}}}return this.setBaseURL(T),this.setPath(A),this.setPrefix(P),C>0},isLoading:function(){return this.state===m.LOADER_LOADING||this.state===m.LOADER_PROCESSING},isReady:function(){return this.state===m.LOADER_IDLE||this.state===m.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(r.START,this),this.list.size===0?this.loadComplete():(this.state=m.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(l.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(r.PROGRESS,this.progress)},update:function(){this.state===m.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(g){if((g.state===m.FILE_POPULATED||g.state===m.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(g),this.list.delete(g),g.crossOrigin||(g.crossOrigin=this.crossOrigin),g.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(g,y){this.inflight&&(this.inflight.delete(g),this.updateProgress(),y?(this.totalComplete++,this.queue.set(g),this.emit(r.FILE_LOAD,g),g.onProcess()):(this.totalFailed++,this._deleteQueue.set(g),this.emit(r.FILE_LOAD_ERROR,g),this.fileProcessComplete(g)))},fileProcessComplete:function(g){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(g.state===m.FILE_ERRORED?g.multiFile&&g.multiFile.onFileFailed(g):g.state===m.FILE_COMPLETE&&(g.multiFile?g.multiFile.isReadyToProcess()&&(g.multiFile.addToCache(),g.multiFile.pendingDestroy()):(g.addToCache(),g.pendingDestroy())),this.queue.delete(g),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(r.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=m.LOADER_COMPLETE,this.systems.events.off(l.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(r.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(g){this._deleteQueue.set(g)},saveJSON:function(g,y){return this.save(JSON.stringify(g),y)},save:function(g,y,E){y===void 0&&(y="file.json"),E===void 0&&(E="application/json");var C=new Blob([g],{type:E}),T=URL.createObjectURL(C),A=document.createElement("a");return A.download=y,A.textContent="Download "+y,A.href=T,A.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var g=this.systems.game.config,y=this.systems.settings.loader;this.setBaseURL(n(y,"baseURL",g.loaderBaseURL)),this.setPath(n(y,"path",g.loaderPath)),this.setPrefix(n(y,"prefix",g.loaderPrefix)),this.state=m.LOADER_IDLE},shutdown:function(){this.reset(),this.state=m.LOADER_SHUTDOWN,this.systems.events.off(l.UPDATE,this.update,this),this.systems.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=m.LOADER_DESTROYED,this.systems.events.off(l.UPDATE,this.update,this),this.systems.events.off(l.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});s.register("Loader",c,"load"),f.exports=c},43531:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(98611),m=t(33868),o=function(a,r){var i=a===void 0?m():h({},a);if(r)for(var n in r)r[n]!==void 0&&(i[n]=r[n]);return i};f.exports=o},45176:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(683),a=new h({initialize:function(i,n,u,s){var l=[];s.forEach(function(c){c&&l.push(c)}),this.loader=i,this.type=n,this.key=u,this.multiKeyIndex=i.multiKeyIndex++,this.files=l,this.state=m.FILE_PENDING,this.complete=!1,this.pending=l.length,this.failed=0,this.config={},this.baseURL=i.baseURL,this.path=i.path,this.prefix=i.prefix;for(var v=0;v<l.length;v++)l[v].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(r){return this.files.push(r),r.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(r){var i=this.files.indexOf(r);i!==-1&&this.pending--},onFileFailed:function(r){var i=this.files.indexOf(r);i!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,r.type,r.key))},pendingDestroy:function(){if(this.state!==m.FILE_PENDING_DESTROY){var r=this.key,i=this.type;this.loader.emit(o.FILE_COMPLETE,r,i),this.loader.emit(o.FILE_KEY_COMPLETE+i+"-"+r,r,i),this.loader.flagForRemoval(this);for(var n=0;n<this.files.length;n++)this.files[n].pendingDestroy();this.state=m.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});f.exports=a},88490:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(43531),m=function(o,a){var r=h(a,o.xhrSettings),i=new XMLHttpRequest;if(i.open("GET",o.src,r.async,r.user,r.password),i.responseType=o.xhrSettings.responseType,i.timeout=r.timeout,r.headers)for(var n in r.headers)i.setRequestHeader(n,r.headers[n]);return r.header&&r.headerValue&&i.setRequestHeader(r.header,r.headerValue),r.requestedWith&&i.setRequestHeader("X-Requested-With",r.requestedWith),r.overrideMimeType&&i.overrideMimeType(r.overrideMimeType),r.withCredentials&&(i.withCredentials=!0),i.onload=o.onLoad.bind(o,i),i.onerror=o.onError.bind(o,i),i.onprogress=o.onProgress.bind(o),i.send(),i};f.exports=m},33868:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o,a,r){return t===void 0&&(t=""),h===void 0&&(h=!0),m===void 0&&(m=""),o===void 0&&(o=""),a===void 0&&(a=0),r===void 0&&(r=!1),{responseType:t,async:h,user:m,password:o,timeout:a,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:r}};f.exports=S},12117:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};f.exports=S},7398:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="addfile"},52187:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="complete"},36627:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="filecomplete"},81925:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="filecomplete-"},29774:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="loaderror"},20943:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="load"},74693:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="fileprogress"},71176:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="postprocess"},88984:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="progress"},72753:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="start"},683:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={ADD:t(7398),COMPLETE:t(52187),FILE_COMPLETE:t(36627),FILE_KEY_COMPLETE:t(81925),FILE_LOAD_ERROR:t(29774),FILE_LOAD:t(20943),FILE_PROGRESS:t(74693),POST_PROCESS:t(71176),PROGRESS:t(88984),START:t(72753)}},46468:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(76846),o=t(70806),a=t(683),r=new h({Extends:o,initialize:function(n,u,s,l,v){o.call(this,n,u,s,l,v),this.type="animationJSON"},onProcess:function(){this.loader.once(a.POST_PROCESS,this.onLoadComplete,this),o.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});m.register("animation",function(i,n,u,s){if(Array.isArray(i))for(var l=0;l<i.length;l++)this.addFile(new r(this,i[l]));else this.addFile(new r(this,i,n,s,u));return this}),f.exports=r},31648:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(76846),o=t(72632),a=t(42927),r=t(42911),i=t(70806),n=t(45176),u=new h({Extends:n,initialize:function(l,v,c,g,y,E){var C,T;if(r(v)){var A=v;v=o(A,"key"),C=new a(l,{key:v,url:o(A,"textureURL"),extension:o(A,"textureExtension","png"),normalMap:o(A,"normalMap"),xhrSettings:o(A,"textureXhrSettings")}),T=new i(l,{key:v,url:o(A,"atlasURL"),extension:o(A,"atlasExtension","json"),xhrSettings:o(A,"atlasXhrSettings")})}else C=new a(l,v,c,y),T=new i(l,v,g,E);C.linkFile?n.call(this,l,"atlasjson",v,[C,T,C.linkFile]):n.call(this,l,"atlasjson",v,[C,T])},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],l=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(s.key,s.data,l.data,v),l.addToCache(),this.complete=!0}}});m.register("aseprite",function(s,l,v,c,g){var y;if(Array.isArray(s))for(var E=0;E<s.length;E++)y=new u(this,s[E]),this.addFile(y.files);else y=new u(this,s,l,v,c,g),this.addFile(y.files);return this}),f.exports=u},73152:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(76846),o=t(72632),a=t(42927),r=t(42911),i=t(70806),n=t(45176),u=new h({Extends:n,initialize:function(l,v,c,g,y,E){var C,T;if(r(v)){var A=v;v=o(A,"key"),C=new a(l,{key:v,url:o(A,"textureURL"),extension:o(A,"textureExtension","png"),normalMap:o(A,"normalMap"),xhrSettings:o(A,"textureXhrSettings")}),T=new i(l,{key:v,url:o(A,"atlasURL"),extension:o(A,"atlasExtension","json"),xhrSettings:o(A,"atlasXhrSettings")})}else C=new a(l,v,c,y),T=new i(l,v,g,E);C.linkFile?n.call(this,l,"atlasjson",v,[C,T,C.linkFile]):n.call(this,l,"atlasjson",v,[C,T])},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],l=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(s.key,s.data,l.data,v),this.complete=!0}}});m.register("atlas",function(s,l,v,c,g){var y;if(Array.isArray(s))for(var E=0;E<s.length;E++)y=new u(this,s[E]),this.addFile(y.files);else y=new u(this,s,l,v,c,g),this.addFile(y.files);return this}),f.exports=u},24616:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(76846),o=t(72632),a=t(42927),r=t(42911),i=t(45176),n=t(15297),u=new h({Extends:i,initialize:function(l,v,c,g,y,E){var C,T;if(r(v)){var A=v;v=o(A,"key"),C=new a(l,{key:v,url:o(A,"textureURL"),extension:o(A,"textureExtension","png"),normalMap:o(A,"normalMap"),xhrSettings:o(A,"textureXhrSettings")}),T=new n(l,{key:v,url:o(A,"atlasURL"),extension:o(A,"atlasExtension","xml"),xhrSettings:o(A,"atlasXhrSettings")})}else C=new a(l,v,c,y),T=new n(l,v,g,E);C.linkFile?i.call(this,l,"atlasxml",v,[C,T,C.linkFile]):i.call(this,l,"atlasxml",v,[C,T])},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],l=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(s.key,s.data,l.data,v),this.complete=!0}}});m.register("atlasXML",function(s,l,v,c,g){var y;if(Array.isArray(s))for(var E=0;E<s.length;E++)y=new u(this,s[E]),this.addFile(y.files);else y=new u(this,s,l,v,c,g),this.addFile(y.files);return this}),f.exports=u},67448:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(98035),a=t(76846),r=t(72632),i=t(30929),n=t(42911),u=new h({Extends:o,initialize:function(l,v,c,g,y){if(n(v)){var E=v;v=r(E,"key"),g=r(E,"xhrSettings"),y=r(E,"context",y)}var C={type:"audio",cache:l.cacheManager.audio,extension:c.type,responseType:"arraybuffer",key:v,url:c.url,xhrSettings:g,config:{context:y}};o.call(this,l,C)},onProcess:function(){this.state=m.FILE_PROCESSING;var s=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(l){s.data=l,s.onProcessComplete()},function(l){console.error("Error decoding audio: "+s.key+" - ",l?l.message:null),s.onProcessError()}),this.config.context=null}});u.create=function(s,l,v,c,g){var y=s.systems.game,E=y.config.audio,C=y.device.audio;n(l)&&(v=r(l,"url",[]),c=r(l,"config",{}));var T=u.getAudioURL(y,v);return T?C.webAudio&&!E.disableWebAudio?new u(s,l,T,g,y.sound.context):new i(s,l,T,c):(console.warn('No audio URLs for "%s" matched this device',l),null)},u.getAudioURL=function(s,l){Array.isArray(l)||(l=[l]);for(var v=0;v<l.length;v++){var c=r(l[v],"url",l[v]);if(c.indexOf("blob:")===0||c.indexOf("data:")===0)return{url:c,type:""};var g=c.match(/\.([a-zA-Z0-9]+)($|\?)/);if(g=r(l[v],"type",g?g[1]:"").toLowerCase(),s.device.audio[g])return{url:c,type:g}}return null},a.register("audio",function(s,l,v,c){var g=this.systems.game,y=g.config.audio,E=g.device.audio;if(y.noAudio||!E.webAudio&&!E.audioData)return this;var C;if(Array.isArray(s))for(var T=0;T<s.length;T++)C=u.create(this,s[T]),C&&this.addFile(C);else C=u.create(this,s,l,v,c),C&&this.addFile(C);return this}),f.exports=u},66109:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(67448),m=t(56694),o=t(76846),a=t(72632),r=t(42911),i=t(70806),n=t(45176),u=new m({Extends:n,initialize:function(l,v,c,g,y,E,C){if(r(v)){var T=v;v=a(T,"key"),c=a(T,"jsonURL"),g=a(T,"audioURL"),y=a(T,"audioConfig"),E=a(T,"audioXhrSettings"),C=a(T,"jsonXhrSettings")}var A;if(!g)A=new i(l,v,c,C),n.call(this,l,"audiosprite",v,[A]),this.config.resourceLoad=!0,this.config.audioConfig=y,this.config.audioXhrSettings=E;else{var P=h.create(l,v,g,y,E);P&&(A=new i(l,v,c,C),n.call(this,l,"audiosprite",v,[P,A]),this.config.resourceLoad=!1)}},onFileComplete:function(s){var l=this.files.indexOf(s);if(l!==-1&&(this.pending--,this.config.resourceLoad&&s.type==="json"&&s.data.hasOwnProperty("resources"))){var v=s.data.resources,c=a(this.config,"audioConfig"),g=a(this.config,"audioXhrSettings"),y=h.create(this.loader,s.key,v,c,g);y&&(this.addToMultiFile(y),this.loader.addFile(y))}},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],l=this.files[1];s.addToCache(),l.addToCache(),this.complete=!0}}});o.register("audioSprite",function(s,l,v,c,g,y){var E=this.systems.game,C=E.config.audio,T=E.device.audio;if(C&&C.noAudio||!T.webAudio&&!T.audioData)return this;var A;if(Array.isArray(s))for(var P=0;P<s.length;P++)A=new u(this,s[P]),A.files&&this.addFile(A.files);else A=new u(this,s,l,v,c,g,y),A.files&&this.addFile(A.files);return this})},40612:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(98035),a=t(76846),r=t(72632),i=t(42911),n=new h({Extends:o,initialize:function(s,l,v,c,g){var y="bin";if(i(l)){var E=l;l=r(E,"key"),v=r(E,"url"),c=r(E,"xhrSettings"),y=r(E,"extension",y),g=r(E,"dataType",g)}var C={type:"binary",cache:s.cacheManager.binary,extension:y,responseType:"arraybuffer",key:l,url:v,xhrSettings:c,config:{dataType:g}};o.call(this,s,C)},onProcess:function(){this.state=m.FILE_PROCESSING;var u=this.config.dataType;this.data=u?new u(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});a.register("binary",function(u,s,l,v){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new n(this,u[c]));else this.addFile(new n(this,u,s,v,l));return this}),f.exports=n},54565:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(76846),o=t(72632),a=t(42927),r=t(42911),i=t(45176),n=t(31476),u=t(15297),s=new h({Extends:i,initialize:function(v,c,g,y,E,C){var T,A;if(r(c)){var P=c;c=o(P,"key"),T=new a(v,{key:c,url:o(P,"textureURL"),extension:o(P,"textureExtension","png"),normalMap:o(P,"normalMap"),xhrSettings:o(P,"textureXhrSettings")}),A=new u(v,{key:c,url:o(P,"fontDataURL"),extension:o(P,"fontDataExtension","xml"),xhrSettings:o(P,"fontDataXhrSettings")})}else T=new a(v,c,g,E),A=new u(v,c,y,C);T.linkFile?i.call(this,v,"bitmapfont",c,[T,A,T.linkFile]):i.call(this,v,"bitmapfont",c,[T,A])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],v=this.files[1];l.addToCache();var c=l.cache.get(l.key),g=n(v.data,l.cache.getFrame(l.key),0,0,c);this.loader.cacheManager.bitmapFont.add(l.key,{data:g,texture:l.key,frame:null}),this.complete=!0}}});m.register("bitmapFont",function(l,v,c,g,y){var E;if(Array.isArray(l))for(var C=0;C<l.length;C++)E=new s(this,l[C]),this.addFile(E.files);else E=new s(this,l,v,c,g,y),this.addFile(E.files);return this}),f.exports=s},99898:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(98035),a=t(76846),r=t(72632),i=t(42911),n=new h({Extends:o,initialize:function(s,l,v,c){var g="css";if(i(l)){var y=l;l=r(y,"key"),v=r(y,"url"),c=r(y,"xhrSettings"),g=r(y,"extension",g)}var E={type:"script",cache:!1,extension:g,responseType:"text",key:l,url:v,xhrSettings:c};o.call(this,s,E)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("css",function(u,s,l){if(Array.isArray(u))for(var v=0;v<u.length;v++)this.addFile(new n(this,u[v]));else this.addFile(new n(this,u,s,l));return this}),f.exports=n},47375:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(73152),m=t(40612),o=t(56694),a=t(76846),r=t(72632),i=t(42927),n=t(42911),u=t(70806),s=t(67409),l=t(30657),v=t(80802),c=t(45176),g=t(24904),y=new o({Extends:c,initialize:function(C,T,A,P){if(A.multiAtlasURL){var M=new u(C,{key:T,url:A.multiAtlasURL,xhrSettings:P,config:A});c.call(this,C,"texture",T,[M])}else{var w=A.textureURL.substr(A.textureURL.length-3);A.type||(A.type=w.toLowerCase()==="ktx"?"KTX":"PVR");var L=new m(C,{key:T,url:A.textureURL,extension:w,xhrSettings:P,config:A});if(A.atlasURL){var F=new u(C,{key:T,url:A.atlasURL,xhrSettings:P,config:A});c.call(this,C,"texture",T,[L,F])}else c.call(this,C,"texture",T,[L])}this.config=A},onFileComplete:function(E){var C=this.files.indexOf(E);if(C!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(E.type==="json"&&E.data.hasOwnProperty("textures")){var T=E.data.textures,A=this.config,P=this.loader,M=P.baseURL,w=P.path,L=P.prefix,F=r(A,"multiBaseURL",this.baseURL),D=r(A,"multiPath",this.path),N=r(A,"prefix",this.prefix),B=r(A,"textureXhrSettings");F&&P.setBaseURL(F),D&&P.setPath(D),N&&P.setPrefix(N);for(var b=0;b<T.length;b++){var W=T[b].image,Y="CMA"+this.multiKeyIndex+"_"+W,K=new m(P,Y,W,B);if(this.addToMultiFile(K),P.addFile(K),T[b].normalMap){var G=new m(P,Y,T[b].normalMap,B);G.type="normalMap",K.setLink(G),this.addToMultiFile(G),P.addFile(G)}}P.setBaseURL(M),P.setPath(w),P.setPrefix(L)}}},addToCache:function(){if(this.isReadyToProcess()){var E=this.config;if(E.multiAtlasURL)this.addMultiToCache();else{var C=this.loader.systems.renderer,T=this.loader.textureManager,A,P=this.files[0],M=this.files[1];if(E.type==="PVR"?A=g(P.data):E.type==="KTX"&&(A=s(P.data)),A&&C.supportsCompressedTexture(E.format,A.internalFormat)){A.format=C.getCompressedTextureName(E.format,A.internalFormat);var w=M&&M.data?M.data:null;T.addCompressedTexture(P.key,A,w)}}this.complete=!0}},addMultiToCache:function(){for(var E=this.config,C=this.files[0],T=[],A=[],P=[],M=this.loader.systems.renderer,w=this.loader.textureManager,L,F=1;F<this.files.length;F++){var D=this.files[F];if(D.type!=="normalMap")for(var N=D.key.indexOf("_"),B=D.key.substr(N+1),b=D.data,W=0;W<C.data.textures.length;W++){var Y=C.data.textures[W];if(Y.image===B){E.type==="PVR"?L=g(b):E.type==="KTX"&&(L=s(b)),L&&M.supportsCompressedTexture(E.format,L.internalFormat)&&(L.format=M.getCompressedTextureName(E.format,L.internalFormat),A.push(L),T.push(Y),D.linkFile&&P.push(D.linkFile.data));break}}}P.length===0&&(P=void 0),w.addAtlasJSONArray(this.key,A,T,P),this.complete=!0}});a.register("texture",function(E,C,T){var A=this.systems.renderer,P=function(w,L,F,D){var N={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(n(L)){var B=L;L=r(B,"key"),F=r(B,"url"),D=r(B,"xhrSettings")}var b=!1;for(var W in F)if(A.supportsCompressedTexture(W)){var Y=F[W];typeof Y=="string"?N.textureURL=Y:N=l(Y,N),N.format=W.toUpperCase(),b=!0;break}if(!b)console.warn("No supported compressed texture format or IMG fallback",L);else if(N.format==="IMG"){var K,G;N.multiAtlasURL?(G=new v(w,L,N.multiAtlasURL,N.multiPath,N.multiBaseURL,D),K=G.files):N.atlasURL?(G=new h(w,L,N.textureURL,N.atlasURL,D),K=G.files):K=new i(w,L,N.textureURL,D),w.addFile(K)}else{var z=new y(w,L,N,D);w.addFile(z.files)}};if(Array.isArray(E))for(var M=0;M<E.length;M++)P(this,E[M]);else P(this,E,C,T);return this}),f.exports=y},46568:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(98035),a=t(76846),r=t(72632),i=t(42911),n=t(31053),u=new h({Extends:o,initialize:function(l,v,c,g,y){var E="glsl";if(i(v)){var C=v;v=r(C,"key"),c=r(C,"url"),g=r(C,"shaderType","fragment"),y=r(C,"xhrSettings"),E=r(C,"extension",E)}else g===void 0&&(g="fragment");var T={type:"glsl",cache:l.cacheManager.shader,extension:E,responseType:"text",key:v,url:c,config:{shaderType:g},xhrSettings:y};o.call(this,l,T)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var s=this.data.split(`
`),l=this.extractBlock(s,0);if(l)for(;l;){var v=this.getShaderName(l.header),c=this.getShaderType(l.header),g=this.getShaderUniforms(l.header),y=l.shader;if(this.cache.has(v)){var E=this.cache.get(v);c==="fragment"?E.fragmentSrc=y:E.vertexSrc=y,E.uniforms||(E.uniforms=g)}else c==="fragment"?this.cache.add(v,new n(v,y,"",g)):this.cache.add(v,new n(v,"",y,g));l=this.extractBlock(s,l.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new n(this.key,this.data)):this.cache.add(this.key,new n(this.key,"",this.data))},getShaderName:function(s){for(var l=0;l<s.length;l++){var v=s[l].trim();if(v.substring(0,5)==="name:")return v.substring(5).trim()}return this.key},getShaderType:function(s){for(var l=0;l<s.length;l++){var v=s[l].trim();if(v.substring(0,5)==="type:")return v.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(s){for(var l={},v=0;v<s.length;v++){var c=s[v].trim();if(c.substring(0,8)==="uniform."){var g=c.indexOf(":");if(g){var y=c.substring(8,g);try{l[y]=JSON.parse(c.substring(g+1))}catch{console.warn("Invalid uniform JSON: "+y)}}}}return l},extractBlock:function(s,l){for(var v=-1,c=-1,g=-1,y=!1,E=!1,C=[],T=[],A=l;A<s.length;A++){var P=s[A].trim();if(P==="---")if(v===-1)v=A,y=!0;else if(y)c=A,y=!1,E=!0;else{E=!1;break}else y?C.push(P):E&&(T.push(P),g=A)}return!y&&c!==-1?{header:C,shader:T.join(`
`),offset:g}:null}});a.register("glsl",function(s,l,v,c){if(Array.isArray(s))for(var g=0;g<s.length;g++)this.addFile(new u(this,s[g]));else this.addFile(new u(this,s,l,v,c));return this}),f.exports=u},30929:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(683),o=t(98035),a=t(72632),r=t(30750),i=t(42911),n=new h({Extends:o,initialize:function(s,l,v,c){if(i(l)){var g=l;l=a(g,"key"),c=a(g,"config",c)}var y={type:"audio",cache:s.cacheManager.audio,extension:v.type,key:l,url:v.url,config:c};o.call(this,s,y),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var u=0;u<this.data.length;u++){var s=this.data[u];s.oncanplaythrough=null,s.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(u){var s=u.target;s.oncanplaythrough=null,s.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(m.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var u=this.config&&this.config.instances||1;this.filesTotal=u,this.filesLoaded=0,this.percentComplete=0;for(var s=0;s<u;s++){var l=new Audio;l.dataset||(l.dataset={}),l.dataset.name=this.key+("0"+s).slice(-2),l.dataset.used="false",this.locked?l.dataset.locked="true":(l.dataset.locked="false",l.preload="auto",l.oncanplaythrough=this.onProgress.bind(this),l.onerror=this.onError.bind(this)),this.data.push(l)}for(s=0;s<this.data.length;s++)l=this.data[s],l.src=r(this,this.loader.baseURL),this.locked||l.load();this.locked&&setTimeout(this.onLoad.bind(this))}});f.exports=n},77459:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(98035),a=t(76846),r=t(72632),i=t(42911),n=new h({Extends:o,initialize:function(s,l,v,c){var g="html";if(i(l)){var y=l;l=r(y,"key"),v=r(y,"url"),c=r(y,"xhrSettings"),g=r(y,"extension",g)}var E={type:"text",cache:s.cacheManager.html,extension:g,responseType:"text",key:l,url:v,xhrSettings:c};o.call(this,s,E)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("html",function(u,s,l){if(Array.isArray(u))for(var v=0;v<u.length;v++)this.addFile(new n(this,u[v]));else this.addFile(new n(this,u,s,l));return this}),f.exports=n},9755:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(98035),a=t(76846),r=t(72632),i=t(42911),n=new h({Extends:o,initialize:function(s,l,v,c,g,y){c===void 0&&(c=512),g===void 0&&(g=512);var E="html";if(i(l)){var C=l;l=r(C,"key"),v=r(C,"url"),y=r(C,"xhrSettings"),E=r(C,"extension",E),c=r(C,"width",c),g=r(C,"height",g)}var T={type:"html",cache:s.textureManager,extension:E,responseType:"text",key:l,url:v,xhrSettings:y,config:{width:c,height:g}};o.call(this,s,T)},onProcess:function(){this.state=m.FILE_PROCESSING;var u=this.config.width,s=this.config.height,l=[];l.push('<svg width="'+u+'px" height="'+s+'px" viewBox="0 0 '+u+" "+s+'" xmlns="http://www.w3.org/2000/svg">'),l.push('<foreignObject width="100%" height="100%">'),l.push('<body xmlns="http://www.w3.org/1999/xhtml">'),l.push(this.xhrLoader.responseText),l.push("</body>"),l.push("</foreignObject>"),l.push("</svg>");var v=[l.join(`
`)],c=this;try{var g=new window.Blob(v,{type:"image/svg+xml;charset=utf-8"})}catch{c.state=m.FILE_ERRORED,c.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){o.revokeObjectURL(c.data),c.onProcessComplete()},this.data.onerror=function(){o.revokeObjectURL(c.data),c.onProcessError()},o.createObjectURL(this.data,g,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});a.register("htmlTexture",function(u,s,l,v,c){if(Array.isArray(u))for(var g=0;g<u.length;g++)this.addFile(new n(this,u[g]));else this.addFile(new n(this,u,s,l,v,c));return this}),f.exports=n},42927:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(98035),a=t(76846),r=t(72632),i=t(42911),n=t(30750),u=new h({Extends:o,initialize:function s(l,v,c,g,y){var E="png",C;if(i(v)){var T=v;v=r(T,"key"),c=r(T,"url"),C=r(T,"normalMap"),g=r(T,"xhrSettings"),E=r(T,"extension",E),y=r(T,"frameConfig")}Array.isArray(c)&&(C=c[1],c=c[0]);var A={type:"image",cache:l.textureManager,extension:E,responseType:"blob",key:v,url:c,xhrSettings:g,config:y};if(o.call(this,l,A),C){var P=new s(l,this.key,C,g,y);P.type="normalMap",this.setLink(P),l.addFile(P)}this.useImageElementLoad=l.imageLoadType==="HTMLImageElement",this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var s=this;this.data.onload=function(){o.revokeObjectURL(s.data),s.onProcessComplete()},this.data.onerror=function(){o.revokeObjectURL(s.data),s.onProcessError()},o.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var s=this.state;this.state=m.FILE_PROCESSING,s===m.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){if(this.state=m.FILE_LOADING,this.src=n(this,this.loader.baseURL),this.src.indexOf("data:")===0)console.warn("Local data URIs are not supported: "+this.key);else{this.data=new Image,this.data.crossOrigin=this.crossOrigin;var s=this;this.data.onload=function(){s.state=m.FILE_LOADED,s.loader.nextFile(s,!0)},this.data.onerror=function(){s.loader.nextFile(s,!1)},this.data.src=this.src}},addToCache:function(){var s=this.linkFile;s?s.state>=m.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addImage(this.key,s.data,this.data):this.cache.addImage(this.key,this.data,s.data)):this.cache.addImage(this.key,this.data)}});a.register("image",function(s,l,v){if(Array.isArray(s))for(var c=0;c<s.length;c++)this.addFile(new u(this,s[c]));else this.addFile(new u(this,s,l,v));return this}),f.exports=u},70806:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(98035),a=t(76846),r=t(72632),i=t(10850),n=t(42911),u=new h({Extends:o,initialize:function(l,v,c,g,y){var E="json";if(n(v)){var C=v;v=r(C,"key"),c=r(C,"url"),g=r(C,"xhrSettings"),E=r(C,"extension",E),y=r(C,"dataKey",y)}var T={type:"json",cache:l.cacheManager.json,extension:E,responseType:"text",key:v,url:c,xhrSettings:g,config:y};o.call(this,l,T),n(c)&&(y?this.data=i(c,y):this.data=c,this.state=m.FILE_POPULATED)},onProcess:function(){if(this.state!==m.FILE_POPULATED){this.state=m.FILE_PROCESSING;try{var s=JSON.parse(this.xhrLoader.responseText)}catch(v){throw this.onProcessError(),v}var l=this.config;typeof l=="string"?this.data=i(s,l,s):this.data=s}this.onProcessComplete()}});a.register("json",function(s,l,v,c){if(Array.isArray(s))for(var g=0;g<s.length;g++)this.addFile(new u(this,s[g]));else this.addFile(new u(this,s,l,c,v));return this}),f.exports=u},80802:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(76846),o=t(72632),a=t(42927),r=t(42911),i=t(70806),n=t(45176),u=new h({Extends:n,initialize:function(l,v,c,g,y,E,C){if(r(v)){var T=v;v=o(T,"key"),o(T,"url",!1)?c=o(T,"url"):c=o(T,"atlasURL"),E=o(T,"xhrSettings"),g=o(T,"path"),y=o(T,"baseURL"),C=o(T,"textureXhrSettings")}var A=new i(l,v,c,E);n.call(this,l,"multiatlas",v,[A]),this.config.path=g,this.config.baseURL=y,this.config.textureXhrSettings=C},onFileComplete:function(s){var l=this.files.indexOf(s);if(l!==-1&&(this.pending--,s.type==="json"&&s.data.hasOwnProperty("textures"))){var v=s.data.textures,c=this.config,g=this.loader,y=g.baseURL,E=g.path,C=g.prefix,T=o(c,"baseURL",this.baseURL),A=o(c,"path",this.path),P=o(c,"prefix",this.prefix),M=o(c,"textureXhrSettings");g.setBaseURL(T),g.setPath(A),g.setPrefix(P);for(var w=0;w<v.length;w++){var L=v[w].image,F="MA"+this.multiKeyIndex+"_"+L,D=new a(g,F,L,M);if(this.addToMultiFile(D),g.addFile(D),v[w].normalMap){var N=new a(g,F,v[w].normalMap,M);N.type="normalMap",D.setLink(N),this.addToMultiFile(N),g.addFile(N)}}g.setBaseURL(y),g.setPath(E),g.setPrefix(C)}},addToCache:function(){if(this.isReadyToProcess()){for(var s=this.files[0],l=[],v=[],c=[],g=1;g<this.files.length;g++){var y=this.files[g];if(y.type!=="normalMap")for(var E=y.key.indexOf("_"),C=y.key.substr(E+1),T=y.data,A=0;A<s.data.textures.length;A++){var P=s.data.textures[A];if(P.image===C){v.push(T),l.push(P),y.linkFile&&c.push(y.linkFile.data);break}}}c.length===0&&(c=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,v,l,c),this.complete=!0}}});m.register("multiatlas",function(s,l,v,c,g){var y;if(Array.isArray(s))for(var E=0;E<s.length;E++)y=new u(this,s[E]),this.addFile(y.files);else y=new u(this,s,l,v,c,g),this.addFile(y.files);return this}),f.exports=u},39034:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(76846),o=t(72632),a=t(42911),r=t(45176),i=t(55188),n=new h({Extends:r,initialize:function(s,l,v,c){var g="js",y=[];if(a(l)){var E=l;l=o(E,"key"),v=o(E,"url"),c=o(E,"xhrSettings"),g=o(E,"extension",g)}Array.isArray(v)||(v=[v]);for(var C=0;C<v.length;C++){var T=new i(s,{key:l+"_"+C.toString(),url:v[C],extension:g,xhrSettings:c});T.onProcess=function(){this.onProcessComplete()},y.push(T)}r.call(this,s,"scripts",l,y)},addToCache:function(){if(this.isReadyToProcess()){for(var u=0;u<this.files.length;u++){var s=this.files[u];s.data=document.createElement("script"),s.data.language="javascript",s.data.type="text/javascript",s.data.defer=!1,s.data.text=s.xhrLoader.responseText,document.head.appendChild(s.data)}this.complete=!0}}});m.register("scripts",function(u,s,l){var v;if(Array.isArray(u))for(var c=0;c<u.length;c++)v=new n(this,u[c]),this.addFile(v.files);else v=new n(this,u,s,l),this.addFile(v.files);return this}),f.exports=n},85527:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(76846),o=t(72632),a=t(42911),r=t(45176),i=t(27291),n=t(76799),u=t(86897),s=new h({Extends:r,initialize:function(v,c,g,y,E,C){var T,A,P=v.cacheManager.obj;if(a(c)){var M=c;c=o(M,"key"),T=new u(v,{key:c,type:"obj",cache:P,url:o(M,"url"),extension:o(M,"extension","obj"),xhrSettings:o(M,"xhrSettings"),config:{flipUV:o(M,"flipUV",E)}}),y=o(M,"matURL"),y&&(A=new u(v,{key:c,type:"mat",cache:P,url:y,extension:o(M,"matExtension","mat"),xhrSettings:o(M,"xhrSettings")}))}else T=new u(v,{key:c,url:g,type:"obj",cache:P,extension:"obj",xhrSettings:C,config:{flipUV:E}}),y&&(A=new u(v,{key:c,url:y,type:"mat",cache:P,extension:"mat",xhrSettings:C}));r.call(this,v,"obj",c,[T,A])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],v=this.files[1],c=i(l.data,l.config.flipUV);v&&(c.materials=n(v.data)),l.cache.add(l.key,c),this.complete=!0}}});m.register("obj",function(l,v,c,g,y){var E;if(Array.isArray(l))for(var C=0;C<l.length;C++)E=new s(this,l[C]),this.addFile(E.files);else E=new s(this,l,v,c,g,y),this.addFile(E.files);return this}),f.exports=s},3616:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(76846),a=t(70806),r=new h({Extends:a,initialize:function(n,u,s,l,v){a.call(this,n,u,s,l,v),this.type="packfile"},onProcess:function(){if(this.state!==m.FILE_POPULATED&&(this.state=m.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var i={};i[this.config]=this.data,this.data=i}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});o.register("pack",function(i,n,u,s){if(Array.isArray(i))for(var l=0;l<i.length;l++)this.addFile(new r(this,i[l]));else this.addFile(new r(this,i,n,s,u));return this}),f.exports=r},12217:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(98035),a=t(76846),r=t(72632),i=t(42911),n=new h({Extends:o,initialize:function(s,l,v,c,g,y){var E="js";if(i(l)){var C=l;l=r(C,"key"),v=r(C,"url"),y=r(C,"xhrSettings"),E=r(C,"extension",E),c=r(C,"start"),g=r(C,"mapping")}var T={type:"plugin",cache:!1,extension:E,responseType:"text",key:l,url:v,xhrSettings:y,config:{start:c,mapping:g}};o.call(this,s,T),typeof v=="function"&&(this.data=v,this.state=m.FILE_POPULATED)},onProcess:function(){var u=this.loader.systems.plugins,s=this.config,l=r(s,"start",!1),v=r(s,"mapping",null);if(this.state===m.FILE_POPULATED)u.install(this.key,this.data,l,v);else{this.state=m.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var c=u.install(this.key,window[this.key],l,v);(l||v)&&(this.loader.systems[v]=c,this.loader.scene[v]=c)}this.onProcessComplete()}});a.register("plugin",function(u,s,l,v,c){if(Array.isArray(u))for(var g=0;g<u.length;g++)this.addFile(new n(this,u[g]));else this.addFile(new n(this,u,s,l,v,c));return this}),f.exports=n},4474:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(98035),a=t(76846),r=t(72632),i=t(42911),n=new h({Extends:o,initialize:function(s,l,v,c,g){var y="svg";if(i(l)){var E=l;l=r(E,"key"),v=r(E,"url"),c=r(E,"svgConfig",{}),g=r(E,"xhrSettings"),y=r(E,"extension",y)}var C={type:"svg",cache:s.textureManager,extension:y,responseType:"text",key:l,url:v,xhrSettings:g,config:{width:r(c,"width"),height:r(c,"height"),scale:r(c,"scale")}};o.call(this,s,C)},onProcess:function(){this.state=m.FILE_PROCESSING;var u=this.xhrLoader.responseText,s=[u],l=this.config.width,v=this.config.height,c=this.config.scale;t:if(l&&v||c){var g=null,y=new DOMParser;g=y.parseFromString(u,"text/xml");var E=g.getElementsByTagName("svg")[0],C=E.hasAttribute("viewBox"),T=parseFloat(E.getAttribute("width")),A=parseFloat(E.getAttribute("height"));if(!C&&T&&A)E.setAttribute("viewBox","0  0 "+T+" "+A);else if(C&&!T&&!A){var P=E.getAttribute("viewBox").split(/\s+|,/);T=P[2],A=P[3]}if(c)if(T&&A)l=T*c,v=A*c;else break t;E.setAttribute("width",l.toString()+"px"),E.setAttribute("height",v.toString()+"px"),s=[new XMLSerializer().serializeToString(E)]}try{var M=new window.Blob(s,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var w=this,L=!1;this.data.onload=function(){L||o.revokeObjectURL(w.data),w.onProcessComplete()},this.data.onerror=function(){L?w.onProcessError():(L=!0,o.revokeObjectURL(w.data),w.data.src="data:image/svg+xml,"+encodeURIComponent(s.join("")))},o.createObjectURL(this.data,M,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});a.register("svg",function(u,s,l,v){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new n(this,u[c]));else this.addFile(new n(this,u,s,l,v));return this}),f.exports=n},95171:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(98035),a=t(76846),r=t(72632),i=t(42911),n=new h({Extends:o,initialize:function(s,l,v,c){var g="js";if(i(l)){var y=l;l=r(y,"key"),v=r(y,"url"),c=r(y,"xhrSettings"),g=r(y,"extension",g)}var E={type:"text",extension:g,responseType:"text",key:l,url:v,xhrSettings:c};o.call(this,s,E)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var u=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),s=eval;this.loader.sceneManager.add(this.key,s(u)),this.complete=!0}});a.register("sceneFile",function(u,s,l){if(Array.isArray(u))for(var v=0;v<u.length;v++)this.addFile(new n(this,u[v]));else this.addFile(new n(this,u,s,l));return this}),f.exports=n},82458:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(98035),a=t(76846),r=t(72632),i=t(42911),n=new h({Extends:o,initialize:function(s,l,v,c,g,y){var E="js";if(i(l)){var C=l;l=r(C,"key"),v=r(C,"url"),y=r(C,"xhrSettings"),E=r(C,"extension",E),c=r(C,"systemKey"),g=r(C,"sceneKey")}var T={type:"scenePlugin",cache:!1,extension:E,responseType:"text",key:l,url:v,xhrSettings:y,config:{systemKey:c,sceneKey:g}};o.call(this,s,T),typeof v=="function"&&(this.data=v,this.state=m.FILE_POPULATED)},onProcess:function(){var u=this.loader.systems.plugins,s=this.config,l=this.key,v=r(s,"systemKey",l),c=r(s,"sceneKey",l);this.state===m.FILE_POPULATED?u.installScenePlugin(v,this.data,c,this.loader.scene,!0):(this.state=m.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),u.installScenePlugin(v,window[this.key],c,this.loader.scene,!0)),this.onProcessComplete()}});a.register("scenePlugin",function(u,s,l,v,c){if(Array.isArray(u))for(var g=0;g<u.length;g++)this.addFile(new n(this,u[g]));else this.addFile(new n(this,u,s,l,v,c));return this}),f.exports=n},55188:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(98035),a=t(76846),r=t(72632),i=t(42911),n=new h({Extends:o,initialize:function(s,l,v,c,g){var y="js";if(i(l)){var E=l;l=r(E,"key"),v=r(E,"url"),c=r(E,"type","script"),g=r(E,"xhrSettings"),y=r(E,"extension",y)}else c===void 0&&(c="script");var C={type:c,cache:!1,extension:y,responseType:"text",key:l,url:v,xhrSettings:g};o.call(this,s,C)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});a.register("script",function(u,s,l,v){if(Array.isArray(u))for(var c=0;c<u.length;c++)this.addFile(new n(this,u[c]));else this.addFile(new n(this,u,s,l,v));return this}),f.exports=n},33536:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(76846),a=t(42927),r=new h({Extends:a,initialize:function(n,u,s,l,v){a.call(this,n,u,s,v,l),this.type="spritesheet"},addToCache:function(){var i=this.linkFile;i?i.state>=m.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,i.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,i.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});o.register("spritesheet",function(i,n,u,s){if(Array.isArray(i))for(var l=0;l<i.length;l++)this.addFile(new r(this,i[l]));else this.addFile(new r(this,i,n,u,s));return this}),f.exports=r},86897:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(98035),a=t(76846),r=t(72632),i=t(42911),n=new h({Extends:o,initialize:function(s,l,v,c){var g="text",y="txt",E=s.cacheManager.text;if(i(l)){var C=l;l=r(C,"key"),v=r(C,"url"),c=r(C,"xhrSettings"),y=r(C,"extension",y),g=r(C,"type",g),E=r(C,"cache",E)}var T={type:g,cache:E,extension:y,responseType:"text",key:l,url:v,xhrSettings:c};o.call(this,s,T)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});a.register("text",function(u,s,l){if(Array.isArray(u))for(var v=0;v<u.length;v++)this.addFile(new n(this,u[v]));else this.addFile(new n(this,u,s,l));return this}),f.exports=n},58673:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(98035),a=t(76846),r=t(72632),i=t(42911),n=t(93560),u=new h({Extends:o,initialize:function(l,v,c,g){var y="csv";if(i(v)){var E=v;v=r(E,"key"),c=r(E,"url"),g=r(E,"xhrSettings"),y=r(E,"extension",y)}var C={type:"tilemapCSV",cache:l.cacheManager.tilemap,extension:y,responseType:"text",key:v,url:c,xhrSettings:g};o.call(this,l,C),this.tilemapFormat=n.CSV},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var s={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,s)}});a.register("tilemapCSV",function(s,l,v){if(Array.isArray(s))for(var c=0;c<s.length;c++)this.addFile(new u(this,s[c]));else this.addFile(new u(this,s,l,v));return this}),f.exports=u},98896:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(76846),o=t(70806),a=t(93560),r=new h({Extends:o,initialize:function(n,u,s,l){o.call(this,n,u,s,l),this.type="tilemapJSON",this.cache=n.cacheManager.tilemap},addToCache:function(){var i={format:a.WELTMEISTER,data:this.data};this.cache.add(this.key,i)}});m.register("tilemapImpact",function(i,n,u){if(Array.isArray(i))for(var s=0;s<i.length;s++)this.addFile(new r(this,i[s]));else this.addFile(new r(this,i,n,u));return this}),f.exports=r},50563:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(76846),o=t(70806),a=t(93560),r=new h({Extends:o,initialize:function(n,u,s,l){o.call(this,n,u,s,l),this.type="tilemapJSON",this.cache=n.cacheManager.tilemap},addToCache:function(){var i={format:a.TILED_JSON,data:this.data};this.cache.add(this.key,i)}});m.register("tilemapTiledJSON",function(i,n,u){if(Array.isArray(i))for(var s=0;s<i.length;s++)this.addFile(new r(this,i[s]));else this.addFile(new r(this,i,n,u));return this}),f.exports=r},82857:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(76846),o=t(72632),a=t(42927),r=t(42911),i=t(45176),n=t(86897),u=new h({Extends:i,initialize:function(l,v,c,g,y,E){var C,T;if(r(v)){var A=v;v=o(A,"key"),C=new a(l,{key:v,url:o(A,"textureURL"),extension:o(A,"textureExtension","png"),normalMap:o(A,"normalMap"),xhrSettings:o(A,"textureXhrSettings")}),T=new n(l,{key:v,url:o(A,"atlasURL"),extension:o(A,"atlasExtension","txt"),xhrSettings:o(A,"atlasXhrSettings")})}else C=new a(l,v,c,y),T=new n(l,v,g,E);C.linkFile?i.call(this,l,"unityatlas",v,[C,T,C.linkFile]):i.call(this,l,"unityatlas",v,[C,T])},addToCache:function(){if(this.isReadyToProcess()){var s=this.files[0],l=this.files[1],v=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(s.key,s.data,l.data,v),this.complete=!0}}});m.register("unityAtlas",function(s,l,v,c,g){var y;if(Array.isArray(s))for(var E=0;E<s.length;E++)y=new u(this,s[E]),this.addFile(y.files);else y=new u(this,s,l,v,c,g),this.addFile(y.files);return this}),f.exports=u},22833:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(98035),a=t(76846),r=t(30750),i=t(72632),n=t(42911),u=new h({Extends:o,initialize:function(l,v,c,g){if(g===void 0&&(g=!1),n(v)){var y=v;v=i(y,"key"),c=i(y,"url",[]),g=i(y,"noAudio",!1)}var E=l.systems.game.device.video.getVideoURL(c);E||console.warn("VideoFile: No supported format for "+v);var C={type:"video",cache:l.cacheManager.video,extension:E.type,key:v,url:E.url,config:{noAudio:g}};o.call(this,l,C)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=r(this,this.loader.baseURL),this.state=m.FILE_LOADED,this.loader.nextFile(this,!0)}});a.register("video",function(s,l,v){if(Array.isArray(s))for(var c=0;c<s.length;c++)this.addFile(new u(this,s[c]));else this.addFile(new u(this,s,l,v));return this}),f.exports=u},15297:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12117),o=t(98035),a=t(76846),r=t(72632),i=t(42911),n=t(89200),u=new h({Extends:o,initialize:function(l,v,c,g){var y="xml";if(i(v)){var E=v;v=r(E,"key"),c=r(E,"url"),g=r(E,"xhrSettings"),y=r(E,"extension",y)}var C={type:"xml",cache:l.cacheManager.xml,extension:y,responseType:"text",key:v,url:c,xhrSettings:g};o.call(this,l,C)},onProcess:function(){this.state=m.FILE_PROCESSING,this.data=n(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});a.register("xml",function(s,l,v){if(Array.isArray(s))for(var c=0;c<s.length;c++)this.addFile(new u(this,s[c]));else this.addFile(new u(this,s,l,v));return this}),f.exports=u},34034:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={AnimationJSONFile:t(46468),AsepriteFile:t(31648),AtlasJSONFile:t(73152),AtlasXMLFile:t(24616),AudioFile:t(67448),AudioSpriteFile:t(66109),BinaryFile:t(40612),BitmapFontFile:t(54565),CompressedTextureFile:t(47375),CSSFile:t(99898),GLSLFile:t(46568),HTML5AudioFile:t(30929),HTMLFile:t(77459),HTMLTextureFile:t(9755),ImageFile:t(42927),JSONFile:t(70806),MultiAtlasFile:t(80802),MultiScriptFile:t(39034),OBJFile:t(85527),PackFile:t(3616),PluginFile:t(12217),SceneFile:t(95171),ScenePluginFile:t(82458),ScriptFile:t(55188),SpriteSheetFile:t(33536),SVGFile:t(4474),TextFile:t(86897),TilemapCSVFile:t(58673),TilemapImpactFile:t(98896),TilemapJSONFile:t(50563),UnityAtlasFile:t(82857),VideoFile:t(22833),XMLFile:t(15297)}},95695:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(12117),m=t(98611),o={Events:t(683),FileTypes:t(34034),File:t(98035),FileTypesManager:t(76846),GetURL:t(30750),LoaderPlugin:t(67285),MergeXHRSettings:t(43531),MultiFile:t(45176),XHRLoader:t(88490),XHRSettings:t(33868)};o=m(!1,o,h),f.exports=o},26042:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){for(var h=0,m=0;m<t.length;m++)h+=+t[m];return h/t.length};f.exports=S},22824:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(8034),m=function(o,a){return h(o)/h(a)/h(o-a)};f.exports=m},17489:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return Math.floor(Math.random()*(h-t+1)+t)};f.exports=S},14976:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o,a){var r=(o-h)*.5,i=(a-m)*.5,n=t*t,u=t*n;return(2*m-2*o+r+i)*u+(-3*m+3*o-2*r-i)*n+r*t+m};f.exports=S},89129:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){h===void 0&&(h=0),m===void 0&&(m=10);var o=Math.pow(m,-h);return Math.ceil(t*o)/o};f.exports=S},82897:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return Math.max(h,Math.min(m,t))};f.exports=S},75606:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(83392),m=function(o){return o*h.DEG_TO_RAD};f.exports=m},767:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return Math.abs(t-h)};f.exports=S},9849:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82897),m=t(56694),o=t(16650),a=t(72283),r=new o,i=new m({initialize:function n(u,s,l,v){u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=0),v===void 0&&(v=n.DefaultOrder),this._x=u,this._y=s,this._z=l,this._order=v,this.onChangeCallback=a},x:{get:function(){return this._x},set:function(n){this._x=n,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(n){this._y=n,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(n){this._z=n,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(n){this._order=n,this.onChangeCallback(this)}},set:function(n,u,s,l){return l===void 0&&(l=this._order),this._x=n,this._y=u,this._z=s,this._order=l,this.onChangeCallback(this),this},copy:function(n){return this.set(n.x,n.y,n.z,n.order)},setFromQuaternion:function(n,u,s){return u===void 0&&(u=this._order),s===void 0&&(s=!1),r.fromQuat(n),this.setFromRotationMatrix(r,u,s)},setFromRotationMatrix:function(n,u,s){u===void 0&&(u=this._order),s===void 0&&(s=!1);var l=n.val,v=l[0],c=l[4],g=l[8],y=l[1],E=l[5],C=l[9],T=l[2],A=l[6],P=l[10],M=0,w=0,L=0,F=.99999;switch(u){case"XYZ":{w=Math.asin(h(g,-1,1)),Math.abs(g)<F?(M=Math.atan2(-C,P),L=Math.atan2(-c,v)):M=Math.atan2(A,E);break}case"YXZ":{M=Math.asin(-h(C,-1,1)),Math.abs(C)<F?(w=Math.atan2(g,P),L=Math.atan2(y,E)):w=Math.atan2(-T,v);break}case"ZXY":{M=Math.asin(h(A,-1,1)),Math.abs(A)<F?(w=Math.atan2(-T,P),L=Math.atan2(-c,E)):L=Math.atan2(y,v);break}case"ZYX":{w=Math.asin(-h(T,-1,1)),Math.abs(T)<F?(M=Math.atan2(A,P),L=Math.atan2(y,v)):L=Math.atan2(-c,E);break}case"YZX":{L=Math.asin(h(y,-1,1)),Math.abs(y)<F?(M=Math.atan2(-C,E),w=Math.atan2(-T,v)):w=Math.atan2(g,P);break}case"XZY":{L=Math.asin(-h(c,-1,1)),Math.abs(c)<F?(M=Math.atan2(A,E),w=Math.atan2(g,v)):M=Math.atan2(-C,P);break}}return this._x=M,this._y=w,this._z=L,this._order=u,s&&this.onChangeCallback(this),this}});i.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],i.DefaultOrder="XYZ",f.exports=i},8034:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){if(t===0)return 1;for(var h=t;--t;)h*=t;return h};f.exports=S},61616:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return Math.random()*(h-t)+t};f.exports=S},60679:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){h===void 0&&(h=0),m===void 0&&(m=10);var o=Math.pow(m,-h);return Math.floor(t*o)/o};f.exports=S},91806:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82897),m=function(o,a,r){return o=h(o,0,1),(r-a)*o+a};f.exports=m},79366:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t/h/1e3};f.exports=S},43776:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t==parseFloat(t)?!(t%2):void 0};f.exports=S},58442:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t===parseFloat(t)?!(t%2):void 0};f.exports=S},42798:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return(h-t)*m+t};f.exports=S},61072:f=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return m===void 0&&(m=0),t.clone().lerp(h,m)};f.exports=S},5341:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=new h({initialize:function(a){this.val=new Float32Array(9),a?this.copy(a):this.identity()},clone:function(){return new m(this)},set:function(o){return this.copy(o)},copy:function(o){var a=this.val,r=o.val;return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[8]=r[8],this},fromMat4:function(o){var a=o.val,r=this.val;return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[4],r[4]=a[5],r[5]=a[6],r[6]=a[8],r[7]=a[9],r[8]=a[10],this},fromArray:function(o){var a=this.val;return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],a[4]=o[4],a[5]=o[5],a[6]=o[6],a[7]=o[7],a[8]=o[8],this},identity:function(){var o=this.val;return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=1,o[5]=0,o[6]=0,o[7]=0,o[8]=1,this},transpose:function(){var o=this.val,a=o[1],r=o[2],i=o[5];return o[1]=o[3],o[2]=o[6],o[3]=a,o[5]=o[7],o[6]=r,o[7]=i,this},invert:function(){var o=this.val,a=o[0],r=o[1],i=o[2],n=o[3],u=o[4],s=o[5],l=o[6],v=o[7],c=o[8],g=c*u-s*v,y=-c*n+s*l,E=v*n-u*l,C=a*g+r*y+i*E;return C?(C=1/C,o[0]=g*C,o[1]=(-c*r+i*v)*C,o[2]=(s*r-i*u)*C,o[3]=y*C,o[4]=(c*a-i*l)*C,o[5]=(-s*a+i*n)*C,o[6]=E*C,o[7]=(-v*a+r*l)*C,o[8]=(u*a-r*n)*C,this):null},adjoint:function(){var o=this.val,a=o[0],r=o[1],i=o[2],n=o[3],u=o[4],s=o[5],l=o[6],v=o[7],c=o[8];return o[0]=u*c-s*v,o[1]=i*v-r*c,o[2]=r*s-i*u,o[3]=s*l-n*c,o[4]=a*c-i*l,o[5]=i*n-a*s,o[6]=n*v-u*l,o[7]=r*l-a*v,o[8]=a*u-r*n,this},determinant:function(){var o=this.val,a=o[0],r=o[1],i=o[2],n=o[3],u=o[4],s=o[5],l=o[6],v=o[7],c=o[8];return a*(c*u-s*v)+r*(-c*n+s*l)+i*(v*n-u*l)},multiply:function(o){var a=this.val,r=a[0],i=a[1],n=a[2],u=a[3],s=a[4],l=a[5],v=a[6],c=a[7],g=a[8],y=o.val,E=y[0],C=y[1],T=y[2],A=y[3],P=y[4],M=y[5],w=y[6],L=y[7],F=y[8];return a[0]=E*r+C*u+T*v,a[1]=E*i+C*s+T*c,a[2]=E*n+C*l+T*g,a[3]=A*r+P*u+M*v,a[4]=A*i+P*s+M*c,a[5]=A*n+P*l+M*g,a[6]=w*r+L*u+F*v,a[7]=w*i+L*s+F*c,a[8]=w*n+L*l+F*g,this},translate:function(o){var a=this.val,r=o.x,i=o.y;return a[6]=r*a[0]+i*a[3]+a[6],a[7]=r*a[1]+i*a[4]+a[7],a[8]=r*a[2]+i*a[5]+a[8],this},rotate:function(o){var a=this.val,r=a[0],i=a[1],n=a[2],u=a[3],s=a[4],l=a[5],v=Math.sin(o),c=Math.cos(o);return a[0]=c*r+v*u,a[1]=c*i+v*s,a[2]=c*n+v*l,a[3]=c*u-v*r,a[4]=c*s-v*i,a[5]=c*l-v*n,this},scale:function(o){var a=this.val,r=o.x,i=o.y;return a[0]=r*a[0],a[1]=r*a[1],a[2]=r*a[2],a[3]=i*a[3],a[4]=i*a[4],a[5]=i*a[5],this},fromQuat:function(o){var a=o.x,r=o.y,i=o.z,n=o.w,u=a+a,s=r+r,l=i+i,v=a*u,c=a*s,g=a*l,y=r*s,E=r*l,C=i*l,T=n*u,A=n*s,P=n*l,M=this.val;return M[0]=1-(y+C),M[3]=c+P,M[6]=g-A,M[1]=c-P,M[4]=1-(v+C),M[7]=E+T,M[2]=g+A,M[5]=E-T,M[8]=1-(v+y),this},normalFromMat4:function(o){var a=o.val,r=this.val,i=a[0],n=a[1],u=a[2],s=a[3],l=a[4],v=a[5],c=a[6],g=a[7],y=a[8],E=a[9],C=a[10],T=a[11],A=a[12],P=a[13],M=a[14],w=a[15],L=i*v-n*l,F=i*c-u*l,D=i*g-s*l,N=n*c-u*v,B=n*g-s*v,b=u*g-s*c,W=y*P-E*A,Y=y*M-C*A,K=y*w-T*A,G=E*M-C*P,z=E*w-T*P,O=C*w-T*M,V=L*O-F*z+D*G+N*K-B*Y+b*W;return V?(V=1/V,r[0]=(v*O-c*z+g*G)*V,r[1]=(c*K-l*O-g*Y)*V,r[2]=(l*z-v*K+g*W)*V,r[3]=(u*z-n*O-s*G)*V,r[4]=(i*O-u*K+s*Y)*V,r[5]=(n*K-i*z-s*W)*V,r[6]=(P*b-M*B+w*N)*V,r[7]=(M*D-A*b-w*F)*V,r[8]=(A*B-P*D+w*L)*V,this):null}});f.exports=m},16650:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(70015),o=1e-6,a=new h({initialize:function(v){this.val=new Float32Array(16),v?this.copy(v):this.identity()},clone:function(){return new a(this)},set:function(l){return this.copy(l)},setValues:function(l,v,c,g,y,E,C,T,A,P,M,w,L,F,D,N){var B=this.val;return B[0]=l,B[1]=v,B[2]=c,B[3]=g,B[4]=y,B[5]=E,B[6]=C,B[7]=T,B[8]=A,B[9]=P,B[10]=M,B[11]=w,B[12]=L,B[13]=F,B[14]=D,B[15]=N,this},copy:function(l){var v=l.val;return this.setValues(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15])},fromArray:function(l){return this.setValues(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(l,v,c){var g=r.fromQuat(c),y=g.val,E=v.x,C=v.y,T=v.z;return this.setValues(y[0]*E,y[1]*E,y[2]*E,0,y[4]*C,y[5]*C,y[6]*C,0,y[8]*T,y[9]*T,y[10]*T,0,l.x,l.y,l.z,1)},xyz:function(l,v,c){this.identity();var g=this.val;return g[12]=l,g[13]=v,g[14]=c,this},scaling:function(l,v,c){this.zero();var g=this.val;return g[0]=l,g[5]=v,g[10]=c,g[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var l=this.val,v=l[1],c=l[2],g=l[3],y=l[6],E=l[7],C=l[11];return l[1]=l[4],l[2]=l[8],l[3]=l[12],l[4]=v,l[6]=l[9],l[7]=l[13],l[8]=c,l[9]=y,l[11]=l[14],l[12]=g,l[13]=E,l[14]=C,this},getInverse:function(l){return this.copy(l),this.invert()},invert:function(){var l=this.val,v=l[0],c=l[1],g=l[2],y=l[3],E=l[4],C=l[5],T=l[6],A=l[7],P=l[8],M=l[9],w=l[10],L=l[11],F=l[12],D=l[13],N=l[14],B=l[15],b=v*C-c*E,W=v*T-g*E,Y=v*A-y*E,K=c*T-g*C,G=c*A-y*C,z=g*A-y*T,O=P*D-M*F,V=P*N-w*F,U=P*B-L*F,X=M*N-w*D,H=M*B-L*D,Q=w*B-L*N,$=b*Q-W*H+Y*X+K*U-G*V+z*O;return $?($=1/$,this.setValues((C*Q-T*H+A*X)*$,(g*H-c*Q-y*X)*$,(D*z-N*G+B*K)*$,(w*G-M*z-L*K)*$,(T*U-E*Q-A*V)*$,(v*Q-g*U+y*V)*$,(N*Y-F*z-B*W)*$,(P*z-w*Y+L*W)*$,(E*H-C*U+A*O)*$,(c*U-v*H-y*O)*$,(F*G-D*Y+B*b)*$,(M*Y-P*G-L*b)*$,(C*V-E*X-T*O)*$,(v*X-c*V+g*O)*$,(D*W-F*K-N*b)*$,(P*K-M*W+w*b)*$)):this},adjoint:function(){var l=this.val,v=l[0],c=l[1],g=l[2],y=l[3],E=l[4],C=l[5],T=l[6],A=l[7],P=l[8],M=l[9],w=l[10],L=l[11],F=l[12],D=l[13],N=l[14],B=l[15];return this.setValues(C*(w*B-L*N)-M*(T*B-A*N)+D*(T*L-A*w),-(c*(w*B-L*N)-M*(g*B-y*N)+D*(g*L-y*w)),c*(T*B-A*N)-C*(g*B-y*N)+D*(g*A-y*T),-(c*(T*L-A*w)-C*(g*L-y*w)+M*(g*A-y*T)),-(E*(w*B-L*N)-P*(T*B-A*N)+F*(T*L-A*w)),v*(w*B-L*N)-P*(g*B-y*N)+F*(g*L-y*w),-(v*(T*B-A*N)-E*(g*B-y*N)+F*(g*A-y*T)),v*(T*L-A*w)-E*(g*L-y*w)+P*(g*A-y*T),E*(M*B-L*D)-P*(C*B-A*D)+F*(C*L-A*M),-(v*(M*B-L*D)-P*(c*B-y*D)+F*(c*L-y*M)),v*(C*B-A*D)-E*(c*B-y*D)+F*(c*A-y*C),-(v*(C*L-A*M)-E*(c*L-y*M)+P*(c*A-y*C)),-(E*(M*N-w*D)-P*(C*N-T*D)+F*(C*w-T*M)),v*(M*N-w*D)-P*(c*N-g*D)+F*(c*w-g*M),-(v*(C*N-T*D)-E*(c*N-g*D)+F*(c*T-g*C)),v*(C*w-T*M)-E*(c*w-g*M)+P*(c*T-g*C))},determinant:function(){var l=this.val,v=l[0],c=l[1],g=l[2],y=l[3],E=l[4],C=l[5],T=l[6],A=l[7],P=l[8],M=l[9],w=l[10],L=l[11],F=l[12],D=l[13],N=l[14],B=l[15],b=v*C-c*E,W=v*T-g*E,Y=v*A-y*E,K=c*T-g*C,G=c*A-y*C,z=g*A-y*T,O=P*D-M*F,V=P*N-w*F,U=P*B-L*F,X=M*N-w*D,H=M*B-L*D,Q=w*B-L*N;return b*Q-W*H+Y*X+K*U-G*V+z*O},multiply:function(l){var v=this.val,c=v[0],g=v[1],y=v[2],E=v[3],C=v[4],T=v[5],A=v[6],P=v[7],M=v[8],w=v[9],L=v[10],F=v[11],D=v[12],N=v[13],B=v[14],b=v[15],W=l.val,Y=W[0],K=W[1],G=W[2],z=W[3];return v[0]=Y*c+K*C+G*M+z*D,v[1]=Y*g+K*T+G*w+z*N,v[2]=Y*y+K*A+G*L+z*B,v[3]=Y*E+K*P+G*F+z*b,Y=W[4],K=W[5],G=W[6],z=W[7],v[4]=Y*c+K*C+G*M+z*D,v[5]=Y*g+K*T+G*w+z*N,v[6]=Y*y+K*A+G*L+z*B,v[7]=Y*E+K*P+G*F+z*b,Y=W[8],K=W[9],G=W[10],z=W[11],v[8]=Y*c+K*C+G*M+z*D,v[9]=Y*g+K*T+G*w+z*N,v[10]=Y*y+K*A+G*L+z*B,v[11]=Y*E+K*P+G*F+z*b,Y=W[12],K=W[13],G=W[14],z=W[15],v[12]=Y*c+K*C+G*M+z*D,v[13]=Y*g+K*T+G*w+z*N,v[14]=Y*y+K*A+G*L+z*B,v[15]=Y*E+K*P+G*F+z*b,this},multiplyLocal:function(l){var v=this.val,c=l.val;return this.setValues(v[0]*c[0]+v[1]*c[4]+v[2]*c[8]+v[3]*c[12],v[0]*c[1]+v[1]*c[5]+v[2]*c[9]+v[3]*c[13],v[0]*c[2]+v[1]*c[6]+v[2]*c[10]+v[3]*c[14],v[0]*c[3]+v[1]*c[7]+v[2]*c[11]+v[3]*c[15],v[4]*c[0]+v[5]*c[4]+v[6]*c[8]+v[7]*c[12],v[4]*c[1]+v[5]*c[5]+v[6]*c[9]+v[7]*c[13],v[4]*c[2]+v[5]*c[6]+v[6]*c[10]+v[7]*c[14],v[4]*c[3]+v[5]*c[7]+v[6]*c[11]+v[7]*c[15],v[8]*c[0]+v[9]*c[4]+v[10]*c[8]+v[11]*c[12],v[8]*c[1]+v[9]*c[5]+v[10]*c[9]+v[11]*c[13],v[8]*c[2]+v[9]*c[6]+v[10]*c[10]+v[11]*c[14],v[8]*c[3]+v[9]*c[7]+v[10]*c[11]+v[11]*c[15],v[12]*c[0]+v[13]*c[4]+v[14]*c[8]+v[15]*c[12],v[12]*c[1]+v[13]*c[5]+v[14]*c[9]+v[15]*c[13],v[12]*c[2]+v[13]*c[6]+v[14]*c[10]+v[15]*c[14],v[12]*c[3]+v[13]*c[7]+v[14]*c[11]+v[15]*c[15])},premultiply:function(l){return this.multiplyMatrices(l,this)},multiplyMatrices:function(l,v){var c=l.val,g=v.val,y=c[0],E=c[4],C=c[8],T=c[12],A=c[1],P=c[5],M=c[9],w=c[13],L=c[2],F=c[6],D=c[10],N=c[14],B=c[3],b=c[7],W=c[11],Y=c[15],K=g[0],G=g[4],z=g[8],O=g[12],V=g[1],U=g[5],X=g[9],H=g[13],Q=g[2],$=g[6],k=g[10],J=g[14],Z=g[3],j=g[7],_=g[11],q=g[15];return this.setValues(y*K+E*V+C*Q+T*Z,A*K+P*V+M*Q+w*Z,L*K+F*V+D*Q+N*Z,B*K+b*V+W*Q+Y*Z,y*G+E*U+C*$+T*j,A*G+P*U+M*$+w*j,L*G+F*U+D*$+N*j,B*G+b*U+W*$+Y*j,y*z+E*X+C*k+T*_,A*z+P*X+M*k+w*_,L*z+F*X+D*k+N*_,B*z+b*X+W*k+Y*_,y*O+E*H+C*J+T*q,A*O+P*H+M*J+w*q,L*O+F*H+D*J+N*q,B*O+b*H+W*J+Y*q)},translate:function(l){return this.translateXYZ(l.x,l.y,l.z)},translateXYZ:function(l,v,c){var g=this.val;return g[12]=g[0]*l+g[4]*v+g[8]*c+g[12],g[13]=g[1]*l+g[5]*v+g[9]*c+g[13],g[14]=g[2]*l+g[6]*v+g[10]*c+g[14],g[15]=g[3]*l+g[7]*v+g[11]*c+g[15],this},scale:function(l){return this.scaleXYZ(l.x,l.y,l.z)},scaleXYZ:function(l,v,c){var g=this.val;return g[0]=g[0]*l,g[1]=g[1]*l,g[2]=g[2]*l,g[3]=g[3]*l,g[4]=g[4]*v,g[5]=g[5]*v,g[6]=g[6]*v,g[7]=g[7]*v,g[8]=g[8]*c,g[9]=g[9]*c,g[10]=g[10]*c,g[11]=g[11]*c,this},makeRotationAxis:function(l,v){var c=Math.cos(v),g=Math.sin(v),y=1-c,E=l.x,C=l.y,T=l.z,A=y*E,P=y*C;return this.setValues(A*E+c,A*C-g*T,A*T+g*C,0,A*C+g*T,P*C+c,P*T-g*E,0,A*T-g*C,P*T+g*E,y*T*T+c,0,0,0,0,1)},rotate:function(l,v){var c=this.val,g=v.x,y=v.y,E=v.z,C=Math.sqrt(g*g+y*y+E*E);if(Math.abs(C)<o)return this;C=1/C,g*=C,y*=C,E*=C;var T=Math.sin(l),A=Math.cos(l),P=1-A,M=c[0],w=c[1],L=c[2],F=c[3],D=c[4],N=c[5],B=c[6],b=c[7],W=c[8],Y=c[9],K=c[10],G=c[11],z=c[12],O=c[13],V=c[14],U=c[15],X=g*g*P+A,H=y*g*P+E*T,Q=E*g*P-y*T,$=g*y*P-E*T,k=y*y*P+A,J=E*y*P+g*T,Z=g*E*P+y*T,j=y*E*P-g*T,_=E*E*P+A;return this.setValues(M*X+D*H+W*Q,w*X+N*H+Y*Q,L*X+B*H+K*Q,F*X+b*H+G*Q,M*$+D*k+W*J,w*$+N*k+Y*J,L*$+B*k+K*J,F*$+b*k+G*J,M*Z+D*j+W*_,w*Z+N*j+Y*_,L*Z+B*j+K*_,F*Z+b*j+G*_,z,O,V,U)},rotateX:function(l){var v=this.val,c=Math.sin(l),g=Math.cos(l),y=v[4],E=v[5],C=v[6],T=v[7],A=v[8],P=v[9],M=v[10],w=v[11];return v[4]=y*g+A*c,v[5]=E*g+P*c,v[6]=C*g+M*c,v[7]=T*g+w*c,v[8]=A*g-y*c,v[9]=P*g-E*c,v[10]=M*g-C*c,v[11]=w*g-T*c,this},rotateY:function(l){var v=this.val,c=Math.sin(l),g=Math.cos(l),y=v[0],E=v[1],C=v[2],T=v[3],A=v[8],P=v[9],M=v[10],w=v[11];return v[0]=y*g-A*c,v[1]=E*g-P*c,v[2]=C*g-M*c,v[3]=T*g-w*c,v[8]=y*c+A*g,v[9]=E*c+P*g,v[10]=C*c+M*g,v[11]=T*c+w*g,this},rotateZ:function(l){var v=this.val,c=Math.sin(l),g=Math.cos(l),y=v[0],E=v[1],C=v[2],T=v[3],A=v[4],P=v[5],M=v[6],w=v[7];return v[0]=y*g+A*c,v[1]=E*g+P*c,v[2]=C*g+M*c,v[3]=T*g+w*c,v[4]=A*g-y*c,v[5]=P*g-E*c,v[6]=M*g-C*c,v[7]=w*g-T*c,this},fromRotationTranslation:function(l,v){var c=l.x,g=l.y,y=l.z,E=l.w,C=c+c,T=g+g,A=y+y,P=c*C,M=c*T,w=c*A,L=g*T,F=g*A,D=y*A,N=E*C,B=E*T,b=E*A;return this.setValues(1-(L+D),M+b,w-B,0,M-b,1-(P+D),F+N,0,w+B,F-N,1-(P+L),0,v.x,v.y,v.z,1)},fromQuat:function(l){var v=l.x,c=l.y,g=l.z,y=l.w,E=v+v,C=c+c,T=g+g,A=v*E,P=v*C,M=v*T,w=c*C,L=c*T,F=g*T,D=y*E,N=y*C,B=y*T;return this.setValues(1-(w+F),P+B,M-N,0,P-B,1-(A+F),L+D,0,M+N,L-D,1-(A+w),0,0,0,0,1)},frustum:function(l,v,c,g,y,E){var C=1/(v-l),T=1/(g-c),A=1/(y-E);return this.setValues(y*2*C,0,0,0,0,y*2*T,0,0,(v+l)*C,(g+c)*T,(E+y)*A,-1,0,0,E*y*2*A,0)},perspective:function(l,v,c,g){var y=1/Math.tan(l/2),E=1/(c-g);return this.setValues(y/v,0,0,0,0,y,0,0,0,0,(g+c)*E,-1,0,0,2*g*c*E,0)},perspectiveLH:function(l,v,c,g){return this.setValues(2*c/l,0,0,0,0,2*c/v,0,0,0,0,-g/(c-g),1,0,0,c*g/(c-g),0)},ortho:function(l,v,c,g,y,E){var C=l-v,T=c-g,A=y-E;return C=C===0?C:1/C,T=T===0?T:1/T,A=A===0?A:1/A,this.setValues(-2*C,0,0,0,0,-2*T,0,0,0,0,2*A,0,(l+v)*C,(g+c)*T,(E+y)*A,1)},lookAtRH:function(l,v,c){var g=this.val;return s.subVectors(l,v),s.getLengthSquared()===0&&(s.z=1),s.normalize(),n.crossVectors(c,s),n.getLengthSquared()===0&&(Math.abs(c.z)===1?s.x+=1e-4:s.z+=1e-4,s.normalize(),n.crossVectors(c,s)),n.normalize(),u.crossVectors(s,n),g[0]=n.x,g[1]=n.y,g[2]=n.z,g[4]=u.x,g[5]=u.y,g[6]=u.z,g[8]=s.x,g[9]=s.y,g[10]=s.z,this},lookAt:function(l,v,c){var g=l.x,y=l.y,E=l.z,C=c.x,T=c.y,A=c.z,P=v.x,M=v.y,w=v.z;if(Math.abs(g-P)<o&&Math.abs(y-M)<o&&Math.abs(E-w)<o)return this.identity();var L=g-P,F=y-M,D=E-w,N=1/Math.sqrt(L*L+F*F+D*D);L*=N,F*=N,D*=N;var B=T*D-A*F,b=A*L-C*D,W=C*F-T*L;N=Math.sqrt(B*B+b*b+W*W),N?(N=1/N,B*=N,b*=N,W*=N):(B=0,b=0,W=0);var Y=F*W-D*b,K=D*B-L*W,G=L*b-F*B;return N=Math.sqrt(Y*Y+K*K+G*G),N?(N=1/N,Y*=N,K*=N,G*=N):(Y=0,K=0,G=0),this.setValues(B,Y,L,0,b,K,F,0,W,G,D,0,-(B*g+b*y+W*E),-(Y*g+K*y+G*E),-(L*g+F*y+D*E),1)},yawPitchRoll:function(l,v,c){this.zero(),r.zero(),i.zero();var g=this.val,y=r.val,E=i.val,C=Math.sin(c),T=Math.cos(c);return g[10]=1,g[15]=1,g[0]=T,g[1]=C,g[4]=-C,g[5]=T,C=Math.sin(v),T=Math.cos(v),y[0]=1,y[15]=1,y[5]=T,y[10]=T,y[9]=-C,y[6]=C,C=Math.sin(l),T=Math.cos(l),E[5]=1,E[15]=1,E[0]=T,E[2]=-C,E[8]=C,E[10]=T,this.multiplyLocal(r),this.multiplyLocal(i),this},setWorldMatrix:function(l,v,c,g,y){return this.yawPitchRoll(l.y,l.x,l.z),r.scaling(c.x,c.y,c.z),i.xyz(v.x,v.y,v.z),this.multiplyLocal(r),this.multiplyLocal(i),g&&this.multiplyLocal(g),y&&this.multiplyLocal(y),this},multiplyToMat4:function(l,v){var c=this.val,g=l.val,y=c[0],E=c[1],C=c[2],T=c[3],A=c[4],P=c[5],M=c[6],w=c[7],L=c[8],F=c[9],D=c[10],N=c[11],B=c[12],b=c[13],W=c[14],Y=c[15],K=g[0],G=g[1],z=g[2],O=g[3],V=g[4],U=g[5],X=g[6],H=g[7],Q=g[8],$=g[9],k=g[10],J=g[11],Z=g[12],j=g[13],_=g[14],q=g[15];return v.setValues(K*y+G*A+z*L+O*B,G*E+G*P+z*F+O*b,z*C+G*M+z*D+O*W,O*T+G*w+z*N+O*Y,V*y+U*A+X*L+H*B,V*E+U*P+X*F+H*b,V*C+U*M+X*D+H*W,V*T+U*w+X*N+H*Y,Q*y+$*A+k*L+J*B,Q*E+$*P+k*F+J*b,Q*C+$*M+k*D+J*W,Q*T+$*w+k*N+J*Y,Z*y+j*A+_*L+q*B,Z*E+j*P+_*F+q*b,Z*C+j*M+_*D+q*W,Z*T+j*w+_*N+q*Y)},fromRotationXYTranslation:function(l,v,c){var g=v.x,y=v.y,E=v.z,C=Math.sin(l.x),T=Math.cos(l.x),A=Math.sin(l.y),P=Math.cos(l.y),M=g,w=y,L=E,F=-C,D=0-F*A,N=0-T*A,B=F*P,b=T*P;return c||(M=P*g+A*E,w=D*g+T*y+B*E,L=N*g+C*y+b*E),this.setValues(P,D,N,0,0,T,C,0,A,B,b,0,M,w,L,1)},getMaxScaleOnAxis:function(){var l=this.val,v=l[0]*l[0]+l[1]*l[1]+l[2]*l[2],c=l[4]*l[4]+l[5]*l[5]+l[6]*l[6],g=l[8]*l[8]+l[9]*l[9]+l[10]*l[10];return Math.sqrt(Math.max(v,c,g))}}),r=new a,i=new a,n=new m,u=new m,s=new m;f.exports=a},69635:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return Math.min(t+h,m)};f.exports=S},37394:f=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var h=t.length;if(h===0)return 0;t.sort(function(o,a){return o-a});var m=Math.floor(h/2);return h%2===0?(t[m]+t[m-1])/2:t[m]};f.exports=S},17259:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return Math.max(t-h,m)};f.exports=S},61820:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){m===void 0&&(m=h+1);var a=(t-h)/(m-h);return a>1?o!==void 0?(a=(o-t)/(o-m),a<0&&(a=0)):a=1:a<0&&(a=0),a};f.exports=S},75003:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(5341),o=t(72283),a=t(70015),r=1e-6,i=new Int8Array([1,2,0]),n=new Float32Array([0,0,0]),u=new a(1,0,0),s=new a(0,1,0),l=new a,v=new m,c=new h({initialize:function(y,E,C,T){this.onChangeCallback=o,this.set(y,E,C,T)},x:{get:function(){return this._x},set:function(g){this._x=g,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(g){this._y=g,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(g){this._z=g,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(g){this._w=g,this.onChangeCallback(this)}},copy:function(g){return this.set(g)},set:function(g,y,E,C,T){return T===void 0&&(T=!0),typeof g=="object"?(this._x=g.x||0,this._y=g.y||0,this._z=g.z||0,this._w=g.w||0):(this._x=g||0,this._y=y||0,this._z=E||0,this._w=C||0),T&&this.onChangeCallback(this),this},add:function(g){return this._x+=g.x,this._y+=g.y,this._z+=g.z,this._w+=g.w,this.onChangeCallback(this),this},subtract:function(g){return this._x-=g.x,this._y-=g.y,this._z-=g.z,this._w-=g.w,this.onChangeCallback(this),this},scale:function(g){return this._x*=g,this._y*=g,this._z*=g,this._w*=g,this.onChangeCallback(this),this},length:function(){var g=this.x,y=this.y,E=this.z,C=this.w;return Math.sqrt(g*g+y*y+E*E+C*C)},lengthSq:function(){var g=this.x,y=this.y,E=this.z,C=this.w;return g*g+y*y+E*E+C*C},normalize:function(){var g=this.x,y=this.y,E=this.z,C=this.w,T=g*g+y*y+E*E+C*C;return T>0&&(T=1/Math.sqrt(T),this._x=g*T,this._y=y*T,this._z=E*T,this._w=C*T),this.onChangeCallback(this),this},dot:function(g){return this.x*g.x+this.y*g.y+this.z*g.z+this.w*g.w},lerp:function(g,y){y===void 0&&(y=0);var E=this.x,C=this.y,T=this.z,A=this.w;return this.set(E+y*(g.x-E),C+y*(g.y-C),T+y*(g.z-T),A+y*(g.w-A))},rotationTo:function(g,y){var E=g.x*y.x+g.y*y.y+g.z*y.z;return E<-.999999?(l.copy(u).cross(g).length()<r&&l.copy(s).cross(g),l.normalize(),this.setAxisAngle(l,Math.PI)):E>.999999?this.set(0,0,0,1):(l.copy(g).cross(y),this._x=l.x,this._y=l.y,this._z=l.z,this._w=1+E,this.normalize())},setAxes:function(g,y,E){var C=v.val;return C[0]=y.x,C[3]=y.y,C[6]=y.z,C[1]=E.x,C[4]=E.y,C[7]=E.z,C[2]=-g.x,C[5]=-g.y,C[8]=-g.z,this.fromMat3(v).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(g,y){y=y*.5;var E=Math.sin(y);return this.set(E*g.x,E*g.y,E*g.z,Math.cos(y))},multiply:function(g){var y=this.x,E=this.y,C=this.z,T=this.w,A=g.x,P=g.y,M=g.z,w=g.w;return this.set(y*w+T*A+E*M-C*P,E*w+T*P+C*A-y*M,C*w+T*M+y*P-E*A,T*w-y*A-E*P-C*M)},slerp:function(g,y){var E=this.x,C=this.y,T=this.z,A=this.w,P=g.x,M=g.y,w=g.z,L=g.w,F=E*P+C*M+T*w+A*L;F<0&&(F=-F,P=-P,M=-M,w=-w,L=-L);var D=1-y,N=y;if(1-F>r){var B=Math.acos(F),b=Math.sin(B);D=Math.sin((1-y)*B)/b,N=Math.sin(y*B)/b}return this.set(D*E+N*P,D*C+N*M,D*T+N*w,D*A+N*L)},invert:function(){var g=this.x,y=this.y,E=this.z,C=this.w,T=g*g+y*y+E*E+C*C,A=T?1/T:0;return this.set(-g*A,-y*A,-E*A,C*A)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(g){g*=.5;var y=this.x,E=this.y,C=this.z,T=this.w,A=Math.sin(g),P=Math.cos(g);return this.set(y*P+T*A,E*P+C*A,C*P-E*A,T*P-y*A)},rotateY:function(g){g*=.5;var y=this.x,E=this.y,C=this.z,T=this.w,A=Math.sin(g),P=Math.cos(g);return this.set(y*P-C*A,E*P+T*A,C*P+y*A,T*P-E*A)},rotateZ:function(g){g*=.5;var y=this.x,E=this.y,C=this.z,T=this.w,A=Math.sin(g),P=Math.cos(g);return this.set(y*P+E*A,E*P-y*A,C*P+T*A,T*P-C*A)},calculateW:function(){var g=this.x,y=this.y,E=this.z;return this.w=-Math.sqrt(1-g*g-y*y-E*E),this},setFromEuler:function(g,y){var E=g.x/2,C=g.y/2,T=g.z/2,A=Math.cos(E),P=Math.cos(C),M=Math.cos(T),w=Math.sin(E),L=Math.sin(C),F=Math.sin(T);switch(g.order){case"XYZ":{this.set(w*P*M+A*L*F,A*L*M-w*P*F,A*P*F+w*L*M,A*P*M-w*L*F,y);break}case"YXZ":{this.set(w*P*M+A*L*F,A*L*M-w*P*F,A*P*F-w*L*M,A*P*M+w*L*F,y);break}case"ZXY":{this.set(w*P*M-A*L*F,A*L*M+w*P*F,A*P*F+w*L*M,A*P*M-w*L*F,y);break}case"ZYX":{this.set(w*P*M-A*L*F,A*L*M+w*P*F,A*P*F-w*L*M,A*P*M+w*L*F,y);break}case"YZX":{this.set(w*P*M+A*L*F,A*L*M+w*P*F,A*P*F-w*L*M,A*P*M-w*L*F,y);break}case"XZY":{this.set(w*P*M-A*L*F,A*L*M-w*P*F,A*P*F+w*L*M,A*P*M+w*L*F,y);break}}return this},setFromRotationMatrix:function(g){var y=g.val,E=y[0],C=y[4],T=y[8],A=y[1],P=y[5],M=y[9],w=y[2],L=y[6],F=y[10],D=E+P+F,N;return D>0?(N=.5/Math.sqrt(D+1),this.set((L-M)*N,(T-w)*N,(A-C)*N,.25/N)):E>P&&E>F?(N=2*Math.sqrt(1+E-P-F),this.set(.25*N,(C+A)/N,(T+w)/N,(L-M)/N)):P>F?(N=2*Math.sqrt(1+P-E-F),this.set((C+A)/N,.25*N,(M+L)/N,(T-w)/N)):(N=2*Math.sqrt(1+F-E-P),this.set((T+w)/N,(M+L)/N,.25*N,(A-C)/N)),this},fromMat3:function(g){var y=g.val,E=y[0]+y[4]+y[8],C;if(E>0)C=Math.sqrt(E+1),this.w=.5*C,C=.5/C,this._x=(y[7]-y[5])*C,this._y=(y[2]-y[6])*C,this._z=(y[3]-y[1])*C;else{var T=0;y[4]>y[0]&&(T=1),y[8]>y[T*3+T]&&(T=2);var A=i[T],P=i[A];C=Math.sqrt(y[T*3+T]-y[A*3+A]-y[P*3+P]+1),n[T]=.5*C,C=.5/C,n[A]=(y[A*3+T]+y[T*3+A])*C,n[P]=(y[P*3+T]+y[T*3+P])*C,this._x=n[0],this._y=n[1],this._z=n[2],this._w=(y[P*3+A]-y[A*3+P])*C}return this.onChangeCallback(this),this}});f.exports=c},23701:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(83392),m=function(o){return o*h.RAD_TO_DEG};f.exports=m},16906:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){h===void 0&&(h=1);var m=Math.random()*2*Math.PI;return t.x=Math.cos(m)*h,t.y=Math.sin(m)*h,t};f.exports=S},52417:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){h===void 0&&(h=1);var m=Math.random()*2*Math.PI,o=Math.random()*2-1,a=Math.sqrt(1-o*o)*h;return t.x=Math.cos(m)*a,t.y=Math.sin(m)*a,t.z=o*h,t};f.exports=S},17915:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return h===void 0&&(h=1),t.x=(Math.random()*2-1)*h,t.y=(Math.random()*2-1)*h,t.z=(Math.random()*2-1)*h,t.w=(Math.random()*2-1)*h,t};f.exports=S},52257:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){var m=t.x,o=t.y;return t.x=m*Math.cos(h)-o*Math.sin(h),t.y=m*Math.sin(h)+o*Math.cos(h),t};f.exports=S},2386:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){var a=Math.cos(o),r=Math.sin(o),i=t.x-h,n=t.y-m;return t.x=i*a-n*r+h,t.y=i*r+n*a+m,t};f.exports=S},72395:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o,a){var r=o+Math.atan2(t.y-m,t.x-h);return t.x=h+a*Math.cos(r),t.y=m+a*Math.sin(r),t};f.exports=S},41061:f=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o,a){return t.x=h+a*Math.cos(o),t.y=m+a*Math.sin(o),t};f.exports=S},93709:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(70015),m=t(16650),o=t(75003),a=new m,r=new o,i=new h,n=function(u,s,l){return r.setAxisAngle(s,l),a.fromRotationTranslation(r,i.set(0,0,0)),u.transformMat4(a)};f.exports=n},67233:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t>0?Math.ceil(t):Math.floor(t)};f.exports=S},64333:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){h===void 0&&(h=0),m===void 0&&(m=10);var o=Math.pow(m,-h);return Math.round(t*o)/o};f.exports=S},59533:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){h===void 0&&(h=1),m===void 0&&(m=1),o===void 0&&(o=1),o*=Math.PI/t;for(var a=[],r=[],i=0;i<t;i++)m-=h*o,h+=m*o,a[i]=m,r[i]=h;return{sin:r,cos:a,length:t}};f.exports=S},5514:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return t<=h?0:t>=m?1:(t=(t-h)/(m-h),t*t*(3-2*t))};f.exports=S},87736:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return t=Math.max(0,Math.min(1,(t-h)/(m-h))),t*t*t*(t*(t*6-15)+10)};f.exports=S},55805:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(93736),m=function(o,a,r,i){i===void 0&&(i=new h);var n=0,u=0,s=a*r;return o>0&&o<=s&&(o>a-1?(u=Math.floor(o/a),n=o-u*a):n=o),i.set(n,u)};f.exports=m},64462:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(93736),m=function(o,a,r,i,n,u,s,l){l===void 0&&(l=new h);var v=Math.sin(n),c=Math.cos(n),g=c*u,y=v*u,E=-v*s,C=c*s,T=1/(g*C+E*-y);return l.x=C*T*o+-E*T*a+(i*E-r*C)*T,l.y=g*T*a+-y*T*o+(-i*g+r*y)*T,l};f.exports=m},93736:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(88456),o=new h({initialize:function(r,i){this.x=0,this.y=0,typeof r=="object"?(this.x=r.x||0,this.y=r.y||0):(i===void 0&&(i=r),this.x=r||0,this.y=i||0)},clone:function(){return new o(this.x,this.y)},copy:function(a){return this.x=a.x||0,this.y=a.y||0,this},setFromObject:function(a){return this.x=a.x||0,this.y=a.y||0,this},set:function(a,r){return r===void 0&&(r=a),this.x=a,this.y=r,this},setTo:function(a,r){return this.set(a,r)},setToPolar:function(a,r){return r==null&&(r=1),this.x=Math.cos(a)*r,this.y=Math.sin(a)*r,this},equals:function(a){return this.x===a.x&&this.y===a.y},fuzzyEquals:function(a,r){return m(this.x,a.x,r)&&m(this.y,a.y,r)},angle:function(){var a=Math.atan2(this.y,this.x);return a<0&&(a+=2*Math.PI),a},setAngle:function(a){return this.setToPolar(a,this.length())},add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},scale:function(a){return isFinite(a)?(this.x*=a,this.y*=a):(this.x=0,this.y=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(a){var r=a.x-this.x,i=a.y-this.y;return Math.sqrt(r*r+i*i)},distanceSq:function(a){var r=a.x-this.x,i=a.y-this.y;return r*r+i*i},length:function(){var a=this.x,r=this.y;return Math.sqrt(a*a+r*r)},setLength:function(a){return this.normalize().scale(a)},lengthSq:function(){var a=this.x,r=this.y;return a*a+r*r},normalize:function(){var a=this.x,r=this.y,i=a*a+r*r;return i>0&&(i=1/Math.sqrt(i),this.x=a*i,this.y=r*i),this},normalizeRightHand:function(){var a=this.x;return this.x=this.y*-1,this.y=a,this},normalizeLeftHand:function(){var a=this.x;return this.x=this.y,this.y=a*-1,this},dot:function(a){return this.x*a.x+this.y*a.y},cross:function(a){return this.x*a.y-this.y*a.x},lerp:function(a,r){r===void 0&&(r=0);var i=this.x,n=this.y;return this.x=i+r*(a.x-i),this.y=n+r*(a.y-n),this},transformMat3:function(a){var r=this.x,i=this.y,n=a.val;return this.x=n[0]*r+n[3]*i+n[6],this.y=n[1]*r+n[4]*i+n[7],this},transformMat4:function(a){var r=this.x,i=this.y,n=a.val;return this.x=n[0]*r+n[4]*i+n[12],this.y=n[1]*r+n[5]*i+n[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(a){var r=this.length();return r&&r>a&&this.scale(a/r),this},reflect:function(a){return a=a.clone().normalize(),this.subtract(a.scale(2*this.dot(a)))},mirror:function(a){return this.reflect(a).negate()},rotate:function(a){var r=Math.cos(a),i=Math.sin(a);return this.set(r*this.x-i*this.y,i*this.x+r*this.y)},project:function(a){var r=this.dot(a)/a.dot(a);return this.copy(a).scale(r)}});o.ZERO=new o,o.RIGHT=new o(1,0),o.LEFT=new o(-1,0),o.UP=new o(0,-1),o.DOWN=new o(0,1),o.ONE=new o(1,1),f.exports=o},70015:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=new h({initialize:function(a,r,i){this.x=0,this.y=0,this.z=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0):(this.x=a||0,this.y=r||0,this.z=i||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(o){return this.x=Math.min(this.x,o.x),this.y=Math.min(this.y,o.y),this.z=Math.min(this.z,o.z),this},max:function(o){return this.x=Math.max(this.x,o.x),this.y=Math.max(this.y,o.y),this.z=Math.max(this.z,o.z),this},clone:function(){return new m(this.x,this.y,this.z)},addVectors:function(o,a){return this.x=o.x+a.x,this.y=o.y+a.y,this.z=o.z+a.z,this},crossVectors:function(o,a){var r=o.x,i=o.y,n=o.z,u=a.x,s=a.y,l=a.z;return this.x=i*l-n*s,this.y=n*u-r*l,this.z=r*s-i*u,this},equals:function(o){return this.x===o.x&&this.y===o.y&&this.z===o.z},copy:function(o){return this.x=o.x,this.y=o.y,this.z=o.z||0,this},set:function(o,a,r){return typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0):(this.x=o||0,this.y=a||0,this.z=r||0),this},setFromMatrixPosition:function(o){return this.fromArray(o.val,12)},setFromMatrixColumn:function(o,a){return this.fromArray(o.val,a*4)},fromArray:function(o,a){return a===void 0&&(a=0),this.x=o[a],this.y=o[a+1],this.z=o[a+2],this},add:function(o){return this.x+=o.x,this.y+=o.y,this.z+=o.z||0,this},addScalar:function(o){return this.x+=o,this.y+=o,this.z+=o,this},addScale:function(o,a){return this.x+=o.x*a,this.y+=o.y*a,this.z+=o.z*a||0,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this.z-=o.z||0,this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this.z*=o.z||1,this},scale:function(o){return isFinite(o)?(this.x*=o,this.y*=o,this.z*=o):(this.x=0,this.y=0,this.z=0),this},divide:function(o){return this.x/=o.x,this.y/=o.y,this.z/=o.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(o){var a=o.x-this.x,r=o.y-this.y,i=o.z-this.z||0;return Math.sqrt(a*a+r*r+i*i)},distanceSq:function(o){var a=o.x-this.x,r=o.y-this.y,i=o.z-this.z||0;return a*a+r*r+i*i},length:function(){var o=this.x,a=this.y,r=this.z;return Math.sqrt(o*o+a*a+r*r)},lengthSq:function(){var o=this.x,a=this.y,r=this.z;return o*o+a*a+r*r},normalize:function(){var o=this.x,a=this.y,r=this.z,i=o*o+a*a+r*r;return i>0&&(i=1/Math.sqrt(i),this.x=o*i,this.y=a*i,this.z=r*i),this},dot:function(o){return this.x*o.x+this.y*o.y+this.z*o.z},cross:function(o){var a=this.x,r=this.y,i=this.z,n=o.x,u=o.y,s=o.z;return this.x=r*s-i*u,this.y=i*n-a*s,this.z=a*u-r*n,this},lerp:function(o,a){a===void 0&&(a=0);var r=this.x,i=this.y,n=this.z;return this.x=r+a*(o.x-r),this.y=i+a*(o.y-i),this.z=n+a*(o.z-n),this},applyMatrix3:function(o){var a=this.x,r=this.y,i=this.z,n=o.val;return this.x=n[0]*a+n[3]*r+n[6]*i,this.y=n[1]*a+n[4]*r+n[7]*i,this.z=n[2]*a+n[5]*r+n[8]*i,this},applyMatrix4:function(o){var a=this.x,r=this.y,i=this.z,n=o.val,u=1/(n[3]*a+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*a+n[4]*r+n[8]*i+n[12])*u,this.y=(n[1]*a+n[5]*r+n[9]*i+n[13])*u,this.z=(n[2]*a+n[6]*r+n[10]*i+n[14])*u,this},transformMat3:function(o){var a=this.x,r=this.y,i=this.z,n=o.val;return this.x=a*n[0]+r*n[3]+i*n[6],this.y=a*n[1]+r*n[4]+i*n[7],this.z=a*n[2]+r*n[5]+i*n[8],this},transformMat4:function(o){var a=this.x,r=this.y,i=this.z,n=o.val;return this.x=n[0]*a+n[4]*r+n[8]*i+n[12],this.y=n[1]*a+n[5]*r+n[9]*i+n[13],this.z=n[2]*a+n[6]*r+n[10]*i+n[14],this},transformCoordinates:function(o){var a=this.x,r=this.y,i=this.z,n=o.val,u=a*n[0]+r*n[4]+i*n[8]+n[12],s=a*n[1]+r*n[5]+i*n[9]+n[13],l=a*n[2]+r*n[6]+i*n[10]+n[14],v=a*n[3]+r*n[7]+i*n[11]+n[15];return this.x=u/v,this.y=s/v,this.z=l/v,this},transformQuat:function(o){var a=this.x,r=this.y,i=this.z,n=o.x,u=o.y,s=o.z,l=o.w,v=l*a+u*i-s*r,c=l*r+s*a-n*i,g=l*i+n*r-u*a,y=-n*a-u*r-s*i;return this.x=v*l+y*-n+c*-s-g*-u,this.y=c*l+y*-u+g*-n-v*-s,this.z=g*l+y*-s+v*-u-c*-n,this},project:function(o){var a=this.x,r=this.y,i=this.z,n=o.val,u=n[0],s=n[1],l=n[2],v=n[3],c=n[4],g=n[5],y=n[6],E=n[7],C=n[8],T=n[9],A=n[10],P=n[11],M=n[12],w=n[13],L=n[14],F=n[15],D=1/(a*v+r*E+i*P+F);return this.x=(a*u+r*c+i*C+M)*D,this.y=(a*s+r*g+i*T+w)*D,this.z=(a*l+r*y+i*A+L)*D,this},projectViewMatrix:function(o,a){return this.applyMatrix4(o).applyMatrix4(a)},unprojectViewMatrix:function(o,a){return this.applyMatrix4(o).applyMatrix4(a)},unproject:function(o,a){var r=o.x,i=o.y,n=o.z,u=o.w,s=this.x-r,l=u-this.y-1-i,v=this.z;return this.x=2*s/n-1,this.y=2*l/u-1,this.z=2*v-1,this.project(a)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});m.ZERO=new m,m.RIGHT=new m(1,0,0),m.LEFT=new m(-1,0,0),m.UP=new m(0,-1,0),m.DOWN=new m(0,1,0),m.FORWARD=new m(0,0,1),m.BACK=new m(0,0,-1),m.ONE=new m(1,1,1),f.exports=m},51729:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=new h({initialize:function(a,r,i,n){this.x=0,this.y=0,this.z=0,this.w=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this.w=a.w||0):(this.x=a||0,this.y=r||0,this.z=i||0,this.w=n||0)},clone:function(){return new m(this.x,this.y,this.z,this.w)},copy:function(o){return this.x=o.x,this.y=o.y,this.z=o.z||0,this.w=o.w||0,this},equals:function(o){return this.x===o.x&&this.y===o.y&&this.z===o.z&&this.w===o.w},set:function(o,a,r,i){return typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0,this.w=o.w||0):(this.x=o||0,this.y=a||0,this.z=r||0,this.w=i||0),this},add:function(o){return this.x+=o.x,this.y+=o.y,this.z+=o.z||0,this.w+=o.w||0,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this.z-=o.z||0,this.w-=o.w||0,this},scale:function(o){return this.x*=o,this.y*=o,this.z*=o,this.w*=o,this},length:function(){var o=this.x,a=this.y,r=this.z,i=this.w;return Math.sqrt(o*o+a*a+r*r+i*i)},lengthSq:function(){var o=this.x,a=this.y,r=this.z,i=this.w;return o*o+a*a+r*r+i*i},normalize:function(){var o=this.x,a=this.y,r=this.z,i=this.w,n=o*o+a*a+r*r+i*i;return n>0&&(n=1/Math.sqrt(n),this.x=o*n,this.y=a*n,this.z=r*n,this.w=i*n),this},dot:function(o){return this.x*o.x+this.y*o.y+this.z*o.z+this.w*o.w},lerp:function(o,a){a===void 0&&(a=0);var r=this.x,i=this.y,n=this.z,u=this.w;return this.x=r+a*(o.x-r),this.y=i+a*(o.y-i),this.z=n+a*(o.z-n),this.w=u+a*(o.w-u),this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this.z*=o.z||1,this.w*=o.w||1,this},divide:function(o){return this.x/=o.x,this.y/=o.y,this.z/=o.z||1,this.w/=o.w||1,this},distance:function(o){var a=o.x-this.x,r=o.y-this.y,i=o.z-this.z||0,n=o.w-this.w||0;return Math.sqrt(a*a+r*r+i*i+n*n)},distanceSq:function(o){var a=o.x-this.x,r=o.y-this.y,i=o.z-this.z||0,n=o.w-this.w||0;return a*a+r*r+i*i+n*n},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(o){var a=this.x,r=this.y,i=this.z,n=this.w,u=o.val;return this.x=u[0]*a+u[4]*r+u[8]*i+u[12]*n,this.y=u[1]*a+u[5]*r+u[9]*i+u[13]*n,this.z=u[2]*a+u[6]*r+u[10]*i+u[14]*n,this.w=u[3]*a+u[7]*r+u[11]*i+u[15]*n,this},transformQuat:function(o){var a=this.x,r=this.y,i=this.z,n=o.x,u=o.y,s=o.z,l=o.w,v=l*a+u*i-s*r,c=l*r+s*a-n*i,g=l*i+n*r-u*a,y=-n*a-u*r-s*i;return this.x=v*l+y*-n+c*-s-g*-u,this.y=c*l+y*-u+g*-n-v*-s,this.z=g*l+y*-s+v*-u-c*-n,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});m.prototype.sub=m.prototype.subtract,m.prototype.mul=m.prototype.multiply,m.prototype.div=m.prototype.divide,m.prototype.dist=m.prototype.distance,m.prototype.distSq=m.prototype.distanceSq,m.prototype.len=m.prototype.length,m.prototype.lenSq=m.prototype.lengthSq,f.exports=m},9557:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return Math.abs(t-h)<=m};f.exports=S},1071:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){if(t>=h&&t<=m)return t;var o=m-h;return h+((t-h)%o+o)%o};f.exports=S},90447:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){return Math.atan2(o-h,m-t)};f.exports=S},94240:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return Math.atan2(h.y-t.y,h.x-t.x)};f.exports=S},84066:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return Math.atan2(h.x-t.x,h.y-t.y)};f.exports=S},9678:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){return Math.atan2(m-t,o-h)};f.exports=S},76861:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(83392),m=function(o){return o>Math.PI&&(o-=h.PI2),Math.abs(((o+h.TAU)%h.PI2-h.PI2)%h.PI2)};f.exports=m},37570:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t=t%(2*Math.PI),t>=0?t:t+2*Math.PI};f.exports=S},87597:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61616),m=function(){return h(-Math.PI,Math.PI)};f.exports=m},74493:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61616),m=function(){return h(-180,180)};f.exports=m},19049:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(37570),m=function(o){return h(o+Math.PI)};f.exports=m},90612:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(83392),m=function(o,a,r){return r===void 0&&(r=.05),o===a||(Math.abs(a-o)<=r||Math.abs(a-o)>=h.PI2-r?o=a:(Math.abs(a-o)>Math.PI&&(a<o?a+=h.PI2:a-=h.PI2),a>o?o+=r:a<o&&(o-=r))),o};f.exports=m},93954:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){var m=h-t;if(m===0)return 0;var o=Math.floor((m- -180)/360);return m-o*360};f.exports=S},35786:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(1071),m=function(o){return h(o,-Math.PI,Math.PI)};f.exports=m},62138:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(1071),m=function(o){return h(o,-180,180)};f.exports=m},22153:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Between:t(90447),BetweenPoints:t(94240),BetweenPointsY:t(84066),BetweenY:t(9678),CounterClockwise:t(76861),Normalize:t(37570),Random:t(87597),RandomDegrees:t(74493),Reverse:t(19049),RotateTo:t(90612),ShortestBetween:t(93954),Wrap:t(35786),WrapDegrees:t(62138)}},83392:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};f.exports=S},53996:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){var a=t-m,r=h-o;return Math.sqrt(a*a+r*r)};f.exports=S},92951:f=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){var m=t.x-h.x,o=t.y-h.y;return Math.sqrt(m*m+o*o)};f.exports=S},12161:f=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){var m=t.x-h.x,o=t.y-h.y;return m*m+o*o};f.exports=S},38057:f=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){return Math.max(Math.abs(t-m),Math.abs(h-o))};f.exports=S},33297:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o,a){return a===void 0&&(a=2),Math.sqrt(Math.pow(m-t,a)+Math.pow(o-h,a))};f.exports=S},90366:f=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){return Math.abs(t-m)+Math.abs(h-o)};f.exports=S},35032:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){var a=t-m,r=h-o;return a*a+r*r};f.exports=S},10130:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Between:t(53996),BetweenPoints:t(92951),BetweenPointsSquared:t(12161),Chebyshev:t(38057),Power:t(33297),Snake:t(90366),Squared:t(35032)}},35060:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(25265),m=t(57428),o=t(73214),a=t(71778),r=t(36468),i=t(88258),n=t(52910),u=t(67799),s=t(74083),l=t(92284),v=t(28035),c=t(8754);f.exports={Power0:n,Power1:u.Out,Power2:a.Out,Power3:s.Out,Power4:l.Out,Linear:n,Quad:u.Out,Cubic:a.Out,Quart:s.Out,Quint:l.Out,Sine:v.Out,Expo:i.Out,Circ:o.Out,Elastic:r.Out,Back:h.Out,Bounce:m.Out,Stepped:c,"Quad.easeIn":u.In,"Cubic.easeIn":a.In,"Quart.easeIn":s.In,"Quint.easeIn":l.In,"Sine.easeIn":v.In,"Expo.easeIn":i.In,"Circ.easeIn":o.In,"Elastic.easeIn":r.In,"Back.easeIn":h.In,"Bounce.easeIn":m.In,"Quad.easeOut":u.Out,"Cubic.easeOut":a.Out,"Quart.easeOut":s.Out,"Quint.easeOut":l.Out,"Sine.easeOut":v.Out,"Expo.easeOut":i.Out,"Circ.easeOut":o.Out,"Elastic.easeOut":r.Out,"Back.easeOut":h.Out,"Bounce.easeOut":m.Out,"Quad.easeInOut":u.InOut,"Cubic.easeInOut":a.InOut,"Quart.easeInOut":s.InOut,"Quint.easeInOut":l.InOut,"Sine.easeInOut":v.InOut,"Expo.easeInOut":i.InOut,"Circ.easeInOut":o.InOut,"Elastic.easeInOut":r.InOut,"Back.easeInOut":h.InOut,"Bounce.easeInOut":m.InOut}},25860:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return h===void 0&&(h=1.70158),t*t*((h+1)*t-h)};f.exports=S},45264:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){h===void 0&&(h=1.70158);var m=h*1.525;return(t*=2)<1?.5*(t*t*((m+1)*t-m)):.5*((t-=2)*t*((m+1)*t+m)+2)};f.exports=S},36699:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return h===void 0&&(h=1.70158),--t*t*((h+1)*t+h)+1};f.exports=S},25265:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={In:t(25860),Out:t(36699),InOut:t(45264)}},62191:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t=1-t,t<.36363636363636365?1-7.5625*t*t:t<.7272727272727273?1-(7.5625*(t-=.5454545454545454)*t+.75):t<.9090909090909091?1-(7.5625*(t-=.8181818181818182)*t+.9375):1-(7.5625*(t-=.9545454545454546)*t+.984375)};f.exports=S},24799:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var h=!1;return t<.5?(t=1-t*2,h=!0):t=t*2-1,t<.36363636363636365?t=7.5625*t*t:t<.7272727272727273?t=7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?t=7.5625*(t-=.8181818181818182)*t+.9375:t=7.5625*(t-=.9545454545454546)*t+.984375,h?(1-t)*.5:t*.5+.5};f.exports=S},60819:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375};f.exports=S},57428:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={In:t(62191),Out:t(60819),InOut:t(24799)}},86855:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return 1-Math.sqrt(1-t*t)};f.exports=S},7280:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)};f.exports=S},18058:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return Math.sqrt(1- --t*t)};f.exports=S},73214:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={In:t(86855),Out:t(18058),InOut:t(7280)}},91532:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t*t*t};f.exports=S},63180:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)};f.exports=S},16518:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return--t*t*t+1};f.exports=S},71778:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={In:t(91532),Out:t(16518),InOut:t(63180)}},24729:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){if(h===void 0&&(h=.1),m===void 0&&(m=.1),t===0)return 0;if(t===1)return 1;var o=m/4;return h<1?h=1:o=m*Math.asin(1/h)/(2*Math.PI),-(h*Math.pow(2,10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/m))};f.exports=S},50325:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){if(h===void 0&&(h=.1),m===void 0&&(m=.1),t===0)return 0;if(t===1)return 1;var o=m/4;return h<1?h=1:o=m*Math.asin(1/h)/(2*Math.PI),(t*=2)<1?-.5*(h*Math.pow(2,10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/m)):h*Math.pow(2,-10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/m)*.5+1};f.exports=S},84074:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){if(h===void 0&&(h=.1),m===void 0&&(m=.1),t===0)return 0;if(t===1)return 1;var o=m/4;return h<1?h=1:o=m*Math.asin(1/h)/(2*Math.PI),h*Math.pow(2,-10*t)*Math.sin((t-o)*(2*Math.PI)/m)+1};f.exports=S},36468:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={In:t(24729),Out:t(84074),InOut:t(50325)}},95638:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return Math.pow(2,10*(t-1))-.001};f.exports=S},10357:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))};f.exports=S},14894:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return 1-Math.pow(2,-10*t)};f.exports=S},88258:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={In:t(95638),Out:t(14894),InOut:t(10357)}},33063:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Back:t(25265),Bounce:t(57428),Circular:t(73214),Cubic:t(71778),Elastic:t(36468),Expo:t(88258),Linear:t(52910),Quadratic:t(67799),Quartic:t(74083),Quintic:t(92284),Sine:t(28035),Stepped:t(8754)}},43927:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t};f.exports=S},52910:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports=t(43927)},77471:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t*t};f.exports=S},83863:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)};f.exports=S},44383:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t*(2-t)};f.exports=S},67799:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={In:t(77471),Out:t(44383),InOut:t(83863)}},48311:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t*t*t*t};f.exports=S},55248:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)};f.exports=S},23135:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return 1- --t*t*t*t};f.exports=S},74083:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={In:t(48311),Out:t(23135),InOut:t(55248)}},7313:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t*t*t*t*t};f.exports=S},98759:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)};f.exports=S},26670:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return--t*t*t*t*t+1};f.exports=S},92284:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={In:t(7313),Out:t(26670),InOut:t(98759)}},52929:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t===0?0:t===1?1:1-Math.cos(t*Math.PI/2)};f.exports=S},66333:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t===0?0:t===1?1:.5*(1-Math.cos(Math.PI*t))};f.exports=S},37255:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t===0?0:t===1?1:Math.sin(t*Math.PI/2)};f.exports=S},28035:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={In:t(52929),Out:t(37255),InOut:t(66333)}},52770:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return h===void 0&&(h=1),t<=0?0:t>=1?1:((h*t|0)+1)*(1/h)};f.exports=S},8754:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports=t(52770)},17247:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return h===void 0&&(h=1e-4),Math.ceil(t-h)};f.exports=S},88456:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return m===void 0&&(m=1e-4),Math.abs(t-h)<m};f.exports=S},61824:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return h===void 0&&(h=1e-4),Math.floor(t+h)};f.exports=S},41935:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return m===void 0&&(m=1e-4),t>h-m};f.exports=S},54726:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return m===void 0&&(m=1e-4),t<h+m};f.exports=S},52778:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Ceil:t(17247),Equal:t(88456),Floor:t(61824),GreaterThan:t(41935),LessThan:t(54726)}},5923:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(83392),m=t(98611),o={Angle:t(22153),Distance:t(10130),Easing:t(33063),Fuzzy:t(52778),Interpolation:t(48528),Pow2:t(73773),Snap:t(23679),RandomDataGenerator:t(81429),Average:t(26042),Bernstein:t(22824),Between:t(17489),CatmullRom:t(14976),CeilTo:t(89129),Clamp:t(82897),DegToRad:t(75606),Difference:t(767),Euler:t(9849),Factorial:t(8034),FloatBetween:t(61616),FloorTo:t(60679),FromPercent:t(91806),GetSpeed:t(79366),IsEven:t(43776),IsEvenStrict:t(58442),Linear:t(42798),LinearXY:t(61072),MaxAdd:t(69635),Median:t(37394),MinSub:t(17259),Percent:t(61820),RadToDeg:t(23701),RandomXY:t(16906),RandomXYZ:t(52417),RandomXYZW:t(17915),Rotate:t(52257),RotateAround:t(2386),RotateAroundDistance:t(72395),RotateTo:t(41061),RoundAwayFromZero:t(67233),RoundTo:t(64333),SinCosTableGenerator:t(59533),SmootherStep:t(87736),SmoothStep:t(5514),ToXY:t(55805),TransformXY:t(64462),Within:t(9557),Wrap:t(1071),Vector2:t(93736),Vector3:t(70015),Vector4:t(51729),Matrix3:t(5341),Matrix4:t(16650),Quaternion:t(75003),RotateVec3:t(93709)};o=m(!1,o,h),f.exports=o},63210:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(22824),m=function(o,a){for(var r=0,i=o.length-1,n=0;n<=i;n++)r+=Math.pow(1-a,i-n)*Math.pow(a,n)*o[n]*h(i,n);return r};f.exports=m},88332:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(14976),m=function(o,a){var r=o.length-1,i=r*a,n=Math.floor(i);return o[0]===o[r]?(a<0&&(n=Math.floor(i=r*(1+a))),h(i-n,o[(n-1+r)%r],o[n],o[(n+1)%r],o[(n+2)%r])):a<0?o[0]-(h(-i,o[0],o[0],o[1],o[1])-o[0]):a>1?o[r]-(h(i-r,o[r],o[r],o[r-1],o[r-1])-o[r]):h(i-n,o[n?n-1:0],o[n],o[r<n+1?r:n+1],o[r<n+2?r:n+2])};f.exports=m},34631:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(a,r){var i=1-a;return i*i*i*r}function t(a,r){var i=1-a;return 3*i*i*a*r}function h(a,r){return 3*(1-a)*a*a*r}function m(a,r){return a*a*a*r}var o=function(a,r,i,n,u){return S(a,r)+t(a,i)+h(a,n)+m(a,u)};f.exports=o},47614:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(42798),m=function(o,a){var r=o.length-1,i=r*a,n=Math.floor(i);return a<0?h(o[0],o[1],i):a>1?h(o[r],o[r-1],r-i):h(o[n],o[n+1>r?r:n+1],i-n)};f.exports=m},16252:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(o,a){var r=1-o;return r*r*a}function t(o,a){return 2*(1-o)*o*a}function h(o,a){return o*o*a}var m=function(o,a,r,i){return S(o,a)+t(o,r)+h(o,i)};f.exports=m},44521:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(5514),m=function(o,a,r){return a+(r-a)*h(o,0,1)};f.exports=m},45507:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(87736),m=function(o,a,r){return a+(r-a)*h(o,0,1)};f.exports=m},48528:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Bezier:t(63210),CatmullRom:t(88332),CubicBezier:t(34631),Linear:t(47614),QuadraticBezier:t(16252),SmoothStep:t(44521),SmootherStep:t(45507)}},3504:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var h=Math.log(t)/.6931471805599453;return 1<<Math.ceil(h)};f.exports=S},28621:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t>0&&(t&t-1)===0&&h>0&&(h&h-1)===0};f.exports=S},2018:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t>0&&(t&t-1)===0};f.exports=S},73773:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={GetNext:t(3504),IsSize:t(28621),IsValue:t(2018)}},81429:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=new h({initialize:function(a){a===void 0&&(a=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],a&&this.init(a)},rnd:function(){var o=2091639*this.s0+this.c*23283064365386963e-26;return this.c=o|0,this.s0=this.s1,this.s1=this.s2,this.s2=o-this.c,this.s2},hash:function(o){var a,r=this.n;o=o.toString();for(var i=0;i<o.length;i++)r+=o.charCodeAt(i),a=.02519603282416938*r,r=a>>>0,a-=r,a*=r,r=a>>>0,a-=r,r+=a*4294967296;return this.n=r,(r>>>0)*23283064365386963e-26},init:function(o){typeof o=="string"?this.state(o):this.sow(o)},sow:function(o){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!o)for(var a=0;a<o.length&&o[a]!=null;a++){var r=o[a];this.s0-=this.hash(r),this.s0+=~~(this.s0<0),this.s1-=this.hash(r),this.s1+=~~(this.s1<0),this.s2-=this.hash(r),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(o,a){return Math.floor(this.realInRange(0,a-o+1)+o)},between:function(o,a){return Math.floor(this.realInRange(0,a-o+1)+o)},realInRange:function(o,a){return this.frac()*(a-o)+o},normal:function(){return 1-2*this.frac()},uuid:function(){var o="",a="";for(a=o="";o++<36;a+=~o%5|o*3&4?(o^15?8^this.frac()*(o^20?16:4):4).toString(16):"-");return a},pick:function(o){return o[this.integerInRange(0,o.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(o){return o[~~(Math.pow(this.frac(),2)*(o.length-1)+.5)]},timestamp:function(o,a){return this.realInRange(o||9466848e5,a||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(o){return typeof o=="string"&&o.match(/^!rnd/)&&(o=o.split(","),this.c=parseFloat(o[1]),this.s0=parseFloat(o[2]),this.s1=parseFloat(o[3]),this.s2=parseFloat(o[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(o){for(var a=o.length-1,r=a;r>0;r--){var i=Math.floor(this.frac()*(r+1)),n=o[i];o[i]=o[r],o[r]=n}return o}});f.exports=m},82127:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){return m===void 0&&(m=0),h===0?t:(t-=m,t=h*Math.ceil(t/h),o?(m+t)/h:m+t)};f.exports=S},84314:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){return m===void 0&&(m=0),h===0?t:(t-=m,t=h*Math.floor(t/h),o?(m+t)/h:m+t)};f.exports=S},88462:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){return m===void 0&&(m=0),h===0?t:(t-=m,t=h*Math.round(t/h),o?(m+t)/h:m+t)};f.exports=S},23679:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Ceil:t(82127),Floor:t(84314),To:t(88462)}},92491:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t(75205);var h=t(86459),m=t(98611),o={Actions:t(83979),Animations:t(13517),BlendModes:t(95723),Cache:t(45820),Cameras:t(44143),Core:t(80293),Class:t(56694),Create:t(84106),Curves:t(73962),Data:t(1999),Display:t(24816),DOM:t(3590),Events:t(95146),FX:t(96910),Game:t(15213),GameObjects:t(48013),Geom:t(84068),Input:t(20873),Loader:t(95695),Math:t(5923),Physics:t(53954),Plugins:t(45615),Renderer:t(42069),Scale:t(86754),ScaleModes:t(27394),Scene:t(87157),Scenes:t(20436),Structs:t(20010),Textures:t(87499),Tilemaps:t(52678),Time:t(97121),Tweens:t(75193),Utils:t(22178)};o.Sound=t(56751),o=m(!1,o,h),f.exports=o,t.g.Phaser=o},62832:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(7864),o=t(1539),a=new h({Extends:o,Mixins:[m.Acceleration,m.Angular,m.Bounce,m.Debug,m.Drag,m.Enable,m.Friction,m.Gravity,m.Immovable,m.Mass,m.Pushable,m.Size,m.Velocity],initialize:function(i,n,u,s,l){o.call(this,i,n,u,s,l),this.body=null}});f.exports=a},66150:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(75606),o=t(53996),a=t(35032),r=t(99523),i=t(72632),n=t(30657),u=t(2732),s=t(15147),l=t(91963),v=t(7599),c=t(93736),g=t(85233),y=new h({initialize:function(C){this.scene=C,this.systems=C.sys,this.config=this.getConfig(),this.world,this.add,C.sys.events.once(v.BOOT,this.boot,this),C.sys.events.on(v.START,this.start,this)},boot:function(){this.world=new g(this.scene,this.config),this.add=new r(this.world),this.systems.events.once(v.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new g(this.scene,this.config),this.add=new r(this.world));var E=this.systems.events;i(this.config,"customUpdate",!1)||E.on(v.UPDATE,this.world.update,this.world),E.on(v.POST_UPDATE,this.world.postUpdate,this.world),E.once(v.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(v.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(v.UPDATE,this.world.update,this.world)},getConfig:function(){var E=this.systems.game.config.physics,C=this.systems.settings.physics,T=n(i(C,"arcade",{}),i(E,"arcade",{}));return T},overlap:function(E,C,T,A,P){return T===void 0&&(T=null),A===void 0&&(A=null),P===void 0&&(P=T),this.world.collideObjects(E,C,T,A,P,!0)},collide:function(E,C,T,A,P){return T===void 0&&(T=null),A===void 0&&(A=null),P===void 0&&(P=T),this.world.collideObjects(E,C,T,A,P,!1)},collideTiles:function(E,C,T,A,P){return this.world.collideTiles(E,C,T,A,P)},overlapTiles:function(E,C,T,A,P){return this.world.overlapTiles(E,C,T,A,P)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(E,C,T,A,P,M){A===void 0&&(A=60);var w=Math.atan2(T-E.y,C-E.x);return E.body.acceleration.setToPolar(w,A),P!==void 0&&M!==void 0&&E.body.maxVelocity.set(P,M),w},accelerateToObject:function(E,C,T,A,P){return this.accelerateTo(E,C.x,C.y,T,A,P)},closest:function(E,C){C||(C=this.world.bodies.entries);for(var T=Number.MAX_VALUE,A=null,P=E.x,M=E.y,w=C.length,L=0;L<w;L++){var F=C[L],D=F.body||F;if(!(E===F||E===D||E===D.gameObject||E===D.center)){var N=a(P,M,D.center.x,D.center.y);N<T&&(A=F,T=N)}}return A},furthest:function(E,C){C||(C=this.world.bodies.entries);for(var T=-1,A=null,P=E.x,M=E.y,w=C.length,L=0;L<w;L++){var F=C[L],D=F.body||F;if(!(E===F||E===D||E===D.gameObject||E===D.center)){var N=a(P,M,D.center.x,D.center.y);N>T&&(A=F,T=N)}}return A},moveTo:function(E,C,T,A,P){A===void 0&&(A=60),P===void 0&&(P=0);var M=Math.atan2(T-E.y,C-E.x);return P>0&&(A=o(E.x,E.y,C,T)/(P/1e3)),E.body.velocity.setToPolar(M,A),M},moveToObject:function(E,C,T,A){return this.moveTo(E,C.x,C.y,T,A)},velocityFromAngle:function(E,C,T){return C===void 0&&(C=60),T===void 0&&(T=new c),T.setToPolar(m(E),C)},velocityFromRotation:function(E,C,T){return C===void 0&&(C=60),T===void 0&&(T=new c),T.setToPolar(E,C)},overlapRect:function(E,C,T,A,P,M){return s(this.world,E,C,T,A,P,M)},overlapCirc:function(E,C,T,A,P){return u(this.world,E,C,T,A,P)},shutdown:function(){if(this.world){var E=this.systems.events;E.off(v.UPDATE,this.world.update,this.world),E.off(v.POST_UPDATE,this.world.postUpdate,this.world),E.off(v.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(v.START,this.start,this),this.scene=null,this.systems=null}});l.register("ArcadePhysics",y,"arcadePhysics"),f.exports=y},25084:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(7864),o=t(13747),a=new h({Extends:o,Mixins:[m.Acceleration,m.Angular,m.Bounce,m.Debug,m.Drag,m.Enable,m.Friction,m.Gravity,m.Immovable,m.Mass,m.Pushable,m.Size,m.Velocity],initialize:function(i,n,u,s,l){o.call(this,i,n,u,s,l),this.body=null}});f.exports=a},97602:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(47401),o=t(27037),a=t(23701),r=t(74118),i=t(94287),n=t(93736),u=new h({initialize:function(l,v){var c=64,g=64,y={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},E=v!==void 0;E&&v.displayWidth&&(c=v.displayWidth,g=v.displayHeight),E||(v=y),this.world=l,this.gameObject=E?v:void 0,this.isBody=!0,this.transform={x:v.x,y:v.y,rotation:v.angle,scaleX:v.scaleX,scaleY:v.scaleY,displayOriginX:v.displayOriginX,displayOriginY:v.displayOriginY},this.debugShowBody=l.defaults.debugShowBody,this.debugShowVelocity=l.defaults.debugShowVelocity,this.debugBodyColor=l.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new n,this.position=new n(v.x-v.scaleX*v.displayOriginX,v.y-v.scaleY*v.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=v.angle,this.preRotation=v.angle,this.width=c,this.height=g,this.sourceWidth=c,this.sourceHeight=g,v.frame&&(this.sourceWidth=v.frame.realWidth,this.sourceHeight=v.frame.realHeight),this.halfWidth=Math.abs(c/2),this.halfHeight=Math.abs(g/2),this.center=new n(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new n,this.newVelocity=new n,this.deltaMax=new n,this.acceleration=new n,this.allowDrag=!0,this.drag=new n,this.allowGravity=!0,this.gravity=new n,this.bounce=new n,this.worldBounce=null,this.customBoundsRectangle=l.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new n(1e4,1e4),this.maxSpeed=-1,this.friction=new n(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=m.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=m.DYNAMIC_BODY,this._sx=v.scaleX,this._sy=v.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new r},updateBounds:function(){var s=this.gameObject,l=this.transform;if(s.parentContainer){var v=s.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);l.x=v.tx,l.y=v.ty,l.rotation=a(v.rotation),l.scaleX=v.scaleX,l.scaleY=v.scaleY,l.displayOriginX=s.displayOriginX,l.displayOriginY=s.displayOriginY}else l.x=s.x,l.y=s.y,l.rotation=s.angle,l.scaleX=s.scaleX,l.scaleY=s.scaleY,l.displayOriginX=s.displayOriginX,l.displayOriginY=s.displayOriginY;var c=!1;if(this.syncBounds){var g=s.getBounds(this._bounds);this.width=g.width,this.height=g.height,c=!0}else{var y=Math.abs(l.scaleX),E=Math.abs(l.scaleY);(this._sx!==y||this._sy!==E)&&(this.width=this.sourceWidth*y,this.height=this.sourceHeight*E,this._sx=y,this._sy=E,c=!0)}c&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var s=this.transform;this.position.x=s.x+s.scaleX*(this.offset.x-s.displayOriginX),this.position.y=s.y+s.scaleY*(this.offset.y-s.displayOriginY),this.updateCenter()},resetFlags:function(s){s===void 0&&(s=!1);var l=this.wasTouching,v=this.touching,c=this.blocked;s?(l.none=!0,l.up=!1,l.down=!1,l.left=!1,l.right=!1):(l.none=v.none,l.up=v.up,l.down=v.down,l.left=v.left,l.right=v.right),v.none=!0,v.up=!1,v.down=!1,v.left=!1,v.right=!1,c.none=!0,c.up=!1,c.down=!1,c.left=!1,c.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(s,l){s&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),s&&this.update(l)},update:function(s){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,s);var l=this.velocity.x,v=this.velocity.y;this.newVelocity.set(l*s,v*s),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(v,l),this.speed=Math.sqrt(l*l+v*v),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(o.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var s=this.position.x-this.prevFrame.x,l=this.position.y-this.prevFrame.y,v=this.gameObject;if(this.moves){var c=this.deltaMax.x,g=this.deltaMax.y;c!==0&&s!==0&&(s<0&&s<-c?s=-c:s>0&&s>c&&(s=c)),g!==0&&l!==0&&(l<0&&l<-g?l=-g:l>0&&l>g&&(l=g)),v&&(v.x+=s,v.y+=l)}s<0?this.facing=m.FACING_LEFT:s>0&&(this.facing=m.FACING_RIGHT),l<0?this.facing=m.FACING_UP:l>0&&(this.facing=m.FACING_DOWN),this.allowRotation&&v&&(v.angle+=this.deltaZ()),this._tx=s,this._ty=l},setBoundsRectangle:function(s){return this.customBoundsRectangle=s||this.world.bounds,this},checkWorldBounds:function(){var s=this.position,l=this.customBoundsRectangle,v=this.world.checkCollision,c=this.worldBounce?-this.worldBounce.x:-this.bounce.x,g=this.worldBounce?-this.worldBounce.y:-this.bounce.y,y=!1;return s.x<l.x&&v.left?(s.x=l.x,this.velocity.x*=c,this.blocked.left=!0,y=!0):this.right>l.right&&v.right&&(s.x=l.right-this.width,this.velocity.x*=c,this.blocked.right=!0,y=!0),s.y<l.y&&v.up?(s.y=l.y,this.velocity.y*=g,this.blocked.up=!0,y=!0):this.bottom>l.bottom&&v.down&&(s.y=l.bottom-this.height,this.velocity.y*=g,this.blocked.down=!0,y=!0),y&&(this.blocked.none=!1,this.updateCenter()),y},setOffset:function(s,l){return l===void 0&&(l=s),this.offset.set(s,l),this},setGameObject:function(s,l){return l===void 0&&(l=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=s,s.body&&(s.body=this),this.setSize(),this.world.add(this),this.enable=l,this},setSize:function(s,l,v){v===void 0&&(v=!0);var c=this.gameObject;if(c&&(!s&&c.frame&&(s=c.frame.realWidth),!l&&c.frame&&(l=c.frame.realHeight)),this.sourceWidth=s,this.sourceHeight=l,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),v&&c&&c.getCenter){var g=(c.width-s)/2,y=(c.height-l)/2;this.offset.set(g,y)}return this.isCircle=!1,this.radius=0,this},setCircle:function(s,l,v){return l===void 0&&(l=this.offset.x),v===void 0&&(v=this.offset.y),s>0?(this.isCircle=!0,this.radius=s,this.sourceWidth=s*2,this.sourceHeight=s*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(l,v),this.updateCenter()):this.isCircle=!1,this},reset:function(s,l){this.stop();var v=this.gameObject;v&&(v.setPosition(s,l),this.rotation=v.angle,this.preRotation=v.angle);var c=this.position;v&&v.getTopLeft?v.getTopLeft(c):c.set(s,l),this.prev.copy(c),this.prevFrame.copy(c),v&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(s){return s.x=this.x,s.y=this.y,s.right=this.right,s.bottom=this.bottom,s},hitTest:function(s,l){if(!this.isCircle)return i(this,s,l);if(this.radius>0&&s>=this.left&&s<=this.right&&l>=this.top&&l<=this.bottom){var v=(this.center.x-s)*(this.center.x-s),c=(this.center.y-l)*(this.center.y-l);return v+c<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(s){var l=this.position,v=l.x+this.halfWidth,c=l.y+this.halfHeight;this.debugShowBody&&(s.lineStyle(s.defaultStrokeWidth,this.debugBodyColor),this.isCircle?s.strokeCircle(v,c,this.width/2):(this.checkCollision.up&&s.lineBetween(l.x,l.y,l.x+this.width,l.y),this.checkCollision.right&&s.lineBetween(l.x+this.width,l.y,l.x+this.width,l.y+this.height),this.checkCollision.down&&s.lineBetween(l.x,l.y+this.height,l.x+this.width,l.y+this.height),this.checkCollision.left&&s.lineBetween(l.x,l.y,l.x,l.y+this.height))),this.debugShowVelocity&&(s.lineStyle(s.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),s.lineBetween(v,c,v+this.velocity.x/2,c+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(s,l,v,c){s===void 0&&(s=!0),this.collideWorldBounds=s;var g=l!==void 0,y=v!==void 0;return(g||y)&&(this.worldBounce||(this.worldBounce=new n),g&&(this.worldBounce.x=l),y&&(this.worldBounce.y=v)),c!==void 0&&(this.onWorldBounds=c),this},setVelocity:function(s,l){return this.velocity.set(s,l),s=this.velocity.x,l=this.velocity.y,this.speed=Math.sqrt(s*s+l*l),this},setVelocityX:function(s){return this.setVelocity(s,this.velocity.y)},setVelocityY:function(s){return this.setVelocity(this.velocity.x,s)},setMaxVelocity:function(s,l){return this.maxVelocity.set(s,l),this},setMaxVelocityX:function(s){return this.maxVelocity.x=s,this},setMaxVelocityY:function(s){return this.maxVelocity.y=s,this},setMaxSpeed:function(s){return this.maxSpeed=s,this},setBounce:function(s,l){return this.bounce.set(s,l),this},setBounceX:function(s){return this.bounce.x=s,this},setBounceY:function(s){return this.bounce.y=s,this},setAcceleration:function(s,l){return this.acceleration.set(s,l),this},setAccelerationX:function(s){return this.acceleration.x=s,this},setAccelerationY:function(s){return this.acceleration.y=s,this},setAllowDrag:function(s){return s===void 0&&(s=!0),this.allowDrag=s,this},setAllowGravity:function(s){return s===void 0&&(s=!0),this.allowGravity=s,this},setAllowRotation:function(s){return s===void 0&&(s=!0),this.allowRotation=s,this},setDrag:function(s,l){return this.drag.set(s,l),this},setDamping:function(s){return this.useDamping=s,this},setDragX:function(s){return this.drag.x=s,this},setDragY:function(s){return this.drag.y=s,this},setGravity:function(s,l){return this.gravity.set(s,l),this},setGravityX:function(s){return this.gravity.x=s,this},setGravityY:function(s){return this.gravity.y=s,this},setFriction:function(s,l){return this.friction.set(s,l),this},setFrictionX:function(s){return this.friction.x=s,this},setFrictionY:function(s){return this.friction.y=s,this},setAngularVelocity:function(s){return this.angularVelocity=s,this},setAngularAcceleration:function(s){return this.angularAcceleration=s,this},setAngularDrag:function(s){return this.angularDrag=s,this},setMass:function(s){return this.mass=s,this},setImmovable:function(s){return s===void 0&&(s=!0),this.immovable=s,this},setEnable:function(s){return s===void 0&&(s=!0),this.enable=s,this},processX:function(s,l,v,c){this.x+=s,this.updateCenter(),l!==null&&(this.velocity.x=l);var g=this.blocked;v&&(g.left=!0,g.none=!1),c&&(g.right=!0,g.none=!1)},processY:function(s,l,v,c){this.y+=s,this.updateCenter(),l!==null&&(this.velocity.y=l);var g=this.blocked;v&&(g.up=!0,g.none=!1),c&&(g.down=!0,g.none=!1)},x:{get:function(){return this.position.x},set:function(s){this.position.x=s}},y:{get:function(){return this.position.y},set:function(s){this.position.y=s}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});f.exports=u},3909:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=new h({initialize:function(a,r,i,n,u,s,l){this.world=a,this.name="",this.active=!0,this.overlapOnly=r,this.object1=i,this.object2=n,this.collideCallback=u,this.processCallback=s,this.callbackContext=l},setName:function(o){return this.name=o,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});f.exports=m},99523:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(62832),m=t(25084),o=t(97602),a=t(56694),r=t(47401),i=t(10481),n=t(66634),u=t(46346),s=new a({initialize:function(v){this.world=v,this.scene=v.scene,this.sys=v.scene.sys},collider:function(l,v,c,g,y){return this.world.addCollider(l,v,c,g,y)},overlap:function(l,v,c,g,y){return this.world.addOverlap(l,v,c,g,y)},existing:function(l,v){var c=v?r.STATIC_BODY:r.DYNAMIC_BODY;return this.world.enableBody(l,c),l},staticImage:function(l,v,c,g){var y=new h(this.scene,l,v,c,g);return this.sys.displayList.add(y),this.world.enableBody(y,r.STATIC_BODY),y},image:function(l,v,c,g){var y=new h(this.scene,l,v,c,g);return this.sys.displayList.add(y),this.world.enableBody(y,r.DYNAMIC_BODY),y},staticSprite:function(l,v,c,g){var y=new m(this.scene,l,v,c,g);return this.sys.displayList.add(y),this.sys.updateList.add(y),this.world.enableBody(y,r.STATIC_BODY),y},sprite:function(l,v,c,g){var y=new m(this.scene,l,v,c,g);return this.sys.displayList.add(y),this.sys.updateList.add(y),this.world.enableBody(y,r.DYNAMIC_BODY),y},staticGroup:function(l,v){return this.sys.updateList.add(new u(this.world,this.world.scene,l,v))},group:function(l,v){return this.sys.updateList.add(new i(this.world,this.world.scene,l,v))},body:function(l,v,c,g){var y=new o(this.world);return y.position.set(l,v),c&&g&&y.setSize(c,g),this.world.add(y,r.DYNAMIC_BODY),y},staticBody:function(l,v,c,g){var y=new n(this.world);return y.position.set(l,v),c&&g&&y.setSize(c,g),this.world.add(y,r.STATIC_BODY),y},destroy:function(){this.world=null,this.scene=null,this.sys=null}});f.exports=s},75671:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(47401),m=function(o,a,r,i){var n=0,u=o.deltaAbsX()+a.deltaAbsX()+i;return o._dx===0&&a._dx===0?(o.embedded=!0,a.embedded=!0):o._dx>a._dx?(n=o.right-a.x,n>u&&!r||o.checkCollision.right===!1||a.checkCollision.left===!1?n=0:(o.touching.none=!1,o.touching.right=!0,a.touching.none=!1,a.touching.left=!0,a.physicsType===h.STATIC_BODY&&!r&&(o.blocked.none=!1,o.blocked.right=!0),o.physicsType===h.STATIC_BODY&&!r&&(a.blocked.none=!1,a.blocked.left=!0))):o._dx<a._dx&&(n=o.x-a.width-a.x,-n>u&&!r||o.checkCollision.left===!1||a.checkCollision.right===!1?n=0:(o.touching.none=!1,o.touching.left=!0,a.touching.none=!1,a.touching.right=!0,a.physicsType===h.STATIC_BODY&&!r&&(o.blocked.none=!1,o.blocked.left=!0),o.physicsType===h.STATIC_BODY&&!r&&(a.blocked.none=!1,a.blocked.right=!0))),o.overlapX=n,a.overlapX=n,n};f.exports=m},66185:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(47401),m=function(o,a,r,i){var n=0,u=o.deltaAbsY()+a.deltaAbsY()+i;return o._dy===0&&a._dy===0?(o.embedded=!0,a.embedded=!0):o._dy>a._dy?(n=o.bottom-a.y,n>u&&!r||o.checkCollision.down===!1||a.checkCollision.up===!1?n=0:(o.touching.none=!1,o.touching.down=!0,a.touching.none=!1,a.touching.up=!0,a.physicsType===h.STATIC_BODY&&!r&&(o.blocked.none=!1,o.blocked.down=!0),o.physicsType===h.STATIC_BODY&&!r&&(a.blocked.none=!1,a.blocked.up=!0))):o._dy<a._dy&&(n=o.y-a.bottom,-n>u&&!r||o.checkCollision.up===!1||a.checkCollision.down===!1?n=0:(o.touching.none=!1,o.touching.up=!0,a.touching.none=!1,a.touching.down=!0,a.physicsType===h.STATIC_BODY&&!r&&(o.blocked.none=!1,o.blocked.up=!0),o.physicsType===h.STATIC_BODY&&!r&&(a.blocked.none=!1,a.blocked.down=!0))),o.overlapY=n,a.overlapY=n,n};f.exports=m},10481:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(25084),m=t(56694),o=t(47401),a=t(72632),r=t(59192),i=t(42911),n=new m({Extends:r,initialize:function(s,l,v,c){if(!v&&!c)c={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(i(v))c=v,v=null,c.internalCreateCallback=this.createCallbackHandler,c.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(v)&&i(v[0])){c=v[0];var g=this;v.forEach(function(y){y.internalCreateCallback=g.createCallbackHandler,y.internalRemoveCallback=g.removeCallbackHandler}),v=null}else c={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=s,c.classType=a(c,"classType",h),this.physicsType=o.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:a(c,"collideWorldBounds",!1),setBoundsRectangle:a(c,"customBoundsRectangle",null),setAccelerationX:a(c,"accelerationX",0),setAccelerationY:a(c,"accelerationY",0),setAllowDrag:a(c,"allowDrag",!0),setAllowGravity:a(c,"allowGravity",!0),setAllowRotation:a(c,"allowRotation",!0),setDamping:a(c,"useDamping",!1),setBounceX:a(c,"bounceX",0),setBounceY:a(c,"bounceY",0),setDragX:a(c,"dragX",0),setDragY:a(c,"dragY",0),setEnable:a(c,"enable",!0),setGravityX:a(c,"gravityX",0),setGravityY:a(c,"gravityY",0),setFrictionX:a(c,"frictionX",0),setFrictionY:a(c,"frictionY",0),setMaxSpeed:a(c,"maxSpeed",-1),setMaxVelocityX:a(c,"maxVelocityX",1e4),setMaxVelocityY:a(c,"maxVelocityY",1e4),setVelocityX:a(c,"velocityX",0),setVelocityY:a(c,"velocityY",0),setAngularVelocity:a(c,"angularVelocity",0),setAngularAcceleration:a(c,"angularAcceleration",0),setAngularDrag:a(c,"angularDrag",0),setMass:a(c,"mass",1),setImmovable:a(c,"immovable",!1)},r.call(this,l,v,c),this.type="PhysicsGroup"},createCallbackHandler:function(u){u.body||this.world.enableBody(u,o.DYNAMIC_BODY);var s=u.body;for(var l in this.defaults)s[l](this.defaults[l])},removeCallbackHandler:function(u){u.body&&this.world.disableBody(u)},setVelocity:function(u,s,l){l===void 0&&(l=0);for(var v=this.getChildren(),c=0;c<v.length;c++)v[c].body.velocity.set(u+c*l,s+c*l);return this},setVelocityX:function(u,s){s===void 0&&(s=0);for(var l=this.getChildren(),v=0;v<l.length;v++)l[v].body.velocity.x=u+v*s;return this},setVelocityY:function(u,s){s===void 0&&(s=0);for(var l=this.getChildren(),v=0;v<l.length;v++)l[v].body.velocity.y=u+v*s;return this}});f.exports=n},22916:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S,t,h,m,o,a,r,i,n,u,s,l,v,c,g,y,E,C=function(L,F,D){S=L,t=F;var N=S.velocity.x,B=t.velocity.x;return h=S.pushable,n=S._dx<0,u=S._dx>0,s=S._dx===0,g=Math.abs(S.right-t.x)<=Math.abs(t.right-S.x),r=B-N*S.bounce.x,m=t.pushable,l=t._dx<0,v=t._dx>0,c=t._dx===0,y=!g,i=N-B*t.bounce.x,E=Math.abs(D),T()},T=function(){return u&&g&&t.blocked.right?(S.processX(-E,r,!1,!0),1):n&&y&&t.blocked.left?(S.processX(E,r,!0),1):v&&y&&S.blocked.right?(t.processX(-E,i,!1,!0),2):l&&g&&S.blocked.left?(t.processX(E,i,!0),2):0},A=function(){var L=S.velocity.x,F=t.velocity.x,D=Math.sqrt(F*F*t.mass/S.mass)*(F>0?1:-1),N=Math.sqrt(L*L*S.mass/t.mass)*(L>0?1:-1),B=(D+N)*.5;return D-=B,N-=B,o=B+D*S.bounce.x,a=B+N*t.bounce.x,n&&y?P(0):l&&g?P(1):u&&g?P(2):v&&y?P(3):!1},P=function(L){if(h&&m)E*=.5,L===0||L===3?(S.processX(E,o),t.processX(-E,a)):(S.processX(-E,o),t.processX(E,a));else if(h&&!m)L===0||L===3?S.processX(E,r,!0):S.processX(-E,r,!1,!0);else if(!h&&m)L===0||L===3?t.processX(-E,i,!1,!0):t.processX(E,i,!0);else{var F=E*.5;L===0?c?(S.processX(E,0,!0),t.processX(0,null,!1,!0)):v?(S.processX(F,0,!0),t.processX(-F,0,!1,!0)):(S.processX(F,t.velocity.x,!0),t.processX(-F,null,!1,!0)):L===1?s?(S.processX(0,null,!1,!0),t.processX(E,0,!0)):u?(S.processX(-F,0,!1,!0),t.processX(F,0,!0)):(S.processX(-F,null,!1,!0),t.processX(F,S.velocity.x,!0)):L===2?c?(S.processX(-E,0,!1,!0),t.processX(0,null,!0)):l?(S.processX(-F,0,!1,!0),t.processX(F,0,!0)):(S.processX(-F,t.velocity.x,!1,!0),t.processX(F,null,!0)):L===3&&(s?(S.processX(0,null,!0),t.processX(-E,0,!1,!0)):n?(S.processX(F,0,!0),t.processX(-F,0,!1,!0)):(S.processX(F,t.velocity.y,!0),t.processX(-F,null,!1,!0)))}return!0},M=function(L){L===1?t.velocity.x=0:g?t.processX(E,i,!0):t.processX(-E,i,!1,!0),S.moves&&(t.y+=(S.y-S.prev.y)*S.friction.y,t._dy=t.y-t.prev.y)},w=function(L){L===2?S.velocity.x=0:y?S.processX(E,r,!0):S.processX(-E,r,!1,!0),t.moves&&(S.y+=(t.y-t.prev.y)*t.friction.y,S._dy=S.y-S.prev.y)};f.exports={BlockCheck:T,Check:A,Set:C,Run:P,RunImmovableBody1:M,RunImmovableBody2:w}},67050:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S,t,h,m,o,a,r,i,n,u,s,l,v,c,g,y,E,C=function(L,F,D){S=L,t=F;var N=S.velocity.y,B=t.velocity.y;return h=S.pushable,n=S._dy<0,u=S._dy>0,s=S._dy===0,g=Math.abs(S.bottom-t.y)<=Math.abs(t.bottom-S.y),r=B-N*S.bounce.y,m=t.pushable,l=t._dy<0,v=t._dy>0,c=t._dy===0,y=!g,i=N-B*t.bounce.y,E=Math.abs(D),T()},T=function(){return u&&g&&t.blocked.down?(S.processY(-E,r,!1,!0),1):n&&y&&t.blocked.up?(S.processY(E,r,!0),1):v&&y&&S.blocked.down?(t.processY(-E,i,!1,!0),2):l&&g&&S.blocked.up?(t.processY(E,i,!0),2):0},A=function(){var L=S.velocity.y,F=t.velocity.y,D=Math.sqrt(F*F*t.mass/S.mass)*(F>0?1:-1),N=Math.sqrt(L*L*S.mass/t.mass)*(L>0?1:-1),B=(D+N)*.5;return D-=B,N-=B,o=B+D*S.bounce.y,a=B+N*t.bounce.y,n&&y?P(0):l&&g?P(1):u&&g?P(2):v&&y?P(3):!1},P=function(L){if(h&&m)E*=.5,L===0||L===3?(S.processY(E,o),t.processY(-E,a)):(S.processY(-E,o),t.processY(E,a));else if(h&&!m)L===0||L===3?S.processY(E,r,!0):S.processY(-E,r,!1,!0);else if(!h&&m)L===0||L===3?t.processY(-E,i,!1,!0):t.processY(E,i,!0);else{var F=E*.5;L===0?c?(S.processY(E,0,!0),t.processY(0,null,!1,!0)):v?(S.processY(F,0,!0),t.processY(-F,0,!1,!0)):(S.processY(F,t.velocity.y,!0),t.processY(-F,null,!1,!0)):L===1?s?(S.processY(0,null,!1,!0),t.processY(E,0,!0)):u?(S.processY(-F,0,!1,!0),t.processY(F,0,!0)):(S.processY(-F,null,!1,!0),t.processY(F,S.velocity.y,!0)):L===2?c?(S.processY(-E,0,!1,!0),t.processY(0,null,!0)):l?(S.processY(-F,0,!1,!0),t.processY(F,0,!0)):(S.processY(-F,t.velocity.y,!1,!0),t.processY(F,null,!0)):L===3&&(s?(S.processY(0,null,!0),t.processY(-E,0,!1,!0)):n?(S.processY(F,0,!0),t.processY(-F,0,!1,!0)):(S.processY(F,t.velocity.y,!0),t.processY(-F,null,!1,!0)))}return!0},M=function(L){L===1?t.velocity.y=0:g?t.processY(E,i,!0):t.processY(-E,i,!1,!0),S.moves&&(t.x+=(S.x-S.prev.x)*S.friction.x,t._dx=t.x-t.prev.x)},w=function(L){L===2?S.velocity.y=0:y?S.processY(E,r,!0):S.processY(-E,r,!1,!0),t.moves&&(S.x+=(t.x-t.prev.x)*t.friction.x,S._dx=S.x-S.prev.x)};f.exports={BlockCheck:T,Check:A,Set:C,Run:P,RunImmovableBody1:M,RunImmovableBody2:w}},61777:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(75671),m=t(22916),o=function(a,r,i,n,u){u===void 0&&(u=h(a,r,i,n));var s=a.immovable,l=r.immovable;if(i||u===0||s&&l||a.customSeparateX||r.customSeparateX)return u!==0||a.embedded&&r.embedded;var v=m.Set(a,r,u);return!s&&!l?v>0?!0:m.Check():(s?m.RunImmovableBody1(v):l&&m.RunImmovableBody2(v),!0)};f.exports=o},25299:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(66185),m=t(67050),o=function(a,r,i,n,u){u===void 0&&(u=h(a,r,i,n));var s=a.immovable,l=r.immovable;if(i||u===0||s&&l||a.customSeparateY||r.customSeparateY)return u!==0||a.embedded&&r.embedded;var v=m.Set(a,r,u);return!s&&!l?v>0?!0:m.Check():(s?m.RunImmovableBody1(v):l&&m.RunImmovableBody2(v),!0)};f.exports=o},66634:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(65650),m=t(56694),o=t(47401),a=t(94287),r=t(93736),i=new m({initialize:function(u,s){var l=64,v=64,c={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},g=s!==void 0;g&&s.displayWidth&&(l=s.displayWidth,v=s.displayHeight),g||(s=c),this.world=u,this.gameObject=g?s:void 0,this.isBody=!0,this.debugShowBody=u.defaults.debugShowStaticBody,this.debugBodyColor=u.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new r,this.position=new r(s.x-l*s.originX,s.y-v*s.originY),this.width=l,this.height=v,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new r(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=r.ZERO,this.allowGravity=!1,this.gravity=r.ZERO,this.bounce=r.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=o.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(n,u){return n&&n!==this.gameObject&&(this.gameObject.body=null,n.body=this,this.gameObject=n),u&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var n=this.gameObject;return n.getTopLeft(this.position),this.width=n.displayWidth,this.height=n.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(n,u){return u===void 0&&(u=n),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(n,u),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(n,u,s){s===void 0&&(s=!0);var l=this.gameObject;if(!n&&l.frame&&(n=l.frame.realWidth),!u&&l.frame&&(u=l.frame.realHeight),this.world.staticTree.remove(this),this.width=n,this.height=u,this.halfWidth=Math.floor(n/2),this.halfHeight=Math.floor(u/2),s&&l.getCenter){var v=l.displayWidth/2,c=l.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(v-this.halfWidth,c-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(n,u,s){return u===void 0&&(u=this.offset.x),s===void 0&&(s=this.offset.y),n>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=n,this.width=n*2,this.height=n*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(u,s),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(n,u){var s=this.gameObject;n===void 0&&(n=s.x),u===void 0&&(u=s.y),this.world.staticTree.remove(this),s.setPosition(n,u),s.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(n){return n.x=this.x,n.y=this.y,n.right=this.right,n.bottom=this.bottom,n},hitTest:function(n,u){return this.isCircle?h(this,n,u):a(this,n,u)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(n){var u=this.position,s=u.x+this.halfWidth,l=u.y+this.halfHeight;this.debugShowBody&&(n.lineStyle(n.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?n.strokeCircle(s,l,this.width/2):n.strokeRect(u.x,u.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(n){return n<=0&&(n=.1),this.mass=n,this},x:{get:function(){return this.position.x},set:function(n){this.world.staticTree.remove(this),this.position.x=n,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(n){this.world.staticTree.remove(this),this.position.y=n,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});f.exports=i},46346:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(25084),m=t(56694),o=t(47401),a=t(72632),r=t(59192),i=t(42911),n=new m({Extends:r,initialize:function(s,l,v,c){!v&&!c?c={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:h}:i(v)?(c=v,v=null,c.internalCreateCallback=this.createCallbackHandler,c.internalRemoveCallback=this.removeCallbackHandler,c.createMultipleCallback=this.createMultipleCallbackHandler,c.classType=a(c,"classType",h)):Array.isArray(v)&&i(v[0])?(c=v,v=null,c.forEach(function(g){g.internalCreateCallback=this.createCallbackHandler,g.internalRemoveCallback=this.removeCallbackHandler,g.createMultipleCallback=this.createMultipleCallbackHandler,g.classType=a(g,"classType",h)})):c={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=s,this.physicsType=o.STATIC_BODY,r.call(this,l,v,c),this.type="StaticPhysicsGroup"},createCallbackHandler:function(u){u.body||this.world.enableBody(u,o.STATIC_BODY)},removeCallbackHandler:function(u){u.body&&this.world.disableBody(u)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var u=this.children.entries,s=0;s<u.length;s++)u[s].body.reset();return this}});f.exports=n},85233:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(94240),m=t(97602),o=t(82897),a=t(56694),r=t(3909),i=t(47401),n=t(53996),u=t(92951),s=t(6659),l=t(27037),v=t(88456),c=t(41935),g=t(54726),y=t(75671),E=t(66185),C=t(44662),T=t(10850),A=t(83392),P=t(74623),M=t(25163),w=t(74118),L=t(68687),F=t(27354),D=t(61777),N=t(25299),B=t(58403),b=t(66634),W=t(28808),Y=t(69360),K=t(93736),G=t(1071),z=new a({Extends:s,initialize:function(V,U){s.call(this),this.scene=V,this.bodies=new B,this.staticBodies=new B,this.pendingDestroy=new B,this.colliders=new P,this.gravity=new K(T(U,"gravity.x",0),T(U,"gravity.y",0)),this.bounds=new w(T(U,"x",0),T(U,"y",0),T(U,"width",V.sys.scale.width),T(U,"height",V.sys.scale.height)),this.checkCollision={up:T(U,"checkCollision.up",!0),down:T(U,"checkCollision.down",!0),left:T(U,"checkCollision.left",!0),right:T(U,"checkCollision.right",!0)},this.fps=T(U,"fps",60),this.fixedStep=T(U,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=T(U,"timeScale",1),this.OVERLAP_BIAS=T(U,"overlapBias",4),this.TILE_BIAS=T(U,"tileBias",16),this.forceX=T(U,"forceX",!1),this.isPaused=T(U,"isPaused",!1),this._total=0,this.drawDebug=T(U,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:T(U,"debugShowBody",!0),debugShowStaticBody:T(U,"debugShowStaticBody",!0),debugShowVelocity:T(U,"debugShowVelocity",!0),bodyDebugColor:T(U,"debugBodyColor",16711935),staticBodyDebugColor:T(U,"debugStaticBodyColor",255),velocityDebugColor:T(U,"debugVelocityColor",65280)},this.maxEntries=T(U,"maxEntries",16),this.useTree=T(U,"useTree",!0),this.tree=new L(this.maxEntries),this.staticTree=new L(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new Y,this._tempMatrix2=new Y,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(O,V){V===void 0&&(V=i.DYNAMIC_BODY),Array.isArray(O)||(O=[O]);for(var U=0;U<O.length;U++){var X=O[U];if(X.isParent)for(var H=X.getChildren(),Q=0;Q<H.length;Q++){var $=H[Q];$.isParent?this.enable($,V):this.enableBody($,V)}else this.enableBody(X,V)}},enableBody:function(O,V){return V===void 0&&(V=i.DYNAMIC_BODY),O.hasTransformComponent&&(O.body||(V===i.DYNAMIC_BODY?O.body=new m(this,O):V===i.STATIC_BODY&&(O.body=new b(this,O))),this.add(O.body)),O},add:function(O){return O.physicsType===i.DYNAMIC_BODY?this.bodies.set(O):O.physicsType===i.STATIC_BODY&&(this.staticBodies.set(O),this.staticTree.insert(O)),O.enable=!0,O},disable:function(O){Array.isArray(O)||(O=[O]);for(var V=0;V<O.length;V++){var U=O[V];if(U.isParent)for(var X=U.getChildren(),H=0;H<X.length;H++){var Q=X[H];Q.isParent?this.disable(Q):this.disableBody(Q.body)}else this.disableBody(U.body)}},disableBody:function(O){this.remove(O),O.enable=!1},remove:function(O){O.physicsType===i.DYNAMIC_BODY?(this.tree.remove(O),this.bodies.delete(O)):O.physicsType===i.STATIC_BODY&&(this.staticBodies.delete(O),this.staticTree.remove(O))},createDebugGraphic:function(){var O=this.scene.sys.add.graphics({x:0,y:0});return O.setDepth(Number.MAX_VALUE),this.debugGraphic=O,this.drawDebug=!0,O},setBounds:function(O,V,U,X,H,Q,$,k){return this.bounds.setTo(O,V,U,X),H!==void 0&&this.setBoundsCollision(H,Q,$,k),this},setBoundsCollision:function(O,V,U,X){return O===void 0&&(O=!0),V===void 0&&(V=!0),U===void 0&&(U=!0),X===void 0&&(X=!0),this.checkCollision.left=O,this.checkCollision.right=V,this.checkCollision.up=U,this.checkCollision.down=X,this},pause:function(){return this.isPaused=!0,this.emit(l.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(l.RESUME),this},addCollider:function(O,V,U,X,H){U===void 0&&(U=null),X===void 0&&(X=null),H===void 0&&(H=U);var Q=new r(this,!1,O,V,U,X,H);return this.colliders.add(Q),Q},addOverlap:function(O,V,U,X,H){U===void 0&&(U=null),X===void 0&&(X=null),H===void 0&&(H=U);var Q=new r(this,!0,O,V,U,X,H);return this.colliders.add(Q),Q},removeCollider:function(O){return this.colliders.remove(O),this},setFPS:function(O){return this.fps=O,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(O,V){if(!(this.isPaused||this.bodies.size===0)){var U,X=this._frameTime,H=this._frameTimeMS*this.timeScale;this._elapsed+=V;var Q,$=this.bodies.entries,k=this._elapsed>=H;for(this.fixedStep||(X=V*.001,k=!0,this._elapsed=0),U=0;U<$.length;U++)Q=$[U],Q.enable&&Q.preUpdate(k,X);if(k){this._elapsed-=H,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load($));var J=this.colliders.update();for(U=0;U<J.length;U++){var Z=J[U];Z.active&&Z.update()}this.emit(l.WORLD_STEP,X)}for(;this._elapsed>=H;)this._elapsed-=H,this.step(X)}},step:function(O){var V,U,X=this.bodies.entries,H=X.length;for(V=0;V<H;V++)U=X[V],U.enable&&U.update(O);this.useTree&&(this.tree.clear(),this.tree.load(X));var Q=this.colliders.update();for(V=0;V<Q.length;V++){var $=Q[V];$.active&&$.update()}this.emit(l.WORLD_STEP,O),this.stepsLastFrame++},postUpdate:function(){var O,V,U=this.bodies.entries,X=U.length,H=this.bodies,Q=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,O=0;O<X;O++)V=U[O],V.enable&&V.postUpdate();if(this.drawDebug){var $=this.debugGraphic;for($.clear(),O=0;O<X;O++)V=U[O],V.willDrawDebug()&&V.drawDebug($);for(U=Q.entries,X=U.length,O=0;O<X;O++)V=U[O],V.willDrawDebug()&&V.drawDebug($)}var k=this.pendingDestroy;if(k.size>0){var J=this.tree,Z=this.staticTree;for(U=k.entries,X=U.length,O=0;O<X;O++)V=U[O],V.physicsType===i.DYNAMIC_BODY?(J.remove(V),H.delete(V)):V.physicsType===i.STATIC_BODY&&(Z.remove(V),Q.delete(V)),V.world=void 0,V.gameObject=void 0;k.clear()}},updateMotion:function(O,V){O.allowRotation&&this.computeAngularVelocity(O,V),this.computeVelocity(O,V)},computeAngularVelocity:function(O,V){var U=O.angularVelocity,X=O.angularAcceleration,H=O.angularDrag,Q=O.maxAngular;X?U+=X*V:O.allowDrag&&H&&(H*=V,c(U-H,0,.1)?U-=H:g(U+H,0,.1)?U+=H:U=0),U=o(U,-Q,Q);var $=U-O.angularVelocity;O.angularVelocity+=$,O.rotation+=O.angularVelocity*V},computeVelocity:function(O,V){var U=O.velocity.x,X=O.acceleration.x,H=O.drag.x,Q=O.maxVelocity.x,$=O.velocity.y,k=O.acceleration.y,J=O.drag.y,Z=O.maxVelocity.y,j=O.speed,_=O.maxSpeed,q=O.allowDrag,it=O.useDamping;O.allowGravity&&(U+=(this.gravity.x+O.gravity.x)*V,$+=(this.gravity.y+O.gravity.y)*V),X?U+=X*V:q&&H&&(it?(H=Math.pow(H,V),U*=H,j=Math.sqrt(U*U+$*$),v(j,0,.001)&&(U=0)):(H*=V,c(U-H,0,.01)?U-=H:g(U+H,0,.01)?U+=H:U=0)),k?$+=k*V:q&&J&&(it?(J=Math.pow(J,V),$*=J,j=Math.sqrt(U*U+$*$),v(j,0,.001)&&($=0)):(J*=V,c($-J,0,.01)?$-=J:g($+J,0,.01)?$+=J:$=0)),U=o(U,-Q,Q),$=o($,-Z,Z),O.velocity.set(U,$),_>-1&&O.velocity.length()>_&&(O.velocity.normalize().scale(_),j=_),O.speed=j},separate:function(O,V,U,X,H){var Q,$,k=!1,J=!0;if(!O.enable||!V.enable||O.checkCollision.none||V.checkCollision.none||!this.intersects(O,V)||U&&U.call(X,O.gameObject,V.gameObject)===!1)return k;if(O.isCircle||V.isCircle){var Z=this.separateCircle(O,V,H);Z.result?(k=!0,J=!1):(Q=Z.x,$=Z.y,J=!0)}if(J){var j=!1,_=!1,q=this.OVERLAP_BIAS;H?(j=D(O,V,H,q,Q),_=N(O,V,H,q,$)):this.forceX||Math.abs(this.gravity.y+O.gravity.y)<Math.abs(this.gravity.x+O.gravity.x)?(j=D(O,V,H,q,Q),this.intersects(O,V)&&(_=N(O,V,H,q,$))):(_=N(O,V,H,q,$),this.intersects(O,V)&&(j=D(O,V,H,q,Q))),k=j||_}return k&&(H?(O.onOverlap||V.onOverlap)&&this.emit(l.OVERLAP,O.gameObject,V.gameObject,O,V):(O.onCollide||V.onCollide)&&this.emit(l.COLLIDE,O.gameObject,V.gameObject,O,V)),k},separateCircle:function(O,V,U){y(O,V,!1,0),E(O,V,!1,0);var X=O.isCircle,H=V.isCircle,Q=O.center,$=V.center,k=O.immovable,J=V.immovable,Z=O.velocity,j=V.velocity,_=0,q=!0;if(X!==H){q=!1;var it=Q.x,ht=Q.y,ft=O.halfWidth,ut=V.position.x,tt=V.position.y,rt=V.right,st=V.bottom;H&&(it=$.x,ht=$.y,ft=V.halfWidth,ut=O.position.x,tt=O.position.y,rt=O.right,st=O.bottom),ht<tt?it<ut?_=n(it,ht,ut,tt)-ft:it>rt&&(_=n(it,ht,rt,tt)-ft):ht>st&&(it<ut?_=n(it,ht,ut,st)-ft:it>rt&&(_=n(it,ht,rt,st)-ft)),_*=-1}else _=O.halfWidth+V.halfWidth-u(Q,$);O.overlapR=_,V.overlapR=_;var xt=h(Q,$),gt=(_+A.EPSILON)*Math.cos(xt),Xt=(_+A.EPSILON)*Math.sin(xt),Dt={overlap:_,result:!1,x:gt,y:Xt};if(U&&(!q||q&&_!==0))return Dt.result=!0,Dt;if(!q&&_===0||k&&J||O.customSeparateX||V.customSeparateX)return Dt.x=void 0,Dt.y=void 0,Dt;var It=!O.pushable&&!V.pushable;if(q){var Et=Q.x-$.x,Nt=Q.y-$.y,$t=Math.sqrt(Math.pow(Et,2)+Math.pow(Nt,2)),Zt=($.x-Q.x)/$t||0,ne=($.y-Q.y)/$t||0,Ce=2*(Z.x*Zt+Z.y*ne-j.x*Zt-j.y*ne)/(O.mass+V.mass);(k||J)&&(Ce*=2),k||(Z.x=Z.x-Ce/O.mass*Zt,Z.y=Z.y-Ce/O.mass*ne,Z.multiply(O.bounce)),J||(j.x=j.x+Ce/V.mass*Zt,j.y=j.y+Ce/V.mass*ne,j.multiply(V.bounce)),!k&&!J&&(gt*=.5,Xt*=.5),k||(O.x-=gt,O.y-=Xt,O.updateCenter()),J||(V.x+=gt,V.y+=Xt,V.updateCenter()),Dt.result=!0}else!k||O.pushable||It?(O.x-=gt,O.y-=Xt,O.updateCenter()):(!J||V.pushable||It)&&(V.x+=gt,V.y+=Xt,V.updateCenter()),Dt.x=void 0,Dt.y=void 0;return Dt},intersects:function(O,V){return O===V?!1:!O.isCircle&&!V.isCircle?!(O.right<=V.left||O.bottom<=V.top||O.left>=V.right||O.top>=V.bottom):O.isCircle?V.isCircle?u(O.center,V.center)<=O.halfWidth+V.halfWidth:this.circleBodyIntersects(O,V):this.circleBodyIntersects(V,O)},circleBodyIntersects:function(O,V){var U=o(O.center.x,V.left,V.right),X=o(O.center.y,V.top,V.bottom),H=(O.center.x-U)*(O.center.x-U),Q=(O.center.y-X)*(O.center.y-X);return H+Q<=O.halfWidth*O.halfWidth},overlap:function(O,V,U,X,H){return U===void 0&&(U=null),X===void 0&&(X=null),H===void 0&&(H=U),this.collideObjects(O,V,U,X,H,!0)},collide:function(O,V,U,X,H){return U===void 0&&(U=null),X===void 0&&(X=null),H===void 0&&(H=U),this.collideObjects(O,V,U,X,H,!1)},collideObjects:function(O,V,U,X,H,Q){var $,k;O.isParent&&(O.physicsType===void 0||V===void 0||O===V)&&(O=O.children.entries),V&&V.isParent&&V.physicsType===void 0&&(V=V.children.entries);var J=Array.isArray(O),Z=Array.isArray(V);if(this._total=0,!J&&!Z)this.collideHandler(O,V,U,X,H,Q);else if(!J&&Z)for($=0;$<V.length;$++)this.collideHandler(O,V[$],U,X,H,Q);else if(J&&!Z)if(V)for($=0;$<O.length;$++)this.collideHandler(O[$],V,U,X,H,Q);else for($=0;$<O.length;$++){var j=O[$];for(k=$+1;k<O.length;k++)$!==k&&this.collideHandler(j,O[k],U,X,H,Q)}else for($=0;$<O.length;$++)for(k=0;k<V.length;k++)this.collideHandler(O[$],V[k],U,X,H,Q);return this._total>0},collideHandler:function(O,V,U,X,H,Q){if(V===void 0&&O.isParent)return this.collideGroupVsGroup(O,O,U,X,H,Q);if(!O||!V)return!1;if(O.body||O.isBody){if(V.body||V.isBody)return this.collideSpriteVsSprite(O,V,U,X,H,Q);if(V.isParent)return this.collideSpriteVsGroup(O,V,U,X,H,Q);if(V.isTilemap)return this.collideSpriteVsTilemapLayer(O,V,U,X,H,Q)}else if(O.isParent){if(V.body||V.isBody)return this.collideSpriteVsGroup(V,O,U,X,H,Q);if(V.isParent)return this.collideGroupVsGroup(O,V,U,X,H,Q);if(V.isTilemap)return this.collideGroupVsTilemapLayer(O,V,U,X,H,Q)}else if(O.isTilemap){if(V.body||V.isBody)return this.collideSpriteVsTilemapLayer(V,O,U,X,H,Q);if(V.isParent)return this.collideGroupVsTilemapLayer(V,O,U,X,H,Q)}},collideSpriteVsSprite:function(O,V,U,X,H,Q){var $=O.isBody?O:O.body,k=V.isBody?V:V.body;return!$||!k?!1:(this.separate($,k,X,H,Q)&&(U&&U.call(H,O,V),this._total++),!0)},collideSpriteVsGroup:function(O,V,U,X,H,Q){var $=O.isBody?O:O.body;if(!(V.length===0||!$||!$.enable||$.checkCollision.none)){var k,J,Z;if(this.useTree||V.physicsType===i.STATIC_BODY){var j=this.treeMinMax;j.minX=$.left,j.minY=$.top,j.maxX=$.right,j.maxY=$.bottom;var _=V.physicsType===i.DYNAMIC_BODY?this.tree.search(j):this.staticTree.search(j);for(J=_.length,k=0;k<J;k++)Z=_[k],!($===Z||!Z.enable||Z.checkCollision.none||!V.contains(Z.gameObject))&&this.separate($,Z,X,H,Q)&&(U&&U.call(H,$.gameObject,Z.gameObject),this._total++)}else{var q=V.getChildren(),it=V.children.entries.indexOf(O);for(J=q.length,k=0;k<J;k++)Z=q[k].body,!(!Z||k===it||!Z.enable)&&this.separate($,Z,X,H,Q)&&(U&&U.call(H,$.gameObject,Z.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(O,V,U,X,H,Q){var $=O.getChildren();if($.length===0)return!1;for(var k=!1,J=0;J<$.length;J++)($[J].body||$[J].isBody)&&this.collideSpriteVsTilemapLayer($[J],V,U,X,H,Q)&&(k=!0);return k},collideTiles:function(O,V,U,X,H){return V.length===0||O.body&&!O.body.enable||O.isBody&&!O.enable?!1:this.collideSpriteVsTilesHandler(O,V,U,X,H,!1,!1)},overlapTiles:function(O,V,U,X,H){return V.length===0||O.body&&!O.body.enable||O.isBody&&!O.enable?!1:this.collideSpriteVsTilesHandler(O,V,U,X,H,!0,!1)},collideSpriteVsTilemapLayer:function(O,V,U,X,H,Q){var $=O.isBody?O:O.body;if(!$.enable||$.checkCollision.none)return!1;var k=$.x,J=$.y,Z=$.width,j=$.height,_=V.layer;if(_.tileWidth>_.baseTileWidth){var q=(_.tileWidth-_.baseTileWidth)*V.scaleX;k-=q,Z+=q}if(_.tileHeight>_.baseTileHeight){var it=(_.tileHeight-_.baseTileHeight)*V.scaleY;j+=it}var ht=Q?null:this.tileFilterOptions,ft=C(k,J,Z,j,ht,V.scene.cameras.main,V.layer);return ft.length===0?!1:this.collideSpriteVsTilesHandler(O,ft,U,X,H,Q,!0)},collideSpriteVsTilesHandler:function(O,V,U,X,H,Q,$){for(var k=O.isBody?O:O.body,J,Z={left:0,right:0,top:0,bottom:0},j,_=!1,q=0;q<V.length;q++){J=V[q],j=J.tilemapLayer;var it=j.tileToWorldXY(J.x,J.y);Z.left=it.x,Z.top=it.y,J.baseHeight!==J.height&&(Z.top-=(J.height-J.baseHeight)*j.scaleY),Z.right=Z.left+J.width*j.scaleX,Z.bottom=Z.top+J.height*j.scaleY,W(Z,k)&&(!X||X.call(H,O,J))&&M(J,O)&&(Q||F(q,k,J,Z,j,this.TILE_BIAS,$))&&(this._total++,_=!0,U&&U.call(H,O,J),Q&&k.onOverlap?this.emit(l.TILE_OVERLAP,O,J,k):k.onCollide&&this.emit(l.TILE_COLLIDE,O,J,k))}return _},collideGroupVsGroup:function(O,V,U,X,H,Q){if(!(O.length===0||V.length===0))for(var $=O.getChildren(),k=0;k<$.length;k++)this.collideSpriteVsGroup($[k],V,U,X,H,Q)},wrap:function(O,V){O.body?this.wrapObject(O,V):O.getChildren?this.wrapArray(O.getChildren(),V):Array.isArray(O)?this.wrapArray(O,V):this.wrapObject(O,V)},wrapArray:function(O,V){for(var U=0;U<O.length;U++)this.wrapObject(O[U],V)},wrapObject:function(O,V){V===void 0&&(V=0),O.x=G(O.x,this.bounds.left-V,this.bounds.right+V),O.y=G(O.y,this.bounds.top-V,this.bounds.bottom+V)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});f.exports=z},5321:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setAcceleration:function(t,h){return this.body.acceleration.set(t,h),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}};f.exports=S},29257:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}};f.exports=S},62122:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setBounce:function(t,h){return this.body.bounce.set(t,h),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,h,m,o){return this.body.setCollideWorldBounds(t,h,m,o),this}};f.exports=S},99803:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setDebug:function(t,h,m){return this.debugShowBody=t,this.debugShowVelocity=h,this.debugBodyColor=m,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}};f.exports=S},87145:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setDrag:function(t,h){return this.body.drag.set(t,h),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}};f.exports=S},96174:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={enableBody:function(t,h,m,o,a){return t&&this.body.reset(h,m),o&&(this.body.gameObject.active=!0),a&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(t,h){return t===void 0&&(t=!1),h===void 0&&(h=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),h&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};f.exports=S},51702:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setFriction:function(t,h){return this.body.friction.set(t,h),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}};f.exports=S},25578:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setGravity:function(t,h){return this.body.gravity.set(t,h),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}};f.exports=S},72029:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setImmovable:function(t){return t===void 0&&(t=!0),this.body.immovable=t,this}};f.exports=S},34566:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setMass:function(t){return this.body.mass=t,this}};f.exports=S},2732:(f,S,t)=>{var h=t(15147),m=t(26673),o=t(22184),a=t(26535),r=function(i,n,u,s,l,v){var c=h(i,n-s,u-s,2*s,2*s,l,v);if(c.length===0)return c;for(var g=new m(n,u,s),y=new m,E=[],C=0;C<c.length;C++){var T=c[C];T.isCircle?(y.setTo(T.center.x,T.center.y,T.halfWidth),o(g,y)&&E.push(T)):a(g,T)&&E.push(T)}return E};f.exports=r},15147:f=>{var S=function(t,h,m,o,a,r,i){r===void 0&&(r=!0),i===void 0&&(i=!1);var n=[],u=[],s=t.treeMinMax;if(s.minX=h,s.minY=m,s.maxX=h+o,s.maxY=m+a,i&&(u=t.staticTree.search(s)),r&&t.useTree)n=t.tree.search(s);else if(r){var l=t.bodies,v={position:{x:h,y:m},left:h,top:m,right:h+o,bottom:m+a,isCircle:!1},c=t.intersects;l.iterate(function(g){c(g,v)&&n.push(g)})}return u.concat(n)};f.exports=S},57527:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setPushable:function(t){return t===void 0&&(t=!0),this.body.pushable=t,this}};f.exports=S},77687:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setOffset:function(t,h){return this.body.setOffset(t,h),this},setSize:function(t,h,m){return this.body.setSize(t,h,m),this},setBodySize:function(t,h,m){return this.body.setSize(t,h,m),this},setCircle:function(t,h,m){return this.body.setCircle(t,h,m),this}};f.exports=S},66536:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setVelocity:function(t,h){return this.body.setVelocity(t,h),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,h){return this.body.maxVelocity.set(t,h),this}};f.exports=S},7864:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Acceleration:t(5321),Angular:t(29257),Bounce:t(62122),Debug:t(99803),Drag:t(87145),Enable:t(96174),Friction:t(51702),Gravity:t(25578),Immovable:t(72029),Mass:t(34566),OverlapCirc:t(2732),OverlapRect:t(15147),Pushable:t(57527),Size:t(77687),Velocity:t(66536)}},47401:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};f.exports=S},22346:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="collide"},95092:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="overlap"},15775:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pause"},74142:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="resume"},22825:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="tilecollide"},10851:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="tileoverlap"},7543:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="worldbounds"},1487:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="worldstep"},27037:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={COLLIDE:t(22346),OVERLAP:t(95092),PAUSE:t(15775),RESUME:t(74142),TILE_COLLIDE:t(22825),TILE_OVERLAP:t(10851),WORLD_BOUNDS:t(7543),WORLD_STEP:t(1487)}},39977:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(47401),m=t(98611),o={ArcadePhysics:t(66150),Body:t(97602),Collider:t(3909),Components:t(7864),Events:t(27037),Factory:t(99523),GetOverlapX:t(75671),GetOverlapY:t(66185),SeparateX:t(61777),SeparateY:t(25299),Group:t(10481),Image:t(62832),Sprite:t(25084),StaticBody:t(66634),StaticGroup:t(46346),Tilemap:t(8413),World:t(85233)};o=m(!1,o,h),f.exports=o},25163:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,h,t):t.layer.callbacks[t.index]?!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,h,t):!0};f.exports=S},98209:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){h<0?(t.blocked.none=!1,t.blocked.left=!0):h>0&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=h,t.updateCenter(),t.bounce.x===0?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x};f.exports=S},72792:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){h<0?(t.blocked.none=!1,t.blocked.up=!0):h>0&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=h,t.updateCenter(),t.bounce.y===0?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y};f.exports=S},27354:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(14405),m=t(52926),o=t(28808),a=function(r,i,n,u,s,l,v){var c=u.left,g=u.top,y=u.right,E=u.bottom,C=n.faceLeft||n.faceRight,T=n.faceTop||n.faceBottom;if(v||(C=!0,T=!0),!C&&!T)return!1;var A=0,P=0,M=0,w=1;if(i.deltaAbsX()>i.deltaAbsY()?M=-1:i.deltaAbsX()<i.deltaAbsY()&&(w=-1),i.deltaX()!==0&&i.deltaY()!==0&&C&&T&&(M=Math.min(Math.abs(i.position.x-y),Math.abs(i.right-c)),w=Math.min(Math.abs(i.position.y-E),Math.abs(i.bottom-g))),M<w){if(C&&(A=h(i,n,c,y,l,v),A!==0&&!o(u,i)))return!0;T&&(P=m(i,n,g,E,l,v))}else{if(T&&(P=m(i,n,g,E,l,v),P!==0&&!o(u,i)))return!0;C&&(A=h(i,n,c,y,l,v))}return A!==0||P!==0};f.exports=a},14405:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(98209),m=function(o,a,r,i,n,u){var s=0,l=a.faceLeft,v=a.faceRight,c=a.collideLeft,g=a.collideRight;return u||(l=!0,v=!0,c=!0,g=!0),o.deltaX()<0&&g&&o.checkCollision.left?v&&o.x<i&&(s=o.x-i,s<-n&&(s=0)):o.deltaX()>0&&c&&o.checkCollision.right&&l&&o.right>r&&(s=o.right-r,s>n&&(s=0)),s!==0&&(o.customSeparateX?o.overlapX=s:h(o,s)),s};f.exports=m},52926:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72792),m=function(o,a,r,i,n,u){var s=0,l=a.faceTop,v=a.faceBottom,c=a.collideUp,g=a.collideDown;return u||(l=!0,v=!0,c=!0,g=!0),o.deltaY()<0&&g&&o.checkCollision.up?v&&o.y<i&&(s=o.y-i,s<-n&&(s=0)):o.deltaY()>0&&c&&o.checkCollision.down&&l&&o.bottom>r&&(s=o.bottom-r,s>n&&(s=0)),s!==0&&(o.customSeparateY?o.overlapY=s:h(o,s)),s};f.exports=m},28808:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return!(h.right<=t.left||h.bottom<=t.top||h.position.x>=t.right||h.position.y>=t.bottom)};f.exports=S},8413:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h={ProcessTileCallbacks:t(25163),ProcessTileSeparationX:t(98209),ProcessTileSeparationY:t(72792),SeparateTile:t(27354),TileCheckX:t(14405),TileCheckY:t(52926),TileIntersectsBody:t(28808)};f.exports=h},53954:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Arcade:t(39977),Matter:t(45949)}},63568:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(93736),o=new h({initialize:function(){this.boundsCenter=new m,this.centerDiff=new m},parseBody:function(a){if(a=a.hasOwnProperty("body")?a.body:a,!a.hasOwnProperty("bounds")||!a.hasOwnProperty("centerOfMass"))return!1;var r=this.boundsCenter,i=this.centerDiff,n=a.bounds.max.x-a.bounds.min.x,u=a.bounds.max.y-a.bounds.min.y,s=n*a.centerOfMass.x,l=u*a.centerOfMass.y;return r.set(n/2,u/2),i.set(s-r.x,l-r.y),!0},getTopLeft:function(a,r,i){if(r===void 0&&(r=0),i===void 0&&(i=0),this.parseBody(a)){var n=this.boundsCenter,u=this.centerDiff;return new m(r+n.x+u.x,i+n.y+u.y)}return!1},getTopCenter:function(a,r,i){if(r===void 0&&(r=0),i===void 0&&(i=0),this.parseBody(a)){var n=this.boundsCenter,u=this.centerDiff;return new m(r+u.x,i+n.y+u.y)}return!1},getTopRight:function(a,r,i){if(r===void 0&&(r=0),i===void 0&&(i=0),this.parseBody(a)){var n=this.boundsCenter,u=this.centerDiff;return new m(r-(n.x-u.x),i+n.y+u.y)}return!1},getLeftCenter:function(a,r,i){if(r===void 0&&(r=0),i===void 0&&(i=0),this.parseBody(a)){var n=this.boundsCenter,u=this.centerDiff;return new m(r+n.x+u.x,i+u.y)}return!1},getCenter:function(a,r,i){if(r===void 0&&(r=0),i===void 0&&(i=0),this.parseBody(a)){var n=this.centerDiff;return new m(r+n.x,i+n.y)}return!1},getRightCenter:function(a,r,i){if(r===void 0&&(r=0),i===void 0&&(i=0),this.parseBody(a)){var n=this.boundsCenter,u=this.centerDiff;return new m(r-(n.x-u.x),i+u.y)}return!1},getBottomLeft:function(a,r,i){if(r===void 0&&(r=0),i===void 0&&(i=0),this.parseBody(a)){var n=this.boundsCenter,u=this.centerDiff;return new m(r+n.x+u.x,i-(n.y-u.y))}return!1},getBottomCenter:function(a,r,i){if(r===void 0&&(r=0),i===void 0&&(i=0),this.parseBody(a)){var n=this.boundsCenter,u=this.centerDiff;return new m(r+u.x,i-(n.y-u.y))}return!1},getBottomRight:function(a,r,i){if(r===void 0&&(r=0),i===void 0&&(i=0),this.parseBody(a)){var n=this.boundsCenter,u=this.centerDiff;return new m(r-(n.x-u.x),i-(n.y-u.y))}return!1}});f.exports=o},18171:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(16929);h.Body=t(84125),h.Composite=t(11299),h.World=t(72005),h.Collision=t(63454),h.Detector=t(13657),h.Pairs=t(91327),h.Pair=t(70584),h.Query=t(13390),h.Resolver=t(44272),h.Constraint=t(52838),h.Common=t(68758),h.Engine=t(45775),h.Events=t(39073),h.Sleeping=t(22806),h.Plugin=t(84474),h.Bodies=t(68516),h.Composites=t(56643),h.Axes=t(50658),h.Bounds=t(84091),h.Svg=t(92765),h.Vector=t(10438),h.Vertices=t(39745),h.World.add=h.Composite.add,h.World.remove=h.Composite.remove,h.World.addComposite=h.Composite.addComposite,h.World.addBody=h.Composite.addBody,h.World.addConstraint=h.Composite.addConstraint,h.World.clear=h.Composite.clear,f.exports=h},72653:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(68516),m=t(56694),o=t(56643),a=t(52838),r=t(92765),i=t(3860),n=t(7030),u=t(73658),s=t(84720),l=t(10998),v=t(72829),c=t(88596),g=t(39745),y=new m({initialize:function(C){this.world=C,this.scene=C.scene,this.sys=C.scene.sys},rectangle:function(E,C,T,A,P){var M=h.rectangle(E,C,T,A,P);return this.world.add(M),M},trapezoid:function(E,C,T,A,P,M){var w=h.trapezoid(E,C,T,A,P,M);return this.world.add(w),w},circle:function(E,C,T,A,P){var M=h.circle(E,C,T,A,P);return this.world.add(M),M},polygon:function(E,C,T,A,P){var M=h.polygon(E,C,T,A,P);return this.world.add(M),M},fromVertices:function(E,C,T,A,P,M,w){typeof T=="string"&&(T=g.fromPath(T));var L=h.fromVertices(E,C,T,A,P,M,w);return this.world.add(L),L},fromPhysicsEditor:function(E,C,T,A,P){P===void 0&&(P=!0);var M=l.parseBody(E,C,T,A);return P&&!this.world.has(M)&&this.world.add(M),M},fromSVG:function(E,C,T,A,P,M){A===void 0&&(A=1),P===void 0&&(P={}),M===void 0&&(M=!0);for(var w=T.getElementsByTagName("path"),L=[],F=0;F<w.length;F++){var D=r.pathToVertices(w[F],30);A!==1&&g.scale(D,A,A),L.push(D)}var N=h.fromVertices(E,C,L,P);return M&&this.world.add(N),N},fromJSON:function(E,C,T,A,P){A===void 0&&(A={}),P===void 0&&(P=!0);var M=v.parseBody(E,C,T,A);return M&&P&&this.world.add(M),M},imageStack:function(E,C,T,A,P,M,w,L,F){w===void 0&&(w=0),L===void 0&&(L=0),F===void 0&&(F={});var D=this.world,N=this.sys.displayList;F.addToWorld=!1;var B=o.stack(T,A,P,M,w,L,function(b,W){var Y=new n(D,b,W,E,C,F);return N.add(Y),Y.body});return D.add(B),B},stack:function(E,C,T,A,P,M,w){var L=o.stack(E,C,T,A,P,M,w);return this.world.add(L),L},pyramid:function(E,C,T,A,P,M,w){var L=o.pyramid(E,C,T,A,P,M,w);return this.world.add(L),L},chain:function(E,C,T,A,P,M){return o.chain(E,C,T,A,P,M)},mesh:function(E,C,T,A,P){return o.mesh(E,C,T,A,P)},newtonsCradle:function(E,C,T,A,P){var M=o.newtonsCradle(E,C,T,A,P);return this.world.add(M),M},car:function(E,C,T,A,P){var M=o.car(E,C,T,A,P);return this.world.add(M),M},softBody:function(E,C,T,A,P,M,w,L,F,D){var N=o.softBody(E,C,T,A,P,M,w,L,F,D);return this.world.add(N),N},joint:function(E,C,T,A,P){return this.constraint(E,C,T,A,P)},spring:function(E,C,T,A,P){return this.constraint(E,C,T,A,P)},constraint:function(E,C,T,A,P){A===void 0&&(A=1),P===void 0&&(P={}),P.bodyA=E.type==="body"?E:E.body,P.bodyB=C.type==="body"?C:C.body,isNaN(T)||(P.length=T),P.stiffness=A;var M=a.create(P);return this.world.add(M),M},worldConstraint:function(E,C,T,A){T===void 0&&(T=1),A===void 0&&(A={}),A.bodyB=E.type==="body"?E:E.body,isNaN(C)||(A.length=C),A.stiffness=T;var P=a.create(A);return this.world.add(P),P},mouseSpring:function(E){return this.pointerConstraint(E)},pointerConstraint:function(E){E===void 0&&(E={}),E.hasOwnProperty("render")||(E.render={visible:!1});var C=new c(this.scene,this.world,E);return this.world.add(C.constraint),C},image:function(E,C,T,A,P){var M=new n(this.world,E,C,T,A,P);return this.sys.displayList.add(M),M},tileBody:function(E,C){return new s(this.world,E,C)},sprite:function(E,C,T,A,P){var M=new u(this.world,E,C,T,A,P);return this.sys.displayList.add(M),this.sys.updateList.add(M),M},gameObject:function(E,C,T){return i(this.world,E,C,T)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});f.exports=y},3860:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(74527),m=t(72632),o=t(93736);function a(i){return!!i.get&&typeof i.get=="function"||!!i.set&&typeof i.set=="function"}var r=function(i,n,u,s){u===void 0&&(u={}),s===void 0&&(s=!0);var l=n.x,v=n.y;n.body={temp:!0,position:{x:l,y:v}};var c=[h.Bounce,h.Collision,h.Force,h.Friction,h.Gravity,h.Mass,h.Sensor,h.SetBody,h.Sleep,h.Static,h.Transform,h.Velocity];if(c.forEach(function(y){for(var E in y)a(y[E])?Object.defineProperty(n,E,{get:y[E].get,set:y[E].set}):Object.defineProperty(n,E,{value:y[E]})}),n.world=i,n._tempVec2=new o(l,v),u.hasOwnProperty("type")&&u.type==="body")n.setExistingBody(u,s);else{var g=m(u,"shape",null);g||(g="rectangle"),u.addToWorld=s,n.setBody(g,u)}return n};f.exports=r},7030:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(74527),o=t(89980),a=t(72632),r=t(1539),i=t(58210),n=t(93736),u=new h({Extends:r,Mixins:[m.Bounce,m.Collision,m.Force,m.Friction,m.Gravity,m.Mass,m.Sensor,m.SetBody,m.Sleep,m.Static,m.Transform,m.Velocity,i],initialize:function(l,v,c,g,y,E){o.call(this,l.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(g,y),this.setSizeToFrame(),this.setOrigin(),this.world=l,this._tempVec2=new n(v,c);var C=a(E,"shape",null);C?this.setBody(C,E):this.setRectangle(this.width,this.height,E),this.setPosition(v,c),this.initPipeline(),this.initPostPipeline(!0)}});f.exports=u},50583:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(84093),m=t(50658),o=t(68516),a=t(84125),r=t(63568),i=t(84091),n=t(56694),u=t(63454),s=t(68758),l=t(11299),v=t(56643),c=t(52838),g=t(13657),y=t(53996),E=t(72653),C=t(72632),T=t(10850),A=t(1675),P=t(80391),M=t(16929),w=t(44097),L=t(30657),F=t(70584),D=t(91327),N=t(84474),B=t(91963),b=t(13390),W=t(44272),Y=t(7599),K=t(92765),G=t(10438),z=t(39745),O=t(31468);s.setDecomp(t(81084));var V=new n({initialize:function(X){this.scene=X,this.systems=X.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=a,this.composite=l,this.collision=u,this.detector=g,this.pair=F,this.pairs=D,this.query=b,this.resolver=W,this.constraint=c,this.bodies=o,this.composites=v,this.axes=m,this.bounds=i,this.svg=K,this.vector=G,this.vertices=z,this.verts=z,this._tempVec2=G.create(),T(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),T(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),T(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),W._restingThresh=T(this.config,"restingThresh",4),W._restingThreshTangent=T(this.config,"restingThreshTangent",6),W._positionDampen=T(this.config,"positionDampen",.9),W._positionWarming=T(this.config,"positionWarming",.8),W._frictionNormalMultiplier=T(this.config,"frictionNormalMultiplier",5),X.sys.events.once(Y.BOOT,this.boot,this),X.sys.events.on(Y.START,this.start,this)},boot:function(){this.world=new O(this.scene,this.config),this.add=new E(this.world),this.bodyBounds=new r,this.systems.events.once(Y.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new O(this.scene,this.config),this.add=new E(this.world));var U=this.systems.events;U.on(Y.UPDATE,this.world.update,this.world),U.on(Y.POST_UPDATE,this.world.postUpdate,this.world),U.once(Y.SHUTDOWN,this.shutdown,this)},getConfig:function(){var U=this.systems.game.config.physics,X=this.systems.settings.physics,H=L(C(X,"matter",{}),C(U,"matter",{}));return H},enableAttractorPlugin:function(){return N.register(A),N.use(M,A),this},enableWrapPlugin:function(){return N.register(w),N.use(M,w),this},enableCollisionEventsPlugin:function(){return N.register(P),N.use(M,P),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(U,X){this.world.step(U,X)},containsPoint:function(U,X,H){U=this.getMatterBodies(U);var Q=G.create(X,H),$=b.point(U,Q);return $.length>0},intersectPoint:function(U,X,H){H=this.getMatterBodies(H);var Q=G.create(U,X),$=[],k=b.point(H,Q);return k.forEach(function(J){$.indexOf(J)===-1&&$.push(J)}),$},intersectRect:function(U,X,H,Q,$,k){$===void 0&&($=!1),k=this.getMatterBodies(k);var J={min:{x:U,y:X},max:{x:U+H,y:X+Q}},Z=[],j=b.region(k,J,$);return j.forEach(function(_){Z.indexOf(_)===-1&&Z.push(_)}),Z},intersectRay:function(U,X,H,Q,$,k){$===void 0&&($=1),k=this.getMatterBodies(k);for(var J=[],Z=b.ray(k,G.create(U,X),G.create(H,Q),$),j=0;j<Z.length;j++)J.push(Z[j].body);return J},intersectBody:function(U,X){X=this.getMatterBodies(X);for(var H=[],Q=b.collides(U,X),$=0;$<Q.length;$++){var k=Q[$];k.bodyA===U?H.push(k.bodyB):H.push(k.bodyA)}return H},overlap:function(U,X,H,Q,$){H===void 0&&(H=null),Q===void 0&&(Q=null),$===void 0&&($=H),Array.isArray(U)||(U=[U]),U=this.getMatterBodies(U),X=this.getMatterBodies(X);for(var k=!1,J=0;J<U.length;J++)for(var Z=U[J],j=b.collides(Z,X),_=0;_<j.length;_++){var q=j[_],it=q.bodyA.id===Z.id?q.bodyB:q.bodyA;if(!Q||Q.call($,Z,it,q)){if(k=!0,H)H.call($,Z,it,q);else if(!Q)return!0}}return k},setCollisionCategory:function(U,X){return U=this.getMatterBodies(U),U.forEach(function(H){H.collisionFilter.category=X}),this},setCollisionGroup:function(U,X){return U=this.getMatterBodies(U),U.forEach(function(H){H.collisionFilter.group=X}),this},setCollidesWith:function(U,X){U=this.getMatterBodies(U);var H=0;if(!Array.isArray(X))H=X;else for(var Q=0;Q<X.length;Q++)H|=X[Q];return U.forEach(function($){$.collisionFilter.mask=H}),this},getMatterBodies:function(U){if(!U)return this.world.getAllBodies();Array.isArray(U)||(U=[U]);for(var X=[],H=0;H<U.length;H++){var Q=U[H].hasOwnProperty("body")?U[H].body:U[H];X.push(Q)}return X},setVelocity:function(U,X,H){U=this.getMatterBodies(U);var Q=this._tempVec2;return Q.x=X,Q.y=H,U.forEach(function($){a.setVelocity($,Q)}),this},setVelocityX:function(U,X){U=this.getMatterBodies(U);var H=this._tempVec2;return H.x=X,U.forEach(function(Q){H.y=Q.velocity.y,a.setVelocity(Q,H)}),this},setVelocityY:function(U,X){U=this.getMatterBodies(U);var H=this._tempVec2;return H.y=X,U.forEach(function(Q){H.x=Q.velocity.x,a.setVelocity(Q,H)}),this},setAngularVelocity:function(U,X){return U=this.getMatterBodies(U),U.forEach(function(H){a.setAngularVelocity(H,X)}),this},applyForce:function(U,X){U=this.getMatterBodies(U);var H=this._tempVec2;return U.forEach(function(Q){H.x=Q.position.x,H.y=Q.position.y,a.applyForce(Q,H,X)}),this},applyForceFromPosition:function(U,X,H,Q){U=this.getMatterBodies(U);var $=this._tempVec2;return U.forEach(function(k){Q===void 0&&(Q=k.angle),$.x=H*Math.cos(Q),$.y=H*Math.sin(Q),a.applyForce(k,X,$)}),this},applyForceFromAngle:function(U,X,H){U=this.getMatterBodies(U);var Q=this._tempVec2;return U.forEach(function($){H===void 0&&(H=$.angle),Q.x=X*Math.cos(H),Q.y=X*Math.sin(H),a.applyForce($,{x:$.position.x,y:$.position.y},Q)}),this},getConstraintLength:function(U){var X=U.pointA.x,H=U.pointA.y,Q=U.pointB.x,$=U.pointB.y;return U.bodyA&&(X+=U.bodyA.position.x,H+=U.bodyA.position.y),U.bodyB&&(Q+=U.bodyB.position.x,$+=U.bodyB.position.y),y(X,H,Q,$)},alignBody:function(U,X,H,Q){U=U.hasOwnProperty("body")?U.body:U;var $;switch(Q){case h.TOP_LEFT:case h.LEFT_TOP:$=this.bodyBounds.getTopLeft(U,X,H);break;case h.TOP_CENTER:$=this.bodyBounds.getTopCenter(U,X,H);break;case h.TOP_RIGHT:case h.RIGHT_TOP:$=this.bodyBounds.getTopRight(U,X,H);break;case h.LEFT_CENTER:$=this.bodyBounds.getLeftCenter(U,X,H);break;case h.CENTER:$=this.bodyBounds.getCenter(U,X,H);break;case h.RIGHT_CENTER:$=this.bodyBounds.getRightCenter(U,X,H);break;case h.LEFT_BOTTOM:case h.BOTTOM_LEFT:$=this.bodyBounds.getBottomLeft(U,X,H);break;case h.BOTTOM_CENTER:$=this.bodyBounds.getBottomCenter(U,X,H);break;case h.BOTTOM_RIGHT:case h.RIGHT_BOTTOM:$=this.bodyBounds.getBottomRight(U,X,H);break}return $&&a.setPosition(U,$),this},shutdown:function(){var U=this.systems.events;this.world&&(U.off(Y.UPDATE,this.world.update,this.world),U.off(Y.POST_UPDATE,this.world.postUpdate,this.world)),U.off(Y.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(Y.START,this.start,this),this.scene=null,this.systems=null}});B.register("MatterPhysics",V,"matterPhysics"),f.exports=V},73658:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(16569),m=t(56694),o=t(74527),a=t(89980),r=t(72632),i=t(58210),n=t(13747),u=t(93736),s=new m({Extends:n,Mixins:[o.Bounce,o.Collision,o.Force,o.Friction,o.Gravity,o.Mass,o.Sensor,o.SetBody,o.Sleep,o.Static,o.Transform,o.Velocity,i],initialize:function(v,c,g,y,E,C){a.call(this,v.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new h(this),this.setTexture(y,E),this.setSizeToFrame(),this.setOrigin(),this.world=v,this._tempVec2=new u(c,g);var T=r(C,"shape",null);T?this.setBody(T,C):this.setRectangle(this.width,this.height,C),this.setPosition(c,g),this.initPipeline(),this.initPostPipeline(!0)}});f.exports=s},84720:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(68516),m=t(84125),o=t(56694),a=t(74527),r=t(28699),i=t(6659),n=t(72632),u=t(19256),s=t(39745),l=new o({Extends:i,Mixins:[a.Bounce,a.Collision,a.Friction,a.Gravity,a.Mass,a.Sensor,a.Sleep,a.Static],initialize:function(c,g,y){i.call(this),this.tile=g,this.world=c,g.physics.matterBody&&g.physics.matterBody.destroy(),g.physics.matterBody=this;var E=n(y,"body",null),C=n(y,"addToWorld",!0);if(E)this.setBody(E,C);else{var T=g.getCollisionGroup(),A=n(T,"objects",[]);A.length>0?this.setFromTileCollision(y):this.setFromTileRectangle(y)}if(g.flipX||g.flipY){var P={x:g.getCenterX(),y:g.getCenterY()},M=g.flipX?-1:1,w=g.flipY?-1:1;m.scale(E,M,w,P)}},setFromTileRectangle:function(v){v===void 0&&(v={}),u(v,"isStatic")||(v.isStatic=!0),u(v,"addToWorld")||(v.addToWorld=!0);var c=this.tile.getBounds(),g=c.x+c.width/2,y=c.y+c.height/2,E=h.rectangle(g,y,c.width,c.height,v);return this.setBody(E,v.addToWorld),this},setFromTileCollision:function(v){v===void 0&&(v={}),u(v,"isStatic")||(v.isStatic=!0),u(v,"addToWorld")||(v.addToWorld=!0);for(var c=this.tile.tilemapLayer.scaleX,g=this.tile.tilemapLayer.scaleY,y=this.tile.getLeft(),E=this.tile.getTop(),C=this.tile.getCollisionGroup(),T=n(C,"objects",[]),A=[],P=0;P<T.length;P++){var M=T[P],w=y+M.x*c,L=E+M.y*g,F=M.width*c,D=M.height*g,N=null;if(M.rectangle)N=h.rectangle(w+F/2,L+D/2,F,D,v);else if(M.ellipse)N=h.circle(w+F/2,L+D/2,F/2,v);else if(M.polygon||M.polyline){var B=M.polygon?M.polygon:M.polyline,b=B.map(function(G){return{x:G.x*c,y:G.y*g}}),W=s.create(b),Y=s.centre(W);w+=Y.x,L+=Y.y,N=h.fromVertices(w,L,W,v)}N&&A.push(N)}if(A.length===1)this.setBody(A[0],v.addToWorld);else if(A.length>1){var K=r(v);K.parts=A,this.setBody(m.create(K),K.addToWorld)}return this},setBody:function(v,c){return c===void 0&&(c=!0),this.body&&this.removeBody(),this.body=v,this.body.gameObject=this,c&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});f.exports=l},10998:(f,S,t)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(68516),m=t(84125),o=t(68758),a=t(72632),r=t(39745),i={parseBody:function(n,u,s,l){l===void 0&&(l={});for(var v=a(s,"fixtures",[]),c=[],g=0;g<v.length;g++)for(var y=this.parseFixture(v[g]),E=0;E<y.length;E++)c.push(y[E]);var C=o.clone(s,!0);o.extend(C,l,!0),delete C.fixtures,delete C.type;var T=m.create(C);return m.setParts(T,c),m.setPosition(T,{x:n,y:u}),T},parseFixture:function(n){var u=o.extend({},!1,n);delete u.circle,delete u.vertices;var s;if(n.circle){var l=a(n.circle,"x"),v=a(n.circle,"y"),c=a(n.circle,"radius");s=[h.circle(l,v,c,u)]}else n.vertices&&(s=this.parseVertices(n.vertices,u));return s},parseVertices:function(n,u){u===void 0&&(u={});for(var s=[],l=0;l<n.length;l++)r.clockwiseSort(n[l]),s.push(m.create(o.extend({position:r.centre(n[l]),vertices:n[l]},u)));return h.flagCoincidentParts(s)}};f.exports=i},72829:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(68516),m=t(84125),o={parseBody:function(a,r,i,n){n===void 0&&(n={});var u,s=i.vertices;if(s.length===1)n.vertices=s[0],u=m.create(n),h.flagCoincidentParts(u.parts);else{for(var l=[],v=0;v<s.length;v++){var c=m.create({vertices:s[v]});l.push(c)}h.flagCoincidentParts(l),n.parts=l,u=m.create(n)}return u.label=i.label,m.setPosition(u,{x:a,y:r}),u}};f.exports=o},88596:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(84091),m=t(56694),o=t(11299),a=t(52838),r=t(13657),i=t(35416),n=t(33963),u=t(30657),s=t(22806),l=t(93736),v=t(39745),c=new m({initialize:function(y,E,C){C===void 0&&(C={});var T={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=y,this.world=E,this.camera=null,this.pointer=null,this.active=!0,this.position=new l,this.body=null,this.part=null,this.constraint=a.create(u(C,T)),this.world.on(i.BEFORE_UPDATE,this.update,this),y.sys.input.on(n.POINTER_DOWN,this.onDown,this),y.sys.input.on(n.POINTER_UP,this.onUp,this)},onDown:function(g){this.pointer||(this.pointer=g,this.camera=g.camera)},onUp:function(g){g===this.pointer&&(this.pointer=null)},getBody:function(g){var y=this.position,E=this.constraint;this.camera.getWorldPoint(g.x,g.y,y);for(var C=o.allBodies(this.world.localWorld),T=0;T<C.length;T++){var A=C[T];if(!A.ignorePointer&&h.contains(A.bounds,y)&&r.canCollide(A.collisionFilter,E.collisionFilter)&&this.hitTestBody(A,y))return this.world.emit(i.DRAG_START,A,this.part,this),!0}return!1},hitTestBody:function(g,y){for(var E=this.constraint,C=g.parts.length,T=C>1?1:0,A=T;A<C;A++){var P=g.parts[A];if(v.contains(P.vertices,y))return E.pointA=y,E.pointB={x:y.x-g.position.x,y:y.y-g.position.y},E.bodyB=g,E.angleB=g.angle,s.set(g,!1),this.part=P,this.body=g,!0}return!1},update:function(){var g=this.pointer,y=this.body;if(!this.active||!g){y&&this.stopDrag();return}if(!g.isDown&&y){this.stopDrag();return}else if(g.isDown){if(!y&&!this.getBody(g))return;y=this.body;var E=this.position,C=this.constraint;this.camera.getWorldPoint(g.x,g.y,E),C.pointA.x=E.x,C.pointA.y=E.y,s.set(y,!1),this.world.emit(i.DRAG,y,this)}},stopDrag:function(){var g=this.body,y=this.constraint;y.bodyB=null,y.pointB=null,this.pointer=null,this.body=null,this.part=null,g&&this.world.emit(i.DRAG_END,g,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(i.BEFORE_UPDATE,this.update),this.scene.sys.input.off(n.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(n.POINTER_UP,this.onUp,this)}});f.exports=c},31468:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(68516),m=t(84125),o=t(56694),a=t(68758),r=t(11299),i=t(45775),n=t(6659),u=t(35416),s=t(72632),l=t(10850),v=t(84125),c=t(39073),g=t(84720),y=t(72005),E=t(10438),C=new o({Extends:n,initialize:function(A,P){n.call(this),this.scene=A,this.engine=i.create(P),this.localWorld=this.engine.world;var M=l(P,"gravity",null);M?this.setGravity(M.x,M.y,M.scale):M===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=l(P,"enabled",!0),this.getDelta=l(P,"getDelta",this.update60Hz);var w=s(P,"runner",{}),L=s(w,"fps",!1),F=s(w,"fps",60),D=s(w,"delta",1e3/F),N=s(w,"deltaMin",1e3/F),B=s(w,"deltaMax",1e3/(F*.5));L||(F=1e3/D),this.runner={fps:F,deltaSampleSize:s(w,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:s(w,"isFixed",!1),delta:D,deltaMin:N,deltaMax:B},this.autoUpdate=l(P,"autoUpdate",!0);var b=l(P,"debug",!1);if(this.drawDebug=typeof b=="object"?!0:b,this.debugGraphic,this.debugConfig={showAxes:s(b,"showAxes",!1),showAngleIndicator:s(b,"showAngleIndicator",!1),angleColor:s(b,"angleColor",15208787),showBroadphase:s(b,"showBroadphase",!1),broadphaseColor:s(b,"broadphaseColor",16757760),showBounds:s(b,"showBounds",!1),boundsColor:s(b,"boundsColor",16777215),showVelocity:s(b,"showVelocity",!1),velocityColor:s(b,"velocityColor",44783),showCollisions:s(b,"showCollisions",!1),collisionColor:s(b,"collisionColor",16094476),showSeparations:s(b,"showSeparations",!1),separationColor:s(b,"separationColor",16753920),showBody:s(b,"showBody",!0),showStaticBody:s(b,"showStaticBody",!0),showInternalEdges:s(b,"showInternalEdges",!1),renderFill:s(b,"renderFill",!1),renderLine:s(b,"renderLine",!0),fillColor:s(b,"fillColor",1075465),fillOpacity:s(b,"fillOpacity",1),lineColor:s(b,"lineColor",2678297),lineOpacity:s(b,"lineOpacity",1),lineThickness:s(b,"lineThickness",1),staticFillColor:s(b,"staticFillColor",857979),staticLineColor:s(b,"staticLineColor",1255396),showSleeping:s(b,"showSleeping",!1),staticBodySleepOpacity:s(b,"staticBodySleepOpacity",.7),sleepFillColor:s(b,"sleepFillColor",4605510),sleepLineColor:s(b,"sleepLineColor",10066585),showSensors:s(b,"showSensors",!0),sensorFillColor:s(b,"sensorFillColor",857979),sensorLineColor:s(b,"sensorLineColor",1255396),showPositions:s(b,"showPositions",!0),positionSize:s(b,"positionSize",4),positionColor:s(b,"positionColor",14697178),showJoint:s(b,"showJoint",!0),jointColor:s(b,"jointColor",14737474),jointLineOpacity:s(b,"jointLineOpacity",1),jointLineThickness:s(b,"jointLineThickness",2),pinSize:s(b,"pinSize",4),pinColor:s(b,"pinColor",4382944),springColor:s(b,"springColor",14697184),anchorColor:s(b,"anchorColor",15724527),anchorSize:s(b,"anchorSize",4),showConvexHulls:s(b,"showConvexHulls",!1),hullColor:s(b,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),s(P,"setBounds",!1)){var W=P.setBounds;if(typeof W=="boolean")this.setBounds();else{var Y=s(W,"x",0),K=s(W,"y",0),G=s(W,"width",A.sys.scale.width),z=s(W,"height",A.sys.scale.height),O=s(W,"thickness",64),V=s(W,"left",!0),U=s(W,"right",!0),X=s(W,"top",!0),H=s(W,"bottom",!0);this.setBounds(Y,K,G,z,O,V,U,X,H)}}},setCompositeRenderStyle:function(T){var A=T.bodies,P=T.constraints,M=T.composites,w,L,F;for(w=0;w<A.length;w++)L=A[w],F=L.render,this.setBodyRenderStyle(L,F.lineColor,F.lineOpacity,F.lineThickness,F.fillColor,F.fillOpacity);for(w=0;w<P.length;w++)L=P[w],F=L.render,this.setConstraintRenderStyle(L,F.lineColor,F.lineOpacity,F.lineThickness,F.pinSize,F.anchorColor,F.anchorSize);for(w=0;w<M.length;w++)L=M[w],this.setCompositeRenderStyle(L);return this},setBodyRenderStyle:function(T,A,P,M,w,L){var F=T.render,D=this.debugConfig;return F?(A==null&&(A=T.isStatic?D.staticLineColor:D.lineColor),P==null&&(P=D.lineOpacity),M==null&&(M=D.lineThickness),w==null&&(w=T.isStatic?D.staticFillColor:D.fillColor),L==null&&(L=D.fillOpacity),A!==!1&&(F.lineColor=A),P!==!1&&(F.lineOpacity=P),M!==!1&&(F.lineThickness=M),w!==!1&&(F.fillColor=w),L!==!1&&(F.fillOpacity=L),this):this},setConstraintRenderStyle:function(T,A,P,M,w,L,F){var D=T.render,N=this.debugConfig;if(!D)return this;if(A==null){var B=D.type;B==="line"?A=N.jointColor:B==="pin"?A=N.pinColor:B==="spring"&&(A=N.springColor)}return P==null&&(P=N.jointLineOpacity),M==null&&(M=N.jointLineThickness),w==null&&(w=N.pinSize),L==null&&(L=N.anchorColor),F==null&&(F=N.anchorSize),A!==!1&&(D.lineColor=A),P!==!1&&(D.lineOpacity=P),M!==!1&&(D.lineThickness=M),w!==!1&&(D.pinSize=w),L!==!1&&(D.anchorColor=L),F!==!1&&(D.anchorSize=F),this},setEventsProxy:function(){var T=this,A=this.engine,P=this.localWorld;this.drawDebug&&(c.on(P,"compositeModified",function(M){T.setCompositeRenderStyle(M)}),c.on(P,"beforeAdd",function(M){for(var w=[].concat(M.object),L=0;L<w.length;L++){var F=w[L],D=F.render;F.type==="body"?T.setBodyRenderStyle(F,D.lineColor,D.lineOpacity,D.lineThickness,D.fillColor,D.fillOpacity):F.type==="composite"?T.setCompositeRenderStyle(F):F.type==="constraint"&&T.setConstraintRenderStyle(F,D.lineColor,D.lineOpacity,D.lineThickness,D.pinSize,D.anchorColor,D.anchorSize)}})),c.on(P,"beforeAdd",function(M){T.emit(u.BEFORE_ADD,M)}),c.on(P,"afterAdd",function(M){T.emit(u.AFTER_ADD,M)}),c.on(P,"beforeRemove",function(M){T.emit(u.BEFORE_REMOVE,M)}),c.on(P,"afterRemove",function(M){T.emit(u.AFTER_REMOVE,M)}),c.on(A,"beforeUpdate",function(M){T.emit(u.BEFORE_UPDATE,M)}),c.on(A,"afterUpdate",function(M){T.emit(u.AFTER_UPDATE,M)}),c.on(A,"collisionStart",function(M){var w=M.pairs,L,F;w.length>0&&(L=w[0].bodyA,F=w[0].bodyB),T.emit(u.COLLISION_START,M,L,F)}),c.on(A,"collisionActive",function(M){var w=M.pairs,L,F;w.length>0&&(L=w[0].bodyA,F=w[0].bodyB),T.emit(u.COLLISION_ACTIVE,M,L,F)}),c.on(A,"collisionEnd",function(M){var w=M.pairs,L,F;w.length>0&&(L=w[0].bodyA,F=w[0].bodyB),T.emit(u.COLLISION_END,M,L,F)})},setBounds:function(T,A,P,M,w,L,F,D,N){return T===void 0&&(T=0),A===void 0&&(A=0),P===void 0&&(P=this.scene.sys.scale.width),M===void 0&&(M=this.scene.sys.scale.height),w===void 0&&(w=64),L===void 0&&(L=!0),F===void 0&&(F=!0),D===void 0&&(D=!0),N===void 0&&(N=!0),this.updateWall(L,"left",T-w,A-w,w,M+w*2),this.updateWall(F,"right",T+P,A-w,w,M+w*2),this.updateWall(D,"top",T,A-w,P,w),this.updateWall(N,"bottom",T,A+M,P,w),this},updateWall:function(T,A,P,M,w,L){var F=this.walls[A];T?(F&&y.remove(this.localWorld,F),P+=w/2,M+=L/2,this.walls[A]=this.create(P,M,w,L,{isStatic:!0,friction:0,frictionStatic:0})):(F&&y.remove(this.localWorld,F),this.walls[A]=null)},createDebugGraphic:function(){var T=this.scene.sys.add.graphics({x:0,y:0});return T.setDepth(Number.MAX_VALUE),this.debugGraphic=T,this.drawDebug=!0,T},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(T,A,P){return T===void 0&&(T=0),A===void 0&&(A=1),P===void 0&&(P=.001),this.localWorld.gravity.x=T,this.localWorld.gravity.y=A,this.localWorld.gravity.scale=P,this},create:function(T,A,P,M,w){var L=h.rectangle(T,A,P,M,w);return y.add(this.localWorld,L),L},add:function(T){return y.add(this.localWorld,T),this},remove:function(T,A){Array.isArray(T)||(T=[T]);for(var P=0;P<T.length;P++){var M=T[P],w=M.body?M.body:M;r.remove(this.localWorld,w,A)}return this},removeConstraint:function(T,A){return r.remove(this.localWorld,T,A),this},convertTilemapLayer:function(T,A){var P=T.layer,M=T.getTilesWithin(0,0,P.width,P.height,{isColliding:!0});return this.convertTiles(M,A),this},convertTiles:function(T,A){if(T.length===0)return this;for(var P=0;P<T.length;P++)new g(this,T[P],A);return this},nextGroup:function(T){return v.nextGroup(T)},nextCategory:function(){return v.nextCategory()},pause:function(){return this.enabled=!1,this.emit(u.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(u.RESUME),this},update:function(T,A){if(!(!this.enabled||!this.autoUpdate)){var P=this.engine,M=this.runner,w=P.timing;M.isFixed?A=this.getDelta(T,A):(A=T-M.timePrev||M.delta,M.timePrev=T,M.deltaHistory.push(A),M.deltaHistory=M.deltaHistory.slice(-M.deltaSampleSize),A=Math.min.apply(null,M.deltaHistory),A=A<M.deltaMin?M.deltaMin:A,A=A>M.deltaMax?M.deltaMax:A,M.delta=A),M.timeScalePrev=w.timeScale,M.frameCounter+=1,T-M.counterTimestamp>=1e3&&(M.fps=M.frameCounter*((T-M.counterTimestamp)/1e3),M.counterTimestamp=T,M.frameCounter=0),i.update(P,A)}},step:function(T){i.update(this.engine,T)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(T){var A=T.hasOwnProperty("body")?T.body:T;return r.get(this.localWorld,A.id,A.type)!==null},getAllBodies:function(){return r.allBodies(this.localWorld)},getAllConstraints:function(){return r.allConstraints(this.localWorld)},getAllComposites:function(){return r.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var T=this.debugConfig,A=this.engine,P=this.debugGraphic,M=r.allBodies(this.localWorld);this.debugGraphic.clear(),T.showBroadphase&&A.broadphase.controller&&this.renderGrid(A.broadphase,P,T.broadphaseColor,.5),T.showBounds&&this.renderBodyBounds(M,P,T.boundsColor,.5),(T.showBody||T.showStaticBody)&&this.renderBodies(M),T.showJoint&&this.renderJoints(),(T.showAxes||T.showAngleIndicator)&&this.renderBodyAxes(M,P,T.showAxes,T.angleColor,.5),T.showVelocity&&this.renderBodyVelocity(M,P,T.velocityColor,1,2),T.showSeparations&&this.renderSeparations(A.pairs.list,P,T.separationColor),T.showCollisions&&this.renderCollisions(A.pairs.list,P,T.collisionColor)}},renderGrid:function(T,A,P,M){A.lineStyle(1,P,M);for(var w=a.keys(T.buckets),L=0;L<w.length;L++){var F=w[L];if(!(T.buckets[F].length<2)){var D=F.split(/C|R/);A.strokeRect(parseInt(D[1],10)*T.bucketWidth,parseInt(D[2],10)*T.bucketHeight,T.bucketWidth,T.bucketHeight)}}return this},renderSeparations:function(T,A,P){A.lineStyle(1,P,1);for(var M=0;M<T.length;M++){var w=T[M];if(w.isActive){var L=w.collision,F=L.bodyA,D=L.bodyB,N=F.position,B=D.position,b=L.penetration,W=!F.isStatic&&!D.isStatic?4:1;D.isStatic&&(W=0),A.lineBetween(B.x,B.y,B.x-b.x*W,B.y-b.y*W),W=!F.isStatic&&!D.isStatic?4:1,F.isStatic&&(W=0),A.lineBetween(N.x,N.y,N.x-b.x*W,N.y-b.y*W)}}return this},renderCollisions:function(T,A,P){A.lineStyle(1,P,.5),A.fillStyle(P,1);var M,w;for(M=0;M<T.length;M++)if(w=T[M],!!w.isActive)for(var L=0;L<w.activeContacts.length;L++){var F=w.activeContacts[L],D=F.vertex;A.fillRect(D.x-2,D.y-2,5,5)}for(M=0;M<T.length;M++)if(w=T[M],!!w.isActive){var N=w.collision,B=w.activeContacts;if(B.length>0){var b=B[0].vertex.x,W=B[0].vertex.y;B.length===2&&(b=(B[0].vertex.x+B[1].vertex.x)/2,W=(B[0].vertex.y+B[1].vertex.y)/2),N.bodyB===N.supports[0].body||N.bodyA.isStatic?A.lineBetween(b-N.normal.x*8,W-N.normal.y*8,b,W):A.lineBetween(b+N.normal.x*8,W+N.normal.y*8,b,W)}}return this},renderBodyBounds:function(T,A,P,M){A.lineStyle(1,P,M);for(var w=0;w<T.length;w++){var L=T[w];if(L.render.visible){var F=L.bounds;if(F)A.strokeRect(F.min.x,F.min.y,F.max.x-F.min.x,F.max.y-F.min.y);else for(var D=L.parts,N=D.length>1?1:0;N<D.length;N++){var B=D[N];A.strokeRect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}}return this},renderBodyAxes:function(T,A,P,M,w){A.lineStyle(1,M,w);for(var L=0;L<T.length;L++){var F=T[L],D=F.parts;if(F.render.visible){var N,B,b;if(P)for(B=D.length>1?1:0;B<D.length;B++)for(N=D[B],b=0;b<N.axes.length;b++){var W=N.axes[b];A.lineBetween(N.position.x,N.position.y,N.position.x+W.x*20,N.position.y+W.y*20)}else for(B=D.length>1?1:0;B<D.length;B++)for(N=D[B],b=0;b<N.axes.length;b++)A.lineBetween(N.position.x,N.position.y,(N.vertices[0].x+N.vertices[N.vertices.length-1].x)/2,(N.vertices[0].y+N.vertices[N.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(T,A,P,M,w){A.lineStyle(w,P,M);for(var L=0;L<T.length;L++){var F=T[L];F.render.visible&&A.lineBetween(F.position.x,F.position.y,F.position.x+(F.position.x-F.positionPrev.x)*2,F.position.y+(F.position.y-F.positionPrev.y)*2)}return this},renderBodies:function(T){for(var A=this.debugGraphic,P=this.debugConfig,M=P.showBody,w=P.showStaticBody,L=P.showSleeping,F=P.showInternalEdges,D=P.showConvexHulls,N=P.renderFill,B=P.renderLine,b=P.staticBodySleepOpacity,W=P.sleepFillColor,Y=P.sleepLineColor,K=P.hullColor,G=0;G<T.length;G++){var z=T[G];if(z.render.visible&&!(!w&&z.isStatic||!M&&!z.isStatic)){var O=z.render.lineColor,V=z.render.lineOpacity,U=z.render.lineThickness,X=z.render.fillColor,H=z.render.fillOpacity;L&&z.isSleeping&&(z.isStatic?(V*=b,H*=b):(O=Y,X=W)),N||(X=null),B||(O=null),this.renderBody(z,A,F,O,V,U,X,H);var Q=z.parts.length;D&&Q>1&&this.renderConvexHull(z,A,K,U)}}},renderBody:function(T,A,P,M,w,L,F,D){M===void 0&&(M=null),w===void 0&&(w=null),L===void 0&&(L=1),F===void 0&&(F=null),D===void 0&&(D=null);for(var N=this.debugConfig,B=N.sensorFillColor,b=N.sensorLineColor,W=T.parts,Y=W.length,K=Y>1?1:0;K<Y;K++){var G=W[K],z=G.render,O=z.opacity;if(!(!z.visible||O===0||G.isSensor&&!N.showSensors)){var V=G.circleRadius;if(A.beginPath(),G.isSensor?(F!==null&&A.fillStyle(B,D*O),M!==null&&A.lineStyle(L,b,w*O)):(F!==null&&A.fillStyle(F,D*O),M!==null&&A.lineStyle(L,M,w*O)),V)A.arc(G.position.x,G.position.y,V,0,2*Math.PI);else{var U=G.vertices,X=U.length;A.moveTo(U[0].x,U[0].y);for(var H=1;H<X;H++){var Q=U[H];if(!U[H-1].isInternal||P?A.lineTo(Q.x,Q.y):A.moveTo(Q.x,Q.y),H<X&&Q.isInternal&&!P){var $=(H+1)%X;A.moveTo(U[$].x,U[$].y)}}A.closePath()}F!==null&&A.fillPath(),M!==null&&A.strokePath()}}if(N.showPositions&&!T.isStatic){var k=T.position.x,J=T.position.y,Z=Math.ceil(N.positionSize/2);A.fillStyle(N.positionColor,1),A.fillRect(k-Z,J-Z,N.positionSize,N.positionSize)}return this},renderConvexHull:function(T,A,P,M){M===void 0&&(M=1);var w=T.parts,L=w.length;if(L>1){var F=T.vertices;A.lineStyle(M,P),A.beginPath(),A.moveTo(F[0].x,F[0].y);for(var D=1;D<F.length;D++)A.lineTo(F[D].x,F[D].y);A.lineTo(F[0].x,F[0].y),A.strokePath()}return this},renderJoints:function(){for(var T=this.debugGraphic,A=r.allConstraints(this.localWorld),P=0;P<A.length;P++){var M=A[P].render,w=M.lineColor,L=M.lineOpacity,F=M.lineThickness,D=M.pinSize,N=M.anchorColor,B=M.anchorSize;this.renderConstraint(A[P],T,w,L,F,D,N,B)}},renderConstraint:function(T,A,P,M,w,L,F,D){var N=T.render;if(!N.visible||!T.pointA||!T.pointB)return this;A.lineStyle(w,P,M);var B=T.bodyA,b=T.bodyB,W,Y;if(B?W=E.add(B.position,T.pointA):W=T.pointA,N.type==="pin")A.strokeCircle(W.x,W.y,L);else{if(b?Y=E.add(b.position,T.pointB):Y=T.pointB,A.beginPath(),A.moveTo(W.x,W.y),N.type==="spring")for(var K=E.sub(Y,W),G=E.perp(E.normalise(K)),z=Math.ceil(a.clamp(T.length/5,12,20)),O,V=1;V<z;V+=1)O=V%2===0?1:-1,A.lineTo(W.x+K.x*(V/z)+G.x*O*4,W.y+K.y*(V/z)+G.y*O*4);A.lineTo(Y.x,Y.y)}return A.strokePath(),N.anchors&&D>0&&(A.fillStyle(F),A.fillCircle(W.x,W.y,D),A.fillCircle(Y.x,Y.y,D)),this},resetCollisionIDs:function(){return m._nextCollidingGroupId=1,m._nextNonCollidingGroupId=-1,m._nextCategory=1,this},shutdown:function(){c.off(this.engine),this.removeAllListeners(),y.clear(this.localWorld,!1),i.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});f.exports=C},95349:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setBounce:function(t){return this.body.restitution=t,this}};f.exports=S},70679:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setCollisionCategory:function(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function(t){var h=0;if(!Array.isArray(t))h=t;else for(var m=0;m<t.length;m++)h|=t[m];return this.body.collisionFilter.mask=h,this},setOnCollide:function(t){return this.body.onCollideCallback=t,this},setOnCollideEnd:function(t){return this.body.onCollideEndCallback=t,this},setOnCollideActive:function(t){return this.body.onCollideActiveCallback=t,this},setOnCollideWith:function(t,h){Array.isArray(t)||(t=[t]);for(var m=0;m<t.length;m++){var o=t[m].hasOwnProperty("body")?t[m].body:t[m];this.body.setOnCollideWith(o,h)}return this}};f.exports=S},77178:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(84125),m={applyForce:function(o){return this._tempVec2.set(this.body.position.x,this.body.position.y),h.applyForce(this.body,this._tempVec2,o),this},applyForceFrom:function(o,a){return h.applyForce(this.body,o,a),this},thrust:function(o){var a=this.body.angle;return this._tempVec2.set(o*Math.cos(a),o*Math.sin(a)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(o){var a=this.body.angle-Math.PI/2;return this._tempVec2.set(o*Math.cos(a),o*Math.sin(a)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(o){var a=this.body.angle+Math.PI/2;return this._tempVec2.set(o*Math.cos(a),o*Math.sin(a)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(o){var a=this.body.angle-Math.PI;return this._tempVec2.set(o*Math.cos(a),o*Math.sin(a)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};f.exports=m},74015:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setFriction:function(t,h,m){return this.body.friction=t,h!==void 0&&(this.body.frictionAir=h),m!==void 0&&(this.body.frictionStatic=m),this},setFrictionAir:function(t){return this.body.frictionAir=t,this},setFrictionStatic:function(t){return this.body.frictionStatic=t,this}};f.exports=S},11535:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setIgnoreGravity:function(t){return this.body.ignoreGravity=t,this}};f.exports=S},74497:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(84125),m=t(93736),o={setMass:function(a){return h.setMass(this.body,a),this},setDensity:function(a){return h.setDensity(this.body,a),this},centerOfMass:{get:function(){return new m(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};f.exports=o},75529:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={setSensor:function(t){return this.body.isSensor=t,this},isSensor:function(){return this.body.isSensor}};f.exports=S},64024:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(68516),m=t(84125),o=t(88456),a=t(72632),r=t(10998),i=t(72829),n=t(39745),u={setRectangle:function(s,l,v){return this.setBody({type:"rectangle",width:s,height:l},v)},setCircle:function(s,l){return this.setBody({type:"circle",radius:s},l)},setPolygon:function(s,l,v){return this.setBody({type:"polygon",sides:l,radius:s},v)},setTrapezoid:function(s,l,v,c){return this.setBody({type:"trapezoid",width:s,height:l,slope:v},c)},setExistingBody:function(s,l){l===void 0&&(l=!0),this.body&&this.world.remove(this.body,!0),this.body=s;for(var v=0;v<s.parts.length;v++)s.parts[v].gameObject=this;var c=this;if(s.destroy=function(){c.world.remove(c.body,!0),c.body.gameObject=null},l&&(this.world.has(s)&&this.world.remove(s,!0),this.world.add(s)),this._originComponent){var g=s.render.sprite.xOffset,y=s.render.sprite.yOffset,E=s.centerOfMass.x,C=s.centerOfMass.y;if(o(E,.5)&&o(C,.5))this.setOrigin(g+.5,y+.5);else{var T=s.centerOffset.x,A=s.centerOffset.y;this.setOrigin(g+T/this.displayWidth,y+A/this.displayHeight)}}return this},setBody:function(s,l){if(!s)return this;var v;typeof s=="string"&&(s={type:s});var c=a(s,"type","rectangle"),g=a(s,"x",this._tempVec2.x),y=a(s,"y",this._tempVec2.y),E=a(s,"width",this.width),C=a(s,"height",this.height);switch(c){case"rectangle":v=h.rectangle(g,y,E,C,l);break;case"circle":var T=a(s,"radius",Math.max(E,C)/2),A=a(s,"maxSides",25);v=h.circle(g,y,T,l,A);break;case"trapezoid":var P=a(s,"slope",.5);v=h.trapezoid(g,y,E,C,P,l);break;case"polygon":var M=a(s,"sides",5),w=a(s,"radius",Math.max(E,C)/2);v=h.polygon(g,y,M,w,l);break;case"fromVertices":case"fromVerts":var L=a(s,"verts",null);if(L)if(typeof L=="string"&&(L=n.fromPath(L)),this.body&&!this.body.hasOwnProperty("temp"))m.setVertices(this.body,L),v=this.body;else{var F=a(s,"flagInternal",!1),D=a(s,"removeCollinear",.01),N=a(s,"minimumArea",10);v=h.fromVertices(g,y,L,l,F,D,N)}break;case"fromPhysicsEditor":v=r.parseBody(g,y,s,l);break;case"fromPhysicsTracer":v=i.parseBody(g,y,s,l);break}return v&&this.setExistingBody(v,s.addToWorld),this}};f.exports=u},25106:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(35416),m=t(22806),o=t(39073),a={setToSleep:function(){return m.set(this.body,!0),this},setAwake:function(){return m.set(this.body,!1),this},setSleepThreshold:function(r){return r===void 0&&(r=60),this.body.sleepThreshold=r,this},setSleepEvents:function(r,i){return this.setSleepStartEvent(r),this.setSleepEndEvent(i),this},setSleepStartEvent:function(r){if(r){var i=this.world;o.on(this.body,"sleepStart",function(n){i.emit(h.SLEEP_START,n,this)})}else o.off(this.body,"sleepStart");return this},setSleepEndEvent:function(r){if(r){var i=this.world;o.on(this.body,"sleepEnd",function(n){i.emit(h.SLEEP_END,n,this)})}else o.off(this.body,"sleepEnd");return this}};f.exports=a},82884:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(84125),m={setStatic:function(o){return h.setStatic(this.body,o),this},isStatic:function(){return this.body.isStatic}};f.exports=m},4753:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(84125),m=t(83392),o=t(35786),a=t(62138),r=4,i={x:{get:function(){return this.body.position.x},set:function(n){this._tempVec2.set(n,this.y),h.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(n){this._tempVec2.set(this.x,n),h.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(n){var u=1/this._scaleX,s=1/this._scaleY;this._scaleX=n,this._scaleX===0?this.renderFlags&=~r:this.renderFlags|=r,h.scale(this.body,u,s),h.scale(this.body,n,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(n){var u=1/this._scaleX,s=1/this._scaleY;this._scaleY=n,this._scaleY===0?this.renderFlags&=~r:this.renderFlags|=r,h.scale(this.body,u,s),h.scale(this.body,this._scaleX,n)}},angle:{get:function(){return a(this.body.angle*m.RAD_TO_DEG)},set:function(n){this.rotation=a(n)*m.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(n){this._rotation=o(n),h.setAngle(this.body,this._rotation)}},setPosition:function(n,u){return n===void 0&&(n=0),u===void 0&&(u=n),this._tempVec2.set(n,u),h.setPosition(this.body,this._tempVec2),this},setRotation:function(n){return n===void 0&&(n=0),this._rotation=o(n),h.setAngle(this.body,n),this},setFixedRotation:function(){return h.setInertia(this.body,1/0),this},setAngle:function(n){return n===void 0&&(n=0),this.angle=n,h.setAngle(this.body,this.rotation),this},setScale:function(n,u,s){n===void 0&&(n=1),u===void 0&&(u=n);var l=1/this._scaleX,v=1/this._scaleY;return this._scaleX=n,this._scaleY=u,h.scale(this.body,l,v,s),h.scale(this.body,n,u,s),this}};f.exports=i},37268:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(84125),m={setVelocityX:function(o){return this._tempVec2.set(o,this.body.velocity.y),h.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(o){return this._tempVec2.set(this.body.velocity.x,o),h.setVelocity(this.body,this._tempVec2),this},setVelocity:function(o,a){return this._tempVec2.set(o,a),h.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return h.getVelocity(this.body)},setAngularVelocity:function(o){return h.setAngularVelocity(this.body,o),this},getAngularVelocity:function(){return h.getAngularVelocity(this.body)},setAngularSpeed:function(o){return h.setAngularSpeed(this.body,o),this},getAngularSpeed:function(){return h.getAngularSpeed(this.body)}};f.exports=m},74527:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Bounce:t(95349),Collision:t(70679),Force:t(77178),Friction:t(74015),Gravity:t(11535),Mass:t(74497),Sensor:t(75529),SetBody:t(64024),Sleep:t(25106),Static:t(82884),Transform:t(4753),Velocity:t(37268)}},63201:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="afteradd"},30474:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="afterremove"},44822:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="afterupdate"},88820:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="beforeadd"},94849:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="beforeremove"},6391:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="beforeupdate"},96738:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="collisionactive"},7916:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="collisionend"},59529:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="collisionstart"},10219:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="dragend"},183:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="drag"},39143:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="dragstart"},16483:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pause"},35806:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="resume"},22106:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="sleepend"},5803:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="sleepstart"},35416:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={AFTER_ADD:t(63201),AFTER_REMOVE:t(30474),AFTER_UPDATE:t(44822),BEFORE_ADD:t(88820),BEFORE_REMOVE:t(94849),BEFORE_UPDATE:t(6391),COLLISION_ACTIVE:t(96738),COLLISION_END:t(7916),COLLISION_START:t(59529),DRAG_END:t(10219),DRAG:t(183),DRAG_START:t(39143),PAUSE:t(16483),RESUME:t(35806),SLEEP_END:t(22106),SLEEP_START:t(5803)}},45949:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={BodyBounds:t(63568),Components:t(74527),Events:t(35416),Factory:t(72653),MatterGameObject:t(3860),Image:t(7030),Matter:t(18171),MatterPhysics:t(50583),PolyDecomp:t(81084),Sprite:t(73658),TileBody:t(84720),PhysicsEditorParser:t(10998),PhysicsJSONParser:t(72829),PointerConstraint:t(88596),World:t(31468)}},84125:(f,S,t)=>{var h={};f.exports=h;var m=t(39745),o=t(10438),a=t(22806),r=t(68758),i=t(84091),n=t(50658);(function(){h._timeCorrection=!0,h._inertiaScale=4,h._nextCollidingGroupId=1,h._nextNonCollidingGroupId=-1,h._nextCategory=1,h._baseDelta=16.666666666666668,h.create=function(s){var l={id:r.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!s.hasOwnProperty("position")&&s.hasOwnProperty("vertices")?s.position=m.centre(s.vertices):s.hasOwnProperty("vertices")||(l.vertices=m.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var v=r.extend(l,s);return u(v,s),v.setOnCollideWith=function(c,g){return g?this.onCollideWith[c.id]=g:delete this.onCollideWith[c.id],this},v},h.nextGroup=function(s){return s?h._nextNonCollidingGroupId--:h._nextCollidingGroupId++},h.nextCategory=function(){return h._nextCategory=h._nextCategory<<1,h._nextCategory};var u=function(s,l){if(l=l||{},h.set(s,{bounds:s.bounds||i.create(s.vertices),positionPrev:s.positionPrev||o.clone(s.position),anglePrev:s.anglePrev||s.angle,vertices:s.vertices,parts:s.parts||[s],isStatic:s.isStatic,isSleeping:s.isSleeping,parent:s.parent||s}),m.rotate(s.vertices,s.angle,s.position),n.rotate(s.axes,s.angle),i.update(s.bounds,s.vertices,s.velocity),h.set(s,{axes:l.axes||s.axes,area:l.area||s.area,mass:l.mass||s.mass,inertia:l.inertia||s.inertia}),s.parts.length===1){var v=s.bounds,c=s.centerOfMass,g=s.centerOffset,y=v.max.x-v.min.x,E=v.max.y-v.min.y;c.x=-(v.min.x-s.position.x)/y,c.y=-(v.min.y-s.position.y)/E,g.x=y*c.x,g.y=E*c.y}};h.set=function(s,l,v){var c;typeof l=="string"&&(c=l,l={},l[c]=v);for(c in l)if(Object.prototype.hasOwnProperty.call(l,c))switch(v=l[c],c){case"isStatic":h.setStatic(s,v);break;case"isSleeping":a.set(s,v);break;case"mass":h.setMass(s,v);break;case"density":h.setDensity(s,v);break;case"inertia":h.setInertia(s,v);break;case"vertices":h.setVertices(s,v);break;case"position":h.setPosition(s,v);break;case"angle":h.setAngle(s,v);break;case"velocity":h.setVelocity(s,v);break;case"angularVelocity":h.setAngularVelocity(s,v);break;case"speed":h.setSpeed(s,v);break;case"angularSpeed":h.setAngularSpeed(s,v);break;case"parts":h.setParts(s,v);break;case"centre":h.setCentre(s,v);break;default:s[c]=v}},h.setStatic=function(s,l){for(var v=0;v<s.parts.length;v++){var c=s.parts[v];l?(c.isStatic||(c._original={restitution:c.restitution,friction:c.friction,mass:c.mass,inertia:c.inertia,density:c.density,inverseMass:c.inverseMass,inverseInertia:c.inverseInertia}),c.restitution=0,c.friction=1,c.mass=c.inertia=c.density=1/0,c.inverseMass=c.inverseInertia=0,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.anglePrev=c.angle,c.angularVelocity=0,c.speed=0,c.angularSpeed=0,c.motion=0):c._original&&(c.restitution=c._original.restitution,c.friction=c._original.friction,c.mass=c._original.mass,c.inertia=c._original.inertia,c.density=c._original.density,c.inverseMass=c._original.inverseMass,c.inverseInertia=c._original.inverseInertia,c._original=null),c.isStatic=l}},h.setMass=function(s,l){var v=s.inertia/(s.mass/6);s.inertia=v*(l/6),s.inverseInertia=1/s.inertia,s.mass=l,s.inverseMass=1/s.mass,s.density=s.mass/s.area},h.setDensity=function(s,l){h.setMass(s,l*s.area),s.density=l},h.setInertia=function(s,l){s.inertia=l,s.inverseInertia=1/s.inertia},h.setVertices=function(s,l){l[0].body===s?s.vertices=l:s.vertices=m.create(l,s),s.axes=n.fromVertices(s.vertices),s.area=m.area(s.vertices),h.setMass(s,s.density*s.area);var v=m.centre(s.vertices);m.translate(s.vertices,v,-1),h.setInertia(s,h._inertiaScale*m.inertia(s.vertices,s.mass)),m.translate(s.vertices,s.position),i.update(s.bounds,s.vertices,s.velocity)},h.setParts=function(s,l,v){var c;for(l=l.slice(0),s.parts.length=0,s.parts.push(s),s.parent=s,c=0;c<l.length;c++){var g=l[c];g!==s&&(g.parent=s,s.parts.push(g))}if(s.parts.length!==1){if(v=typeof v<"u"?v:!0,v){var y=[];for(c=0;c<l.length;c++)y=y.concat(l[c].vertices);m.clockwiseSort(y);var E=m.hull(y),C=m.centre(E);h.setVertices(s,E),m.translate(s.vertices,C)}var T=h._totalProperties(s),A=T.centre.x,P=T.centre.y,M=s.bounds,w=s.centerOfMass,L=s.centerOffset;i.update(M,s.vertices,s.velocity),w.x=-(M.min.x-A)/(M.max.x-M.min.x),w.y=-(M.min.y-P)/(M.max.y-M.min.y),L.x=A,L.y=P,s.area=T.area,s.parent=s,s.position.x=A,s.position.y=P,s.positionPrev.x=A,s.positionPrev.y=P,h.setMass(s,T.mass),h.setInertia(s,T.inertia),h.setPosition(s,T.centre)}},h.setCentre=function(s,l,v){v?(s.positionPrev.x+=l.x,s.positionPrev.y+=l.y,s.position.x+=l.x,s.position.y+=l.y):(s.positionPrev.x=l.x-(s.position.x-s.positionPrev.x),s.positionPrev.y=l.y-(s.position.y-s.positionPrev.y),s.position.x=l.x,s.position.y=l.y)},h.setPosition=function(s,l,v){var c=o.sub(l,s.position);v?(s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.velocity.x=c.x,s.velocity.y=c.y,s.speed=o.magnitude(c)):(s.positionPrev.x+=c.x,s.positionPrev.y+=c.y);for(var g=0;g<s.parts.length;g++){var y=s.parts[g];y.position.x+=c.x,y.position.y+=c.y,m.translate(y.vertices,c),i.update(y.bounds,y.vertices,s.velocity)}},h.setAngle=function(s,l,v){var c=l-s.angle;v?(s.anglePrev=s.angle,s.angularVelocity=c,s.angularSpeed=Math.abs(c)):s.anglePrev+=c;for(var g=0;g<s.parts.length;g++){var y=s.parts[g];y.angle+=c,m.rotate(y.vertices,c,s.position),n.rotate(y.axes,c),i.update(y.bounds,y.vertices,s.velocity),g>0&&o.rotateAbout(y.position,c,s.position,y.position)}},h.setVelocity=function(s,l){var v=s.deltaTime/h._baseDelta;s.positionPrev.x=s.position.x-l.x*v,s.positionPrev.y=s.position.y-l.y*v,s.velocity.x=(s.position.x-s.positionPrev.x)/v,s.velocity.y=(s.position.y-s.positionPrev.y)/v,s.speed=o.magnitude(s.velocity)},h.getVelocity=function(s){var l=h._baseDelta/s.deltaTime;return{x:(s.position.x-s.positionPrev.x)*l,y:(s.position.y-s.positionPrev.y)*l}},h.getSpeed=function(s){return o.magnitude(h.getVelocity(s))},h.setSpeed=function(s,l){h.setVelocity(s,o.mult(o.normalise(h.getVelocity(s)),l))},h.setAngularVelocity=function(s,l){var v=s.deltaTime/h._baseDelta;s.anglePrev=s.angle-l*v,s.angularVelocity=(s.angle-s.anglePrev)/v,s.angularSpeed=Math.abs(s.angularVelocity)},h.getAngularVelocity=function(s){return(s.angle-s.anglePrev)*h._baseDelta/s.deltaTime},h.getAngularSpeed=function(s){return Math.abs(h.getAngularVelocity(s))},h.setAngularSpeed=function(s,l){h.setAngularVelocity(s,r.sign(h.getAngularVelocity(s))*l)},h.translate=function(s,l,v){h.setPosition(s,o.add(s.position,l),v)},h.rotate=function(s,l,v,c){if(!v)h.setAngle(s,s.angle+l,c);else{var g=Math.cos(l),y=Math.sin(l),E=s.position.x-v.x,C=s.position.y-v.y;h.setPosition(s,{x:v.x+(E*g-C*y),y:v.y+(E*y+C*g)},c),h.setAngle(s,s.angle+l,c)}},h.scale=function(s,l,v,c){var g=0,y=0;c=c||s.position;for(var E=0;E<s.parts.length;E++){var C=s.parts[E];C.scale.x=l,C.scale.y=v,m.scale(C.vertices,l,v,c),C.axes=n.fromVertices(C.vertices),C.area=m.area(C.vertices),h.setMass(C,s.density*C.area),m.translate(C.vertices,{x:-C.position.x,y:-C.position.y}),h.setInertia(C,h._inertiaScale*m.inertia(C.vertices,C.mass)),m.translate(C.vertices,{x:C.position.x,y:C.position.y}),E>0&&(g+=C.area,y+=C.inertia),C.position.x=c.x+(C.position.x-c.x)*l,C.position.y=c.y+(C.position.y-c.y)*v,i.update(C.bounds,C.vertices,s.velocity)}s.parts.length>1&&(s.area=g,s.isStatic||(h.setMass(s,s.density*g),h.setInertia(s,y))),s.circleRadius&&(l===v?s.circleRadius*=l:s.circleRadius=null)},h.update=function(s,l){l=(typeof l<"u"?l:16.666666666666668)*s.timeScale;var v=l*l,c=h._timeCorrection?l/(s.deltaTime||l):1,g=1-s.frictionAir*(l/r._baseDelta),y=(s.position.x-s.positionPrev.x)*c,E=(s.position.y-s.positionPrev.y)*c;s.velocity.x=y*g+s.force.x/s.mass*v,s.velocity.y=E*g+s.force.y/s.mass*v,s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.position.x+=s.velocity.x,s.position.y+=s.velocity.y,s.deltaTime=l,s.angularVelocity=(s.angle-s.anglePrev)*g*c+s.torque/s.inertia*v,s.anglePrev=s.angle,s.angle+=s.angularVelocity,s.speed=o.magnitude(s.velocity),s.angularSpeed=Math.abs(s.angularVelocity);for(var C=0;C<s.parts.length;C++){var T=s.parts[C];m.translate(T.vertices,s.velocity),C>0&&(T.position.x+=s.velocity.x,T.position.y+=s.velocity.y),s.angularVelocity!==0&&(m.rotate(T.vertices,s.angularVelocity,s.position),n.rotate(T.axes,s.angularVelocity),C>0&&o.rotateAbout(T.position,s.angularVelocity,s.position,T.position)),i.update(T.bounds,T.vertices,s.velocity)}},h.updateVelocities=function(s){var l=h._baseDelta/s.deltaTime,v=s.velocity;v.x=(s.position.x-s.positionPrev.x)*l,v.y=(s.position.y-s.positionPrev.y)*l,s.speed=Math.sqrt(v.x*v.x+v.y*v.y),s.angularVelocity=(s.angle-s.anglePrev)*l,s.angularSpeed=Math.abs(s.angularVelocity)},h.applyForce=function(s,l,v){var c={x:l.x-s.position.x,y:l.y-s.position.y};s.force.x+=v.x,s.force.y+=v.y,s.torque+=c.x*v.y-c.y*v.x},h._totalProperties=function(s){for(var l={mass:0,area:0,inertia:0,centre:{x:0,y:0}},v=s.parts.length===1?0:1;v<s.parts.length;v++){var c=s.parts[v],g=c.mass!==1/0?c.mass:1;l.mass+=g,l.area+=c.area,l.inertia+=c.inertia,l.centre=o.add(l.centre,o.mult(c.position,g))}return l.centre=o.div(l.centre,l.mass),l}})()},11299:(f,S,t)=>{var h={};f.exports=h;var m=t(39073),o=t(68758),a=t(84091),r=t(84125);(function(){h.create=function(i){return o.extend({id:o.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},i)},h.setModified=function(i,n,u,s){if(m.trigger(i,"compositeModified",i),i.isModified=n,n&&i.cache&&(i.cache.allBodies=null,i.cache.allConstraints=null,i.cache.allComposites=null),u&&i.parent&&h.setModified(i.parent,n,u,s),s)for(var l=0;l<i.composites.length;l++){var v=i.composites[l];h.setModified(v,n,u,s)}},h.add=function(i,n){var u=[].concat(n);m.trigger(i,"beforeAdd",{object:n});for(var s=0;s<u.length;s++){var l=u[s];switch(l.type){case"body":if(l.parent!==l){o.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}h.addBody(i,l);break;case"constraint":h.addConstraint(i,l);break;case"composite":h.addComposite(i,l);break;case"mouseConstraint":h.addConstraint(i,l.constraint);break}}return m.trigger(i,"afterAdd",{object:n}),i},h.remove=function(i,n,u){var s=[].concat(n);m.trigger(i,"beforeRemove",{object:n});for(var l=0;l<s.length;l++){var v=s[l];switch(v.type){case"body":h.removeBody(i,v,u);break;case"constraint":h.removeConstraint(i,v,u);break;case"composite":h.removeComposite(i,v,u);break;case"mouseConstraint":h.removeConstraint(i,v.constraint);break}}return m.trigger(i,"afterRemove",{object:n}),i},h.addComposite=function(i,n){return i.composites.push(n),n.parent=i,h.setModified(i,!0,!0,!1),i},h.removeComposite=function(i,n,u){var s=o.indexOf(i.composites,n);if(s!==-1&&h.removeCompositeAt(i,s),u)for(var l=0;l<i.composites.length;l++)h.removeComposite(i.composites[l],n,!0);return i},h.removeCompositeAt=function(i,n){return i.composites.splice(n,1),h.setModified(i,!0,!0,!1),i},h.addBody=function(i,n){return i.bodies.push(n),h.setModified(i,!0,!0,!1),i},h.removeBody=function(i,n,u){var s=o.indexOf(i.bodies,n);if(s!==-1&&h.removeBodyAt(i,s),u)for(var l=0;l<i.composites.length;l++)h.removeBody(i.composites[l],n,!0);return i},h.removeBodyAt=function(i,n){return i.bodies.splice(n,1),h.setModified(i,!0,!0,!1),i},h.addConstraint=function(i,n){return i.constraints.push(n),h.setModified(i,!0,!0,!1),i},h.removeConstraint=function(i,n,u){var s=o.indexOf(i.constraints,n);if(s!==-1&&h.removeConstraintAt(i,s),u)for(var l=0;l<i.composites.length;l++)h.removeConstraint(i.composites[l],n,!0);return i},h.removeConstraintAt=function(i,n){return i.constraints.splice(n,1),h.setModified(i,!0,!0,!1),i},h.clear=function(i,n,u){if(u)for(var s=0;s<i.composites.length;s++)h.clear(i.composites[s],n,!0);return n?i.bodies=i.bodies.filter(function(l){return l.isStatic}):i.bodies.length=0,i.constraints.length=0,i.composites.length=0,h.setModified(i,!0,!0,!1),i},h.allBodies=function(i){if(i.cache&&i.cache.allBodies)return i.cache.allBodies;for(var n=[].concat(i.bodies),u=0;u<i.composites.length;u++)n=n.concat(h.allBodies(i.composites[u]));return i.cache&&(i.cache.allBodies=n),n},h.allConstraints=function(i){if(i.cache&&i.cache.allConstraints)return i.cache.allConstraints;for(var n=[].concat(i.constraints),u=0;u<i.composites.length;u++)n=n.concat(h.allConstraints(i.composites[u]));return i.cache&&(i.cache.allConstraints=n),n},h.allComposites=function(i){if(i.cache&&i.cache.allComposites)return i.cache.allComposites;for(var n=[].concat(i.composites),u=0;u<i.composites.length;u++)n=n.concat(h.allComposites(i.composites[u]));return i.cache&&(i.cache.allComposites=n),n},h.get=function(i,n,u){var s,l;switch(u){case"body":s=h.allBodies(i);break;case"constraint":s=h.allConstraints(i);break;case"composite":s=h.allComposites(i).concat(i);break}return s?(l=s.filter(function(v){return v.id.toString()===n.toString()}),l.length===0?null:l[0]):null},h.move=function(i,n,u){return h.remove(i,n),h.add(u,n),i},h.rebase=function(i){for(var n=h.allBodies(i).concat(h.allConstraints(i)).concat(h.allComposites(i)),u=0;u<n.length;u++)n[u].id=o.nextId();return i},h.translate=function(i,n,u){for(var s=u?h.allBodies(i):i.bodies,l=0;l<s.length;l++)r.translate(s[l],n);return i},h.rotate=function(i,n,u,s){for(var l=Math.cos(n),v=Math.sin(n),c=s?h.allBodies(i):i.bodies,g=0;g<c.length;g++){var y=c[g],E=y.position.x-u.x,C=y.position.y-u.y;r.setPosition(y,{x:u.x+(E*l-C*v),y:u.y+(E*v+C*l)}),r.rotate(y,n)}return i},h.scale=function(i,n,u,s,l){for(var v=l?h.allBodies(i):i.bodies,c=0;c<v.length;c++){var g=v[c],y=g.position.x-s.x,E=g.position.y-s.y;r.setPosition(g,{x:s.x+y*n,y:s.y+E*u}),r.scale(g,n,u)}return i},h.bounds=function(i){for(var n=h.allBodies(i),u=[],s=0;s<n.length;s+=1){var l=n[s];u.push(l.bounds.min,l.bounds.max)}return a.create(u)}})()},72005:(f,S,t)=>{var h={};f.exports=h;var m=t(11299);(function(){h.create=m.create,h.add=m.add,h.remove=m.remove,h.clear=m.clear,h.addComposite=m.addComposite,h.addBody=m.addBody,h.addConstraint=m.addConstraint})()},63454:(f,S,t)=>{var h={};f.exports=h;var m=t(39745),o=t(70584);(function(){var a=[],r={overlap:0,axis:null},i={overlap:0,axis:null};h.create=function(n,u){return{pair:null,collided:!1,bodyA:n,bodyB:u,parentA:n.parent,parentB:u.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},h.collides=function(n,u,s){if(h._overlapAxes(r,n.vertices,u.vertices,n.axes),r.overlap<=0||(h._overlapAxes(i,u.vertices,n.vertices,u.axes),i.overlap<=0))return null;var l=s&&s.table[o.id(n,u)],v;l?v=l.collision:(v=h.create(n,u),v.collided=!0,v.bodyA=n.id<u.id?n:u,v.bodyB=n.id<u.id?u:n,v.parentA=v.bodyA.parent,v.parentB=v.bodyB.parent),n=v.bodyA,u=v.bodyB;var c;r.overlap<i.overlap?c=r:c=i;var g=v.normal,y=v.supports,E=c.axis,C=E.x,T=E.y;C*(u.position.x-n.position.x)+T*(u.position.y-n.position.y)<0?(g.x=C,g.y=T):(g.x=-C,g.y=-T),v.tangent.x=-g.y,v.tangent.y=g.x,v.depth=c.overlap,v.penetration.x=g.x*v.depth,v.penetration.y=g.y*v.depth;var A=h._findSupports(n,u,g,1),P=0;if(m.contains(n.vertices,A[0])&&(y[P++]=A[0]),m.contains(n.vertices,A[1])&&(y[P++]=A[1]),P<2){var M=h._findSupports(u,n,g,-1);m.contains(u.vertices,M[0])&&(y[P++]=M[0]),P<2&&m.contains(u.vertices,M[1])&&(y[P++]=M[1])}return P===0&&(y[P++]=A[0]),y.length=P,v},h._overlapAxes=function(n,u,s,l){var v=u.length,c=s.length,g=u[0].x,y=u[0].y,E=s[0].x,C=s[0].y,T=l.length,A=Number.MAX_VALUE,P=0,M,w,L,F,D,N;for(D=0;D<T;D++){var B=l[D],b=B.x,W=B.y,Y=g*b+y*W,K=E*b+C*W,G=Y,z=K;for(N=1;N<v;N+=1)F=u[N].x*b+u[N].y*W,F>G?G=F:F<Y&&(Y=F);for(N=1;N<c;N+=1)F=s[N].x*b+s[N].y*W,F>z?z=F:F<K&&(K=F);if(w=G-K,L=z-Y,M=w<L?w:L,M<A&&(A=M,P=D,M<=0))break}n.axis=l[P],n.overlap=A},h._projectToAxis=function(n,u,s){for(var l=u[0].x*s.x+u[0].y*s.y,v=l,c=1;c<u.length;c+=1){var g=u[c].x*s.x+u[c].y*s.y;g>v?v=g:g<l&&(l=g)}n.min=l,n.max=v},h._findSupports=function(n,u,s,l){var v=u.vertices,c=v.length,g=n.position.x,y=n.position.y,E=s.x*l,C=s.y*l,T=Number.MAX_VALUE,A,P,M,w,L;for(L=0;L<c;L+=1)P=v[L],w=E*(g-P.x)+C*(y-P.y),w<T&&(T=w,A=P);return M=v[(c+A.index-1)%c],T=E*(g-M.x)+C*(y-M.y),P=v[(A.index+1)%c],E*(g-P.x)+C*(y-P.y)<T?(a[0]=A,a[1]=P,a):(a[0]=A,a[1]=M,a)}})()},17319:f=>{var S={};f.exports=S,function(){S.create=function(t){return{vertex:t,normalImpulse:0,tangentImpulse:0}}}()},13657:(f,S,t)=>{var h={};f.exports=h;var m=t(68758),o=t(63454);(function(){h.create=function(a){var r={bodies:[],pairs:null};return m.extend(r,a)},h.setBodies=function(a,r){a.bodies=r.slice(0)},h.clear=function(a){a.bodies=[]},h.collisions=function(a){var r=[],i=a.pairs,n=a.bodies,u=n.length,s=h.canCollide,l=o.collides,v,c;for(n.sort(h._compareBoundsX),v=0;v<u;v++){var g=n[v],y=g.bounds,E=g.bounds.max.x,C=g.bounds.max.y,T=g.bounds.min.y,A=g.isStatic||g.isSleeping,P=g.parts.length,M=P===1;for(c=v+1;c<u;c++){var w=n[c],L=w.bounds;if(L.min.x>E)break;if(!(C<L.min.y||T>L.max.y)&&!(A&&(w.isStatic||w.isSleeping))&&s(g.collisionFilter,w.collisionFilter)){var F=w.parts.length;if(M&&F===1){var D=l(g,w,i);D&&r.push(D)}else for(var N=P>1?1:0,B=F>1?1:0,b=N;b<P;b++)for(var W=g.parts[b],y=W.bounds,Y=B;Y<F;Y++){var K=w.parts[Y],L=K.bounds;if(!(y.min.x>L.max.x||y.max.x<L.min.x||y.max.y<L.min.y||y.min.y>L.max.y)){var D=l(W,K,i);D&&r.push(D)}}}}}return r},h.canCollide=function(a,r){return a.group===r.group&&a.group!==0?a.group>0:(a.mask&r.category)!==0&&(r.mask&a.category)!==0},h._compareBoundsX=function(a,r){return a.bounds.min.x-r.bounds.min.x}})()},70584:(f,S,t)=>{var h={};f.exports=h;var m=t(17319);(function(){h.create=function(o,a){var r=o.bodyA,i=o.bodyB,n={id:h.id(r,i),bodyA:r,bodyB:i,collision:o,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:r.isSensor||i.isSensor,timeCreated:a,timeUpdated:a,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return h.update(n,o,a),n},h.update=function(o,a,r){var i=o.contacts,n=a.supports,u=o.activeContacts,s=a.parentA,l=a.parentB,v=s.vertices.length;o.isActive=!0,o.timeUpdated=r,o.collision=a,o.separation=a.depth,o.inverseMass=s.inverseMass+l.inverseMass,o.friction=s.friction<l.friction?s.friction:l.friction,o.frictionStatic=s.frictionStatic>l.frictionStatic?s.frictionStatic:l.frictionStatic,o.restitution=s.restitution>l.restitution?s.restitution:l.restitution,o.slop=s.slop>l.slop?s.slop:l.slop,a.pair=o,u.length=0;for(var c=0;c<n.length;c++){var g=n[c],y=g.body===s?g.index:v+g.index,E=i[y];E?u.push(E):u.push(i[y]=m.create(g))}},h.setActive=function(o,a,r){a?(o.isActive=!0,o.timeUpdated=r):(o.isActive=!1,o.activeContacts.length=0)},h.id=function(o,a){return o.id<a.id?"A"+o.id+"B"+a.id:"A"+a.id+"B"+o.id}})()},91327:(f,S,t)=>{var h={};f.exports=h;var m=t(70584),o=t(68758);(function(){h.create=function(a){return o.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},a)},h.update=function(a,r,i){var n=a.list,u=n.length,s=a.table,l=r.length,v=a.collisionStart,c=a.collisionEnd,g=a.collisionActive,y,E,C,T;for(v.length=0,c.length=0,g.length=0,T=0;T<u;T++)n[T].confirmedActive=!1;for(T=0;T<l;T++)y=r[T],C=y.pair,C?(C.isActive?g.push(C):v.push(C),m.update(C,y,i),C.confirmedActive=!0):(C=m.create(y,i),s[C.id]=C,v.push(C),n.push(C));var A=[];for(u=n.length,T=0;T<u;T++)C=n[T],C.confirmedActive||(m.setActive(C,!1,i),c.push(C),!C.collision.bodyA.isSleeping&&!C.collision.bodyB.isSleeping&&A.push(T));for(T=0;T<A.length;T++)E=A[T]-T,C=n[E],n.splice(E,1),delete s[C.id]},h.clear=function(a){return a.table={},a.list.length=0,a.collisionStart.length=0,a.collisionActive.length=0,a.collisionEnd.length=0,a}})()},13390:(f,S,t)=>{var h={};f.exports=h;var m=t(10438),o=t(63454),a=t(84091),r=t(68516),i=t(39745);(function(){h.collides=function(n,u){for(var s=[],l=u.length,v=n.bounds,c=o.collides,g=a.overlaps,y=0;y<l;y++){var E=u[y],C=E.parts.length,T=C===1?0:1;if(n!==E&&g(E.bounds,v))for(var A=T;A<C;A++){var P=E.parts[A];if(g(P.bounds,v)){var M=c(P,n);if(M){s.push(M);break}}}}return s},h.ray=function(n,u,s,l){l=l||1e-100;for(var v=m.angle(u,s),c=m.magnitude(m.sub(u,s)),g=(s.x+u.x)*.5,y=(s.y+u.y)*.5,E=r.rectangle(g,y,c,l,{angle:v}),C=h.collides(E,n),T=0;T<C.length;T+=1){var A=C[T];A.body=A.bodyB=A.bodyA}return C},h.region=function(n,u,s){for(var l=[],v=0;v<n.length;v++){var c=n[v],g=a.overlaps(c.bounds,u);(g&&!s||!g&&s)&&l.push(c)}return l},h.point=function(n,u){for(var s=[],l=0;l<n.length;l++){var v=n[l];if(a.contains(v.bounds,u))for(var c=v.parts.length===1?0:1;c<v.parts.length;c++){var g=v.parts[c];if(a.contains(g.bounds,u)&&i.contains(g.vertices,u)){s.push(v);break}}}return s}})()},44272:(f,S,t)=>{var h={};f.exports=h;var m=t(39745),o=t(68758),a=t(84091);(function(){h._restingThresh=2,h._restingThreshTangent=Math.sqrt(6),h._positionDampen=.9,h._positionWarming=.8,h._frictionNormalMultiplier=5,h._frictionMaxStatic=Number.MAX_VALUE,h.preSolvePosition=function(r){var i,n,u,s=r.length;for(i=0;i<s;i++)n=r[i],n.isActive&&(u=n.activeContacts.length,n.collision.parentA.totalContacts+=u,n.collision.parentB.totalContacts+=u)},h.solvePosition=function(r,i,n){var u,s,l,v,c,g,y,E,C=h._positionDampen*(n||1),T=o.clamp(i/o._baseDelta,0,1),A=r.length;for(u=0;u<A;u++)s=r[u],!(!s.isActive||s.isSensor)&&(l=s.collision,v=l.parentA,c=l.parentB,g=l.normal,s.separation=g.x*(c.positionImpulse.x+l.penetration.x-v.positionImpulse.x)+g.y*(c.positionImpulse.y+l.penetration.y-v.positionImpulse.y));for(u=0;u<A;u++)s=r[u],!(!s.isActive||s.isSensor)&&(l=s.collision,v=l.parentA,c=l.parentB,g=l.normal,E=s.separation-s.slop*T,(v.isStatic||c.isStatic)&&(E*=2),v.isStatic||v.isSleeping||(y=C/v.totalContacts,v.positionImpulse.x+=g.x*E*y,v.positionImpulse.y+=g.y*E*y),c.isStatic||c.isSleeping||(y=C/c.totalContacts,c.positionImpulse.x-=g.x*E*y,c.positionImpulse.y-=g.y*E*y))},h.postSolvePosition=function(r){for(var i=h._positionWarming,n=r.length,u=m.translate,s=a.update,l=0;l<n;l++){var v=r[l],c=v.positionImpulse,g=c.x,y=c.y,E=v.velocity;if(v.totalContacts=0,g!==0||y!==0){for(var C=0;C<v.parts.length;C++){var T=v.parts[C];u(T.vertices,c),s(T.bounds,T.vertices,E),T.position.x+=g,T.position.y+=y}v.positionPrev.x+=g,v.positionPrev.y+=y,g*E.x+y*E.y<0?(c.x=0,c.y=0):(c.x*=i,c.y*=i)}}},h.preSolveVelocity=function(r){var i=r.length,n,u;for(n=0;n<i;n++){var s=r[n];if(!(!s.isActive||s.isSensor)){var l=s.activeContacts,v=l.length,c=s.collision,g=c.parentA,y=c.parentB,E=c.normal,C=c.tangent;for(u=0;u<v;u++){var T=l[u],A=T.vertex,P=T.normalImpulse,M=T.tangentImpulse;if(P!==0||M!==0){var w=E.x*P+C.x*M,L=E.y*P+C.y*M;g.isStatic||g.isSleeping||(g.positionPrev.x+=w*g.inverseMass,g.positionPrev.y+=L*g.inverseMass,g.anglePrev+=g.inverseInertia*((A.x-g.position.x)*L-(A.y-g.position.y)*w)),y.isStatic||y.isSleeping||(y.positionPrev.x-=w*y.inverseMass,y.positionPrev.y-=L*y.inverseMass,y.anglePrev-=y.inverseInertia*((A.x-y.position.x)*L-(A.y-y.position.y)*w))}}}}},h.solveVelocity=function(r,i){var n=i/o._baseDelta,u=n*n,s=u*n,l=-h._restingThresh*n,v=h._restingThreshTangent,c=h._frictionNormalMultiplier*n,g=h._frictionMaxStatic,y=r.length,E,C,T,A;for(T=0;T<y;T++){var P=r[T];if(!(!P.isActive||P.isSensor)){var M=P.collision,w=M.parentA,L=M.parentB,F=w.velocity,D=L.velocity,N=M.normal.x,B=M.normal.y,b=M.tangent.x,W=M.tangent.y,Y=P.activeContacts,K=Y.length,G=1/K,z=w.inverseMass+L.inverseMass,O=P.friction*P.frictionStatic*c;for(F.x=w.position.x-w.positionPrev.x,F.y=w.position.y-w.positionPrev.y,D.x=L.position.x-L.positionPrev.x,D.y=L.position.y-L.positionPrev.y,w.angularVelocity=w.angle-w.anglePrev,L.angularVelocity=L.angle-L.anglePrev,A=0;A<K;A++){var V=Y[A],U=V.vertex,X=U.x-w.position.x,H=U.y-w.position.y,Q=U.x-L.position.x,$=U.y-L.position.y,k=F.x-H*w.angularVelocity,J=F.y+X*w.angularVelocity,Z=D.x-$*L.angularVelocity,j=D.y+Q*L.angularVelocity,_=k-Z,q=J-j,it=N*_+B*q,ht=b*_+W*q,ft=P.separation+it,ut=Math.min(ft,1);ut=ft<0?0:ut;var tt=ut*O;ht<-tt||ht>tt?(C=ht>0?ht:-ht,E=P.friction*(ht>0?1:-1)*s,E<-C?E=-C:E>C&&(E=C)):(E=ht,C=g);var rt=X*B-H*N,st=Q*B-$*N,xt=G/(z+w.inverseInertia*rt*rt+L.inverseInertia*st*st),gt=(1+P.restitution)*it*xt;if(E*=xt,it<l)V.normalImpulse=0;else{var Xt=V.normalImpulse;V.normalImpulse+=gt,V.normalImpulse>0&&(V.normalImpulse=0),gt=V.normalImpulse-Xt}if(ht<-v||ht>v)V.tangentImpulse=0;else{var Dt=V.tangentImpulse;V.tangentImpulse+=E,V.tangentImpulse<-C&&(V.tangentImpulse=-C),V.tangentImpulse>C&&(V.tangentImpulse=C),E=V.tangentImpulse-Dt}var It=N*gt+b*E,Et=B*gt+W*E;w.isStatic||w.isSleeping||(w.positionPrev.x+=It*w.inverseMass,w.positionPrev.y+=Et*w.inverseMass,w.anglePrev+=(X*Et-H*It)*w.inverseInertia),L.isStatic||L.isSleeping||(L.positionPrev.x-=It*L.inverseMass,L.positionPrev.y-=Et*L.inverseMass,L.anglePrev-=(Q*Et-$*It)*L.inverseInertia)}}}}})()},52838:(f,S,t)=>{var h={};f.exports=h;var m=t(39745),o=t(10438),a=t(22806),r=t(84091),i=t(50658),n=t(68758);(function(){h._warming=.4,h._torqueDampen=1,h._minLength=1e-6,h.create=function(u){var s=u;s.bodyA&&!s.pointA&&(s.pointA={x:0,y:0}),s.bodyB&&!s.pointB&&(s.pointB={x:0,y:0});var l=s.bodyA?o.add(s.bodyA.position,s.pointA):s.pointA,v=s.bodyB?o.add(s.bodyB.position,s.pointB):s.pointB,c=o.magnitude(o.sub(l,v));s.length=typeof s.length<"u"?s.length:c,s.id=s.id||n.nextId(),s.label=s.label||"Constraint",s.type="constraint",s.stiffness=s.stiffness||(s.length>0?1:.7),s.damping=s.damping||0,s.angularStiffness=s.angularStiffness||0,s.angleA=s.bodyA?s.bodyA.angle:s.angleA,s.angleB=s.bodyB?s.bodyB.angle:s.angleB,s.plugin={};var g={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return s.length===0&&s.stiffness>.1?(g.type="pin",g.anchors=!1):s.stiffness<.9&&(g.type="spring"),s.render=n.extend(g,s.render),s},h.preSolveAll=function(u){for(var s=0;s<u.length;s+=1){var l=u[s],v=l.constraintImpulse;l.isStatic||v.x===0&&v.y===0&&v.angle===0||(l.position.x+=v.x,l.position.y+=v.y,l.angle+=v.angle)}},h.solveAll=function(u,s){for(var l=n.clamp(s/n._baseDelta,0,1),v=0;v<u.length;v+=1){var c=u[v],g=!c.bodyA||c.bodyA&&c.bodyA.isStatic,y=!c.bodyB||c.bodyB&&c.bodyB.isStatic;(g||y)&&h.solve(u[v],l)}for(v=0;v<u.length;v+=1)c=u[v],g=!c.bodyA||c.bodyA&&c.bodyA.isStatic,y=!c.bodyB||c.bodyB&&c.bodyB.isStatic,!g&&!y&&h.solve(u[v],l)},h.solve=function(u,s){var l=u.bodyA,v=u.bodyB,c=u.pointA,g=u.pointB;if(!(!l&&!v)){l&&!l.isStatic&&(o.rotate(c,l.angle-u.angleA,c),u.angleA=l.angle),v&&!v.isStatic&&(o.rotate(g,v.angle-u.angleB,g),u.angleB=v.angle);var y=c,E=g;if(l&&(y=o.add(l.position,c)),v&&(E=o.add(v.position,g)),!(!y||!E)){var C=o.sub(y,E),T=o.magnitude(C);T<h._minLength&&(T=h._minLength);var A=(T-u.length)/T,P=u.stiffness>=1||u.length===0,M=P?u.stiffness*s:u.stiffness*s*s,w=u.damping*s,L=o.mult(C,A*M),F=(l?l.inverseMass:0)+(v?v.inverseMass:0),D=(l?l.inverseInertia:0)+(v?v.inverseInertia:0),N=F+D,B,b,W,Y,K;if(w>0){var G=o.create();W=o.div(C,T),K=o.sub(v&&o.sub(v.position,v.positionPrev)||G,l&&o.sub(l.position,l.positionPrev)||G),Y=o.dot(W,K)}l&&!l.isStatic&&(b=l.inverseMass/F,l.constraintImpulse.x-=L.x*b,l.constraintImpulse.y-=L.y*b,l.position.x-=L.x*b,l.position.y-=L.y*b,w>0&&(l.positionPrev.x-=w*W.x*Y*b,l.positionPrev.y-=w*W.y*Y*b),B=o.cross(c,L)/N*h._torqueDampen*l.inverseInertia*(1-u.angularStiffness),l.constraintImpulse.angle-=B,l.angle-=B),v&&!v.isStatic&&(b=v.inverseMass/F,v.constraintImpulse.x+=L.x*b,v.constraintImpulse.y+=L.y*b,v.position.x+=L.x*b,v.position.y+=L.y*b,w>0&&(v.positionPrev.x+=w*W.x*Y*b,v.positionPrev.y+=w*W.y*Y*b),B=o.cross(g,L)/N*h._torqueDampen*v.inverseInertia*(1-u.angularStiffness),v.constraintImpulse.angle+=B,v.angle+=B)}}},h.postSolveAll=function(u){for(var s=0;s<u.length;s++){var l=u[s],v=l.constraintImpulse;if(!(l.isStatic||v.x===0&&v.y===0&&v.angle===0)){a.set(l,!1);for(var c=0;c<l.parts.length;c++){var g=l.parts[c];m.translate(g.vertices,v),c>0&&(g.position.x+=v.x,g.position.y+=v.y),v.angle!==0&&(m.rotate(g.vertices,v.angle,l.position),i.rotate(g.axes,v.angle),c>0&&o.rotateAbout(g.position,v.angle,l.position,g.position)),r.update(g.bounds,g.vertices,l.velocity)}v.angle*=h._warming,v.x*=h._warming,v.y*=h._warming}}},h.pointAWorld=function(u){return{x:(u.bodyA?u.bodyA.position.x:0)+(u.pointA?u.pointA.x:0),y:(u.bodyA?u.bodyA.position.y:0)+(u.pointA?u.pointA.y:0)}},h.pointBWorld=function(u){return{x:(u.bodyB?u.bodyB.position.x:0)+(u.pointB?u.pointB.x:0),y:(u.bodyB?u.bodyB.position.y:0)+(u.pointB?u.pointB.y:0)}},h.currentLength=function(u){var s=(u.bodyA?u.bodyA.position.x:0)+(u.pointA?u.pointA.x:0),l=(u.bodyA?u.bodyA.position.y:0)+(u.pointA?u.pointA.y:0),v=(u.bodyB?u.bodyB.position.x:0)+(u.pointB?u.pointB.x:0),c=(u.bodyB?u.bodyB.position.y:0)+(u.pointB?u.pointB.y:0),g=s-v,y=l-c;return Math.sqrt(g*g+y*y)}})()},68758:(f,S,t)=>{var h={};f.exports=h,function(){h._baseDelta=16.666666666666668,h._nextId=0,h._seed=0,h._nowStartTime=+new Date,h._warnedOnce={},h._decomp=null,h.extend=function(o,a){var r,i;typeof a=="boolean"?(r=2,i=a):(r=1,i=!0);for(var n=r;n<arguments.length;n++){var u=arguments[n];if(u)for(var s in u)i&&u[s]&&u[s].constructor===Object&&(!o[s]||o[s].constructor===Object)?(o[s]=o[s]||{},h.extend(o[s],i,u[s])):o[s]=u[s]}return o},h.clone=function(o,a){return h.extend({},a,o)},h.keys=function(o){if(Object.keys)return Object.keys(o);var a=[];for(var r in o)a.push(r);return a},h.values=function(o){var a=[];if(Object.keys){for(var r=Object.keys(o),i=0;i<r.length;i++)a.push(o[r[i]]);return a}for(var n in o)a.push(o[n]);return a},h.get=function(o,a,r,i){a=a.split(".").slice(r,i);for(var n=0;n<a.length;n+=1)o=o[a[n]];return o},h.set=function(o,a,r,i,n){var u=a.split(".").slice(i,n);return h.get(o,a,0,-1)[u[u.length-1]]=r,r},h.shuffle=function(o){for(var a=o.length-1;a>0;a--){var r=Math.floor(h.random()*(a+1)),i=o[a];o[a]=o[r],o[r]=i}return o},h.choose=function(o){return o[Math.floor(h.random()*o.length)]},h.isElement=function(o){return typeof HTMLElement<"u"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},h.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},h.isFunction=function(o){return typeof o=="function"},h.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},h.isString=function(o){return toString.call(o)==="[object String]"},h.clamp=function(o,a,r){return o<a?a:o>r?r:o},h.sign=function(o){return o<0?-1:1},h.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-h._nowStartTime},h.random=function(o,a){return o=typeof o<"u"?o:0,a=typeof a<"u"?a:1,o+m()*(a-o)};var m=function(){return h._seed=(h._seed*9301+49297)%233280,h._seed/233280};h.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},h.logLevel=1,h.log=function(){console&&h.logLevel>0&&h.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},h.info=function(){console&&h.logLevel>0&&h.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},h.warn=function(){console&&h.logLevel>0&&h.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},h.warnOnce=function(){var o=Array.prototype.slice.call(arguments).join(" ");h._warnedOnce[o]||(h.warn(o),h._warnedOnce[o]=!0)},h.deprecated=function(o,a,r){o[a]=h.chain(function(){h.warnOnce(" deprecated ",r)},o[a])},h.nextId=function(){return h._nextId++},h.indexOf=function(o,a){if(o.indexOf)return o.indexOf(a);for(var r=0;r<o.length;r++)if(o[r]===a)return r;return-1},h.map=function(o,a){if(o.map)return o.map(a);for(var r=[],i=0;i<o.length;i+=1)r.push(a(o[i]));return r},h.topologicalSort=function(o){var a=[],r=[],i=[];for(var n in o)!r[n]&&!i[n]&&h._topologicalSort(n,r,i,o,a);return a},h._topologicalSort=function(o,a,r,i,n){var u=i[o]||[];r[o]=!0;for(var s=0;s<u.length;s+=1){var l=u[s];r[l]||a[l]||h._topologicalSort(l,a,r,i,n)}r[o]=!1,a[o]=!0,n.push(o)},h.chain=function(){for(var o=[],a=0;a<arguments.length;a+=1){var r=arguments[a];r._chained?o.push.apply(o,r._chained):o.push(r)}var i=function(){for(var n,u=new Array(arguments.length),s=0,l=arguments.length;s<l;s++)u[s]=arguments[s];for(s=0;s<o.length;s+=1){var v=o[s].apply(n,u);typeof v<"u"&&(n=v)}return n};return i._chained=o,i},h.chainPathBefore=function(o,a,r){return h.set(o,a,h.chain(r,h.get(o,a)))},h.chainPathAfter=function(o,a,r){return h.set(o,a,h.chain(h.get(o,a),r))},h.setDecomp=function(o){h._decomp=o},h.getDecomp=function(){var o=h._decomp;try{!o&&typeof window<"u"&&(o=window.decomp),!o&&typeof t.g<"u"&&(o=t.g.decomp)}catch{o=null}return o}}()},45775:(f,S,t)=>{var h={};f.exports=h;var m=t(22806),o=t(44272),a=t(13657),r=t(91327),i=t(39073),n=t(11299),u=t(52838),s=t(68758),l=t(84125);(function(){h.create=function(v){v=v||{};var c={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},g=s.extend(c,v);return g.world=v.world||n.create({label:"World"}),g.pairs=v.pairs||r.create(),g.detector=v.detector||a.create(),g.grid={buckets:[]},g.world.gravity=g.gravity,g.broadphase=g.grid,g.metrics={},g},h.update=function(v,c){var g=s.now(),y=v.world,E=v.detector,C=v.pairs,T=v.timing,A=T.timestamp,P;c=typeof c<"u"?c:s._baseDelta,c*=T.timeScale,T.timestamp+=c,T.lastDelta=c;var M={timestamp:T.timestamp,delta:c};i.trigger(v,"beforeUpdate",M);var w=n.allBodies(y),L=n.allConstraints(y);for(y.isModified&&(a.setBodies(E,w),n.setModified(y,!1,!1,!0)),v.enableSleeping&&m.update(w,c),h._bodiesApplyGravity(w,v.gravity),c>0&&h._bodiesUpdate(w,c),i.trigger(v,"beforeSolve",M),u.preSolveAll(w),P=0;P<v.constraintIterations;P++)u.solveAll(L,c);u.postSolveAll(w),E.pairs=v.pairs;var F=a.collisions(E);r.update(C,F,A),v.enableSleeping&&m.afterCollisions(C.list),C.collisionStart.length>0&&i.trigger(v,"collisionStart",{pairs:C.collisionStart,timestamp:T.timestamp,delta:c});var D=s.clamp(20/v.positionIterations,0,1);for(o.preSolvePosition(C.list),P=0;P<v.positionIterations;P++)o.solvePosition(C.list,c,D);for(o.postSolvePosition(w),u.preSolveAll(w),P=0;P<v.constraintIterations;P++)u.solveAll(L,c);for(u.postSolveAll(w),o.preSolveVelocity(C.list),P=0;P<v.velocityIterations;P++)o.solveVelocity(C.list,c);return h._bodiesUpdateVelocities(w),C.collisionActive.length>0&&i.trigger(v,"collisionActive",{pairs:C.collisionActive,timestamp:T.timestamp,delta:c}),C.collisionEnd.length>0&&i.trigger(v,"collisionEnd",{pairs:C.collisionEnd,timestamp:T.timestamp,delta:c}),h._bodiesClearForces(w),i.trigger(v,"afterUpdate",M),v.timing.lastElapsed=s.now()-g,v},h.merge=function(v,c){if(s.extend(v,c),c.world){v.world=c.world,h.clear(v);for(var g=n.allBodies(v.world),y=0;y<g.length;y++){var E=g[y];m.set(E,!1),E.id=s.nextId()}}},h.clear=function(v){r.clear(v.pairs),a.clear(v.detector)},h._bodiesClearForces=function(v){for(var c=v.length,g=0;g<c;g++){var y=v[g];y.force.x=0,y.force.y=0,y.torque=0}},h._bodiesApplyGravity=function(v,c){var g=typeof c.scale<"u"?c.scale:.001,y=v.length;if(!(c.x===0&&c.y===0||g===0))for(var E=0;E<y;E++){var C=v[E];C.isStatic||C.isSleeping||(C.force.y+=C.mass*c.y*g,C.force.x+=C.mass*c.x*g)}},h._bodiesUpdate=function(v,c){for(var g=v.length,y=0;y<g;y++){var E=v[y];E.isStatic||E.isSleeping||l.update(E,c)}},h._bodiesUpdateVelocities=function(v){for(var c=v.length,g=0;g<c;g++)l.updateVelocities(v[g])}})()},39073:(f,S,t)=>{var h={};f.exports=h;var m=t(68758);(function(){h.on=function(o,a,r){for(var i=a.split(" "),n,u=0;u<i.length;u++)n=i[u],o.events=o.events||{},o.events[n]=o.events[n]||[],o.events[n].push(r);return r},h.off=function(o,a,r){if(!a){o.events={};return}typeof a=="function"&&(r=a,a=m.keys(o.events).join(" "));for(var i=a.split(" "),n=0;n<i.length;n++){var u=o.events[i[n]],s=[];if(r&&u)for(var l=0;l<u.length;l++)u[l]!==r&&s.push(u[l]);o.events[i[n]]=s}},h.trigger=function(o,a,r){var i,n,u,s,l=o.events;if(l&&m.keys(l).length>0){r||(r={}),i=a.split(" ");for(var v=0;v<i.length;v++)if(n=i[v],u=l[n],u){s=m.clone(r,!1),s.name=n,s.source=o;for(var c=0;c<u.length;c++)u[c].apply(o,[s])}}}})()},16929:(f,S,t)=>{var h={};f.exports=h;var m=t(84474),o=t(68758);(function(){h.name="matter-js",h.version="0.19.0",h.uses=[],h.used=[],h.use=function(){m.use(h,Array.prototype.slice.call(arguments))},h.before=function(a,r){return a=a.replace(/^Matter./,""),o.chainPathBefore(h,a,r)},h.after=function(a,r){return a=a.replace(/^Matter./,""),o.chainPathAfter(h,a,r)}})()},84474:(f,S,t)=>{var h={};f.exports=h;var m=t(68758);(function(){h._registry={},h.register=function(o){if(h.isPlugin(o)||m.warn("Plugin.register:",h.toString(o),"does not implement all required fields."),o.name in h._registry){var a=h._registry[o.name],r=h.versionParse(o.version).number,i=h.versionParse(a.version).number;r>i?(m.warn("Plugin.register:",h.toString(a),"was upgraded to",h.toString(o)),h._registry[o.name]=o):r<i?m.warn("Plugin.register:",h.toString(a),"can not be downgraded to",h.toString(o)):o!==a&&m.warn("Plugin.register:",h.toString(o),"is already registered to different plugin object")}else h._registry[o.name]=o;return o},h.resolve=function(o){return h._registry[h.dependencyParse(o).name]},h.toString=function(o){return typeof o=="string"?o:(o.name||"anonymous")+"@"+(o.version||o.range||"0.0.0")},h.isPlugin=function(o){return o&&o.name&&o.version&&o.install},h.isUsed=function(o,a){return o.used.indexOf(a)>-1},h.isFor=function(o,a){var r=o.for&&h.dependencyParse(o.for);return!o.for||a.name===r.name&&h.versionSatisfies(a.version,r.range)},h.use=function(o,a){if(o.uses=(o.uses||[]).concat(a||[]),o.uses.length===0){m.warn("Plugin.use:",h.toString(o),"does not specify any dependencies to install.");return}for(var r=h.dependencies(o),i=m.topologicalSort(r),n=[],u=0;u<i.length;u+=1)if(i[u]!==o.name){var s=h.resolve(i[u]);if(!s){n.push(" "+i[u]);continue}h.isUsed(o,s.name)||(h.isFor(s,o)||(m.warn("Plugin.use:",h.toString(s),"is for",s.for,"but installed on",h.toString(o)+"."),s._warned=!0),s.install?s.install(o):(m.warn("Plugin.use:",h.toString(s),"does not specify an install function."),s._warned=!0),s._warned?(n.push(" "+h.toString(s)),delete s._warned):n.push(" "+h.toString(s)),o.used.push(s.name))}n.length>0&&!s.silent&&m.info(n.join("  "))},h.dependencies=function(o,a){var r=h.dependencyParse(o),i=r.name;if(a=a||{},!(i in a)){o=h.resolve(o)||o,a[i]=m.map(o.uses||[],function(u){h.isPlugin(u)&&h.register(u);var s=h.dependencyParse(u),l=h.resolve(u);return l&&!h.versionSatisfies(l.version,s.range)?(m.warn("Plugin.dependencies:",h.toString(l),"does not satisfy",h.toString(s),"used by",h.toString(r)+"."),l._warned=!0,o._warned=!0):l||(m.warn("Plugin.dependencies:",h.toString(u),"used by",h.toString(r),"could not be resolved."),o._warned=!0),s.name});for(var n=0;n<a[i].length;n+=1)h.dependencies(a[i][n],a);return a}},h.dependencyParse=function(o){if(m.isString(o)){var a=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return a.test(o)||m.warn("Plugin.dependencyParse:",o,"is not a valid dependency string."),{name:o.split("@")[0],range:o.split("@")[1]||"*"}}return{name:o.name,range:o.range||o.version}},h.versionParse=function(o){var a=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;a.test(o)||m.warn("Plugin.versionParse:",o,"is not a valid version or range.");var r=a.exec(o),i=Number(r[4]),n=Number(r[5]),u=Number(r[6]);return{isRange:!!(r[1]||r[2]),version:r[3],range:o,operator:r[1]||r[2]||"",major:i,minor:n,patch:u,parts:[i,n,u],prerelease:r[7],number:i*1e8+n*1e4+u}},h.versionSatisfies=function(o,a){a=a||"*";var r=h.versionParse(a),i=h.versionParse(o);if(r.isRange){if(r.operator==="*"||o==="*")return!0;if(r.operator===">")return i.number>r.number;if(r.operator===">=")return i.number>=r.number;if(r.operator==="~")return i.major===r.major&&i.minor===r.minor&&i.patch>=r.patch;if(r.operator==="^")return r.major>0?i.major===r.major&&i.number>=r.number:r.minor>0?i.minor===r.minor&&i.patch>=r.patch:i.patch===r.patch}return o===a||o==="*"}})()},22806:(f,S,t)=>{var h={};f.exports=h;var m=t(84125),o=t(39073),a=t(68758);(function(){h._motionWakeThreshold=.18,h._motionSleepThreshold=.08,h._minBias=.9,h.update=function(r,i){for(var n=i/a._baseDelta,u=h._motionSleepThreshold,s=0;s<r.length;s++){var l=r[s],v=m.getSpeed(l),c=m.getAngularSpeed(l),g=v*v+c*c;if(l.force.x!==0||l.force.y!==0){h.set(l,!1);continue}var y=Math.min(l.motion,g),E=Math.max(l.motion,g);l.motion=h._minBias*y+(1-h._minBias)*E,l.sleepThreshold>0&&l.motion<u?(l.sleepCounter+=1,l.sleepCounter>=l.sleepThreshold/n&&h.set(l,!0)):l.sleepCounter>0&&(l.sleepCounter-=1)}},h.afterCollisions=function(r){for(var i=h._motionSleepThreshold,n=0;n<r.length;n++){var u=r[n];if(u.isActive){var s=u.collision,l=s.bodyA.parent,v=s.bodyB.parent;if(!(l.isSleeping&&v.isSleeping||l.isStatic||v.isStatic)&&(l.isSleeping||v.isSleeping)){var c=l.isSleeping&&!l.isStatic?l:v,g=c===l?v:l;!c.isStatic&&g.motion>i&&h.set(c,!1)}}}},h.set=function(r,i){var n=r.isSleeping;i?(r.isSleeping=!0,r.sleepCounter=r.sleepThreshold,r.positionImpulse.x=0,r.positionImpulse.y=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.speed=0,r.angularSpeed=0,r.motion=0,n||o.trigger(r,"sleepStart")):(r.isSleeping=!1,r.sleepCounter=0,n&&o.trigger(r,"sleepEnd"))}})()},68516:(f,S,t)=>{var h={};f.exports=h;var m=t(39745),o=t(68758),a=t(84125),r=t(84091),i=t(10438);(function(){h.rectangle=function(n,u,s,l,v){v=v||{};var c={label:"Rectangle Body",position:{x:n,y:u},vertices:m.fromPath("L 0 0 L "+s+" 0 L "+s+" "+l+" L 0 "+l)};if(v.chamfer){var g=v.chamfer;c.vertices=m.chamfer(c.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete v.chamfer}return a.create(o.extend({},c,v))},h.trapezoid=function(n,u,s,l,v,c){c=c||{},v*=.5;var g=(1-v*2)*s,y=s*v,E=y+g,C=E+y,T;v<.5?T="L 0 0 L "+y+" "+-l+" L "+E+" "+-l+" L "+C+" 0":T="L 0 0 L "+E+" "+-l+" L "+C+" 0";var A={label:"Trapezoid Body",position:{x:n,y:u},vertices:m.fromPath(T)};if(c.chamfer){var P=c.chamfer;A.vertices=m.chamfer(A.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete c.chamfer}return a.create(o.extend({},A,c))},h.circle=function(n,u,s,l,v){l=l||{};var c={label:"Circle Body",circleRadius:s};v=v||25;var g=Math.ceil(Math.max(10,Math.min(v,s)));return g%2===1&&(g+=1),h.polygon(n,u,g,s,o.extend({},c,l))},h.polygon=function(n,u,s,l,v){if(v=v||{},s<3)return h.circle(n,u,l,v);for(var c=2*Math.PI/s,g="",y=c*.5,E=0;E<s;E+=1){var C=y+E*c,T=Math.cos(C)*l,A=Math.sin(C)*l;g+="L "+T.toFixed(3)+" "+A.toFixed(3)+" "}var P={label:"Polygon Body",position:{x:n,y:u},vertices:m.fromPath(g)};if(v.chamfer){var M=v.chamfer;P.vertices=m.chamfer(P.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete v.chamfer}return a.create(o.extend({},P,v))},h.fromVertices=function(n,u,s,l,v,c,g,y){var E=o.getDecomp(),C,T,A,P,M,w,L,F,D,N,B;for(C=!!(E&&E.quickDecomp),l=l||{},A=[],v=typeof v<"u"?v:!1,c=typeof c<"u"?c:.01,g=typeof g<"u"?g:10,y=typeof y<"u"?y:.01,o.isArray(s[0])||(s=[s]),N=0;N<s.length;N+=1)if(w=s[N],P=m.isConvex(w),M=!P,M&&!C&&o.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),P||!C)P?w=m.clockwiseSort(w):w=m.hull(w),A.push({position:{x:n,y:u},vertices:w});else{var b=w.map(function(Q){return[Q.x,Q.y]});E.makeCCW(b),c!==!1&&E.removeCollinearPoints(b,c),y!==!1&&E.removeDuplicatePoints&&E.removeDuplicatePoints(b,y);var W=E.quickDecomp(b);for(L=0;L<W.length;L++){var Y=W[L],K=Y.map(function(Q){return{x:Q[0],y:Q[1]}});g>0&&m.area(K)<g||A.push({position:m.centre(K),vertices:K})}}for(L=0;L<A.length;L++)A[L]=a.create(o.extend(A[L],l));if(v){var G=5;for(L=0;L<A.length;L++){var z=A[L];for(F=L+1;F<A.length;F++){var O=A[F];if(r.overlaps(z.bounds,O.bounds)){var V=z.vertices,U=O.vertices;for(D=0;D<z.vertices.length;D++)for(B=0;B<O.vertices.length;B++){var X=i.magnitudeSquared(i.sub(V[(D+1)%V.length],U[B])),H=i.magnitudeSquared(i.sub(V[D],U[(B+1)%U.length]));X<G&&H<G&&(V[D].isInternal=!0,U[B].isInternal=!0)}}}}}return A.length>1?(T=a.create(o.extend({parts:A.slice(0)},l)),a.setPosition(T,{x:n,y:u}),T):A[0]},h.flagCoincidentParts=function(n,u){u===void 0&&(u=5);for(var s=0;s<n.length;s++)for(var l=n[s],v=s+1;v<n.length;v++){var c=n[v];if(r.overlaps(l.bounds,c.bounds))for(var g=l.vertices,y=c.vertices,E=0;E<l.vertices.length;E++)for(var C=0;C<c.vertices.length;C++){var T=i.magnitudeSquared(i.sub(g[(E+1)%g.length],y[C])),A=i.magnitudeSquared(i.sub(g[E],y[(C+1)%y.length]));T<u&&A<u&&(g[E].isInternal=!0,y[C].isInternal=!0)}}return n}})()},56643:(f,S,t)=>{var h={};f.exports=h;var m=t(11299),o=t(52838),a=t(68758),r=t(84125),i=t(68516);(function(){h.stack=function(n,u,s,l,v,c,g){for(var y=m.create({label:"Stack"}),E=n,C=u,T,A=0,P=0;P<l;P++){for(var M=0,w=0;w<s;w++){var L=g(E,C,w,P,T,A);if(L){var F=L.bounds.max.y-L.bounds.min.y,D=L.bounds.max.x-L.bounds.min.x;F>M&&(M=F),r.translate(L,{x:D*.5,y:F*.5}),E=L.bounds.max.x+v,m.addBody(y,L),T=L,A+=1}else E+=v}C+=M+c,E=n}return y},h.chain=function(n,u,s,l,v,c){for(var g=n.bodies,y=1;y<g.length;y++){var E=g[y-1],C=g[y],T=E.bounds.max.y-E.bounds.min.y,A=E.bounds.max.x-E.bounds.min.x,P=C.bounds.max.y-C.bounds.min.y,M=C.bounds.max.x-C.bounds.min.x,w={bodyA:E,pointA:{x:A*u,y:T*s},bodyB:C,pointB:{x:M*l,y:P*v}},L=a.extend(w,c);m.addConstraint(n,o.create(L))}return n.label+=" Chain",n},h.mesh=function(n,u,s,l,v){var c=n.bodies,g,y,E,C,T;for(g=0;g<s;g++){for(y=1;y<u;y++)E=c[y-1+g*u],C=c[y+g*u],m.addConstraint(n,o.create(a.extend({bodyA:E,bodyB:C},v)));if(g>0)for(y=0;y<u;y++)E=c[y+(g-1)*u],C=c[y+g*u],m.addConstraint(n,o.create(a.extend({bodyA:E,bodyB:C},v))),l&&y>0&&(T=c[y-1+(g-1)*u],m.addConstraint(n,o.create(a.extend({bodyA:T,bodyB:C},v)))),l&&y<u-1&&(T=c[y+1+(g-1)*u],m.addConstraint(n,o.create(a.extend({bodyA:T,bodyB:C},v))))}return n.label+=" Mesh",n},h.pyramid=function(n,u,s,l,v,c,g){return h.stack(n,u,s,l,v,c,function(y,E,C,T,A,P){var M=Math.min(l,Math.ceil(s/2)),w=A?A.bounds.max.x-A.bounds.min.x:0;if(!(T>M)){T=M-T;var L=T,F=s-1-T;if(!(C<L||C>F)){P===1&&r.translate(A,{x:(C+(s%2===1?1:-1))*w,y:0});var D=A?C*w:0;return g(n+D+C*v,E,C,T,A,P)}}})},h.newtonsCradle=function(n,u,s,l,v){for(var c=m.create({label:"Newtons Cradle"}),g=0;g<s;g++){var y=1.9,E=i.circle(n+g*(l*y),u+v,l,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),C=o.create({pointA:{x:n+g*(l*y),y:u},bodyB:E});m.addBody(c,E),m.addConstraint(c,C)}return c},h.car=function(n,u,s,l,v){var c=r.nextGroup(!0),g=20,y=-s*.5+g,E=s*.5-g,C=0,T=m.create({label:"Car"}),A=i.rectangle(n,u,s,l,{collisionFilter:{group:c},chamfer:{radius:l*.5},density:2e-4}),P=i.circle(n+y,u+C,v,{collisionFilter:{group:c},friction:.8}),M=i.circle(n+E,u+C,v,{collisionFilter:{group:c},friction:.8}),w=o.create({bodyB:A,pointB:{x:y,y:C},bodyA:P,stiffness:1,length:0}),L=o.create({bodyB:A,pointB:{x:E,y:C},bodyA:M,stiffness:1,length:0});return m.addBody(T,A),m.addBody(T,P),m.addBody(T,M),m.addConstraint(T,w),m.addConstraint(T,L),T},h.softBody=function(n,u,s,l,v,c,g,y,E,C){E=a.extend({inertia:1/0},E),C=a.extend({stiffness:.2,render:{type:"line",anchors:!1}},C);var T=h.stack(n,u,s,l,v,c,function(A,P){return i.circle(A,P,y,E)});return h.mesh(T,s,l,g,C),T.label="Soft Body",T}})()},50658:(f,S,t)=>{var h={};f.exports=h;var m=t(10438),o=t(68758);(function(){h.fromVertices=function(a){for(var r={},i=0;i<a.length;i++){var n=(i+1)%a.length,u=m.normalise({x:a[n].y-a[i].y,y:a[i].x-a[n].x}),s=u.y===0?1/0:u.x/u.y;s=s.toFixed(3).toString(),r[s]=u}return o.values(r)},h.rotate=function(a,r){if(r!==0)for(var i=Math.cos(r),n=Math.sin(r),u=0;u<a.length;u++){var s=a[u],l;l=s.x*i-s.y*n,s.y=s.x*n+s.y*i,s.x=l}}})()},84091:f=>{var S={};f.exports=S,function(){S.create=function(t){var h={min:{x:0,y:0},max:{x:0,y:0}};return t&&S.update(h,t),h},S.update=function(t,h,m){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var o=0;o<h.length;o++){var a=h[o];a.x>t.max.x&&(t.max.x=a.x),a.x<t.min.x&&(t.min.x=a.x),a.y>t.max.y&&(t.max.y=a.y),a.y<t.min.y&&(t.min.y=a.y)}m&&(m.x>0?t.max.x+=m.x:t.min.x+=m.x,m.y>0?t.max.y+=m.y:t.min.y+=m.y)},S.contains=function(t,h){return h.x>=t.min.x&&h.x<=t.max.x&&h.y>=t.min.y&&h.y<=t.max.y},S.overlaps=function(t,h){return t.min.x<=h.max.x&&t.max.x>=h.min.x&&t.max.y>=h.min.y&&t.min.y<=h.max.y},S.translate=function(t,h){t.min.x+=h.x,t.max.x+=h.x,t.min.y+=h.y,t.max.y+=h.y},S.shift=function(t,h){var m=t.max.x-t.min.x,o=t.max.y-t.min.y;t.min.x=h.x,t.max.x=h.x+m,t.min.y=h.y,t.max.y=h.y+o}}()},92765:(f,S,t)=>{var h={};f.exports=h,t(84091);var m=t(68758);(function(){h.pathToVertices=function(o,a){typeof window<"u"&&!("SVGPathSeg"in window)&&m.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var r,i,n,u,s,l,v,c,g,y,E=[],C,T,A=0,P=0,M=0;a=a||15;var w=function(F,D,N){var B=N%2===1&&N>1;if(!g||F!=g.x||D!=g.y){g&&B?(C=g.x,T=g.y):(C=0,T=0);var b={x:C+F,y:T+D};(B||!g)&&(g=b),E.push(b),P=C+F,M=T+D}},L=function(F){var D=F.pathSegTypeAsLetter.toUpperCase();if(D!=="Z"){switch(D){case"M":case"L":case"T":case"C":case"S":case"Q":P=F.x,M=F.y;break;case"H":P=F.x;break;case"V":M=F.y;break}w(P,M,F.pathSegType)}};for(h._svgPathToAbsolute(o),n=o.getTotalLength(),l=[],r=0;r<o.pathSegList.numberOfItems;r+=1)l.push(o.pathSegList.getItem(r));for(v=l.concat();A<n;){if(y=o.getPathSegAtLength(A),s=l[y],s!=c){for(;v.length&&v[0]!=s;)L(v.shift());c=s}switch(s.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":u=o.getPointAtLength(A),w(u.x,u.y,0);break}A+=a}for(r=0,i=v.length;r<i;++r)L(v[r]);return E},h._svgPathToAbsolute=function(o){for(var a,r,i,n,u,s,l=o.pathSegList,v=0,c=0,g=l.numberOfItems,y=0;y<g;++y){var E=l.getItem(y),C=E.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(C))"x"in E&&(v=E.x),"y"in E&&(c=E.y);else switch("x1"in E&&(i=v+E.x1),"x2"in E&&(u=v+E.x2),"y1"in E&&(n=c+E.y1),"y2"in E&&(s=c+E.y2),"x"in E&&(v+=E.x),"y"in E&&(c+=E.y),C){case"m":l.replaceItem(o.createSVGPathSegMovetoAbs(v,c),y);break;case"l":l.replaceItem(o.createSVGPathSegLinetoAbs(v,c),y);break;case"h":l.replaceItem(o.createSVGPathSegLinetoHorizontalAbs(v),y);break;case"v":l.replaceItem(o.createSVGPathSegLinetoVerticalAbs(c),y);break;case"c":l.replaceItem(o.createSVGPathSegCurvetoCubicAbs(v,c,i,n,u,s),y);break;case"s":l.replaceItem(o.createSVGPathSegCurvetoCubicSmoothAbs(v,c,u,s),y);break;case"q":l.replaceItem(o.createSVGPathSegCurvetoQuadraticAbs(v,c,i,n),y);break;case"t":l.replaceItem(o.createSVGPathSegCurvetoQuadraticSmoothAbs(v,c),y);break;case"a":l.replaceItem(o.createSVGPathSegArcAbs(v,c,E.r1,E.r2,E.angle,E.largeArcFlag,E.sweepFlag),y);break;case"z":case"Z":v=a,c=r;break}(C=="M"||C=="m")&&(a=v,r=c)}}})()},10438:f=>{var S={};f.exports=S,function(){S.create=function(t,h){return{x:t||0,y:h||0}},S.clone=function(t){return{x:t.x,y:t.y}},S.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},S.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},S.rotate=function(t,h,m){var o=Math.cos(h),a=Math.sin(h);m||(m={});var r=t.x*o-t.y*a;return m.y=t.x*a+t.y*o,m.x=r,m},S.rotateAbout=function(t,h,m,o){var a=Math.cos(h),r=Math.sin(h);o||(o={});var i=m.x+((t.x-m.x)*a-(t.y-m.y)*r);return o.y=m.y+((t.x-m.x)*r+(t.y-m.y)*a),o.x=i,o},S.normalise=function(t){var h=S.magnitude(t);return h===0?{x:0,y:0}:{x:t.x/h,y:t.y/h}},S.dot=function(t,h){return t.x*h.x+t.y*h.y},S.cross=function(t,h){return t.x*h.y-t.y*h.x},S.cross3=function(t,h,m){return(h.x-t.x)*(m.y-t.y)-(h.y-t.y)*(m.x-t.x)},S.add=function(t,h,m){return m||(m={}),m.x=t.x+h.x,m.y=t.y+h.y,m},S.sub=function(t,h,m){return m||(m={}),m.x=t.x-h.x,m.y=t.y-h.y,m},S.mult=function(t,h){return{x:t.x*h,y:t.y*h}},S.div=function(t,h){return{x:t.x/h,y:t.y/h}},S.perp=function(t,h){return h=h===!0?-1:1,{x:h*-t.y,y:h*t.x}},S.neg=function(t){return{x:-t.x,y:-t.y}},S.angle=function(t,h){return Math.atan2(h.y-t.y,h.x-t.x)},S._temp=[S.create(),S.create(),S.create(),S.create(),S.create(),S.create()]}()},39745:(f,S,t)=>{var h={};f.exports=h;var m=t(10438),o=t(68758);(function(){h.create=function(a,r){for(var i=[],n=0;n<a.length;n++){var u=a[n],s={x:u.x,y:u.y,index:n,body:r,isInternal:!1};i.push(s)}return i},h.fromPath=function(a,r){var i=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,n=[];return a.replace(i,function(u,s,l){n.push({x:parseFloat(s),y:parseFloat(l)})}),h.create(n,r)},h.centre=function(a){for(var r=h.area(a,!0),i={x:0,y:0},n,u,s,l=0;l<a.length;l++)s=(l+1)%a.length,n=m.cross(a[l],a[s]),u=m.mult(m.add(a[l],a[s]),n),i=m.add(i,u);return m.div(i,6*r)},h.mean=function(a){for(var r={x:0,y:0},i=0;i<a.length;i++)r.x+=a[i].x,r.y+=a[i].y;return m.div(r,a.length)},h.area=function(a,r){for(var i=0,n=a.length-1,u=0;u<a.length;u++)i+=(a[n].x-a[u].x)*(a[n].y+a[u].y),n=u;return r?i/2:Math.abs(i)/2},h.inertia=function(a,r){for(var i=0,n=0,u=a,s,l,v=0;v<u.length;v++)l=(v+1)%u.length,s=Math.abs(m.cross(u[l],u[v])),i+=s*(m.dot(u[l],u[l])+m.dot(u[l],u[v])+m.dot(u[v],u[v])),n+=s;return r/6*(i/n)},h.translate=function(a,r,i){i=typeof i<"u"?i:1;var n=a.length,u=r.x*i,s=r.y*i,l;for(l=0;l<n;l++)a[l].x+=u,a[l].y+=s;return a},h.rotate=function(a,r,i){if(r!==0){var n=Math.cos(r),u=Math.sin(r),s=i.x,l=i.y,v=a.length,c,g,y,E;for(E=0;E<v;E++)c=a[E],g=c.x-s,y=c.y-l,c.x=s+(g*n-y*u),c.y=l+(g*u+y*n);return a}},h.contains=function(a,r){for(var i=r.x,n=r.y,u=a.length,s=a[u-1],l,v=0;v<u;v++){if(l=a[v],(i-s.x)*(l.y-s.y)+(n-s.y)*(s.x-l.x)>0)return!1;s=l}return!0},h.scale=function(a,r,i,n){if(r===1&&i===1)return a;n=n||h.centre(a);for(var u,s,l=0;l<a.length;l++)u=a[l],s=m.sub(u,n),a[l].x=n.x+s.x*r,a[l].y=n.y+s.y*i;return a},h.chamfer=function(a,r,i,n,u){typeof r=="number"?r=[r]:r=r||[8],i=typeof i<"u"?i:-1,n=n||2,u=u||14;for(var s=[],l=0;l<a.length;l++){var v=a[l-1>=0?l-1:a.length-1],c=a[l],g=a[(l+1)%a.length],y=r[l<r.length?l:r.length-1];if(y===0){s.push(c);continue}var E=m.normalise({x:c.y-v.y,y:v.x-c.x}),C=m.normalise({x:g.y-c.y,y:c.x-g.x}),T=Math.sqrt(2*Math.pow(y,2)),A=m.mult(o.clone(E),y),P=m.normalise(m.mult(m.add(E,C),.5)),M=m.sub(c,m.mult(P,T)),w=i;i===-1&&(w=Math.pow(y,.32)*1.75),w=o.clamp(w,n,u),w%2===1&&(w+=1);for(var L=Math.acos(m.dot(E,C)),F=L/w,D=0;D<w;D++)s.push(m.add(m.rotate(A,F*D),M))}return s},h.clockwiseSort=function(a){var r=h.mean(a);return a.sort(function(i,n){return m.angle(r,i)-m.angle(r,n)}),a},h.isConvex=function(a){var r=0,i=a.length,n,u,s,l;if(i<3)return null;for(n=0;n<i;n++)if(u=(n+1)%i,s=(n+2)%i,l=(a[u].x-a[n].x)*(a[s].y-a[u].y),l-=(a[u].y-a[n].y)*(a[s].x-a[u].x),l<0?r|=1:l>0&&(r|=2),r===3)return!1;return r!==0?!0:null},h.hull=function(a){var r=[],i=[],n,u;for(a=a.slice(0),a.sort(function(s,l){var v=s.x-l.x;return v!==0?v:s.y-l.y}),u=0;u<a.length;u+=1){for(n=a[u];i.length>=2&&m.cross3(i[i.length-2],i[i.length-1],n)<=0;)i.pop();i.push(n)}for(u=a.length-1;u>=0;u-=1){for(n=a[u];r.length>=2&&m.cross3(r[r.length-2],r[r.length-1],n)<=0;)r.pop();r.push(n)}return r.pop(),i.pop(),r.concat(i)}})()},1675:(f,S,t)=>{var h=t(18171),m={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.19.0",silent:!0,install:function(o){o.after("Body.create",function(){m.Body.init(this)}),o.before("Engine.update",function(a){m.Engine.update(a)})},Body:{init:function(o){o.plugin.attractors=o.plugin.attractors||[]}},Engine:{update:function(o){for(var a=h.Composite.allBodies(o.world),r=0;r<a.length;r++){var i=a[r],n=i.plugin.attractors;if(n&&n.length>0)for(var u=0;u<a.length;u++){var s=a[u];if(r!==u)for(var l=0;l<n.length;l++){var v=n[l],c=v;h.Common.isFunction(v)&&(c=v(i,s)),c&&h.Body.applyForce(s,s.position,c)}}}}},Attractors:{gravityConstant:.001,gravity:function(o,a){var r=h.Vector.sub(a.position,o.position),i=h.Vector.magnitudeSquared(r)||1e-4,n=h.Vector.normalise(r),u=-m.Attractors.gravityConstant*(o.mass*a.mass/i),s=h.Vector.mult(n,u);h.Body.applyForce(o,o.position,h.Vector.neg(s)),h.Body.applyForce(a,a.position,s)}}};f.exports=m},80391:f=>{/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.19.0",silent:!0,install:function(t){t.after("Engine.create",function(){t.Events.on(this,"collisionStart",function(h){h.pairs.map(function(m){var o=m.bodyA,a=m.bodyB;o.gameObject&&o.gameObject.emit("collide",o,a,m),a.gameObject&&a.gameObject.emit("collide",a,o,m),t.Events.trigger(o,"onCollide",{pair:m}),t.Events.trigger(a,"onCollide",{pair:m}),o.onCollideCallback&&o.onCollideCallback(m),a.onCollideCallback&&a.onCollideCallback(m),o.onCollideWith[a.id]&&o.onCollideWith[a.id](a,m),a.onCollideWith[o.id]&&a.onCollideWith[o.id](o,m)})}),t.Events.on(this,"collisionActive",function(h){h.pairs.map(function(m){var o=m.bodyA,a=m.bodyB;o.gameObject&&o.gameObject.emit("collideActive",o,a,m),a.gameObject&&a.gameObject.emit("collideActive",a,o,m),t.Events.trigger(o,"onCollideActive",{pair:m}),t.Events.trigger(a,"onCollideActive",{pair:m}),o.onCollideActiveCallback&&o.onCollideActiveCallback(m),a.onCollideActiveCallback&&a.onCollideActiveCallback(m)})}),t.Events.on(this,"collisionEnd",function(h){h.pairs.map(function(m){var o=m.bodyA,a=m.bodyB;o.gameObject&&o.gameObject.emit("collideEnd",o,a,m),a.gameObject&&a.gameObject.emit("collideEnd",a,o,m),t.Events.trigger(o,"onCollideEnd",{pair:m}),t.Events.trigger(a,"onCollideEnd",{pair:m}),o.onCollideEndCallback&&o.onCollideEndCallback(m),a.onCollideEndCallback&&a.onCollideEndCallback(m)})})})}};f.exports=S},44097:(f,S,t)=>{var h=t(18171),m={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.19.0",silent:!0,install:function(o){o.after("Engine.update",function(){m.Engine.update(this)})},Engine:{update:function(o){for(var a=o.world,r=h.Composite.allBodies(a),i=h.Composite.allComposites(a),n=0;n<r.length;n+=1){var u=r[n];u.plugin.wrap&&m.Body.wrap(u,u.plugin.wrap)}for(n=0;n<i.length;n+=1){var s=i[n];s.plugin.wrap&&m.Composite.wrap(s,s.plugin.wrap)}}},Bounds:{wrap:function(o,a){var r=null,i=null;if(typeof a.min.x<"u"&&typeof a.max.x<"u"&&(o.min.x>a.max.x?r=a.min.x-o.max.x:o.max.x<a.min.x&&(r=a.max.x-o.min.x)),typeof a.min.y<"u"&&typeof a.max.y<"u"&&(o.min.y>a.max.y?i=a.min.y-o.max.y:o.max.y<a.min.y&&(i=a.max.y-o.min.y)),r!==null||i!==null)return{x:r||0,y:i||0}}},Body:{wrap:function(o,a){var r=m.Bounds.wrap(o.bounds,a);return r&&h.Body.translate(o,r),r}},Composite:{bounds:function(o){for(var a=h.Composite.allBodies(o),r=[],i=0;i<a.length;i+=1){var n=a[i];r.push(n.bounds.min,n.bounds.max)}return h.Bounds.create(r)},wrap:function(o,a){var r=m.Bounds.wrap(m.Composite.bounds(o),a);return r&&h.Composite.translate(o,r),r}}};f.exports=m},81084:f=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={decomp:L,quickDecomp:B,isSimple:D,removeCollinearPoints:b,removeDuplicatePoints:W,makeCCW:g};function S(G,z,O){O=O||0;var V=[0,0],U,X,H,Q,$,k,J;return U=G[1][1]-G[0][1],X=G[0][0]-G[1][0],H=U*G[0][0]+X*G[0][1],Q=z[1][1]-z[0][1],$=z[0][0]-z[1][0],k=Q*z[0][0]+$*z[0][1],J=U*$-Q*X,Y(J,0,O)||(V[0]=($*H-X*k)/J,V[1]=(U*k-Q*H)/J),V}function t(G,z,O,V){var U=z[0]-G[0],X=z[1]-G[1],H=V[0]-O[0],Q=V[1]-O[1];if(H*X-Q*U===0)return!1;var $=(U*(O[1]-G[1])+X*(G[0]-O[0]))/(H*X-Q*U),k=(H*(G[1]-O[1])+Q*(O[0]-G[0]))/(Q*U-H*X);return $>=0&&$<=1&&k>=0&&k<=1}function h(G,z,O){return(z[0]-G[0])*(O[1]-G[1])-(O[0]-G[0])*(z[1]-G[1])}function m(G,z,O){return h(G,z,O)>0}function o(G,z,O){return h(G,z,O)>=0}function a(G,z,O){return h(G,z,O)<0}function r(G,z,O){return h(G,z,O)<=0}var i=[],n=[];function u(G,z,O,V){if(V){var U=i,X=n;U[0]=z[0]-G[0],U[1]=z[1]-G[1],X[0]=O[0]-z[0],X[1]=O[1]-z[1];var H=U[0]*X[0]+U[1]*X[1],Q=Math.sqrt(U[0]*U[0]+U[1]*U[1]),$=Math.sqrt(X[0]*X[0]+X[1]*X[1]),k=Math.acos(H/(Q*$));return k<V}else return h(G,z,O)===0}function s(G,z){var O=z[0]-G[0],V=z[1]-G[1];return O*O+V*V}function l(G,z){var O=G.length;return G[z<0?z%O+O:z%O]}function v(G){G.length=0}function c(G,z,O,V){for(var U=O;U<V;U++)G.push(z[U])}function g(G){for(var z=0,O=G,V=1;V<G.length;++V)(O[V][1]<O[z][1]||O[V][1]===O[z][1]&&O[V][0]>O[z][0])&&(z=V);return m(l(G,z-1),l(G,z),l(G,z+1))?!1:(y(G),!0)}function y(G){for(var z=[],O=G.length,V=0;V!==O;V++)z.push(G.pop());for(var V=0;V!==O;V++)G[V]=z[V]}function E(G,z){return a(l(G,z-1),l(G,z),l(G,z+1))}var C=[],T=[];function A(G,z,O){var V,U,X=C,H=T;if(o(l(G,z+1),l(G,z),l(G,O))&&r(l(G,z-1),l(G,z),l(G,O)))return!1;U=s(l(G,z),l(G,O));for(var Q=0;Q!==G.length;++Q)if(!((Q+1)%G.length===z||Q===z)&&o(l(G,z),l(G,O),l(G,Q+1))&&r(l(G,z),l(G,O),l(G,Q))&&(X[0]=l(G,z),X[1]=l(G,O),H[0]=l(G,Q),H[1]=l(G,Q+1),V=S(X,H),s(l(G,z),V)<U))return!1;return!0}function P(G,z,O){for(var V=0;V!==G.length;++V)if(!(V===z||V===O||(V+1)%G.length===z||(V+1)%G.length===O)&&t(l(G,z),l(G,O),l(G,V),l(G,V+1)))return!1;return!0}function M(G,z,O,V){var U=V||[];if(v(U),z<O)for(var X=z;X<=O;X++)U.push(G[X]);else{for(var X=0;X<=O;X++)U.push(G[X]);for(var X=z;X<G.length;X++)U.push(G[X])}return U}function w(G){for(var z=[],O=[],V=[],U=[],X=Number.MAX_VALUE,H=0;H<G.length;++H)if(E(G,H)){for(var Q=0;Q<G.length;++Q)if(A(G,H,Q)){O=w(M(G,H,Q,U)),V=w(M(G,Q,H,U));for(var $=0;$<V.length;$++)O.push(V[$]);O.length<X&&(z=O,X=O.length,z.push([l(G,H),l(G,Q)]))}}return z}function L(G){var z=w(G);return z.length>0?F(G,z):[G]}function F(G,z){if(z.length===0)return[G];if(z instanceof Array&&z.length&&z[0]instanceof Array&&z[0].length===2&&z[0][0]instanceof Array){for(var O=[G],V=0;V<z.length;V++)for(var U=z[V],X=0;X<O.length;X++){var H=O[X],Q=F(H,U);if(Q){O.splice(X,1),O.push(Q[0],Q[1]);break}}return O}else{var U=z,V=G.indexOf(U[0]),X=G.indexOf(U[1]);return V!==-1&&X!==-1?[M(G,V,X),M(G,X,V)]:!1}}function D(G){var z=G,O;for(O=0;O<z.length-1;O++)for(var V=0;V<O-1;V++)if(t(z[O],z[O+1],z[V],z[V+1]))return!1;for(O=1;O<z.length-2;O++)if(t(z[0],z[z.length-1],z[O],z[O+1]))return!1;return!0}function N(G,z,O,V,U){U=U||0;var X=z[1]-G[1],H=G[0]-z[0],Q=X*G[0]+H*G[1],$=V[1]-O[1],k=O[0]-V[0],J=$*O[0]+k*O[1],Z=X*k-$*H;return Y(Z,0,U)?[0,0]:[(k*Q-H*J)/Z,(X*J-$*Q)/Z]}function B(G,z,O,V,U,X,H){X=X||100,H=H||0,U=U||25,z=typeof z<"u"?z:[],O=O||[],V=V||[];var Q=[0,0],$=[0,0],k=[0,0],J=0,Z=0,j=0,_=0,q=0,it=0,ht=0,ft=[],ut=[],tt=G,rt=G;if(rt.length<3)return z;if(H++,H>X)return console.warn("quickDecomp: max level ("+X+") reached."),z;for(var st=0;st<G.length;++st)if(E(tt,st)){O.push(tt[st]),J=Z=Number.MAX_VALUE;for(var xt=0;xt<G.length;++xt)m(l(tt,st-1),l(tt,st),l(tt,xt))&&r(l(tt,st-1),l(tt,st),l(tt,xt-1))&&(k=N(l(tt,st-1),l(tt,st),l(tt,xt),l(tt,xt-1)),a(l(tt,st+1),l(tt,st),k)&&(j=s(tt[st],k),j<Z&&(Z=j,$=k,it=xt))),m(l(tt,st+1),l(tt,st),l(tt,xt+1))&&r(l(tt,st+1),l(tt,st),l(tt,xt))&&(k=N(l(tt,st+1),l(tt,st),l(tt,xt),l(tt,xt+1)),m(l(tt,st-1),l(tt,st),k)&&(j=s(tt[st],k),j<J&&(J=j,Q=k,q=xt)));if(it===(q+1)%G.length)k[0]=($[0]+Q[0])/2,k[1]=($[1]+Q[1])/2,V.push(k),st<q?(c(ft,tt,st,q+1),ft.push(k),ut.push(k),it!==0&&c(ut,tt,it,tt.length),c(ut,tt,0,st+1)):(st!==0&&c(ft,tt,st,tt.length),c(ft,tt,0,q+1),ft.push(k),ut.push(k),c(ut,tt,it,st+1));else{if(it>q&&(q+=G.length),_=Number.MAX_VALUE,q<it)return z;for(var xt=it;xt<=q;++xt)o(l(tt,st-1),l(tt,st),l(tt,xt))&&r(l(tt,st+1),l(tt,st),l(tt,xt))&&(j=s(l(tt,st),l(tt,xt)),j<_&&P(tt,st,xt)&&(_=j,ht=xt%G.length));st<ht?(c(ft,tt,st,ht+1),ht!==0&&c(ut,tt,ht,rt.length),c(ut,tt,0,st+1)):(st!==0&&c(ft,tt,st,rt.length),c(ft,tt,0,ht+1),c(ut,tt,ht,st+1))}return ft.length<ut.length?(B(ft,z,O,V,U,X,H),B(ut,z,O,V,U,X,H)):(B(ut,z,O,V,U,X,H),B(ft,z,O,V,U,X,H)),z}return z.push(G),z}function b(G,z){for(var O=0,V=G.length-1;G.length>3&&V>=0;--V)u(l(G,V-1),l(G,V),l(G,V+1),z)&&(G.splice(V%G.length,1),O++);return O}function W(G,z){for(var O=G.length-1;O>=1;--O)for(var V=G[O],U=O-1;U>=0;--U)if(K(V,G[U],z)){G.splice(O,1);continue}}function Y(G,z,O){return O=O||0,Math.abs(G-z)<=O}function K(G,z,O){return Y(G[0],z[0],O)&&Y(G[1],z[1],O)}},88257:(f,S,t)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var h=t(56694),m=new h({initialize:function(a){this.pluginManager=a,this.game=a.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});f.exports=m},18360:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};f.exports=S},91963:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={},t={},h={};h.register=function(m,o,a,r){r===void 0&&(r=!1),S[m]={plugin:o,mapping:a,custom:r}},h.registerCustom=function(m,o,a,r){t[m]={plugin:o,mapping:a,data:r}},h.hasCore=function(m){return S.hasOwnProperty(m)},h.hasCustom=function(m){return t.hasOwnProperty(m)},h.getCore=function(m){return S[m]},h.getCustom=function(m){return t[m]},h.getCustomClass=function(m){return t.hasOwnProperty(m)?t[m].plugin:null},h.remove=function(m){S.hasOwnProperty(m)&&delete S[m]},h.removeCustom=function(m){t.hasOwnProperty(m)&&delete t[m]},h.destroyCorePlugins=function(){for(var m in S)S.hasOwnProperty(m)&&delete S[m]},h.destroyCustomPlugins=function(){for(var m in t)t.hasOwnProperty(m)&&delete t[m]},f.exports=h},49274:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(97081),o=t(6659),a=t(76846),r=t(99325),i=t(61286),n=t(72632),u=t(91963),s=t(66458),l=new h({Extends:o,initialize:function(c){o.call(this),this.game=c,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],c.isBooted?this.boot():c.events.once(m.BOOT,this.boot,this)},boot:function(){var v,c,g,y,E,C,T,A=this.game.config,P=A.installGlobalPlugins;for(P=P.concat(this._pendingGlobal),v=0;v<P.length;v++)c=P[v],g=n(c,"key",null),y=n(c,"plugin",null),E=n(c,"start",!1),C=n(c,"mapping",null),T=n(c,"data",null),g&&(y?this.install(g,y,E,C,T):console.warn("Missing `plugin` for key: "+g));for(P=A.installScenePlugins,P=P.concat(this._pendingScene),v=0;v<P.length;v++)c=P[v],g=n(c,"key",null),y=n(c,"plugin",null),C=n(c,"mapping",null),g&&(y?this.installScenePlugin(g,y,C):console.warn("Missing `plugin` for key: "+g));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(m.DESTROY,this.destroy,this)},addToScene:function(v,c,g){var y,E,C,T=this.game,A=v.scene,P=v.settings.map,M=v.settings.isBooted;for(y=0;y<c.length;y++)E=c[y],T[E]?(v[E]=T[E],P.hasOwnProperty(E)&&(A[P[E]]=v[E])):E==="game"&&P.hasOwnProperty(E)&&(A[P[E]]=T);for(var w=0;w<g.length;w++)for(C=g[w],y=0;y<C.length;y++)if(E=C[y],!!u.hasCore(E)){var L=u.getCore(E),F=L.mapping,D=new L.plugin(A,this,F);v[F]=D,L.custom?A[F]=D:P.hasOwnProperty(F)&&(A[P[F]]=D),M&&D.boot()}for(C=this.plugins,y=0;y<C.length;y++){var N=C[y];N.mapping&&(A[N.mapping]=N.plugin)}},getDefaultScenePlugins:function(){var v=this.game.config.defaultPlugins;return v=v.concat(this.scenePlugins),v},installScenePlugin:function(v,c,g,y,E){if(E===void 0&&(E=!1),typeof c!="function"){console.warn("Invalid Scene Plugin: "+v);return}if(u.hasCore(v)||u.register(v,c,g,!0),this.scenePlugins.indexOf(v)===-1)this.scenePlugins.push(v);else if(!E&&u.hasCore(v)){console.warn("Scene Plugin key in use: "+v);return}if(y){var C=new c(y,this,v);y.sys[v]=C,g&&g!==""&&(y[g]=C),C.boot()}},install:function(v,c,g,y,E){if(g===void 0&&(g=!1),y===void 0&&(y=null),E===void 0&&(E=null),typeof c!="function")return console.warn("Invalid Plugin: "+v),null;if(u.hasCustom(v))return console.warn("Plugin key in use: "+v),null;if(y!==null&&(g=!0),!this.game.isBooted)this._pendingGlobal.push({key:v,plugin:c,start:g,mapping:y,data:E});else if(u.registerCustom(v,c,y,E),g)return this.start(v);return null},getIndex:function(v){for(var c=this.plugins,g=0;g<c.length;g++){var y=c[g];if(y.key===v)return g}return-1},getEntry:function(v){var c=this.getIndex(v);if(c!==-1)return this.plugins[c]},isActive:function(v){var c=this.getEntry(v);return c&&c.active},start:function(v,c){c===void 0&&(c=v);var g=this.getEntry(c);return g&&!g.active?(g.active=!0,g.plugin.start()):g||(g=this.createEntry(v,c)),g?g.plugin:null},createEntry:function(v,c){var g=u.getCustom(v);if(g){var y=new g.plugin(this);g={key:c,plugin:y,active:!0,mapping:g.mapping,data:g.data},this.plugins.push(g),y.init(g.data),y.start()}return g},stop:function(v){var c=this.getEntry(v);return c&&c.active&&(c.active=!1,c.plugin.stop()),this},get:function(v,c){c===void 0&&(c=!0);var g=this.getEntry(v);if(g)return g.plugin;var y=this.getClass(v);return y&&c?(g=this.createEntry(v,v),g?g.plugin:null):y||null},getClass:function(v){return u.getCustomClass(v)},removeGlobalPlugin:function(v){var c=this.getEntry(v);c&&s(this.plugins,c),u.removeCustom(v)},removeScenePlugin:function(v){s(this.scenePlugins,v),u.remove(v)},registerGameObject:function(v,c,g){return c&&i.register(v,c),g&&r.register(v,g),this},removeGameObject:function(v,c,g){return c===void 0&&(c=!0),g===void 0&&(g=!0),c&&i.remove(v),g&&r.remove(v),this},registerFileType:function(v,c,g){a.register(v,c),g&&g.sys.load&&(g.sys.load[v]=c)},destroy:function(){for(var v=0;v<this.plugins.length;v++)this.plugins[v].plugin.destroy();u.destroyCustomPlugins(),this.game.noReturn&&u.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});f.exports=l},39283:(f,S,t)=>{/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2013-2023 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var h=t(88257),m=t(56694),o=t(7599),a=new m({Extends:h,initialize:function(i,n,u){h.call(this,n),this.scene=i,this.systems=i.sys,this.pluginKey=u,i.sys.events.once(o.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});f.exports=a},45615:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={BasePlugin:t(88257),DefaultPlugins:t(18360),PluginCache:t(91963),PluginManager:t(49274),ScenePlugin:t(39283)}},75205:()=>{!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(f){const S=performance.now(),t=this.getVideoPlaybackQuality(),h=this.mozPresentedFrames||this.mozPaintedFrames||t.totalVideoFrames-t.droppedVideoFrames,m=(o,a)=>{const r=this.getVideoPlaybackQuality(),i=this.mozPresentedFrames||this.mozPaintedFrames||r.totalVideoFrames-r.droppedVideoFrames;if(i>h){const n=this.mozFrameDelay||r.totalFrameDelay-t.totalFrameDelay||0,u=a-o;f(a,{presentationTime:a+n*1e3,expectedDisplayTime:a+u,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+u/1e3,presentedFrames:i,processingDuration:n}),delete this._rvfcpolyfillmap[S]}else this._rvfcpolyfillmap[S]=requestAnimationFrame(n=>m(a,n))};return this._rvfcpolyfillmap[S]=requestAnimationFrame(o=>m(S,o)),S},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(f){cancelAnimationFrame(this._rvfcpolyfillmap[f]),delete this._rvfcpolyfillmap[f]})},95723:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},27394:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={DEFAULT:0,LINEAR:0,NEAREST:1};f.exports=S},91135:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(89787),m=t(61840),o=t(56694),a=t(86459),r=t(6659),i=t(81044),n=t(32834),u=t(40444),s=t(38203),l=t(69360),v=new o({Extends:r,initialize:function(g){r.call(this);var y=g.config;this.config={clearBeforeRender:y.clearBeforeRender,backgroundColor:y.backgroundColor,antialias:y.antialias,roundPixels:y.roundPixels},this.game=g,this.type=a.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=g.canvas;var E={alpha:g.config.transparent,desynchronized:g.config.desynchronized,willReadFrequently:!1};this.gameContext=y.context?y.context:this.gameCanvas.getContext("2d",E),this.currentContext=this.gameContext,this.antialias=g.config.antialias,this.blendModes=n(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(s.READY,this.boot,this)},boot:function(){var c=this.game,g=c.scale.baseSize;this.width=g.width,this.height=g.height,this.isBooted=!0,c.scale.on(u.RESIZE,this.onResize,this),this.resize(g.width,g.height)},onResize:function(c,g){(g.width!==this.width||g.height!==this.height)&&this.resize(g.width,g.height)},resize:function(c,g){this.width=c,this.height=g,this.emit(i.RESIZE,c,g)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(c){return this.currentContext.globalCompositeOperation=c,this},setContext:function(c){return this.currentContext=c||this.gameContext,this},setAlpha:function(c){return this.currentContext.globalAlpha=c,this},preRender:function(){var c=this.gameContext,g=this.config,y=this.width,E=this.height;c.globalAlpha=1,c.globalCompositeOperation="source-over",c.setTransform(1,0,0,1,0,0),g.clearBeforeRender&&(c.clearRect(0,0,y,E),g.transparent||(c.fillStyle=g.backgroundColor.rgba,c.fillRect(0,0,y,E))),c.save(),this.drawCount=0,this.emit(i.PRE_RENDER)},render:function(c,g,y){var E=g.length;this.emit(i.RENDER,c,y);var C=y.x,T=y.y,A=y.width,P=y.height,M=y.renderToTexture?y.context:c.sys.context;M.save(),this.game.scene.customViewports&&(M.beginPath(),M.rect(C,T,A,P),M.clip()),y.emit(h.PRE_RENDER,y),this.currentContext=M;var w=y.mask;w&&w.preRenderCanvas(this,null,y._maskCamera),y.transparent||(M.fillStyle=y.backgroundColor.rgba,M.fillRect(C,T,A,P)),M.globalAlpha=y.alpha,M.globalCompositeOperation="source-over",this.drawCount+=E,y.renderToTexture&&y.emit(h.PRE_RENDER,y),y.matrix.copyToContext(M);for(var L=0;L<E;L++){var F=g[L];F.mask&&F.mask.preRenderCanvas(this,F,y),F.renderCanvas(this,F,y),F.mask&&F.mask.postRenderCanvas(this,F,y)}M.setTransform(1,0,0,1,0,0),M.globalCompositeOperation="source-over",M.globalAlpha=1,y.flashEffect.postRenderCanvas(M),y.fadeEffect.postRenderCanvas(M),y.dirty=!1,w&&w.postRenderCanvas(this),M.restore(),y.renderToTexture&&(y.emit(h.POST_RENDER,y),y.renderToGame&&c.sys.context.drawImage(y.canvas,C,T)),y.emit(h.POST_RENDER,y)},postRender:function(){var c=this.gameContext;c.restore(),this.emit(i.POST_RENDER);var g=this.snapshotState;g.callback&&(m(this.gameCanvas,g),g.callback=null)},snapshotCanvas:function(c,g,y,E,C,T,A,P,M){y===void 0&&(y=!1),this.snapshotArea(E,C,T,A,g,P,M);var w=this.snapshotState;return w.getPixel=y,m(c,w),w.callback=null,this},snapshot:function(c,g,y){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,c,g,y)},snapshotArea:function(c,g,y,E,C,T,A){var P=this.snapshotState;return P.callback=C,P.type=T,P.encoder=A,P.getPixel=!1,P.x=c,P.y=g,P.width=Math.min(y,this.gameCanvas.width),P.height=Math.min(E,this.gameCanvas.height),this},snapshotPixel:function(c,g,y){return this.snapshotArea(c,g,1,1,y),this.snapshotState.getPixel=!0,this},batchSprite:function(c,g,y,E){var C=y.alpha*c.alpha;if(C!==0){var T=this.currentContext,A=this._tempMatrix1,P=this._tempMatrix2,M=g.canvasData,w=M.x,L=M.y,F=g.cutWidth,D=g.cutHeight,N=g.customPivot,B=g.source.resolution,b=c.displayOriginX,W=c.displayOriginY,Y=-b+g.x,K=-W+g.y;if(c.isCropped){var G=c._crop;(G.flipX!==c.flipX||G.flipY!==c.flipY)&&g.updateCropUVs(G,c.flipX,c.flipY),F=G.cw,D=G.ch,w=G.cx,L=G.cy,Y=-b+G.x,K=-W+G.y,c.flipX&&(Y>=0?Y=-(Y+F):Y<0&&(Y=Math.abs(Y)-F)),c.flipY&&(K>=0?K=-(K+D):K<0&&(K=Math.abs(K)-D))}var z=1,O=1;c.flipX&&(N||(Y+=-g.realWidth+b*2),z=-1),c.flipY&&(N||(K+=-g.realHeight+W*2),O=-1);var V=c.x,U=c.y;y.roundPixels&&(V=Math.floor(V),U=Math.floor(U)),P.applyITRS(V,U,c.rotation,c.scaleX*z,c.scaleY*O),A.copyFrom(y.matrix),E?(A.multiplyWithOffset(E,-y.scrollX*c.scrollFactorX,-y.scrollY*c.scrollFactorY),P.e=V,P.f=U):(P.e-=y.scrollX*c.scrollFactorX,P.f-=y.scrollY*c.scrollFactorY),A.multiply(P),y.roundPixels&&(A.e=Math.round(A.e),A.f=Math.round(A.f)),T.save(),A.setToContext(T),T.globalCompositeOperation=this.blendModes[c.blendMode],T.globalAlpha=C,T.imageSmoothingEnabled=!g.source.scaleMode,c.mask&&c.mask.preRenderCanvas(this,c,y),F>0&&D>0&&T.drawImage(g.source.image,w,L,F,D,Y,K,F/B,D/B),c.mask&&c.mask.postRenderCanvas(this,c,y),T.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});f.exports=v},6046:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={CanvasRenderer:t(91135),GetBlendModes:t(32834),SetTransform:t(49584)}},32834:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(95723),m=t(98581),o=function(){var a=[],r=m.supportNewBlendModes,i="source-over";return a[h.NORMAL]=i,a[h.ADD]="lighter",a[h.MULTIPLY]=r?"multiply":i,a[h.SCREEN]=r?"screen":i,a[h.OVERLAY]=r?"overlay":i,a[h.DARKEN]=r?"darken":i,a[h.LIGHTEN]=r?"lighten":i,a[h.COLOR_DODGE]=r?"color-dodge":i,a[h.COLOR_BURN]=r?"color-burn":i,a[h.HARD_LIGHT]=r?"hard-light":i,a[h.SOFT_LIGHT]=r?"soft-light":i,a[h.DIFFERENCE]=r?"difference":i,a[h.EXCLUSION]=r?"exclusion":i,a[h.HUE]=r?"hue":i,a[h.SATURATION]=r?"saturation":i,a[h.COLOR]=r?"color":i,a[h.LUMINOSITY]=r?"luminosity":i,a[h.ERASE]="destination-out",a[h.SOURCE_IN]="source-in",a[h.SOURCE_OUT]="source-out",a[h.SOURCE_ATOP]="source-atop",a[h.DESTINATION_OVER]="destination-over",a[h.DESTINATION_IN]="destination-in",a[h.DESTINATION_OUT]="destination-out",a[h.DESTINATION_ATOP]="destination-atop",a[h.LIGHTER]="lighter",a[h.COPY]="copy",a[h.XOR]="xor",a};f.exports=o},49584:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(73329),m=function(o,a,r,i,n){var u=i.alpha*r.alpha;if(u<=0)return!1;var s=h(r,i,n).calc;return a.globalCompositeOperation=o.blendModes[r.blendMode],a.globalAlpha=u,a.save(),s.setToContext(a),a.imageSmoothingEnabled=r.frame?!r.frame.source.scaleMode:o.antialias,!0};f.exports=m},70936:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="postrender"},99298:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="prerender"},7743:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="render"},99519:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="resize"},81044:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={POST_RENDER:t(70936),PRE_RENDER:t(99298),RENDER:t(7743),RESIZE:t(99519)}},42069:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Canvas:t(6046),Events:t(81044),Snapshot:t(95528),WebGL:t(55478)}},61840:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61068),m=t(27119),o=t(72632),a=function(r,i){var n=o(i,"callback"),u=o(i,"type","image/png"),s=o(i,"encoder",.92),l=Math.abs(Math.round(o(i,"x",0))),v=Math.abs(Math.round(o(i,"y",0))),c=Math.floor(o(i,"width",r.width)),g=Math.floor(o(i,"height",r.height)),y=o(i,"getPixel",!1);if(y){var E=r.getContext("2d",{willReadFrequently:!1}),C=E.getImageData(l,v,1,1),T=C.data;n.call(null,new m(T[0],T[1],T[2],T[3]))}else if(l!==0||v!==0||c!==r.width||g!==r.height){var A=h.createWebGL(this,c,g),P=A.getContext("2d",{willReadFrequently:!0});c>0&&g>0&&P.drawImage(r,l,v,c,g,0,0,c,g);var M=new Image;M.onerror=function(){n.call(null),h.remove(A)},M.onload=function(){n.call(null,M),h.remove(A)},M.src=A.toDataURL(u,s)}else{var w=new Image;w.onerror=function(){n.call(null)},w.onload=function(){n.call(null,w)},w.src=r.toDataURL(u,s)}};f.exports=a},1217:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61068),m=t(27119),o=t(72632),a=function(r,i){var n=r,u=o(i,"callback"),s=o(i,"type","image/png"),l=o(i,"encoder",.92),v=Math.abs(Math.round(o(i,"x",0))),c=Math.abs(Math.round(o(i,"y",0))),g=o(i,"getPixel",!1),y=o(i,"isFramebuffer",!1),E=y?o(i,"bufferWidth",1):n.drawingBufferWidth,C=y?o(i,"bufferHeight",1):n.drawingBufferHeight;if(g){var T=new Uint8Array(4),A=y?c:C-c;n.readPixels(v,A,1,1,n.RGBA,n.UNSIGNED_BYTE,T),u.call(null,new m(T[0],T[1],T[2],T[3]))}else{var P=Math.floor(o(i,"width",E)),M=Math.floor(o(i,"height",C)),w=P*M*4,L=new Uint8Array(w);n.readPixels(v,C-c-M,P,M,n.RGBA,n.UNSIGNED_BYTE,L);for(var F=h.createWebGL(this,P,M),D=F.getContext("2d",{willReadFrequently:!0}),N=D.getImageData(0,0,P,M),B=N.data,b=0;b<M;b++)for(var W=0;W<P;W++){var Y=((M-b-1)*P+W)*4,K=y?w-(b*P+(P-W))*4:(b*P+W)*4;B[K+0]=L[Y+0],B[K+1]=L[Y+1],B[K+2]=L[Y+2],B[K+3]=L[Y+3]}D.putImageData(N,0,0);var G=new Image;G.onerror=function(){u.call(null),h.remove(F)},G.onload=function(){u.call(null,G),h.remove(F)},G.src=F.toDataURL(s,l)}};f.exports=a},95528:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Canvas:t(61840),WebGL:t(1217)}},35217:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(65641),o=t(33885),a=t(77290),r=t(72632),i=t(37410),n=t(82127),u=t(5583),s=t(58136),l=t(47406),v=t(81828),c=t(66901),g=t(71264),y=t(77310),E=t(10919),C=t(21213),T=t(51212),A=t(60848),P=new h({initialize:function(w){this.game=w.game,this.renderer=w,this.classes=new o([[m.UTILITY_PIPELINE,A],[m.MULTI_PIPELINE,y],[m.BITMAPMASK_PIPELINE,u],[m.SINGLE_PIPELINE,T],[m.ROPE_PIPELINE,C],[m.LIGHT_PIPELINE,c],[m.POINTLIGHT_PIPELINE,E],[m.MOBILE_PIPELINE,g],[m.FX_PIPELINE,v]]),this.postPipelineClasses=new o([[String(l.BARREL),s.Barrel],[String(l.BLOOM),s.Bloom],[String(l.BLUR),s.Blur],[String(l.BOKEH),s.Bokeh],[String(l.CIRCLE),s.Circle],[String(l.COLOR_MATRIX),s.ColorMatrix],[String(l.DISPLACEMENT),s.Displacement],[String(l.GLOW),s.Glow],[String(l.GRADIENT),s.Gradient],[String(l.PIXELATE),s.Pixelate],[String(l.SHADOW),s.Shadow],[String(l.SHINE),s.Shine],[String(l.VIGNETTE),s.Vignette],[String(l.WIPE),s.Wipe]]),this.pipelines=new o,this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(M,w,L){var F=this.renderer,D=this.renderTargets;this.frameInc=Math.floor(r(M,"frameInc",32));for(var N=F.width,B=F.height,b=Math.min(N,B),W=Math.ceil(b/this.frameInc),Y=1;Y<W;Y++){var K=Y*this.frameInc;D.push(new i(F,K,K)),D.push(new i(F,K,K)),D.push(new i(F,K,K)),this.maxDimension=K}D.push(new i(F,N,B,1,0,!0,!0)),D.push(new i(F,N,B,1,0,!0,!0)),D.push(new i(F,N,B,1,0,!0,!0));var G,z,O=this,V=this.game;if(this.classes.each(function(X,H){G=O.add(X,new H({game:V})),X===m.UTILITY_PIPELINE&&(O.UTILITY_PIPELINE=G,O.fullFrame1=G.fullFrame1,O.fullFrame2=G.fullFrame2,O.halfFrame1=G.halfFrame1,O.halfFrame2=G.halfFrame2)}),this.MULTI_PIPELINE=this.get(m.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(m.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(m.MOBILE_PIPELINE),this.FX_PIPELINE=this.get(m.FX_PIPELINE),M)for(z in M){var U=M[z];G=new U(V),G.name=z,G.isPostFX?this.postPipelineClasses.set(z,U):this.has(z)||(this.classes.set(z,U),this.add(z,G))}this.default=this.get(w),L&&!a.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(M){var w=this.get(M);return w&&(this.default=w),w},add:function(M,w){if(w.isPostFX){console.warn(M+" is a Post Pipeline. Use `addPostPipeline` instead");return}var L=this.pipelines,F=this.renderer;return L.has(M)?console.warn("Pipeline exists: "+M):(w.name=M,w.manager=this,L.set(M,w)),w.hasBooted||w.boot(),F.width!==0&&F.height!==0&&!w.isPreFX&&w.resize(F.width,F.height),w},addPostPipeline:function(M,w){this.postPipelineClasses.has(M)||this.postPipelineClasses.set(M,w)},flush:function(){this.current&&this.current.flush()},has:function(M){var w=this.pipelines;return typeof M=="string"?w.has(M):!!w.contains(M)},get:function(M){var w=this.pipelines;if(typeof M=="string")return w.get(M);if(w.contains(M))return M},getPostPipeline:function(M,w,L){var F=this.postPipelineClasses,D,N="",B=typeof M;if(B==="string"||B==="number"?(D=F.get(M),N=M):B==="function"?(F.contains(M)&&(D=M),N=M.name):B==="object"&&(D=F.get(M.name),N=M.name),D){var b=new D(this.game,L);return b.name=N,w&&(b.gameObject=w),b}},remove:function(M,w,L){w===void 0&&(w=!0),L===void 0&&(L=!0),this.pipelines.delete(M),w&&this.classes.delete(M),L&&this.postPipelineClasses.delete(M)},set:function(M,w,L){if(!M.isPostFX)return this.isCurrent(M,L)||(this.flush(),this.current&&this.current.unbind(),this.current=M,M.bind(L)),M.updateProjectionMatrix(),M.onBind(w),M},preBatch:function(M){if(M.hasPostPipeline){this.flush();for(var w=M.postPipelines,L=w.length-1;L>=0;L--){var F=w[L];F.active&&F.preBatch(M)}}},postBatch:function(M){if(M.hasPostPipeline){this.flush();for(var w=M.postPipelines,L=0;L<w.length;L++){var F=w[L];F.active&&F.postBatch(M)}}},preBatchCamera:function(M){if(M.hasPostPipeline){this.flush();for(var w=M.postPipelines,L=w.length-1;L>=0;L--){var F=w[L];F.active&&F.preBatch(M)}}},postBatchCamera:function(M){if(M.hasPostPipeline){this.flush();for(var w=M.postPipelines,L=0;L<w.length;L++){var F=w[L];F.active&&F.postBatch(M)}}},isCurrent:function(M,w){var L=this.renderer,F=this.current;return F&&!w&&(w=F.currentShader),!(F!==M||w.program!==L.currentProgram)},copyFrame:function(M,w,L,F,D){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(M,w,L,F,D),this},copyToGame:function(M){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(M),this},drawFrame:function(M,w,L,F){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(M,w,L,F),this},blendFrames:function(M,w,L,F,D){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(M,w,L,F,D),this},blendFramesAdditive:function(M,w,L,F,D){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(M,w,L,F,D),this},clearFrame:function(M,w){return this.UTILITY_PIPELINE.clearFrame(M,w),this},blitFrame:function(M,w,L,F,D,N){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(M,w,L,F,D,N),this},copyFrameRect:function(M,w,L,F,D,N,B,b){return this.UTILITY_PIPELINE.copyFrameRect(M,w,L,F,D,N,B,b),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(M){return this.UTILITY_PIPELINE.bind(M)},setFX:function(){return this.set(this.FX_PIPELINE)},rebind:function(M){M===void 0&&this.previous&&(M=this.previous);var w=this.renderer,L=w.gl;L.disable(L.DEPTH_TEST),L.disable(L.CULL_FACE),w.hasActiveStencilMask()?L.clear(L.DEPTH_BUFFER_BIT):(L.disable(L.STENCIL_TEST),L.clear(L.DEPTH_BUFFER_BIT|L.STENCIL_BUFFER_BIT)),L.viewport(0,0,w.width,w.height),w.currentProgram=null,w.setBlendMode(0,!0);var F=w.vaoExtension;F&&F.bindVertexArrayOES(null);var D=this.pipelines.entries;for(var N in D)D[N].glReset=!0;M&&(this.current=M,M.rebind())},clear:function(){var M=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,M.currentProgram=null,M.setBlendMode(0,!0);var w=M.vaoExtension;w&&w.bindVertexArrayOES(null)},getRenderTarget:function(M){var w=this.renderTargets,L=3;if(M>this.maxDimension)return this.targetIndex=w.length-L,w[this.targetIndex];var F=(n(M,this.frameInc,0,!0)-1)*L;return this.targetIndex=F,w[F]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});f.exports=P},37410:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(81044),o=new h({initialize:function(r,i,n,u,s,l,v,c,g){u===void 0&&(u=1),s===void 0&&(s=0),l===void 0&&(l=!0),v===void 0&&(v=!1),c===void 0&&(c=!0),g===void 0&&(g=!0),this.renderer=r,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=u,this.minFilter=s,this.autoClear=l,this.autoResize=!0,this.hasDepthBuffer=c,this.forceClamp=g,this.resize(i,n),v?this.setAutoResize(!0):this.autoResize=!1},setAutoResize:function(a){return a&&!this.autoResize?(this.renderer.on(m.RESIZE,this.resize,this),this.autoResize=!0):!a&&this.autoResize&&(this.renderer.off(m.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(a,r){var i=a*this.scale,n=r*this.scale;if(this.autoResize&&(i!==this.width||n!==this.height)){var u=this.renderer;u.deleteFramebuffer(this.framebuffer),u.deleteTexture(this.texture),a*=this.scale,r*=this.scale,a=Math.round(a),r=Math.round(r),a<=0&&(a=1),r<=0&&(r=1),this.texture=u.createTextureFromSource(null,a,r,this.minFilter,this.forceClamp),this.framebuffer=u.createFramebuffer(a,r,this.texture,this.hasDepthBuffer),this.width=a,this.height=r}return this},bind:function(a,r,i){a===void 0&&(a=!1);var n=this.renderer;if(a&&n.flush(),r&&i&&this.resize(r,i),n.pushFramebuffer(this.framebuffer,!1,!1),a&&this.adjustViewport(),this.autoClear){var u=this.renderer.gl;u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT)}n.clearStencilMask()},adjustViewport:function(){var a=this.renderer.gl;a.viewport(0,0,this.width,this.height),a.disable(a.SCISSOR_TEST)},clear:function(){var a=this.renderer,r=a.gl;a.pushFramebuffer(this.framebuffer),r.disable(r.SCISSOR_TEST),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),a.popFramebuffer(),a.resetScissor()},unbind:function(a){a===void 0&&(a=!1);var r=this.renderer;return a&&r.flush(),r.popFramebuffer()},destroy:function(){var a=this.renderer;a.deleteFramebuffer(this.framebuffer),a.deleteTexture(this.texture),a.off(m.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});f.exports=o},75512:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={getTintFromFloats:function(S,t,h,m){var o=(S*255|0)&255,a=(t*255|0)&255,r=(h*255|0)&255,i=(m*255|0)&255;return(i<<24|o<<16|a<<8|r)>>>0},getTintAppendFloatAlpha:function(S,t){var h=(t*255|0)&255;return(h<<24|S)>>>0},getTintAppendFloatAlphaAndSwap:function(S,t){var h=(S>>16|0)&255,m=(S>>8|0)&255,o=(S|0)&255,a=(t*255|0)&255;return(a<<24|o<<16|m<<8|h)>>>0},getFloatsFromUintRGB:function(S){var t=(S>>16|0)&255,h=(S>>8|0)&255,m=(S|0)&255;return[t/255,h/255,m/255]},checkShaderMax:function(S,t){var h=Math.min(16,S.getParameter(S.MAX_TEXTURE_IMAGE_UNITS));return!t||t===-1?h:Math.min(h,t)},parseFragmentShaderMaxTextures:function(S,t){if(!S)return"";for(var h="",m=0;m<t;m++)m>0&&(h+=`
	else `),m<t-1&&(h+="if (outTexId < "+m+".5)"),h+=`
	{`,h+=`
		texture = texture2D(uMainSampler[`+m+"], outTexCoord);",h+=`
	}`;return S=S.replace(/%count%/gi,t.toString()),S.replace(/%forloop%/gi,h)},setGlowQuality:function(S,t,h,m){return h===void 0&&(h=t.config.glowFXQuality),m===void 0&&(m=t.config.glowFXDistance),S=S.replace(/__SIZE__/gi,(1/h/m).toFixed(7)),S=S.replace(/__DIST__/gi,m.toFixed(0)+".0"),S}}},44775:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(28699),o=t(6659),a=t(18970),r=t(72632),i=t(16650),n=t(81044),u=t(37410),s=t(75512),l=t(71305),v=new h({Extends:o,initialize:function(g){o.call(this);var y=g.game,E=y.renderer,C=E.gl;this.name=r(g,"name","WebGLPipeline"),this.game=y,this.renderer=E,this.manager,this.gl=C,this.view=y.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=r(g,"topology",C.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=r(g,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=g,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[]},boot:function(){var c,g=this.gl,y=this.config,E=this.renderer;this.isPostFX||(this.projectionMatrix=new i().identity());var C=this.renderTargets,T=r(y,"renderTarget",!1);typeof T=="boolean"&&T&&(T=1);var A=E.width,P=E.height;if(typeof T=="number")for(c=0;c<T;c++)C.push(new u(E,A,P,1,0,!0));else if(Array.isArray(T))for(c=0;c<T.length;c++){var M=r(T[c],"scale",1),w=r(T[c],"minFilter",0),L=r(T[c],"autoClear",1),F=r(T[c],"width",null),D=r(T[c],"height",F);F?C.push(new u(E,F,D,1,w,L)):C.push(new u(E,A,P,M,w,L))}C.length&&(this.currentRenderTarget=C[0]),this.setShadersFromConfig(y);var N=this.shaders,B=0;for(c=0;c<N.length;c++)N[c].vertexSize>B&&(B=N[c].vertexSize);var b=r(y,"batchSize",E.config.batchSize);this.vertexCapacity=b*6;var W=new ArrayBuffer(this.vertexCapacity*B);this.vertexData=W,this.bytes=new Uint8Array(W),this.vertexViewF32=new Float32Array(W),this.vertexViewU32=new Uint32Array(W);var Y=r(y,"vertices",null);for(Y?(this.vertexViewF32.set(Y),this.vertexBuffer=E.createVertexBuffer(W,g.STATIC_DRAW)):this.vertexBuffer=E.createVertexBuffer(W.byteLength,g.DYNAMIC_DRAW),this.setVertexBuffer(),c=N.length-1;c>=0;c--)N[c].rebind();this.hasBooted=!0,E.on(n.RESIZE,this.resize,this),E.on(n.PRE_RENDER,this.onPreRender,this),E.on(n.RENDER,this.onRender,this),E.on(n.POST_RENDER,this.onPostRender,this),this.emit(a.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(c,g,y){var E=this.renderer;if(c!==this.currentShader||E.currentProgram!==this.currentShader.program){this.flush();var C=this.setVertexBuffer(y);C&&!g&&(g=!0),c.bind(g,!1),this.currentShader=c}return this},getShaderByName:function(c){for(var g=this.shaders,y=0;y<g.length;y++)if(g[y].name===c)return g[y]},setShadersFromConfig:function(c){var g,y=this.shaders,E=this.renderer;for(g=0;g<y.length;g++)y[g].destroy();var C="vertShader",T="fragShader",A="attributes",P=r(c,C,null),M=s.parseFragmentShaderMaxTextures(r(c,T,null),E.maxTextures),w=r(c,A,null),L=r(c,"shaders",[]),F=L.length;if(F===0)P&&M&&(this.shaders=[new l(this,"default",P,M,m(w))]);else{var D=[];for(g=0;g<F;g++){var N=L[g],B,b,W,Y;if(typeof N=="string"?(B="default",b=P,W=s.parseFragmentShaderMaxTextures(N,E.maxTextures),Y=w):(B=r(N,"name","default"),b=r(N,C,P),W=s.parseFragmentShaderMaxTextures(r(N,T,M),E.maxTextures),Y=r(N,A,w)),B==="default"){var K=W.split(`
`),G=K[0].trim();G.indexOf("#define SHADER_NAME")>-1&&(B=G.substring(20))}b&&W&&D.push(new l(this,B,b,W,m(Y)))}this.shaders=D}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(c){return this.currentBatch={start:this.vertexCount,count:0,texture:[c],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=c,this.batch.push(this.currentBatch),0},addTextureToBatch:function(c){var g=this.currentBatch;g&&(g.texture.push(c),g.unit++,g.maxUnit++)},pushBatch:function(c){if(!this.currentBatch||this.forceZero&&c!==this.currentTexture)return this.createBatch(c);if(c===this.currentTexture)return this.currentUnit;var g=this.currentBatch,y=g.texture.indexOf(c);return y===-1?g.texture.length===this.renderer.maxTextures?this.createBatch(c):(g.unit++,g.maxUnit++,g.texture.push(c),this.currentUnit=g.unit,this.currentTexture=c,g.unit):(this.currentUnit=y,this.currentTexture=c,y)},setGameObject:function(c,g){return g===void 0&&(g=c.frame),this.pushBatch(g.source.glTexture)},shouldFlush:function(c){return c===void 0&&(c=0),this.vertexCount+c>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(c,g){(c!==this.width||g!==this.height)&&this.flush(),this.width=c,this.height=g;for(var y=this.renderTargets,E=0;E<y.length;E++)y[E].resize(c,g);return this.setProjectionMatrix(c,g),this.emit(a.RESIZE,c,g,this),this.onResize(c,g),this},setProjectionMatrix:function(c,g){var y=this.projectionMatrix;if(!y)return this;this.projectionWidth=c,this.projectionHeight=g,y.ortho(0,c,g,0,-1e3,1e3);for(var E=this.shaders,C="uProjectionMatrix",T=0;T<E.length;T++){var A=E[T];A.hasUniform(C)&&(A.resetUniform(C),A.setMatrix4fv(C,!1,y.val,A))}return this},flipProjectionMatrix:function(c){c===void 0&&(c=!0);var g=this.projectionMatrix;if(!g)return this;var y=this.projectionWidth,E=this.projectionHeight;c?g.ortho(0,y,0,E,-1e3,1e3):g.ortho(0,y,E,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,g.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var c=this.renderer.projectionWidth,g=this.renderer.projectionHeight;(this.projectionWidth!==c||this.projectionHeight!==g)&&this.setProjectionMatrix(c,g)}},bind:function(c){if(c===void 0&&(c=this.currentShader),this.glReset)return this.rebind(c);var g=!1,y=this.gl;return y.getParameter(y.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(y.bindBuffer(y.ARRAY_BUFFER,this.vertexBuffer),this.activeBuffer=this.vertexBuffer,g=!0),c.bind(g),this.currentShader=c,this.activeTextures.length=0,this.emit(a.BIND,this,c),this.onActive(c),this},rebind:function(c){this.activeBuffer=null,this.setVertexBuffer();for(var g=this.shaders,y=g.length-1;y>=0;y--){var E=g[y].rebind();(!c||E===c)&&(this.currentShader=E)}return this.activeTextures.length=0,this.emit(a.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(c){if(c===void 0&&(c=this.vertexBuffer),c!==this.activeBuffer){var g=this.gl;return this.gl.bindBuffer(g.ARRAY_BUFFER,c),this.activeBuffer=c,!0}return!1},preBatch:function(c){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(c),this},postBatch:function(c){return this.onDraw(this.currentRenderTarget),this.onPostBatch(c),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(c){if(c===void 0&&(c=!1),this.vertexCount>0){this.emit(a.BEFORE_FLUSH,this,c),this.onBeforeFlush(c);var g=this.gl,y=this.vertexCount,E=this.currentShader.vertexSize,C=this.topology;if(this.active){this.setVertexBuffer(),y===this.vertexCapacity?g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.DYNAMIC_DRAW):g.bufferSubData(g.ARRAY_BUFFER,0,this.bytes.subarray(0,y*E));var T,A,P,M=this.batch,w=this.activeTextures;if(this.forceZero)for(w[0]||g.activeTexture(g.TEXTURE0),T=0;T<M.length;T++)A=M[T],P=A.texture[0],w[0]!==P&&(g.bindTexture(g.TEXTURE_2D,P),w[0]=P),g.drawArrays(C,A.start,A.count);else for(T=0;T<M.length;T++){A=M[T];for(var L=0;L<=A.maxUnit;L++)P=A.texture[L],w[L]!==P&&(g.activeTexture(g.TEXTURE0+L),g.bindTexture(g.TEXTURE_2D,P),w[L]=P);g.drawArrays(C,A.start,A.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(a.AFTER_FLUSH,this,c),this.onAfterFlush(c)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(c,g,y,E,C,T,A){var P=this.vertexViewF32,M=this.vertexViewU32,w=this.vertexCount*this.currentShader.vertexComponentCount-1;P[++w]=c,P[++w]=g,P[++w]=y,P[++w]=E,P[++w]=C,P[++w]=T,M[++w]=A,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(c,g,y,E,C,T,A,P,M,w,L,F,D,N,B,b,W,Y,K,G){G===void 0&&(G=this.currentUnit);var z=!1;this.shouldFlush(6)&&(this.flush(),z=!0),this.currentBatch||(G=this.setTexture2D(K));var O=this.vertexViewF32,V=this.vertexViewU32,U=this.vertexCount*this.currentShader.vertexComponentCount-1;return O[++U]=g,O[++U]=y,O[++U]=w,O[++U]=L,O[++U]=G,O[++U]=Y,V[++U]=N,O[++U]=E,O[++U]=C,O[++U]=w,O[++U]=D,O[++U]=G,O[++U]=Y,V[++U]=b,O[++U]=T,O[++U]=A,O[++U]=F,O[++U]=D,O[++U]=G,O[++U]=Y,V[++U]=W,O[++U]=g,O[++U]=y,O[++U]=w,O[++U]=L,O[++U]=G,O[++U]=Y,V[++U]=N,O[++U]=T,O[++U]=A,O[++U]=F,O[++U]=D,O[++U]=G,O[++U]=Y,V[++U]=W,O[++U]=P,O[++U]=M,O[++U]=F,O[++U]=L,O[++U]=G,O[++U]=Y,V[++U]=B,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(c),z},batchTri:function(c,g,y,E,C,T,A,P,M,w,L,F,D,N,B,b,W){W===void 0&&(W=this.currentUnit);var Y=!1;this.shouldFlush(3)&&(this.flush(),Y=!0),this.currentBatch||(W=this.setTexture2D(b));var K=this.vertexViewF32,G=this.vertexViewU32,z=this.vertexCount*this.currentShader.vertexComponentCount-1;return K[++z]=g,K[++z]=y,K[++z]=P,K[++z]=M,K[++z]=W,K[++z]=B,G[++z]=F,K[++z]=E,K[++z]=C,K[++z]=P,K[++z]=L,K[++z]=W,K[++z]=B,G[++z]=D,K[++z]=T,K[++z]=A,K[++z]=w,K[++z]=L,K[++z]=W,K[++z]=B,G[++z]=N,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(c),Y},drawFillRect:function(c,g,y,E,C,T,A,P){A===void 0&&(A=this.renderer.whiteTexture),P===void 0&&(P=!0),c=Math.floor(c),g=Math.floor(g);var M=Math.floor(c+y),w=Math.floor(g+E),L=this.setTexture2D(A),F=s.getTintAppendFloatAlphaAndSwap(C,T),D=0,N=0,B=1,b=1;P&&(N=1,b=0),this.batchQuad(null,c,g,c,w,M,w,M,g,D,N,B,b,F,F,F,F,0,A,L)},setTexture2D:function(c){return c===void 0&&(c=this.renderer.whiteTexture),this.pushBatch(c)},bindTexture:function(c,g){g===void 0&&(g=0);var y=this.gl;return y.activeTexture(y.TEXTURE0+g),y.bindTexture(y.TEXTURE_2D,c),this},bindRenderTarget:function(c,g){return this.bindTexture(c.texture,g)},setTime:function(c,g){return this.set1f(c,this.game.loop.getDuration(),g),this},setBoolean:function(c,g,y){return y===void 0&&(y=this.currentShader),y.setBoolean(c,g),this},set1f:function(c,g,y){return y===void 0&&(y=this.currentShader),y.set1f(c,g),this},set2f:function(c,g,y,E){return E===void 0&&(E=this.currentShader),E.set2f(c,g,y),this},set3f:function(c,g,y,E,C){return C===void 0&&(C=this.currentShader),C.set3f(c,g,y,E),this},set4f:function(c,g,y,E,C,T){return T===void 0&&(T=this.currentShader),T.set4f(c,g,y,E,C),this},set1fv:function(c,g,y){return y===void 0&&(y=this.currentShader),y.set1fv(c,g),this},set2fv:function(c,g,y){return y===void 0&&(y=this.currentShader),y.set2fv(c,g),this},set3fv:function(c,g,y){return y===void 0&&(y=this.currentShader),y.set3fv(c,g),this},set4fv:function(c,g,y){return y===void 0&&(y=this.currentShader),y.set4fv(c,g),this},set1iv:function(c,g,y){return y===void 0&&(y=this.currentShader),y.set1iv(c,g),this},set2iv:function(c,g,y){return y===void 0&&(y=this.currentShader),y.set2iv(c,g),this},set3iv:function(c,g,y){return y===void 0&&(y=this.currentShader),y.set3iv(c,g),this},set4iv:function(c,g,y){return y===void 0&&(y=this.currentShader),y.set4iv(c,g),this},set1i:function(c,g,y){return y===void 0&&(y=this.currentShader),y.set1i(c,g),this},set2i:function(c,g,y,E){return E===void 0&&(E=this.currentShader),E.set2i(c,g,y),this},set3i:function(c,g,y,E,C){return C===void 0&&(C=this.currentShader),C.set3i(c,g,y,E),this},set4i:function(c,g,y,E,C,T){return T===void 0&&(T=this.currentShader),T.set4i(c,g,y,E,C),this},setMatrix2fv:function(c,g,y,E){return E===void 0&&(E=this.currentShader),E.setMatrix2fv(c,g,y),this},setMatrix3fv:function(c,g,y,E){return E===void 0&&(E=this.currentShader),E.setMatrix3fv(c,g,y),this},setMatrix4fv:function(c,g,y,E){return E===void 0&&(E=this.currentShader),E.setMatrix4fv(c,g,y),this},destroy:function(){this.emit(a.DESTROY,this);var c,g=this.shaders;for(c=0;c<g.length;c++)g[c].destroy();var y=this.renderTargets;for(c=0;c<y.length;c++)y[c].destroy();this.gl.deleteBuffer(this.vertexBuffer);var E=this.renderer;return E.off(n.RESIZE,this.resize,this),E.off(n.PRE_RENDER,this.onPreRender,this),E.off(n.RENDER,this.onRender,this),E.off(n.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});f.exports=v},11857:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(66458),m=t(89787),o=t(56694),a=t(86459),r=t(6659),i=t(81044),n=t(28621),u=t(16650),s=t(72283),l=t(35217),v=t(37410),c=t(40444),g=t(38203),y=t(75512),E=t(1217),C=new o({Extends:r,initialize:function(A){r.call(this);var P=A.config,M={alpha:P.transparent,desynchronized:P.desynchronized,depth:!0,antialias:P.antialiasGL,premultipliedAlpha:P.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:P.failIfMajorPerformanceCaveat,powerPreference:P.powerPreference,preserveDrawingBuffer:P.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:P.clearBeforeRender,antialias:P.antialias,backgroundColor:P.backgroundColor,contextCreation:M,roundPixels:P.roundPixels,maxTextures:P.maxTextures,maxTextureSize:P.maxTextureSize,batchSize:P.batchSize,maxLights:P.maxLights,mipmapFilter:P.mipmapFilter},this.game=A,this.type=a.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=A.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=s,this.contextRestoredHandler=s,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(T){var A,P=this.game,M=this.canvas,w=T.backgroundColor;if(P.config.context?A=P.config.context:A=M.getContext("webgl",T.contextCreation)||M.getContext("experimental-webgl",T.contextCreation),!A||A.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=A;var L=this;this.contextLostHandler=function(Y){L.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),Y.preventDefault()},M.addEventListener("webglcontextlost",this.contextLostHandler,!1),P.context=A;for(var F=0;F<=27;F++)this.blendModes.push({func:[A.ONE,A.ONE_MINUS_SRC_ALPHA],equation:A.FUNC_ADD});this.blendModes[1].func=[A.ONE,A.DST_ALPHA],this.blendModes[2].func=[A.DST_COLOR,A.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[A.ONE,A.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[A.ZERO,A.ONE_MINUS_SRC_ALPHA],equation:A.FUNC_REVERSE_SUBTRACT},this.glFormats=[A.BYTE,A.SHORT,A.UNSIGNED_BYTE,A.UNSIGNED_SHORT,A.FLOAT],this.glFuncMap={mat2:{func:A.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:A.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:A.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:A.uniform1f,length:1},"1fv":{func:A.uniform1fv,length:1},"1i":{func:A.uniform1i,length:1},"1iv":{func:A.uniform1iv,length:1},"2f":{func:A.uniform2f,length:2},"2fv":{func:A.uniform2fv,length:1},"2i":{func:A.uniform2i,length:2},"2iv":{func:A.uniform2iv,length:1},"3f":{func:A.uniform3f,length:3},"3fv":{func:A.uniform3fv,length:1},"3i":{func:A.uniform3i,length:3},"3iv":{func:A.uniform3iv,length:1},"4f":{func:A.uniform4f,length:4},"4fv":{func:A.uniform4fv,length:1},"4i":{func:A.uniform4i,length:4},"4iv":{func:A.uniform4iv,length:1}};var D=A.getSupportedExtensions();(!T.maxTextures||T.maxTextures===-1)&&(T.maxTextures=A.getParameter(A.MAX_TEXTURE_IMAGE_UNITS)),T.maxTextureSize||(T.maxTextureSize=A.getParameter(A.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),this.supportedExtensions=D;var N="ANGLE_instanced_arrays";this.instancedArraysExtension=D.indexOf(N)>-1?A.getExtension(N):null;var B="OES_vertex_array_object";this.vaoExtension=D.indexOf(B)>-1?A.getExtension(B):null,A.disable(A.DEPTH_TEST),A.disable(A.CULL_FACE),A.enable(A.BLEND),A.clearColor(w.redGL,w.greenGL,w.blueGL,w.alphaGL),T.mipmapFilter!==""&&(this.mipmapFilter=A[T.mipmapFilter]),this.maxTextures=y.checkShaderMax(A,T.maxTextures),this.textureIndexes=[];for(var b=0;b<this.maxTextures;b++){var W=A.createTexture();A.activeTexture(A.TEXTURE0+b),A.bindTexture(A.TEXTURE_2D,W),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,1,1,0,A.RGBA,A.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(b)}return this.pipelines=new l(this),this.setBlendMode(a.BlendModes.NORMAL),this.projectionMatrix=new u().identity(),P.textures.once(g.READY,this.boot,this),this},boot:function(){var T=this.game,A=this.pipelines,P=T.scale.baseSize,M=P.width,w=P.height;this.width=M,this.height=w,this.isBooted=!0,this.renderTarget=new v(this,M,w,1,0,!0,!0),this.maskTarget=new v(this,M,w,1,0,!0,!0),this.maskSource=new v(this,M,w,1,0,!0,!0);var L=T.config;A.boot(L.pipeline,L.defaultPipeline,L.autoMobilePipeline),this.blankTexture=T.textures.getFrame("__DEFAULT").glTexture,this.whiteTexture=T.textures.getFrame("__WHITE").glTexture;var F=this.gl;F.bindFramebuffer(F.FRAMEBUFFER,null),F.enable(F.SCISSOR_TEST),T.scale.on(c.RESIZE,this.onResize,this),this.resize(M,w)},captureFrame:function(T,A){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(T,A,P){},stopCapture:function(){},onCapture:function(T){},onResize:function(T,A){(A.width!==this.width||A.height!==this.height)&&this.resize(A.width,A.height)},beginCapture:function(T,A){T===void 0&&(T=this.width),A===void 0&&(A=this.height),this.renderTarget.bind(!0,T,A),this.setProjectionMatrix(T,A)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(T,A){var P=this.gl;return this.width=T,this.height=A,this.setProjectionMatrix(T,A),P.viewport(0,0,T,A),this.drawingBufferHeight=P.drawingBufferHeight,P.scissor(0,P.drawingBufferHeight-A,T,A),this.defaultScissor[2]=T,this.defaultScissor[3]=A,this.emit(i.RESIZE,T,A),this},getCompressedTextures:function(){var T="WEBGL_compressed_texture_",A="WEBKIT_"+T,P=function(w,L){var F=w.getExtension(T+L)||w.getExtension(A+L);if(F){var D={};for(var N in F)D[F[N]]=N;return D}},M=this.gl;return{ETC:P(M,"etc"),ETC1:P(M,"etc1"),ATC:P(M,"atc"),ASTC:P(M,"astc"),BPTC:P(M,"bptc"),RGTC:P(M,"rgtc"),PVRTC:P(M,"pvrtc"),S3TC:P(M,"s3tc"),S3TCSRGB:P(M,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(T,A){var P=this.compression[T.toUpperCase()];if(A in P)return P[A]},supportsCompressedTexture:function(T,A){var P=this.compression[T.toUpperCase()];return P?A?A in P:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(T,A){return(T!==this.projectionWidth||A!==this.projectionHeight)&&(this.projectionWidth=T,this.projectionHeight=A,this.projectionMatrix.ortho(0,T,A,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(T){return this.supportedExtensions?this.supportedExtensions.indexOf(T):!1},getExtension:function(T){return this.hasExtension(T)?(T in this.extensions||(this.extensions[T]=this.gl.getExtension(T)),this.extensions[T]):null},flush:function(){this.pipelines.flush()},pushScissor:function(T,A,P,M,w){w===void 0&&(w=this.drawingBufferHeight);var L=this.scissorStack,F=[T,A,P,M];return L.push(F),this.setScissor(T,A,P,M,w),this.currentScissor=F,F},setScissor:function(T,A,P,M,w){w===void 0&&(w=this.drawingBufferHeight);var L=this.gl,F=this.currentScissor,D=P>0&&M>0;if(F&&D){var N=F[0],B=F[1],b=F[2],W=F[3];D=N!==T||B!==A||b!==P||W!==M}D&&(this.flush(),L.scissor(T,w-A-M,P,M))},resetScissor:function(){var T=this.gl;T.enable(T.SCISSOR_TEST);var A=this.currentScissor;if(A){var P=A[0],M=A[1],w=A[2],L=A[3];w>0&&L>0&&T.scissor(P,this.drawingBufferHeight-M-L,w,L)}},popScissor:function(){var T=this.scissorStack;T.pop();var A=T[T.length-1];A&&this.setScissor(A[0],A[1],A[2],A[3]),this.currentScissor=A},hasActiveStencilMask:function(){var T=this.currentMask.mask,A=this.currentCameraMask.mask;return T&&T.isStencil||A&&A.isStencil},resetViewport:function(){var T=this.gl;T.viewport(0,0,this.width,this.height),this.drawingBufferHeight=T.drawingBufferHeight},setBlendMode:function(T,A){A===void 0&&(A=!1);var P=this.gl,M=this.blendModes[T];return A||T!==a.BlendModes.SKIP_CHECK&&this.currentBlendMode!==T?(this.flush(),P.enable(P.BLEND),P.blendEquation(M.equation),M.func.length>2?P.blendFuncSeparate(M.func[0],M.func[1],M.func[2],M.func[3]):P.blendFunc(M.func[0],M.func[1]),this.currentBlendMode=T,!0):!1},addBlendMode:function(T,A){var P=this.blendModes.push({func:T,equation:A});return P-1},updateBlendMode:function(T,A,P){return this.blendModes[T]&&(this.blendModes[T].func=A,P&&(this.blendModes[T].equation=P)),this},removeBlendMode:function(T){return T>17&&this.blendModes[T]&&this.blendModes.splice(T,1),this},pushFramebuffer:function(T,A,P,M,w){return T===this.currentFramebuffer?this:(this.fboStack.push(T),this.setFramebuffer(T,A,P,M,w))},setFramebuffer:function(T,A,P,M,w){if(A===void 0&&(A=!1),P===void 0&&(P=!0),M===void 0&&(M=null),w===void 0&&(w=!1),T===this.currentFramebuffer)return this;var L=this.gl,F=this.width,D=this.height;return T&&T.renderTexture&&P?(F=T.renderTexture.width,D=T.renderTexture.height):this.flush(),L.bindFramebuffer(L.FRAMEBUFFER,T),P&&L.viewport(0,0,F,D),M&&L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,M,0),w&&(L.clearColor(0,0,0,0),L.clear(L.COLOR_BUFFER_BIT)),A&&(T?(this.drawingBufferHeight=D,this.pushScissor(0,0,F,D)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=T,this},popFramebuffer:function(T,A){T===void 0&&(T=!1),A===void 0&&(A=!0);var P=this.fboStack;P.pop();var M=P[P.length-1];return M||(M=null),this.setFramebuffer(M,T,A),M},restoreFramebuffer:function(T,A){T===void 0&&(T=!1),A===void 0&&(A=!0);var P=this.fboStack,M=P[P.length-1];M||(M=null),this.currentFramebuffer=null,this.setFramebuffer(M,T,A)},setProgram:function(T){return T!==this.currentProgram?(this.flush(),this.gl.useProgram(T),this.currentProgram=T,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(T,A,P,M,w){w===void 0&&(w=!1);var L=this.gl,F=L.NEAREST,D=L.NEAREST,N=L.CLAMP_TO_EDGE,B=null;A=T?T.width:A,P=T?T.height:P;var b=n(A,P);return b&&!w&&(N=L.REPEAT),M===a.ScaleModes.LINEAR&&this.config.antialias&&(F=b&&this.mipmapFilter?this.mipmapFilter:L.LINEAR,D=L.LINEAR),T&&T.compressed&&(F=L.LINEAR,D=L.LINEAR),!T&&typeof A=="number"&&typeof P=="number"?B=this.createTexture2D(0,F,D,N,N,L.RGBA,null,A,P):B=this.createTexture2D(0,F,D,N,N,L.RGBA,T),B},createTexture2D:function(T,A,P,M,w,L,F,D,N,B,b,W){B=B??!0,b===void 0&&(b=!1),W===void 0&&(W=!1);var Y=this.gl,K=Y.createTexture();Y.activeTexture(Y.TEXTURE0);var G=Y.getParameter(Y.TEXTURE_BINDING_2D);Y.bindTexture(Y.TEXTURE_2D,K),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MIN_FILTER,A),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MAG_FILTER,P),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_S,w),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_T,M),Y.pixelStorei(Y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B),W&&Y.pixelStorei(Y.UNPACK_FLIP_Y_WEBGL,!0);var z=!1;if(F==null)Y.texImage2D(Y.TEXTURE_2D,T,L,D,N,0,L,Y.UNSIGNED_BYTE,null),z=n(D,N);else if(F.compressed){D=F.width,N=F.height,z=F.generateMipmap;for(var O=0;O<F.mipmaps.length;O++)Y.compressedTexImage2D(Y.TEXTURE_2D,O,F.internalFormat,F.mipmaps[O].width,F.mipmaps[O].height,0,F.mipmaps[O].data)}else b||(D=F.width,N=F.height),Y.texImage2D(Y.TEXTURE_2D,T,L,L,Y.UNSIGNED_BYTE,F),z=n(D,N);return z&&Y.generateMipmap(Y.TEXTURE_2D),G&&Y.bindTexture(Y.TEXTURE_2D,G),K.isAlphaPremultiplied=B,K.isRenderTexture=!1,K.width=D,K.height=N,K},createFramebuffer:function(T,A,P,M){M===void 0&&(M=!0);var w=this.gl,L=w.createFramebuffer(),F=0;if(this.setFramebuffer(L),P.isRenderTexture=!0,P.isAlphaPremultiplied=!1,w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,P,0),F=w.checkFramebufferStatus(w.FRAMEBUFFER),F!==w.FRAMEBUFFER_COMPLETE){var D={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+(D[F]||F))}if(L.renderTexture=P,M){var N=w.createRenderbuffer();w.bindRenderbuffer(w.RENDERBUFFER,N),w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,T,A),w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_STENCIL_ATTACHMENT,w.RENDERBUFFER,N)}return this.setFramebuffer(null),L},beginBitmapMask:function(T,A){var P=this.gl;P&&(this.flush(),this.maskTarget.bind(),this.currentCameraMask.mask!==T&&(this.currentMask.mask=T,this.currentMask.camera=A))},drawBitmapMask:function(T,A,P){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),T.renderWebGL(this,T,A),this.maskSource.unbind(!0),this.maskTarget.unbind();var M=this.gl,w=this.getCurrentStencilMask();w?(M.enable(M.STENCIL_TEST),w.mask.applyStencil(this,w.camera,!0)):this.currentMask.mask=null,this.pipelines.set(P),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,this.maskTarget.texture),M.activeTexture(M.TEXTURE1),M.bindTexture(M.TEXTURE_2D,this.maskSource.texture)},createProgram:function(T,A){var P=this.gl,M=P.createProgram(),w=P.createShader(P.VERTEX_SHADER),L=P.createShader(P.FRAGMENT_SHADER);P.shaderSource(w,T),P.shaderSource(L,A),P.compileShader(w),P.compileShader(L);var F=`Shader failed:
`;if(!P.getShaderParameter(w,P.COMPILE_STATUS))throw new Error("Vertex "+F+P.getShaderInfoLog(w));if(!P.getShaderParameter(L,P.COMPILE_STATUS))throw new Error("Fragment "+F+P.getShaderInfoLog(L));if(P.attachShader(M,w),P.attachShader(M,L),P.linkProgram(M),!P.getProgramParameter(M,P.LINK_STATUS))throw new Error("Link "+F+P.getProgramInfoLog(M));return P.useProgram(M),M},createVertexBuffer:function(T,A){var P=this.gl,M=P.createBuffer();return P.bindBuffer(P.ARRAY_BUFFER,M),P.bufferData(P.ARRAY_BUFFER,T,A),P.bindBuffer(P.ARRAY_BUFFER,null),M},createIndexBuffer:function(T,A){var P=this.gl,M=P.createBuffer();return P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,M),P.bufferData(P.ELEMENT_ARRAY_BUFFER,T,A),P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,null),M},deleteTexture:function(T){return T&&this.gl.deleteTexture(T),this},deleteFramebuffer:function(T){if(T){var A=this.gl;A.bindFramebuffer(A.FRAMEBUFFER,T);var P=A.getParameter(A.RENDERBUFFER_BINDING);P&&A.deleteRenderbuffer(P),A.bindFramebuffer(A.FRAMEBUFFER,null),A.deleteFramebuffer(T),h(this.fboStack,T),this.currentFramebuffer===T&&(this.currentFramebuffer=null)}return this},deleteProgram:function(T){return T&&this.gl.deleteProgram(T),this},deleteBuffer:function(T){return this.gl.deleteBuffer(T),this},preRenderCamera:function(T){var A=T.x,P=T.y,M=T.width,w=T.height,L=T.backgroundColor;if(T.emit(m.PRE_RENDER,T),this.pipelines.preBatchCamera(T),this.pushScissor(A,P,M,w),T.mask&&(this.currentCameraMask.mask=T.mask,this.currentCameraMask.camera=T._maskCamera,T.mask.preRenderWebGL(this,T,T._maskCamera)),L.alphaGL>0){var F=this.pipelines.setMulti();F.drawFillRect(A,P,M,w,y.getTintFromFloats(L.blueGL,L.greenGL,L.redGL,1),L.alphaGL)}},getCurrentStencilMask:function(){var T=null,A=this.maskStack,P=this.currentCameraMask;return A.length>0?T=A[A.length-1]:P.mask&&P.mask.isStencil&&(T=P),T},postRenderCamera:function(T){var A=T.flashEffect,P=T.fadeEffect;if(A.isRunning||P.isRunning||P.isComplete){var M=this.pipelines.setMulti();A.postRenderWebGL(M,y.getTintFromFloats),P.postRenderWebGL(M,y.getTintFromFloats)}T.dirty=!1,this.popScissor(),T.mask&&(this.currentCameraMask.mask=null,T.mask.postRenderWebGL(this,T._maskCamera)),this.pipelines.postBatchCamera(T),T.emit(m.POST_RENDER,T)},preRender:function(){if(!this.contextLost){var T=this.gl;if(T.bindFramebuffer(T.FRAMEBUFFER,null),this.config.clearBeforeRender){var A=this.config.backgroundColor;T.clearColor(A.redGL,A.greenGL,A.blueGL,A.alphaGL),T.clear(T.COLOR_BUFFER_BIT|T.DEPTH_BUFFER_BIT|T.STENCIL_BUFFER_BIT)}T.enable(T.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&T.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(i.PRE_RENDER)}},render:function(T,A,P){if(!this.contextLost){var M=A.length;if(this.emit(i.RENDER,T,P),this.preRenderCamera(P),M===0){this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(P);return}this.currentType="";for(var w=this.currentMask,L=0;L<M;L++){this.finalType=L===M-1;var F=A[L],D=F.mask;w=this.currentMask,w.mask&&w.mask!==D&&w.mask.postRenderWebGL(this,w.camera),D&&w.mask!==D&&D.preRenderWebGL(this,F,P),F.blendMode!==this.currentBlendMode&&this.setBlendMode(F.blendMode);var N=F.type;N!==this.currentType&&(this.newType=!0,this.currentType=N),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=A[L+1].type===this.currentType,F.renderWebGL(this,F,P),this.newType=!1}w=this.currentMask,w.mask&&w.mask.postRenderWebGL(this,w.camera),this.setBlendMode(a.BlendModes.NORMAL),this.postRenderCamera(P)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(i.POST_RENDER);var T=this.snapshotState;T.callback&&(E(this.gl,T),T.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var T=this.gl,A=this.getCurrentStencilMask();if(A){var P=A.mask;T.enable(T.STENCIL_TEST),P.invertAlpha?T.stencilFunc(T.NOTEQUAL,P.level,255):T.stencilFunc(T.EQUAL,P.level,255)}},snapshot:function(T,A,P){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,T,A,P)},snapshotArea:function(T,A,P,M,w,L,F){var D=this.snapshotState;return D.callback=w,D.type=L,D.encoder=F,D.getPixel=!1,D.x=T,D.y=A,D.width=P,D.height=M,this},snapshotPixel:function(T,A,P){return this.snapshotArea(T,A,1,1,P),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(T,A,P,M,w,L,F,D,N,B,b){w===void 0&&(w=!1),L===void 0&&(L=0),F===void 0&&(F=0),D===void 0&&(D=A),N===void 0&&(N=P),B==="pixel"&&(w=!0,B="image/png");var W=this.currentFramebuffer;this.snapshotArea(L,F,D,N,M,B,b);var Y=this.snapshotState;return Y.getPixel=w,Y.isFramebuffer=!0,Y.bufferWidth=A,Y.bufferHeight=P,Y.width=Math.min(Y.width,A),Y.height=Math.min(Y.height,P),this.setFramebuffer(T),E(this.gl,Y),this.setFramebuffer(W),Y.callback=null,Y.isFramebuffer=!1,this},canvasToTexture:function(T,A,P,M){return P===void 0&&(P=!1),M===void 0&&(M=!1),A?this.updateCanvasTexture(T,A,M):this.createCanvasTexture(T,P,M)},createCanvasTexture:function(T,A,P){A===void 0&&(A=!1),P===void 0&&(P=!1);var M=this.gl,w=M.NEAREST,L=M.NEAREST,F=T.width,D=T.height,N=M.CLAMP_TO_EDGE,B=n(F,D);return!A&&B&&(N=M.REPEAT),this.config.antialias&&(w=B&&this.mipmapFilter?this.mipmapFilter:M.LINEAR,L=M.LINEAR),this.createTexture2D(0,w,L,N,N,M.RGBA,T,F,D,!0,!1,P)},updateCanvasTexture:function(T,A,P){P===void 0&&(P=!1);var M=this.gl,w=T.width,L=T.height;if(w>0&&L>0){M.activeTexture(M.TEXTURE0);var F=M.getParameter(M.TEXTURE_BINDING_2D);M.bindTexture(M.TEXTURE_2D,A),P&&M.pixelStorei(M.UNPACK_FLIP_Y_WEBGL,!0),M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,T),A.width=w,A.height=L,F&&M.bindTexture(M.TEXTURE_2D,F)}return A},createVideoTexture:function(T,A,P){A===void 0&&(A=!1),P===void 0&&(P=!1);var M=this.gl,w=M.NEAREST,L=M.NEAREST,F=T.videoWidth,D=T.videoHeight,N=M.CLAMP_TO_EDGE,B=n(F,D);return!A&&B&&(N=M.REPEAT),this.config.antialias&&(w=B&&this.mipmapFilter?this.mipmapFilter:M.LINEAR,L=M.LINEAR),this.createTexture2D(0,w,L,N,N,M.RGBA,T,F,D,!0,!0,P)},updateVideoTexture:function(T,A,P){P===void 0&&(P=!1);var M=this.gl,w=T.videoWidth,L=T.videoHeight;if(w>0&&L>0){M.activeTexture(M.TEXTURE0);var F=M.getParameter(M.TEXTURE_BINDING_2D);M.bindTexture(M.TEXTURE_2D,A),M.pixelStorei(M.UNPACK_FLIP_Y_WEBGL,P),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,T),A.width=w,A.height=L,F&&M.bindTexture(M.TEXTURE_2D,F)}return A},setTextureFilter:function(T,A){var P=this.gl,M=[P.LINEAR,P.NEAREST][A];P.activeTexture(P.TEXTURE0);var w=P.getParameter(P.TEXTURE_BINDING_2D);return P.bindTexture(P.TEXTURE_2D,T),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,M),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,M),w&&P.bindTexture(P.TEXTURE_2D,w),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});f.exports=C},71305:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(72632),o=t(71402),a=new h({initialize:function(i,n,u,s,l){this.pipeline=i,this.name=n,this.renderer=i.renderer,this.gl=this.renderer.gl,this.fragSrc=s,this.vertSrc=u,this.program=this.renderer.createProgram(u,s),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(l),this.createUniforms()},createAttributes:function(r){var i=0,n=0,u=[];this.vertexComponentCount=0;for(var s=0;s<r.length;s++){var l=r[s],v=l.name,c=m(l,"size",1),g=m(l,"type",o.FLOAT),y=g.enum,E=g.size,C=!!l.normalized;u.push({name:v,size:c,type:y,normalized:C,offset:n,enabled:!1,location:-1}),E===4?i+=c:i++,n+=c*E}this.vertexSize=n,this.vertexComponentCount=i,this.attributes=u},bind:function(r,i){return r===void 0&&(r=!1),i===void 0&&(i=!1),i&&this.pipeline.flush(),this.renderer.setProgram(this.program),r&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(r){r===void 0&&(r=!1);for(var i=this.gl,n=this.vertexSize,u=this.attributes,s=this.program,l=0;l<u.length;l++){var v=u[l],c=v.size,g=v.type,y=v.offset,E=v.enabled,C=v.location,T=!!v.normalized;if(r){var A=i.getAttribLocation(s,v.name);A>=0?(i.enableVertexAttribArray(A),i.vertexAttribPointer(A,c,g,T,n,y),v.enabled=!0,v.location=A):A!==-1&&i.disableVertexAttribArray(A)}else E?i.vertexAttribPointer(C,c,g,T,n,y):!E&&C>-1&&(i.disableVertexAttribArray(C),v.location=-1)}return this},createUniforms:function(){var r=this.gl,i=this.program,n=this.uniforms,u,s,l,v=r.getProgramParameter(i,r.ACTIVE_UNIFORMS);for(u=0;u<v;u++){var c=r.getActiveUniform(i,u);if(c){s=c.name,l=r.getUniformLocation(i,s),l!==null&&(n[s]={name:s,location:l,value1:null,value2:null,value3:null,value4:null});var g=s.indexOf("[");g>0&&(s=s.substr(0,g),n.hasOwnProperty(s)||(l=r.getUniformLocation(i,s),l!==null&&(n[s]={name:s,location:l,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(r){return this.uniforms.hasOwnProperty(r)},resetUniform:function(r){var i=this.uniforms[r];return i&&(i.value1=null,i.value2=null,i.value3=null,i.value4=null),this},setUniform1:function(r,i,n,u){var s=this.uniforms[i];return s?((u||s.value1!==n)&&(s.value1=n,this.renderer.setProgram(this.program),r.call(this.gl,s.location,n),this.pipeline.currentShader=this),this):this},setUniform2:function(r,i,n,u,s){var l=this.uniforms[i];return l?((s||l.value1!==n||l.value2!==u)&&(l.value1=n,l.value2=u,this.renderer.setProgram(this.program),r.call(this.gl,l.location,n,u),this.pipeline.currentShader=this),this):this},setUniform3:function(r,i,n,u,s,l){var v=this.uniforms[i];return v?((l||v.value1!==n||v.value2!==u||v.value3!==s)&&(v.value1=n,v.value2=u,v.value3=s,this.renderer.setProgram(this.program),r.call(this.gl,v.location,n,u,s),this.pipeline.currentShader=this),this):this},setUniform4:function(r,i,n,u,s,l,v){var c=this.uniforms[i];return c?((v||c.value1!==n||c.value2!==u||c.value3!==s||c.value4!==l)&&(c.value1=n,c.value2=u,c.value3=s,c.value4=l,this.renderer.setProgram(this.program),r.call(this.gl,c.location,n,u,s,l),this.pipeline.currentShader=this),this):this},setBoolean:function(r,i){return this.setUniform1(this.gl.uniform1i,r,Number(i))},set1f:function(r,i){return this.setUniform1(this.gl.uniform1f,r,i)},set2f:function(r,i,n){return this.setUniform2(this.gl.uniform2f,r,i,n)},set3f:function(r,i,n,u){return this.setUniform3(this.gl.uniform3f,r,i,n,u)},set4f:function(r,i,n,u,s){return this.setUniform4(this.gl.uniform4f,r,i,n,u,s)},set1fv:function(r,i){return this.setUniform1(this.gl.uniform1fv,r,i,!0)},set2fv:function(r,i){return this.setUniform1(this.gl.uniform2fv,r,i,!0)},set3fv:function(r,i){return this.setUniform1(this.gl.uniform3fv,r,i,!0)},set4fv:function(r,i){return this.setUniform1(this.gl.uniform4fv,r,i,!0)},set1iv:function(r,i){return this.setUniform1(this.gl.uniform1iv,r,i,!0)},set2iv:function(r,i){return this.setUniform1(this.gl.uniform2iv,r,i,!0)},set3iv:function(r,i){return this.setUniform1(this.gl.uniform3iv,r,i,!0)},set4iv:function(r,i){return this.setUniform1(this.gl.uniform4iv,r,i,!0)},set1i:function(r,i){return this.setUniform1(this.gl.uniform1i,r,i)},set2i:function(r,i,n){return this.setUniform2(this.gl.uniform2i,r,i,n)},set3i:function(r,i,n,u){return this.setUniform3(this.gl.uniform3i,r,i,n,u)},set4i:function(r,i,n,u,s){return this.setUniform4(this.gl.uniform4i,r,i,n,u,s)},setMatrix2fv:function(r,i,n){return this.setUniform2(this.gl.uniformMatrix2fv,r,i,n,!0)},setMatrix3fv:function(r,i,n){return this.setUniform2(this.gl.uniformMatrix3fv,r,i,n,!0)},setMatrix4fv:function(r,i,n){return this.setUniform2(this.gl.uniformMatrix4fv,r,i,n,!0)},createProgram:function(r,i){r===void 0&&(r=this.vertSrc),i===void 0&&(i=this.fragSrc);var n=this.gl;return this.program&&n.deleteProgram(this.program),this.vertSrc=r,this.fragSrc=i,this.program=this.renderer.createProgram(r,i),this.createUniforms(),this.rebind()},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});f.exports=a},71402:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};f.exports=S},55478:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(71402),m=t(98611),o={PipelineManager:t(35217),Pipelines:t(62253),RenderTarget:t(37410),Utils:t(75512),WebGLPipeline:t(44775),WebGLRenderer:t(11857),WebGLShader:t(71305)};o=m(!1,o,h),f.exports=o},5583:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(72632),o=t(91679),a=t(89053),r=t(71402),i=t(44775),n=new h({Extends:i,initialize:function(s){s.fragShader=m(s,"fragShader",o),s.vertShader=m(s,"vertShader",a),s.batchSize=m(s,"batchSize",1),s.vertices=m(s,"vertices",[-1,1,-1,-7,7,1]),s.attributes=m(s,"attributes",[{name:"inPosition",size:2,type:r.FLOAT}]),i.call(this,s)},boot:function(){i.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(u,s){i.prototype.resize.call(this,u,s),this.set2f("uResolution",u,s)},beginMask:function(u,s,l){this.renderer.beginBitmapMask(u,l)},endMask:function(u,s,l){var v=this.gl,c=this.renderer,g=u.bitmapMask;g&&v&&(c.drawBitmapMask(g,s,this),l&&this.set2f("uResolution",l.width,l.height),this.set1i("uInvertMaskAlpha",u.invertAlpha),v.drawArrays(this.topology,0,3),l&&this.set2f("uResolution",this.width,this.height),v.bindTexture(v.TEXTURE_2D,null))}});f.exports=n},81828:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(58136),o=t(47406),a=t(72632),r=t(87228),i=t(92462),n=t(75512),u=new h({Extends:r,initialize:function(l){l.shaders=[n.setGlowQuality(i.FXGlowFrag,l.game),i.FXShadowFrag,i.FXPixelateFrag,i.FXVignetteFrag,i.FXShineFrag,i.FXBlurLowFrag,i.FXBlurMedFrag,i.FXBlurHighFrag,i.FXGradientFrag,i.FXBloomFrag,i.ColorMatrixFrag,i.FXCircleFrag,i.FXBarrelFrag,i.FXDisplacementFrag,i.FXWipeFrag,i.FXBokehFrag],r.call(this,l);var v=this.game;this.glow=new m.Glow(v),this.shadow=new m.Shadow(v),this.pixelate=new m.Pixelate(v),this.vignette=new m.Vignette(v),this.shine=new m.Shine(v),this.gradient=new m.Gradient(v),this.circle=new m.Circle(v),this.barrel=new m.Barrel(v),this.wipe=new m.Wipe(v),this.bokeh=new m.Bokeh(v);var c=[];c[o.GLOW]=this.onGlow,c[o.SHADOW]=this.onShadow,c[o.PIXELATE]=this.onPixelate,c[o.VIGNETTE]=this.onVignette,c[o.SHINE]=this.onShine,c[o.BLUR]=this.onBlur,c[o.GRADIENT]=this.onGradient,c[o.BLOOM]=this.onBloom,c[o.COLOR_MATRIX]=this.onColorMatrix,c[o.CIRCLE]=this.onCircle,c[o.BARREL]=this.onBarrel,c[o.DISPLACEMENT]=this.onDisplacement,c[o.WIPE]=this.onWipe,c[o.BOKEH]=this.onBokeh,this.fxHandlers=c,this.source,this.target,this.swap},onDraw:function(s,l,v){this.source=s,this.target=l,this.swap=v;var c=s.width,g=s.height,y=this.tempSprite,E=this.fxHandlers;if(y&&y.preFX)for(var C=y.preFX.list,T=0;T<C.length;T++){var A=C[T];A.active&&E[A.type].call(this,A,c,g)}this.drawToGame(this.source)},runDraw:function(){var s=this.source,l=this.target;this.copy(s,l),this.source=l,this.target=s},onGlow:function(s,l,v){var c=this.shaders[o.GLOW];this.setShader(c),this.glow.onPreRender(s,c,l,v),this.runDraw()},onShadow:function(s){var l=this.shaders[o.SHADOW];this.setShader(l),this.shadow.onPreRender(s,l),this.runDraw()},onPixelate:function(s,l,v){var c=this.shaders[o.PIXELATE];this.setShader(c),this.pixelate.onPreRender(s,c,l,v),this.runDraw()},onVignette:function(s){var l=this.shaders[o.VIGNETTE];this.setShader(l),this.vignette.onPreRender(s,l),this.runDraw()},onShine:function(s,l,v){var c=this.shaders[o.SHINE];this.setShader(c),this.shine.onPreRender(s,c,l,v),this.runDraw()},onBlur:function(s,l,v){var c=a(s,"quality"),g=this.shaders[o.BLUR+c];this.setShader(g),this.set1i("uMainSampler",0),this.set2f("resolution",l,v),this.set1f("strength",a(s,"strength")),this.set3fv("color",a(s,"glcolor"));for(var y=a(s,"x"),E=a(s,"y"),C=a(s,"steps"),T=0;T<C;T++)this.set2f("offset",y,0),this.runDraw(),this.set2f("offset",0,E),this.runDraw()},onGradient:function(s){var l=this.shaders[o.GRADIENT];this.setShader(l),this.gradient.onPreRender(s,l),this.runDraw()},onBloom:function(s,l,v){var c=this.shaders[o.BLOOM];this.copySprite(this.source,this.swap),this.setShader(c),this.set1i("uMainSampler",0),this.set1f("strength",a(s,"blurStrength")),this.set3fv("color",a(s,"glcolor"));for(var g=2/l*a(s,"offsetX"),y=2/v*a(s,"offsetY"),E=a(s,"steps"),C=0;C<E;C++)this.set2f("offset",g,0),this.runDraw(),this.set2f("offset",0,y),this.runDraw();this.blendFrames(this.swap,this.source,this.target,a(s,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(s){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",s.getData()),this.set1f("uAlpha",s.alpha),this.runDraw()},onCircle:function(s,l,v){var c=this.shaders[o.CIRCLE];this.setShader(c),this.circle.onPreRender(s,c,l,v),this.runDraw()},onBarrel:function(s){var l=this.shaders[o.BARREL];this.setShader(l),this.barrel.onPreRender(s,l),this.runDraw()},onDisplacement:function(s){this.setShader(this.shaders[o.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",s.x,s.y),this.bindTexture(s.glTexture,1),this.runDraw()},onWipe:function(s){var l=this.shaders[o.WIPE];this.setShader(l),this.wipe.onPreRender(s,l),this.runDraw()},onBokeh:function(s,l,v){var c=this.shaders[o.BOKEH];this.setShader(c),this.bokeh.onPreRender(s,c,l,v),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,r.prototype.destroy.call(this),this}});f.exports=u},66901:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(72632),o=t(65045),a=t(77310),r=t(69360),i=t(93736),n=t(44775),u=new h({Extends:a,initialize:function(l){var v=m(l,"fragShader",o);l.fragShader=v.replace("%LIGHT_COUNT%",l.game.renderer.config.maxLights),a.call(this,l),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new i,this._tempMatrix=new r,this._tempMatrix2=new r},boot:function(){n.prototype.boot.call(this);var s=this.gl,l=s.createTexture();s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,1,1,0,s.RGBA,s.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:l}},onRender:function(s,l){var v=s.sys.lights;if(this.lightsActive=!1,!(!v||!v.active)){var c=v.getLights(l),g=c.length;this.lightsActive=!0;var y,E=this.renderer,C=E.height,T=l.matrix,A=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",l.x,l.y,l.rotation,l.zoom),this.set3f("uAmbientLightColor",v.ambientColor.r,v.ambientColor.g,v.ambientColor.b),this.set1i("uLightCount",g),y=0;y<g;y++){var P=c[y].light,M=P.color,w="uLights["+y+"].";T.transformPoint(P.x,P.y,A),this.set2f(w+"position",A.x-l.scrollX*P.scrollFactorX*l.zoom,C-(A.y-l.scrollY*P.scrollFactorY*l.zoom)),this.set3f(w+"color",M.r,M.g,M.b),this.set1f(w+"intensity",P.intensity),this.set1f(w+"radius",P.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(s){if(s!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var l=this.inverseRotationMatrix;if(s){var v=-s,c=Math.cos(v),g=Math.sin(v);l[1]=g,l[3]=-g,l[0]=l[4]=c}else l[0]=l[4]=1,l[1]=l[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,l),this.currentNormalMapRotation=s}},setTexture2D:function(s,l){var v=this.renderer;s===void 0&&(s=v.whiteTexture);var c=this.getNormalMap(l);this.isNewNormalMap(s,c)&&(this.flush(),this.createBatch(s),this.addTextureToBatch(c),this.currentNormalMap=c);var g=0;if(l&&l.parentContainer){var y=l.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);g=y.rotationNormalized}else l&&(g=l.rotation);return this.setNormalMapRotation(g),0},setGameObject:function(s,l){l===void 0&&(l=s.frame);var v=l.glTexture,c=this.getNormalMap(s);if(this.isNewNormalMap(v,c)&&(this.flush(),this.createBatch(v),this.addTextureToBatch(c),this.currentNormalMap=c),s.parentContainer){var g=s.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(g.rotationNormalized)}else this.setNormalMapRotation(s.rotation);return 0},isNewNormalMap:function(s,l){return this.currentTexture!==s||this.currentNormalMap!==l},getNormalMap:function(s){var l;return s?s.displayTexture?l=s.displayTexture.dataSource[s.displayFrame.sourceIndex]:s.texture?l=s.texture.dataSource[s.frame.sourceIndex]:s.tileset&&(Array.isArray(s.tileset)?l=s.tileset[0].image.dataSource[0]:l=s.tileset.image.dataSource[0]):l=this.defaultNormalMap,l||(l=this.defaultNormalMap),l.glTexture},batchSprite:function(s,l,v){this.lightsActive&&a.prototype.batchSprite.call(this,s,l,v)},batchTexture:function(s,l,v,c,g,y,E,C,T,A,P,M,w,L,F,D,N,B,b,W,Y,K,G,z,O,V,U,X,H,Q,$,k){this.lightsActive&&a.prototype.batchTexture.call(this,s,l,v,c,g,y,E,C,T,A,P,M,w,L,F,D,N,B,b,W,Y,K,G,z,O,V,U,X,H,Q,$,k)},batchTextureFrame:function(s,l,v,c,g,y,E){this.lightsActive&&a.prototype.batchTextureFrame.call(this,s,l,v,c,g,y,E)}});f.exports=u},71264:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(72632),o=t(77310),a=t(85060),r=t(18166),i=t(71402),n=t(44775),u=new h({Extends:o,initialize:function(l){l.fragShader=m(l,"fragShader",a),l.vertShader=m(l,"vertShader",r),l.attributes=m(l,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:i.UNSIGNED_BYTE,normalized:!0}]),l.forceZero=!0,o.call(this,l)},boot:function(){n.prototype.boot.call(this),this.set1i("uMainSampler",0)}});f.exports=u},77310:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(11117),o=t(72632),a=t(53787),r=t(15968),i=t(69360),n=t(75512),u=t(71402),s=t(44775),l=new h({Extends:s,initialize:function(c){var g=c.game.renderer,y=o(c,"fragShader",a);c.fragShader=n.parseFragmentShaderMaxTextures(y,g.maxTextures),c.vertShader=o(c,"vertShader",r),c.attributes=o(c,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:u.UNSIGNED_BYTE,normalized:!0}]),s.call(this,c),this._tempMatrix1=new i,this._tempMatrix2=new i,this._tempMatrix3=new i,this.calcMatrix=new i,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){s.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(v,c,g){this.manager.set(this,v);var y=this._tempMatrix1,E=this._tempMatrix2,C=this._tempMatrix3,T=v.frame,A=T.glTexture,P=T.u0,M=T.v0,w=T.u1,L=T.v1,F=T.x,D=T.y,N=T.cutWidth,B=T.cutHeight,b=T.customPivot,W=v.displayOriginX,Y=v.displayOriginY,K=-W+F,G=-Y+D;if(v.isCropped){var z=v._crop;(z.flipX!==v.flipX||z.flipY!==v.flipY)&&T.updateCropUVs(z,v.flipX,v.flipY),P=z.u0,M=z.v0,w=z.u1,L=z.v1,N=z.width,B=z.height,F=z.x,D=z.y,K=-W+F,G=-Y+D}var O=1,V=1;v.flipX&&(b||(K+=-T.realWidth+W*2),O=-1),(v.flipY||T.source.isGLTexture&&!A.flipY)&&(b||(G+=-T.realHeight+Y*2),V=-1);var U=v.x,X=v.y;E.applyITRS(U,X,v.rotation,v.scaleX*O,v.scaleY*V),y.copyFrom(c.matrix),g?(y.multiplyWithOffset(g,-c.scrollX*v.scrollFactorX,-c.scrollY*v.scrollFactorY),E.e=U,E.f=X):(E.e-=c.scrollX*v.scrollFactorX,E.f-=c.scrollY*v.scrollFactorY),y.multiply(E,C);var H=C.setQuad(K,G,K+N,G+B,c.roundPixels),Q=n.getTintAppendFloatAlpha,$=c.alpha,k=Q(v.tintTopLeft,$*v._alphaTL),J=Q(v.tintTopRight,$*v._alphaTR),Z=Q(v.tintBottomLeft,$*v._alphaBL),j=Q(v.tintBottomRight,$*v._alphaBR);this.shouldFlush(6)&&this.flush();var _=this.setGameObject(v,T);this.manager.preBatch(v),this.batchQuad(v,H[0],H[1],H[2],H[3],H[4],H[5],H[6],H[7],P,M,w,L,k,J,Z,j,v.tintFill,A,_),this.manager.postBatch(v)},batchTexture:function(v,c,g,y,E,C,T,A,P,M,w,L,F,D,N,B,b,W,Y,K,G,z,O,V,U,X,H,Q,$,k,J,Z){this.manager.set(this,v);var j=this._tempMatrix1,_=this._tempMatrix2,q=this._tempMatrix3,it=W/g+H,ht=Y/y+Q,ft=(W+K)/g+H,ut=(Y+G)/y+Q,tt=T,rt=A,st=-B,xt=-b;if(v.isCropped){var gt=v._crop,Xt=gt.width,Dt=gt.height;tt=Xt,rt=Dt,T=Xt,A=Dt,W=gt.x,Y=gt.y;var It=W,Et=Y;L&&(It=K-gt.x-Xt),F&&(Et=G-gt.y-Dt),it=It/g+H,ht=Et/y+Q,ft=(It+Xt)/g+H,ut=(Et+Dt)/y+Q,st=-B+W,xt=-b+Y}F=F^(!J&&c.isRenderTexture?1:0),L&&(tt*=-1,st+=T),F&&(rt*=-1,xt+=A),_.applyITRS(E,C,w,P,M),j.copyFrom($.matrix),k?(j.multiplyWithOffset(k,-$.scrollX*D,-$.scrollY*N),_.e=E,_.f=C):(_.e-=$.scrollX*D,_.f-=$.scrollY*N),j.multiply(_,q);var Nt=q.setQuad(st,xt,st+tt,xt+rt,$.roundPixels);Z===void 0&&(Z=this.setTexture2D(c)),v&&this.manager.preBatch(v),this.batchQuad(v,Nt[0],Nt[1],Nt[2],Nt[3],Nt[4],Nt[5],Nt[6],Nt[7],it,ht,ft,ut,z,O,V,U,X,c,Z),v&&this.manager.postBatch(v)},batchTextureFrame:function(v,c,g,y,E,C,T){this.manager.set(this);var A=this._tempMatrix1.copyFrom(C),P=this._tempMatrix2;T?A.multiply(T,P):P=A;var M=P.setQuad(c,g,c+v.width,g+v.height,!1),w=this.setTexture2D(v.source.glTexture);y=n.getTintAppendFloatAlpha(y,E),this.batchQuad(null,M[0],M[1],M[2],M[3],M[4],M[5],M[6],M[7],v.u0,v.v0,v.u1,v.v1,y,y,y,y,0,v.glTexture,w)},batchFillRect:function(v,c,g,y,E,C){this.renderer.pipelines.set(this);var T=this.calcMatrix;C&&C.multiply(E,T);var A=T.setQuad(v,c,v+g,c+y,!1),P=this.fillTint;this.batchQuad(null,A[0],A[1],A[2],A[3],A[4],A[5],A[6],A[7],0,0,1,1,P.TL,P.TR,P.BL,P.BR,2)},batchFillTriangle:function(v,c,g,y,E,C,T,A){this.renderer.pipelines.set(this);var P=this.calcMatrix;A&&A.multiply(T,P);var M=P.getX(v,c),w=P.getY(v,c),L=P.getX(g,y),F=P.getY(g,y),D=P.getX(E,C),N=P.getY(E,C),B=this.fillTint;this.batchTri(null,M,w,L,F,D,N,0,0,1,1,B.TL,B.TR,B.BL,2)},batchStrokeTriangle:function(v,c,g,y,E,C,T,A,P){var M=this.tempTriangle;M[0].x=v,M[0].y=c,M[0].width=T,M[1].x=g,M[1].y=y,M[1].width=T,M[2].x=E,M[2].y=C,M[2].width=T,M[3].x=v,M[3].y=c,M[3].width=T,this.batchStrokePath(M,T,!1,A,P)},batchFillPath:function(v,c,g){this.renderer.pipelines.set(this);var y=this.calcMatrix;g&&g.multiply(c,y);for(var E=v.length,C=this.polygonCache,T,A,P=this.fillTint.TL,M=this.fillTint.TR,w=this.fillTint.BL,L=0;L<E;++L)A=v[L],C.push(A.x,A.y);T=m(C),E=T.length;for(var F=0;F<E;F+=3){var D=T[F+0]*2,N=T[F+1]*2,B=T[F+2]*2,b=C[D+0],W=C[D+1],Y=C[N+0],K=C[N+1],G=C[B+0],z=C[B+1],O=y.getX(b,W),V=y.getY(b,W),U=y.getX(Y,K),X=y.getY(Y,K),H=y.getX(G,z),Q=y.getY(G,z);this.batchTri(null,O,V,U,X,H,Q,0,0,1,1,P,M,w,2)}C.length=0},batchStrokePath:function(v,c,g,y,E){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var C=v.length-1,T=0;T<C;T++){var A=v[T],P=v[T+1];this.batchLine(A.x,A.y,P.x,P.y,A.width/2,P.width/2,c,T,!g&&T===C-1,y,E)}},batchLine:function(v,c,g,y,E,C,T,A,P,M,w){this.renderer.pipelines.set(this);var L=this.calcMatrix;w&&w.multiply(M,L);var F=g-v,D=y-c,N=Math.sqrt(F*F+D*D);if(N!==0){var B=E*(y-c)/N,b=E*(v-g)/N,W=C*(y-c)/N,Y=C*(v-g)/N,K=g-W,G=y-Y,z=v-B,O=c-b,V=g+W,U=y+Y,X=v+B,H=c+b,Q=L.getX(K,G),$=L.getY(K,G),k=L.getX(z,O),J=L.getY(z,O),Z=L.getX(V,U),j=L.getY(V,U),_=L.getX(X,H),q=L.getY(X,H),it=this.strokeTint,ht=it.TL,ft=it.TR,ut=it.BL,tt=it.BR;if(this.batchQuad(null,_,q,k,J,Q,$,Z,j,0,0,1,1,ht,ft,ut,tt,2),!(T<=2)){var rt=this.prevQuad,st=this.firstQuad;A>0&&rt[4]?this.batchQuad(null,_,q,k,J,rt[0],rt[1],rt[2],rt[3],0,0,1,1,ht,ft,ut,tt,2):(st[0]=_,st[1]=q,st[2]=k,st[3]=J,st[4]=1),P&&st[4]?this.batchQuad(null,Q,$,Z,j,st[0],st[1],st[2],st[3],0,0,1,1,ht,ft,ut,tt,2):(rt[0]=Q,rt[1]=$,rt[2]=Z,rt[3]=j,rt[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,s.prototype.destroy.call(this),this}});f.exports=l},10919:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(72632),o=t(83327),a=t(54677),r=t(44775),i=new h({Extends:r,initialize:function(u){u.vertShader=m(u,"vertShader",a),u.fragShader=m(u,"fragShader",o),u.attributes=m(u,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),r.call(this,u)},onRender:function(n,u){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",u.zoom)},batchPointLight:function(n,u,s,l,v,c,g,y,E,C,T,A){var P=n.color,M=n.intensity,w=n.radius,L=n.attenuation,F=P.r*M,D=P.g*M,N=P.b*M,B=u.alpha*n.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(s,l,T,A,w,L,F,D,N,B),this.batchLightVert(v,c,T,A,w,L,F,D,N,B),this.batchLightVert(g,y,T,A,w,L,F,D,N,B),this.batchLightVert(s,l,T,A,w,L,F,D,N,B),this.batchLightVert(g,y,T,A,w,L,F,D,N,B),this.batchLightVert(E,C,T,A,w,L,F,D,N,B),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(n,u,s,l,v,c,g,y,E,C){var T=this.vertexViewF32,A=this.vertexCount*this.currentShader.vertexComponentCount-1;T[++A]=n,T[++A]=u,T[++A]=s,T[++A]=l,T[++A]=v,T[++A]=c,T[++A]=g,T[++A]=y,T[++A]=E,T[++A]=C,this.vertexCount++}});f.exports=i},80486:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(65246),o=t(72632),a=t(12569),r=t(99365),i=t(44775),n=new h({Extends:i,initialize:function(s){s.renderTarget=o(s,"renderTarget",1),s.fragShader=o(s,"fragShader",a),s.vertShader=o(s,"vertShader",r),s.attributes=o(s,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),s.batchSize=1,s.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],i.call(this,s),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new m,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){i.prototype.boot.call(this);var u=this.manager.UTILITY_PIPELINE;this.fullFrame1=u.fullFrame1,this.fullFrame2=u.fullFrame2,this.halfFrame1=u.halfFrame1,this.halfFrame2=u.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(u){this.bindAndDraw(u)},getController:function(u){return u!==void 0?u:this.controller?this.controller:this},copySprite:function(u,s,l){l===void 0&&(l=!1);var v=this.gl;v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,u.texture);var c=v.getParameter(v.FRAMEBUFFER_BINDING);v.bindFramebuffer(v.FRAMEBUFFER,s.framebuffer),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,s.texture,0),v.clearColor(0,0,0,0),v.clear(v.COLOR_BUFFER_BIT),v.bufferData(v.ARRAY_BUFFER,this.vertexData,v.STATIC_DRAW),v.drawArrays(v.TRIANGLES,0,6),l&&(v.bindTexture(v.TEXTURE_2D,null),v.bindFramebuffer(v.FRAMEBUFFER,c))},copyFrame:function(u,s,l,v,c){this.manager.copyFrame(u,s,l,v,c)},copyToGame:function(u){this.manager.copyToGame(u)},drawFrame:function(u,s,l){this.manager.drawFrame(u,s,l,this.colorMatrix)},blendFrames:function(u,s,l,v,c){this.manager.blendFrames(u,s,l,v,c)},blendFramesAdditive:function(u,s,l,v,c){this.manager.blendFramesAdditive(u,s,l,v,c)},clearFrame:function(u,s){this.manager.clearFrame(u,s)},blitFrame:function(u,s,l,v,c,g){this.manager.blitFrame(u,s,l,v,c,g)},copyFrameRect:function(u,s,l,v,c,g,y,E){this.manager.copyFrameRect(u,s,l,v,c,g,y,E)},bindAndDraw:function(u,s,l,v,c){l===void 0&&(l=!0),v===void 0&&(v=!0);var g=this.gl,y=this.renderer;this.bind(c),this.set1i("uMainSampler",0),s?(g.viewport(0,0,s.width,s.height),g.bindFramebuffer(g.FRAMEBUFFER,s.framebuffer),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,s.texture,0),l&&(v?g.clearColor(0,0,0,0):g.clearColor(0,0,0,1),g.clear(g.COLOR_BUFFER_BIT))):(y.popFramebuffer(!1,!1),y.currentFramebuffer||g.viewport(0,0,y.width,y.height)),y.restoreStencilMask(),g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,u.texture),g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.STATIC_DRAW),g.drawArrays(g.TRIANGLES,0,6),s&&(g.bindTexture(g.TEXTURE_2D,null),g.bindFramebuffer(g.FRAMEBUFFER,y.currentFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,i.prototype.destroy.call(this),this}});f.exports=n},87228:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(95723),m=t(79993),o=t(56694),a=t(37486),r=t(72632),i=t(77310),n=t(12569),u=t(74118),s=t(37410),l=t(85060),v=t(18166),c=t(44775),g=new o({Extends:i,initialize:function(E){var C=r(E,"fragShader",n),T=r(E,"vertShader",v),A=r(E,"drawShader",n),P=[{name:"DrawSprite",fragShader:l,vertShader:v},{name:"CopySprite",fragShader:C,vertShader:T},{name:"DrawGame",fragShader:A,vertShader:v},{name:"ColorMatrix",fragShader:a}],M=r(E,"shaders",[]);E.shaders=P.concat(M),E.vertShader||(E.vertShader=T),E.batchSize=1,i.call(this,E),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new u,this.targetBounds=new u,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){c.prototype.boot.call(this);var y=this.shaders,E=this.renderer;this.drawSpriteShader=y[0],this.copyShader=y[1],this.gameShader=y[2],this.colorMatrixShader=y[3],this.fsTarget=new s(E,E.width,E.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var C=new ArrayBuffer(168);this.quadVertexData=C,this.quadVertexViewF32=new Float32Array(C),this.quadVertexBuffer=E.createVertexBuffer(C,this.gl.STATIC_DRAW),this.onResize(E.width,E.height),this.currentShader=this.copyShader},onResize:function(y,E){var C=this.quadVertexViewF32;C[1]=E,C[22]=E,C[14]=y,C[28]=y,C[35]=y,C[36]=E},batchQuad:function(y,E,C,T,A,P,M,w,L,F,D,N,B,b,W,Y,K,G,z){var O=Math.min(E,T,P,w),V=Math.min(C,A,M,L),U=Math.max(E,T,P,w),X=Math.max(C,A,M,L),H=U-O,Q=X-V,$=this.spriteBounds.setTo(O,V,H,Q),k=y?y.preFX.padding:0,J=H+k*2,Z=Q+k*2,j=Math.abs(Math.max(J,Z)),_=this.manager.getRenderTarget(j),q=this.targetBounds.setTo(0,0,_.width,_.height);m(q,$.centerX,$.centerY),this.tempSprite=y;var it=this.gl,ht=this.renderer;ht.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.flipProjectionMatrix(!0),y&&(this.onDrawSprite(y,_),y.preFX.onFX(this));var ft=this.fsTarget;return this.flush(),it.viewport(0,0,ht.width,ht.height),it.bindFramebuffer(it.FRAMEBUFFER,ft.framebuffer),it.framebufferTexture2D(it.FRAMEBUFFER,it.COLOR_ATTACHMENT0,it.TEXTURE_2D,ft.texture,0),it.clearColor(0,0,0,0),it.clear(it.COLOR_BUFFER_BIT),this.setTexture2D(z),this.batchVert(E,C,F,D,0,G,b),this.batchVert(T,A,F,B,0,G,Y),this.batchVert(P,M,N,B,0,G,K),this.batchVert(E,C,F,D,0,G,b),this.batchVert(P,M,N,B,0,G,K),this.batchVert(w,L,N,D,0,G,W),this.flush(),this.flipProjectionMatrix(!1),it.activeTexture(it.TEXTURE0),it.bindTexture(it.TEXTURE_2D,_.texture),it.copyTexSubImage2D(it.TEXTURE_2D,0,0,0,q.x,q.y,q.width,q.height),it.bindFramebuffer(it.FRAMEBUFFER,null),it.bindTexture(it.TEXTURE_2D,null),this.onBatch(y),this.currentShader=this.copyShader,this.onDraw(_,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(y,E,C,T,A,P,M){C===void 0&&(C=!0),T===void 0&&(T=!0),A===void 0&&(A=!1),M===void 0&&(M=this.copyShader);var w=this.gl,L=this.tempSprite;P&&(M=this.colorMatrixShader),this.currentShader=M;var F=this.setVertexBuffer(this.quadVertexBuffer);if(M.bind(F,!1),this.set1i("uMainSampler",0),L.preFX.onFXCopy(this),this.onCopySprite(y,E,L),P&&(this.set1fv("uColorMatrix",P.getData()),this.set1f("uAlpha",P.alpha)),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,y.texture),y.height>E.height)w.viewport(0,0,y.width,y.height),this.setTargetUVs(y,E);else{var D=E.height-y.height;w.viewport(0,D,y.width,y.height),this.resetUVs()}if(w.bindFramebuffer(w.FRAMEBUFFER,E.framebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,E.texture,0),C&&(w.clearColor(0,0,0,+!T),w.clear(w.COLOR_BUFFER_BIT)),A){var N=this.renderer.currentBlendMode;this.renderer.setBlendMode(h.ERASE)}w.bufferData(w.ARRAY_BUFFER,this.quadVertexData,w.STATIC_DRAW),w.drawArrays(w.TRIANGLES,0,6),A&&this.renderer.setBlendMode(N),w.bindFramebuffer(w.FRAMEBUFFER,null)},copy:function(y,E){var C=this.gl;this.set1i("uMainSampler",0),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,y.texture),C.viewport(0,0,y.width,y.height),this.setUVs(0,0,0,1,1,1,1,0),C.bindFramebuffer(C.FRAMEBUFFER,E.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,E.texture,0),C.clearColor(0,0,0,0),C.clear(C.COLOR_BUFFER_BIT),C.bufferData(C.ARRAY_BUFFER,this.quadVertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null)},blendFrames:function(y,E,C,T,A){this.manager.blendFrames(y,E,C,T,A)},blendFramesAdditive:function(y,E,C,T,A){this.manager.blendFramesAdditive(y,E,C,T,A)},drawToGame:function(y){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(y)},copyToGame:function(y){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(y)},bindAndDraw:function(y){var E=this.gl,C=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(y.texture);var T=this._tempMatrix1.loadIdentity(),A=this.targetBounds.x,P=this.targetBounds.y,M=A+y.width,w=P+y.height,L=T.getX(A,P),F=T.getX(A,w),D=T.getX(M,w),N=T.getX(M,P),B=T.getY(A,P),b=T.getY(A,w),W=T.getY(M,w),Y=T.getY(M,P),K=16777215;this.batchVert(L,B,0,0,0,0,K),this.batchVert(F,b,0,1,0,0,K),this.batchVert(D,W,1,1,0,0,K),this.batchVert(L,B,0,0,0,0,K),this.batchVert(D,W,1,1,0,0,K),this.batchVert(N,Y,1,0,0,0,K),C.restoreFramebuffer(!1,!0),C.currentFramebuffer||E.viewport(0,0,C.width,C.height),C.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(y){this.drawToGame(y)},setUVs:function(y,E,C,T,A,P,M,w){var L=this.quadVertexViewF32;L[2]=y,L[3]=E,L[9]=C,L[10]=T,L[16]=A,L[17]=P,L[23]=y,L[24]=E,L[30]=A,L[31]=P,L[37]=M,L[38]=w},setTargetUVs:function(y,E){var C=E.height/y.height;C>.5?C=.5-(C-.5):C=.5+(.5-C),this.setUVs(0,C,0,1+C,1,1+C,1,C)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.gl.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,i.prototype.destroy.call(this),this}});f.exports=g},21213:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(72632),o=t(77310),a=new h({Extends:o,initialize:function(i){i.topology=5,i.batchSize=m(i,"batchSize",256),o.call(this,i)}});f.exports=a},51212:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(72632),o=t(77310),a=t(85060),r=t(18166),i=t(44775),n=new h({Extends:o,initialize:function(s){s.fragShader=m(s,"fragShader",a),s.vertShader=m(s,"vertShader",r),s.forceZero=!0,o.call(this,s)},boot:function(){i.prototype.boot.call(this),this.set1i("uMainSampler",0)}});f.exports=n},60848:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(2529),m=t(95723),o=t(56694),a=t(65246),r=t(37486),i=t(79060),n=t(72632),u=t(98921),s=t(99365),l=t(44775),v=new o({Extends:l,initialize:function(g){g.renderTarget=n(g,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),g.vertShader=n(g,"vertShader",s),g.shaders=n(g,"shaders",[{name:"Copy",fragShader:i},{name:"AddBlend",fragShader:h},{name:"LinearBlend",fragShader:u},{name:"ColorMatrix",fragShader:r}]),g.attributes=n(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),g.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],g.batchSize=1,l.call(this,g),this.colorMatrix=new a,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){l.prototype.boot.call(this);var c=this.shaders,g=this.renderTargets;this.copyShader=c[0],this.addShader=c[1],this.linearShader=c[2],this.colorMatrixShader=c[3],this.fullFrame1=g[0],this.fullFrame2=g[1],this.halfFrame1=g[2],this.halfFrame2=g[3]},copyFrame:function(c,g,y,E,C){y===void 0&&(y=1),E===void 0&&(E=!0),C===void 0&&(C=!0);var T=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",y),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,c.texture),g?(T.viewport(0,0,g.width,g.height),T.bindFramebuffer(T.FRAMEBUFFER,g.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,g.texture,0)):T.viewport(0,0,c.width,c.height),E&&(C?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT)),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blitFrame:function(c,g,y,E,C,T,A){y===void 0&&(y=1),E===void 0&&(E=!0),C===void 0&&(C=!0),T===void 0&&(T=!1),A===void 0&&(A=!1);var P=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",y),P.activeTexture(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,c.texture),c.height>g.height)P.viewport(0,0,c.width,c.height),this.setTargetUVs(c,g);else{var M=g.height-c.height;P.viewport(0,M,c.width,c.height)}if(P.bindFramebuffer(P.FRAMEBUFFER,g.framebuffer),P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,g.texture,0),E&&(C?P.clearColor(0,0,0,0):P.clearColor(0,0,0,1),P.clear(P.COLOR_BUFFER_BIT)),T){var w=this.renderer.currentBlendMode;this.renderer.setBlendMode(m.ERASE)}A&&this.flipY(),P.bufferData(P.ARRAY_BUFFER,this.vertexData,P.STATIC_DRAW),P.drawArrays(P.TRIANGLES,0,6),T&&this.renderer.setBlendMode(w),P.bindFramebuffer(P.FRAMEBUFFER,null),P.bindTexture(P.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(c,g,y,E,C,T,A,P){A===void 0&&(A=!0),P===void 0&&(P=!0);var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,c.framebuffer),M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_2D,c.texture,0),A&&(P?M.clearColor(0,0,0,0):M.clearColor(0,0,0,1),M.clear(M.COLOR_BUFFER_BIT)),M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,g.texture),M.copyTexSubImage2D(M.TEXTURE_2D,0,0,0,y,E,C,T),M.bindFramebuffer(M.FRAMEBUFFER,null),M.bindTexture(M.TEXTURE_2D,null)},copyToGame:function(c){var g=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),g.activeTexture(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,c.texture),g.bufferData(g.ARRAY_BUFFER,this.vertexData,g.STATIC_DRAW),g.drawArrays(g.TRIANGLES,0,6)},drawFrame:function(c,g,y,E){y===void 0&&(y=!0),E===void 0&&(E=this.colorMatrix);var C=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",E.getData()),this.set1f("uAlpha",E.alpha),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,c.texture),g?(C.viewport(0,0,g.width,g.height),C.bindFramebuffer(C.FRAMEBUFFER,g.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,g.texture,0)):C.viewport(0,0,c.width,c.height),y?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},blendFrames:function(c,g,y,E,C,T){E===void 0&&(E=1),C===void 0&&(C=!0),T===void 0&&(T=this.linearShader);var A=this.gl;this.setShader(T),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",E),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,c.texture),A.activeTexture(A.TEXTURE1),A.bindTexture(A.TEXTURE_2D,g.texture),y?(A.bindFramebuffer(A.FRAMEBUFFER,y.framebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,y.texture,0),A.viewport(0,0,y.width,y.height)):A.viewport(0,0,c.width,c.height),C?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT),A.bufferData(A.ARRAY_BUFFER,this.vertexData,A.STATIC_DRAW),A.drawArrays(A.TRIANGLES,0,6),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},blendFramesAdditive:function(c,g,y,E,C){this.blendFrames(c,g,y,E,C,this.addShader)},clearFrame:function(c,g){g===void 0&&(g=!0);var y=this.gl;y.viewport(0,0,c.width,c.height),y.bindFramebuffer(y.FRAMEBUFFER,c.framebuffer),g?y.clearColor(0,0,0,0):y.clearColor(0,0,0,1),y.clear(y.COLOR_BUFFER_BIT);var E=this.renderer.currentFramebuffer;y.bindFramebuffer(y.FRAMEBUFFER,E)},setUVs:function(c,g,y,E,C,T,A,P){var M=this.vertexViewF32;M[2]=c,M[3]=g,M[6]=y,M[7]=E,M[10]=C,M[11]=T,M[14]=c,M[15]=g,M[18]=C,M[19]=T,M[22]=A,M[23]=P},setTargetUVs:function(c,g){var y=g.height/c.height;y>.5?y=.5-(y-.5):y=.5+(.5-y),this.setUVs(0,y,0,1+y,1,1+y,1,y)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});f.exports=v},65641:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};f.exports=S},68726:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pipelineafterflush"},67186:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pipelinebeforeflush"},22709:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pipelinebind"},74469:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pipelineboot"},93953:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pipelinedestroy"},51687:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pipelinerebind"},25034:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pipelineresize"},18970:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={AFTER_FLUSH:t(68726),BEFORE_FLUSH:t(67186),BIND:t(22709),BOOT:t(74469),DESTROY:t(93953),REBIND:t(51687),RESIZE:t(25034)}},32469:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(87751),o=t(80486),a=new h({Extends:o,initialize:function(i){o.call(this,{game:i,fragShader:m}),this.amount=1},onPreRender:function(r,i){r=this.getController(r),this.set1f("amount",r.amount,i)}});f.exports=a},2134:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(88222),o=t(80486),a=new h({Extends:o,initialize:function(i){o.call(this,{game:i,fragShader:m}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(r){r=this.getController(r),this.set1f("strength",r.blurStrength),this.set3fv("color",r.glcolor)},onDraw:function(r){var i=this.getController(),n=this.fullFrame1,u=this.fullFrame2;this.copyFrame(r,u);for(var s=2/r.width*i.offsetX,l=2/r.height*i.offsetY,v=0;v<i.steps;v++)this.set2f("offset",s,0),this.copySprite(r,n),this.set2f("offset",0,l),this.copySprite(n,r);this.blendFrames(u,r,n,i.strength),this.copyToGame(n)}});f.exports=a},63377:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(35491),o=t(75568),a=t(44481),r=t(80486),i=new h({Extends:r,initialize:function(u){r.call(this,{game:u,shaders:[{name:"Gaussian5",fragShader:m},{name:"Gaussian9",fragShader:o},{name:"Gaussian13",fragShader:a}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(n){var u=this.getController(),s=this.gl,l=this.fullFrame1,v=s.getParameter(s.FRAMEBUFFER_BINDING);this.bind(this.activeShader),s.activeTexture(s.TEXTURE0),s.viewport(0,0,n.width,n.height),this.set1i("uMainSampler",0),this.set2f("resolution",n.width,n.height),this.set1f("strength",u.strength),this.set3fv("color",u.glcolor);for(var c=0;c<u.steps;c++)this.set2f("offset",u.x,0),this.copySprite(n,l),this.set2f("offset",0,u.y),this.copySprite(l,n);s.bindFramebuffer(s.FRAMEBUFFER,v),s.bindTexture(s.TEXTURE_2D,null),this.copyToGame(n)}});f.exports=i},49745:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(69960),o=t(80486),a=new h({Extends:o,initialize:function(i){o.call(this,{game:i,fragShader:m}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(r,i,n,u){r=this.getController(r),this.set1f("radius",r.radius,i),this.set1f("amount",r.amount,i),this.set1f("contrast",r.contrast,i),this.set1f("strength",r.strength,i),this.set2f("blur",r.blurX,r.blurY,i),this.setBoolean("isTiltShift",r.isTiltShift,i),n&&u&&this.set2f("resolution",n,u,i)},onDraw:function(r){this.set2f("resolution",r.width,r.height),this.bindAndDraw(r)}});f.exports=a},4323:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(33754),o=t(80486),a=new h({Extends:o,initialize:function(i){o.call(this,{game:i,fragShader:m}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(r,i,n,u){r=this.getController(r),this.set1f("scale",r.scale,i),this.set1f("feather",r.feather,i),this.set1f("thickness",r.thickness,i),this.set3fv("color",r.glcolor,i),this.set4fv("backgroundColor",r.glcolor2,i),n&&u&&this.set2f("resolution",n,u,i)},onDraw:function(r){this.set2f("resolution",r.width,r.height),this.bindAndDraw(r)}});f.exports=a},92066:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(80486),o=new h({Extends:m,initialize:function(r){m.call(this,{game:r})},onDraw:function(a){var r=this.fullFrame1;this.controller?this.manager.drawFrame(a,r,!0,this.controller):this.drawFrame(a,r),this.copyToGame(r)}});f.exports=o},89581:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(35668),o=t(80486),a=new h({Extends:o,initialize:function(i){o.call(this,{game:i,fragShader:m}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(r){var i=this.game.textures.getFrame(r);i&&(this.glTexture=i.glTexture)},onDraw:function(r){var i=this.getController(),n=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",i.x,i.y),this.bindTexture(i.glTexture,1),this.copySprite(r,n),this.copyToGame(n)}});f.exports=a},55084:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(72632),o=t(69675),a=t(80486),r=t(75512),i=new h({Extends:a,initialize:function(u,s){var l=m(s,"quality",.1),v=m(s,"distance",10);a.call(this,{game:u,fragShader:r.setGlowQuality(o,u,l,v)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(n,u,s,l){n=this.getController(n),this.set1f("outerStrength",n.outerStrength,u),this.set1f("innerStrength",n.innerStrength,u),this.set4fv("glowColor",n.glcolor,u),this.setBoolean("knockout",n.knockout,u),s&&l&&this.set2f("resolution",s,l,u)},onDraw:function(n){this.set2f("resolution",n.width,n.height),this.bindAndDraw(n)}});f.exports=i},41653:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(90993),o=t(80486),a=new h({Extends:o,initialize:function(i){o.call(this,{game:i,fragShader:m}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(r,i){r=this.getController(r),this.set1f("alpha",r.alpha,i),this.set1i("size",r.size,i),this.set3fv("color1",r.glcolor1,i),this.set3fv("color2",r.glcolor2,i),this.set2f("positionFrom",r.fromX,r.fromY,i),this.set2f("positionTo",r.toX,r.toY,i)}});f.exports=a},73416:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(37945),o=t(80486),a=new h({Extends:o,initialize:function(i){o.call(this,{game:i,fragShader:m}),this.amount=1},onPreRender:function(r,i,n,u){r=this.getController(r),this.set1f("amount",r.amount,i),n&&u&&this.set2f("resolution",n,u,i)},onDraw:function(r){this.set2f("resolution",r.width,r.height),this.bindAndDraw(r)}});f.exports=a},58049:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(85718),o=t(80486),a=new h({Extends:o,initialize:function(i){o.call(this,{game:i,fragShader:m}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(r,i){r=this.getController(r);var n=r.samples;this.set1i("samples",n,i),this.set1f("intensity",r.intensity,i),this.set1f("decay",r.decay,i),this.set1f("power",r.power/n,i),this.set2f("lightPosition",r.x,r.y,i),this.set4fv("color",r.glcolor,i)}});f.exports=a},18026:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(13740),o=t(80486),a=new h({Extends:o,initialize:function(i){o.call(this,{game:i,fragShader:m}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(r,i,n,u){r=this.getController(r),this.setTime("time",i),this.set1f("speed",r.speed,i),this.set1f("lineWidth",r.lineWidth,i),this.set1f("gradient",r.gradient,i),this.setBoolean("reveal",r.reveal,i),n&&u&&this.set2f("resolution",n,u,i)},onDraw:function(r){this.set2f("resolution",r.width,r.height),this.bindAndDraw(r)}});f.exports=a},72381:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(80617),o=t(80486),a=new h({Extends:o,initialize:function(i){o.call(this,{game:i,fragShader:m}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(r,i){r=this.getController(r),this.set1f("radius",r.radius,i),this.set1f("strength",r.strength,i),this.set2f("position",r.x,r.y,i)}});f.exports=a},80542:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(62879),o=t(80486),a=new h({Extends:o,initialize:function(i){o.call(this,{game:i,fragShader:m}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(r,i){r=this.getController(r);var n=r.progress,u=r.wipeWidth,s=r.direction,l=r.axis;this.set4f("config",n,u,s,l,i),this.setBoolean("reveal",r.reveal,i)}});f.exports=a},58136:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h={Barrel:t(32469),Bloom:t(2134),Blur:t(63377),Bokeh:t(49745),Circle:t(4323),ColorMatrix:t(92066),Displacement:t(89581),Glow:t(55084),Gradient:t(41653),Pixelate:t(73416),Shadow:t(58049),Shine:t(18026),Vignette:t(72381),Wipe:t(80542)};f.exports=h},62253:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(65641),m=t(98611),o={FX:t(58136),BitmapMaskPipeline:t(5583),Events:t(18970),FXPipeline:t(81828),LightPipeline:t(66901),MobilePipeline:t(71264),MultiPipeline:t(77310),PointLightPipeline:t(10919),PostFXPipeline:t(80486),PreFXPipeline:t(87228),RopePipeline:t(21213),SinglePipeline:t(51212),UtilityPipeline:t(60848)};o=m(!1,o,h),f.exports=o},2529:f=>{f.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},91679:f=>{f.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},89053:f=>{f.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},37486:f=>{f.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},79060:f=>{f.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},87751:f=>{f.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},88222:f=>{f.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},44481:f=>{f.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},35491:f=>{f.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},75568:f=>{f.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},69960:f=>{f.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},33754:f=>{f.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},35668:f=>{f.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},69675:f=>{f.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},90993:f=>{f.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},37945:f=>{f.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},85718:f=>{f.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},13740:f=>{f.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},80617:f=>{f.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},62879:f=>{f.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},65045:f=>{f.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},98921:f=>{f.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},25005:f=>{f.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},94914:f=>{f.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},11263:f=>{f.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},51852:f=>{f.exports=["#define SHADER_NAME PHASER_MOBILE_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},53787:f=>{f.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},15968:f=>{f.exports=["#define SHADER_NAME PHASER_MULTI_VS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},83327:f=>{f.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},54677:f=>{f.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},12569:f=>{f.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},99365:f=>{f.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},85060:f=>{f.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},18166:f=>{f.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},92462:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={AddBlendFrag:t(2529),BitmapMaskFrag:t(91679),BitmapMaskVert:t(89053),ColorMatrixFrag:t(37486),CopyFrag:t(79060),FXBarrelFrag:t(87751),FXBloomFrag:t(88222),FXBlurHighFrag:t(44481),FXBlurLowFrag:t(35491),FXBlurMedFrag:t(75568),FXBokehFrag:t(69960),FXCircleFrag:t(33754),FXDisplacementFrag:t(35668),FXGlowFrag:t(69675),FXGradientFrag:t(90993),FXPixelateFrag:t(37945),FXShadowFrag:t(85718),FXShineFrag:t(13740),FXVignetteFrag:t(80617),FXWipeFrag:t(62879),LightFrag:t(65045),LinearBlendFrag:t(98921),MeshFrag:t(25005),MeshVert:t(94914),MobileFrag:t(11263),MobileVert:t(51852),MultiFrag:t(53787),MultiVert:t(15968),PointLightFrag:t(83327),PointLightVert:t(54677),PostFXFrag:t(12569),QuadVert:t(99365),SingleFrag:t(85060),SingleVert:t(18166)}},756:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(55301),m=t(56694),o=t(6659),a=t(40444),r=t(97081),i=t(74181),n=t(2893),u=t(9229),s=t(72283),l=t(74118),v=t(90881),c=t(84314),g=t(93736),y=t(47751),E=new m({Extends:o,initialize:function(T){o.call(this),this.game=T,this.canvas,this.canvasBounds=new l,this.parent=null,this.parentIsWindow=!1,this.parentSize=new v,this.gameSize=new v,this.baseSize=new v,this.displaySize=new v,this.scaleMode=h.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new g(1,1),this.autoRound=!1,this.autoCenter=h.CENTER.NO_CENTER,this.orientation=h.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:s,windowResize:s,fullScreenChange:s,fullScreenError:s}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(r.BOOT,this.boot,this)},boot:function(){var C=this.game;this.canvas=C.canvas,this.fullscreen=C.device.fullscreen,this.scaleMode!==h.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===h.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),C.events.on(r.PRE_STEP,this.step,this),C.events.once(r.READY,this.refresh,this),C.events.once(r.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(C){this.getParent(C),this.getParentBounds();var T=C.width,A=C.height,P=C.scaleMode,M=C.zoom,w=C.autoRound;if(typeof T=="string"){var L=this.parentSize.width;L===0&&(L=window.innerWidth);var F=parseInt(T,10)/100;T=Math.floor(L*F)}if(typeof A=="string"){var D=this.parentSize.height;D===0&&(D=window.innerHeight);var N=parseInt(A,10)/100;A=Math.floor(D*N)}this.scaleMode=P,this.autoRound=w,this.autoCenter=C.autoCenter,this.resizeInterval=C.resizeInterval,w&&(T=Math.floor(T),A=Math.floor(A)),this.gameSize.setSize(T,A),M===h.ZOOM.MAX_ZOOM&&(M=this.getMaxZoom()),this.zoom=M,M!==1&&(this._resetZoom=!0),this.baseSize.setSize(T,A),w&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),C.minWidth>0&&this.displaySize.setMin(C.minWidth*M,C.minHeight*M),C.maxWidth>0&&this.displaySize.setMax(C.maxWidth*M,C.maxHeight*M),this.displaySize.setSize(T,A),this.orientation=u(T,A)},getParent:function(C){var T=C.parent;if(T!==null){if(this.parent=n(T),this.parentIsWindow=this.parent===document.body,C.expandParent&&C.scaleMode!==h.SCALE_MODE.NONE){var A=this.parent.getBoundingClientRect();(this.parentIsWindow||A.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",A=this.parent.getBoundingClientRect(),!this.parentIsWindow&&A.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}C.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=n(C.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var C=this.parentSize,T=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(T.height=i(!0));var A=T.width,P=T.height;if(C.width!==A||C.height!==P)return C.setSize(A,P),!0;if(this.canvas){var M=this.canvasBounds,w=this.canvas.getBoundingClientRect();if(w.x!==M.x||w.y!==M.y)return!0}return!1},lockOrientation:function(C){var T=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return T?T.call(screen,C):!1},setParentSize:function(C,T){return this.parentSize.setSize(C,T),this.refresh()},setGameSize:function(C,T){var A=this.autoRound;A&&(C=Math.floor(C),T=Math.floor(T));var P=this.width,M=this.height;return this.gameSize.resize(C,T),this.baseSize.resize(C,T),A&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(C/T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(P,M)},resize:function(C,T){var A=this.zoom,P=this.autoRound;P&&(C=Math.floor(C),T=Math.floor(T));var M=this.width,w=this.height;this.gameSize.resize(C,T),this.baseSize.resize(C,T),P&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(C*A,T*A),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var L=this.canvas.style,F=C*A,D=T*A;return P&&(F=Math.floor(F),D=Math.floor(D)),(F!==C||D!==T)&&(L.width=F+"px",L.height=D+"px"),this.refresh(M,w)},setZoom:function(C){return this.zoom=C,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(C,T){C===void 0&&(C=this.width),T===void 0&&(T=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var A=this.game.domContainer;if(A){this.baseSize.setCSS(A);var P=this.canvas.style,M=A.style;M.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",M.marginLeft=P.marginLeft,M.marginTop=P.marginTop}return this.emit(a.RESIZE,this.gameSize,this.baseSize,this.displaySize,C,T),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var C=u(this.width,this.height);C!==this.orientation&&(this.orientation=C,this.emit(a.ORIENTATION_CHANGE,C))}},updateScale:function(){var C=this.canvas.style,T=this.gameSize.width,A=this.gameSize.height,P,M,w=this.zoom,L=this.autoRound;this.scaleMode===h.SCALE_MODE.NONE?(this.displaySize.setSize(T*w,A*w),P=this.displaySize.width,M=this.displaySize.height,L&&(P=Math.floor(P),M=Math.floor(M)),this._resetZoom&&(C.width=P+"px",C.height=M+"px",this._resetZoom=!1)):this.scaleMode===h.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),P=this.displaySize.width,M=this.displaySize.height,L&&(P=Math.floor(P),M=Math.floor(M)),this.canvas.width=P,this.canvas.height=M):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),P=this.displaySize.width,M=this.displaySize.height,L&&(P=Math.floor(P),M=Math.floor(M)),C.width=P+"px",C.height=M+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var C=c(this.parentSize.width,this.gameSize.width,0,!0),T=c(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(C,T),1)},updateCenter:function(){var C=this.autoCenter;if(C!==h.CENTER.NO_CENTER){var T=this.canvas,A=T.style,P=T.getBoundingClientRect(),M=P.width,w=P.height,L=Math.floor((this.parentSize.width-M)/2),F=Math.floor((this.parentSize.height-w)/2);C===h.CENTER.CENTER_HORIZONTALLY?F=0:C===h.CENTER.CENTER_VERTICALLY&&(L=0),A.marginLeft=L+"px",A.marginTop=F+"px"}},updateBounds:function(){var C=this.canvasBounds,T=this.canvas.getBoundingClientRect();C.x=T.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),C.y=T.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),C.width=T.width,C.height=T.height},transformX:function(C){return(C-this.canvasBounds.left)*this.displayScale.x},transformY:function(C){return(C-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(C){C===void 0&&(C={navigationUI:"hide"});var T=this.fullscreen;if(!T.available){this.emit(a.FULLSCREEN_UNSUPPORTED);return}if(!T.active){var A=this.getFullscreenTarget();T.keyboard?A[T.request](Element.ALLOW_KEYBOARD_INPUT):A[T.request](C)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(a.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(C){this.removeFullscreenTarget(),this.emit(a.FULLSCREEN_FAILED,C)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var C=document.createElement("div");C.style.margin="0",C.style.padding="0",C.style.width="100%",C.style.height="100%",this.fullscreenTarget=C,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var T=this.canvas.parentNode;T.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var C=this.fullscreenTarget;if(C&&C.parentNode){var T=C.parentNode;T.insertBefore(this.canvas,C),T.removeChild(C)}}},stopFullscreen:function(){var C=this.fullscreen;if(!C.available)return this.emit(a.FULLSCREEN_UNSUPPORTED),!1;C.active&&document[C.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(a.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(C){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(C)},startListeners:function(){var C=this,T=this.domlisteners;if(T.orientationChange=function(){C.updateBounds(),C._checkOrientation=!0,C.dirty=!0},T.windowResize=function(){C.updateBounds(),C.dirty=!0},window.addEventListener("orientationchange",T.orientationChange,!1),window.addEventListener("resize",T.windowResize,!1),this.fullscreen.available){T.fullScreenChange=function(P){return C.onFullScreenChange(P)},T.fullScreenError=function(P){return C.onFullScreenError(P)};var A=["webkit","moz",""];A.forEach(function(P){document.addEventListener(P+"fullscreenchange",T.fullScreenChange,!1),document.addEventListener(P+"fullscreenerror",T.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",T.fullScreenChange,!1),document.addEventListener("MSFullscreenError",T.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(C,T){C instanceof y||(T=C,C=void 0),T===void 0&&(T=new l);var A=this.baseSize,P=this.parentSize,M=this.canvasBounds,w=this.displayScale,L=M.x>=0?0:-(M.x*w.x),F=M.y>=0?0:-(M.y*w.y),D;P.width>=M.width?D=A.width:D=A.width-(M.width-P.width)*w.x;var N;return P.height>=M.height?N=A.height:N=A.height-(M.height-P.height)*w.y,T.setTo(L,F,D,N),C&&(T.width/=C.zoomX,T.height/=C.zoomY,T.centerX=C.centerX+C.scrollX,T.centerY=C.centerY+C.scrollY),T},step:function(C,T){this.parent&&(this._lastCheck+=T,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var C=this.domlisteners;window.removeEventListener("orientationchange",C.orientationChange,!1),window.removeEventListener("resize",C.windowResize,!1);var T=["webkit","moz",""];T.forEach(function(A){document.removeEventListener(A+"fullscreenchange",C.fullScreenChange,!1),document.removeEventListener(A+"fullscreenerror",C.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",C.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",C.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===h.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===h.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});f.exports=E},35098:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},53539:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},12637:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},10217:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},55301:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h={CENTER:t(35098),ORIENTATION:t(53539),SCALE_MODE:t(12637),ZOOM:t(10217)};f.exports=h},82085:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="enterfullscreen"},11826:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="fullscreenfailed"},56691:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="fullscreenunsupported"},34739:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="leavefullscreen"},26681:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="orientationchange"},11428:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="resize"},40444:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={ENTER_FULLSCREEN:t(82085),FULLSCREEN_FAILED:t(11826),FULLSCREEN_UNSUPPORTED:t(56691),LEAVE_FULLSCREEN:t(34739),ORIENTATION_CHANGE:t(26681),RESIZE:t(11428)}},86754:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(98611),m=t(55301),o={Center:t(35098),Events:t(40444),Orientation:t(53539),ScaleManager:t(756),ScaleModes:t(12637),Zoom:t(10217)};o=h(!1,o,m.CENTER),o=h(!1,o,m.ORIENTATION),o=h(!1,o,m.SCALE_MODE),o=h(!1,o,m.ZOOM),f.exports=o},47736:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72632),m=t(40587),o=function(a){var r=a.game.config.defaultPhysicsSystem,i=h(a.settings,"physics",!1);if(!(!r&&!i)){var n=[];if(r&&n.push(m(r+"Physics")),i)for(var u in i)u=m(u.concat("Physics")),n.indexOf(u)===-1&&n.push(u);return n}};f.exports=o},91088:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72632),m=function(o){var a=o.plugins.getDefaultScenePlugins(),r=h(o.settings,"plugins",!1);return Array.isArray(r)?r:a||[]};f.exports=m},90415:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};f.exports=S},87157:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(63946),o=new h({initialize:function(r){this.sys=new m(this,r),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});f.exports=o},13553:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(92980),o=t(7599),a=t(97081),r=t(10850),i=t(683),n=t(72283),u=t(87157),s=t(63946),l=new h({initialize:function(c,g){if(this.game=c,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,g){Array.isArray(g)||(g=[g]);for(var y=0;y<g.length;y++)this._pending.push({key:"default",scene:g[y],autoStart:y===0,data:{}})}c.events.once(a.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new u);var v,c,g,y;for(v=0;v<this._pending.length;v++){c=this._pending[v],g=c.key,y=c.scene;var E;y instanceof u?E=this.createSceneFromInstance(g,y):typeof y=="object"?E=this.createSceneFromObject(g,y):typeof y=="function"&&(E=this.createSceneFromFunction(g,y)),g=E.sys.settings.key,this.keys[g]=E,this.scenes.push(E),this._data[g]&&(E.sys.settings.data=this._data[g].data,this._data[g].autoStart&&(c.autoStart=!0)),(c.autoStart||E.sys.settings.active)&&this._start.push(g)}for(this._pending.length=0,this._data={},this.isBooted=!0,v=0;v<this._start.length;v++)c=this._start[v],this.start(c);this._start.length=0}},processQueue:function(){var v=this._pending.length,c=this._queue.length;if(!(v===0&&c===0)){var g,y;if(v){for(g=0;g<v;g++)y=this._pending[g],this.add(y.key,y.scene,y.autoStart,y.data);for(g=0;g<this._start.length;g++)y=this._start[g],this.start(y);this._start.length=0,this._pending.length=0}for(g=0;g<this._queue.length;g++)y=this._queue[g],this[y.op](y.keyA,y.keyB);this._queue.length=0}},add:function(v,c,g,y){if(g===void 0&&(g=!1),y===void 0&&(y={}),this.isProcessing||!this.isBooted)return this._pending.push({key:v,scene:c,autoStart:g,data:y}),this.isBooted||(this._data[v]={data:y}),null;v=this.getKey(v,c);var E;return c instanceof u?E=this.createSceneFromInstance(v,c):typeof c=="object"?(c.key=v,E=this.createSceneFromObject(v,c)):typeof c=="function"&&(E=this.createSceneFromFunction(v,c)),E.sys.settings.data=y,v=E.sys.settings.key,this.keys[v]=E,this.scenes.push(E),(g||E.sys.settings.active)&&(this._pending.length?this._start.push(v):this.start(v)),E},remove:function(v){if(this.isProcessing)this._queue.push({op:"remove",keyA:v,keyB:null});else{var c=this.getScene(v);if(!c||c.sys.isTransitioning())return this;var g=this.scenes.indexOf(c),y=c.sys.settings.key;g>-1&&(delete this.keys[y],this.scenes.splice(g,1),this._start.indexOf(y)>-1&&(g=this._start.indexOf(y),this._start.splice(g,1)),c.sys.destroy())}return this},bootScene:function(v){var c=v.sys,g=c.settings;c.sceneUpdate=n,v.init&&(v.init.call(v,g.data),g.status=m.INIT,g.isTransition&&c.events.emit(o.TRANSITION_INIT,g.transitionFrom,g.transitionDuration));var y;c.load&&(y=c.load,y.reset()),y&&v.preload?(v.preload.call(v),g.status=m.LOADING,y.once(i.COMPLETE,this.loadComplete,this),y.start()):this.create(v)},loadComplete:function(v){this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(v.scene)},payloadComplete:function(v){this.bootScene(v.scene)},update:function(v,c){this.processQueue(),this.isProcessing=!0;for(var g=this.scenes.length-1;g>=0;g--){var y=this.scenes[g].sys;y.settings.status>m.START&&y.settings.status<=m.RUNNING&&y.step(v,c),y.scenePlugin._target&&y.scenePlugin.step(v,c)}},render:function(v){for(var c=0;c<this.scenes.length;c++){var g=this.scenes[c].sys;g.settings.visible&&g.settings.status>=m.LOADING&&g.settings.status<m.SLEEPING&&g.render(v)}this.isProcessing=!1},create:function(v){var c=v.sys,g=c.settings;v.create&&(g.status=m.CREATING,v.create.call(v,g.data),g.status===m.DESTROYED)||(g.isTransition&&c.events.emit(o.TRANSITION_START,g.transitionFrom,g.transitionDuration),v.update&&(c.sceneUpdate=v.update),g.status=m.RUNNING,c.events.emit(o.CREATE,v))},createSceneFromFunction:function(v,c){var g=new c;if(g instanceof u){var y=g.sys.settings.key;if(y!==""&&(v=y),this.keys.hasOwnProperty(v))throw new Error("Cannot add a Scene with duplicate key: "+v);return this.createSceneFromInstance(v,g)}else return g.sys=new s(g),g.sys.settings.key=v,g.sys.init(this.game),g},createSceneFromInstance:function(v,c){var g=c.sys.settings.key;return g===""&&(c.sys.settings.key=v),c.sys.init(this.game),c},createSceneFromObject:function(v,c){var g=new u(c),y=g.sys.settings.key;y!==""?v=y:g.sys.settings.key=v,g.sys.init(this.game);for(var E=["init","preload","create","update","render"],C=0;C<E.length;C++){var T=r(c,E[C],null);T&&(g[E[C]]=T)}if(c.hasOwnProperty("extend")){for(var A in c.extend)if(c.extend.hasOwnProperty(A)){var P=c.extend[A];A==="data"&&g.hasOwnProperty("data")&&typeof P=="object"?g.data.merge(P):A!=="sys"&&(g[A]=P)}}return g},getKey:function(v,c){if(v||(v="default"),typeof c=="function")return v;if(c instanceof u?v=c.sys.settings.key:typeof c=="object"&&c.hasOwnProperty("key")&&(v=c.key),this.keys.hasOwnProperty(v))throw new Error("Cannot add a Scene with duplicate key: "+v);return v},getScenes:function(v,c){v===void 0&&(v=!0),c===void 0&&(c=!1);for(var g=[],y=this.scenes,E=0;E<y.length;E++){var C=y[E];C&&(!v||v&&C.sys.isActive())&&g.push(C)}return c?g.reverse():g},getScene:function(v){if(typeof v=="string"){if(this.keys[v])return this.keys[v]}else for(var c=0;c<this.scenes.length;c++)if(v===this.scenes[c])return v;return null},isActive:function(v){var c=this.getScene(v);return c?c.sys.isActive():null},isPaused:function(v){var c=this.getScene(v);return c?c.sys.isPaused():null},isVisible:function(v){var c=this.getScene(v);return c?c.sys.isVisible():null},isSleeping:function(v){var c=this.getScene(v);return c?c.sys.isSleeping():null},pause:function(v,c){var g=this.getScene(v);return g&&g.sys.pause(c),this},resume:function(v,c){var g=this.getScene(v);return g&&g.sys.resume(c),this},sleep:function(v,c){var g=this.getScene(v);return g&&!g.sys.isTransitioning()&&g.sys.sleep(c),this},wake:function(v,c){var g=this.getScene(v);return g&&g.sys.wake(c),this},run:function(v,c){var g=this.getScene(v);if(!g){for(var y=0;y<this._pending.length;y++)if(this._pending[y].key===v){this.queueOp("start",v,c);break}return this}g.sys.isSleeping()?g.sys.wake(c):g.sys.isPaused()?g.sys.resume(c):this.start(v,c)},start:function(v,c){if(!this.isBooted)return this._data[v]={autoStart:!0,data:c},this;var g=this.getScene(v);if(!g)return console.warn("Scene not found for key: "+v),this;var y=g.sys,E=y.settings.status;if(E>=m.START&&E<=m.CREATING)return this;if(E>=m.RUNNING&&E<=m.SLEEPING)y.shutdown(),y.sceneUpdate=n,y.start(c);else{y.sceneUpdate=n,y.start(c);var C;if(y.load&&(C=y.load),C&&y.settings.hasOwnProperty("pack")&&(C.reset(),C.addPack({payload:y.settings.pack})))return y.settings.status=m.LOADING,C.once(i.COMPLETE,this.payloadComplete,this),C.start(),this}return this.bootScene(g),this},stop:function(v,c){var g=this.getScene(v);if(g&&!g.sys.isTransitioning()&&g.sys.settings.status!==m.SHUTDOWN){var y=g.sys.load;y&&(y.off(i.COMPLETE,this.loadComplete,this),y.off(i.COMPLETE,this.payloadComplete,this)),g.sys.shutdown(c)}return this},switch:function(v,c){var g=this.getScene(v),y=this.getScene(c);return g&&y&&g!==y&&(this.sleep(v),this.isSleeping(c)?this.wake(c):this.start(c)),this},getAt:function(v){return this.scenes[v]},getIndex:function(v){var c=this.getScene(v);return this.scenes.indexOf(c)},bringToTop:function(v){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:v,keyB:null});else{var c=this.getIndex(v);if(c!==-1&&c<this.scenes.length){var g=this.getScene(v);this.scenes.splice(c,1),this.scenes.push(g)}}return this},sendToBack:function(v){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:v,keyB:null});else{var c=this.getIndex(v);if(c!==-1&&c>0){var g=this.getScene(v);this.scenes.splice(c,1),this.scenes.unshift(g)}}return this},moveDown:function(v){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:v,keyB:null});else{var c=this.getIndex(v);if(c>0){var g=c-1,y=this.getScene(v),E=this.getAt(g);this.scenes[c]=E,this.scenes[g]=y}}return this},moveUp:function(v){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:v,keyB:null});else{var c=this.getIndex(v);if(c<this.scenes.length-1){var g=c+1,y=this.getScene(v),E=this.getAt(g);this.scenes[c]=E,this.scenes[g]=y}}return this},moveAbove:function(v,c){if(v===c)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:v,keyB:c});else{var g=this.getIndex(v),y=this.getIndex(c);if(g!==-1&&y!==-1&&y<g){var E=this.getAt(y);this.scenes.splice(y,1),this.scenes.splice(g+(y>g),0,E)}}return this},moveBelow:function(v,c){if(v===c)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:v,keyB:c});else{var g=this.getIndex(v),y=this.getIndex(c);if(g!==-1&&y!==-1&&y>g){var E=this.getAt(y);this.scenes.splice(y,1),g===0?this.scenes.unshift(E):this.scenes.splice(g-(y<g),0,E)}}return this},queueOp:function(v,c,g){return this._queue.push({op:v,keyA:c,keyB:g}),this},swapPosition:function(v,c){if(v===c)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:v,keyB:c});else{var g=this.getIndex(v),y=this.getIndex(c);if(g!==y&&g!==-1&&y!==-1){var E=this.getAt(g);this.scenes[g]=this.scenes[y],this.scenes[y]=E}}return this},dump:function(){for(var v=[],c=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],g=0;g<this.scenes.length;g++){var y=this.scenes[g].sys,E=y.settings.visible&&(y.settings.status===m.RUNNING||y.settings.status===m.PAUSED)?"[*] ":"[-] ";E+=y.settings.key+" ("+c[y.settings.status]+")",v.push(E)}console.log(v.join(`
`))},destroy:function(){for(var v=0;v<this.scenes.length;v++){var c=this.scenes[v].sys;c.destroy()}this.systemScene.sys.destroy(),this.update=n,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});f.exports=l},64051:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82897),m=t(56694),o=t(7599),a=t(72632),r=t(91963),i=new m({initialize:function(u){this.scene=u,this.systems=u.sys,this.settings=u.sys.settings,this.key=u.sys.settings.key,this.manager=u.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,u.sys.events.once(o.BOOT,this.boot,this),u.sys.events.on(o.START,this.pluginStart,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(o.SHUTDOWN,this.shutdown,this)},start:function(n,u){return n===void 0&&(n=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",n,u),this},restart:function(n){var u=this.key;return this.manager.queueOp("stop",u),this.manager.queueOp("start",u,n),this},transition:function(n){n===void 0&&(n={});var u=a(n,"target",!1),s=this.manager.getScene(u);if(!u||!this.checkValidTransition(s))return!1;var l=a(n,"duration",1e3);this._elapsed=0,this._target=s,this._duration=l,this._willSleep=a(n,"sleep",!1),this._willRemove=a(n,"remove",!1);var v=a(n,"onUpdate",null);v&&(this._onUpdate=v,this._onUpdateScope=a(n,"onUpdateScope",this.scene));var c=a(n,"allowInput",!1);this.settings.transitionAllowInput=c;var g=s.sys.settings;g.isTransition=!0,g.transitionFrom=this.scene,g.transitionDuration=l,g.transitionAllowInput=c,a(n,"moveAbove",!1)?this.manager.moveAbove(this.key,u):a(n,"moveBelow",!1)&&this.manager.moveBelow(this.key,u),s.sys.isSleeping()?s.sys.wake(a(n,"data")):this.manager.start(u,a(n,"data"));var y=a(n,"onStart",null),E=a(n,"onStartScope",this.scene);return y&&y.call(E,this.scene,s,l),this.systems.events.emit(o.TRANSITION_OUT,s,l),!0},checkValidTransition:function(n){return!(!n||n.sys.isActive()||n.sys.isTransitioning()||n===this.scene||this.systems.isTransitioning())},step:function(n,u){this._elapsed+=u,this.transitionProgress=h(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var n=this._target.sys,u=this._target.sys.settings;n.events.emit(o.TRANSITION_COMPLETE,this.scene),u.isTransition=!1,u.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(n,u,s,l){return this.manager.add(n,u,s,l)},launch:function(n,u){return n&&n!==this.key&&this.manager.queueOp("start",n,u),this},run:function(n,u){return n&&n!==this.key&&this.manager.queueOp("run",n,u),this},pause:function(n,u){return n===void 0&&(n=this.key),this.manager.queueOp("pause",n,u),this},resume:function(n,u){return n===void 0&&(n=this.key),this.manager.queueOp("resume",n,u),this},sleep:function(n,u){return n===void 0&&(n=this.key),this.manager.queueOp("sleep",n,u),this},wake:function(n,u){return n===void 0&&(n=this.key),this.manager.queueOp("wake",n,u),this},switch:function(n){return n!==this.key&&this.manager.queueOp("switch",this.key,n),this},stop:function(n,u){return n===void 0&&(n=this.key),this.manager.queueOp("stop",n,u),this},setActive:function(n,u,s){u===void 0&&(u=this.key);var l=this.manager.getScene(u);return l&&l.sys.setActive(n,s),this},setVisible:function(n,u){u===void 0&&(u=this.key);var s=this.manager.getScene(u);return s&&s.sys.setVisible(n),this},isSleeping:function(n){return n===void 0&&(n=this.key),this.manager.isSleeping(n)},isActive:function(n){return n===void 0&&(n=this.key),this.manager.isActive(n)},isPaused:function(n){return n===void 0&&(n=this.key),this.manager.isPaused(n)},isVisible:function(n){return n===void 0&&(n=this.key),this.manager.isVisible(n)},swapPosition:function(n,u){return u===void 0&&(u=this.key),n!==u&&this.manager.swapPosition(n,u),this},moveAbove:function(n,u){return u===void 0&&(u=this.key),n!==u&&this.manager.moveAbove(n,u),this},moveBelow:function(n,u){return u===void 0&&(u=this.key),n!==u&&this.manager.moveBelow(n,u),this},remove:function(n){return n===void 0&&(n=this.key),this.manager.remove(n),this},moveUp:function(n){return n===void 0&&(n=this.key),this.manager.moveUp(n),this},moveDown:function(n){return n===void 0&&(n=this.key),this.manager.moveDown(n),this},bringToTop:function(n){return n===void 0&&(n=this.key),this.manager.bringToTop(n),this},sendToBack:function(n){return n===void 0&&(n=this.key),this.manager.sendToBack(n),this},get:function(n){return this.manager.getScene(n)},getStatus:function(n){var u=this.manager.getScene(n);if(u)return u.sys.getStatus()},getIndex:function(n){return n===void 0&&(n=this.key),this.manager.getIndex(n)},shutdown:function(){var n=this.systems.events;n.off(o.SHUTDOWN,this.shutdown,this),n.off(o.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});r.register("ScenePlugin",i,"scenePlugin"),f.exports=i},36765:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(92980),m=t(10850),o=t(30657),a=t(90415),r={create:function(i){return typeof i=="string"?i={key:i}:i===void 0&&(i={}),{status:h.PENDING,key:m(i,"key",""),active:m(i,"active",!1),visible:m(i,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:m(i,"pack",!1),cameras:m(i,"cameras",null),map:m(i,"map",o(a,m(i,"mapAdd",{}))),physics:m(i,"physics",{}),loader:m(i,"loader",{}),plugins:m(i,"plugins",!1),input:m(i,"input",{})}}};f.exports=r},63946:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(92980),o=t(18360),a=t(7599),r=t(47736),i=t(91088),n=t(72283),u=t(36765),s=new h({initialize:function(v,c){this.scene=v,this.game,this.renderer,this.config=c,this.settings=u.create(c),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=n},init:function(l){this.settings.status=m.INIT,this.sceneUpdate=n,this.game=l,this.renderer=l.renderer,this.canvas=l.canvas,this.context=l.context;var v=l.plugins;this.plugins=v,v.addToScene(this,o.Global,[o.CoreScene,i(this),r(this)]),this.events.emit(a.BOOT,this),this.settings.isBooted=!0},step:function(l,v){var c=this.events;c.emit(a.PRE_UPDATE,l,v),c.emit(a.UPDATE,l,v),this.sceneUpdate.call(this.scene,l,v),c.emit(a.POST_UPDATE,l,v)},render:function(l){var v=this.displayList;v.depthSort(),this.events.emit(a.PRE_RENDER,l),this.cameras.render(l,v),this.events.emit(a.RENDER,l)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(l){var v=this.settings,c=this.getStatus();return c!==m.CREATING&&c!==m.RUNNING?console.warn("Cannot pause non-running Scene",v.key):this.settings.active&&(v.status=m.PAUSED,v.active=!1,this.events.emit(a.PAUSE,this,l)),this},resume:function(l){var v=this.events,c=this.settings;return this.settings.active||(c.status=m.RUNNING,c.active=!0,v.emit(a.RESUME,this,l)),this},sleep:function(l){var v=this.settings,c=this.getStatus();return c!==m.CREATING&&c!==m.RUNNING?console.warn("Cannot sleep non-running Scene",v.key):(v.status=m.SLEEPING,v.active=!1,v.visible=!1,this.events.emit(a.SLEEP,this,l)),this},wake:function(l){var v=this.events,c=this.settings;return c.status=m.RUNNING,c.active=!0,c.visible=!0,v.emit(a.WAKE,this,l),c.isTransition&&v.emit(a.TRANSITION_WAKE,c.transitionFrom,c.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var l=this.settings.status;return l>m.PENDING&&l<=m.RUNNING},isSleeping:function(){return this.settings.status===m.SLEEPING},isActive:function(){return this.settings.status===m.RUNNING},isPaused:function(){return this.settings.status===m.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(l){return this.settings.visible=l,this},setActive:function(l,v){return l?this.resume(v):this.pause(v)},start:function(l){var v=this.events,c=this.settings;l&&(c.data=l),c.status=m.START,c.active=!0,c.visible=!0,v.emit(a.START,this),v.emit(a.READY,this,l)},shutdown:function(l){var v=this.events,c=this.settings;v.off(a.TRANSITION_INIT),v.off(a.TRANSITION_START),v.off(a.TRANSITION_COMPLETE),v.off(a.TRANSITION_OUT),c.status=m.SHUTDOWN,c.active=!1,c.visible=!1,v.emit(a.SHUTDOWN,this,l)},destroy:function(){var l=this.events,v=this.settings;v.status=m.DESTROYED,v.active=!1,v.visible=!1,l.emit(a.DESTROY,this),l.removeAllListeners();for(var c=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],g=0;g<c.length;g++)this[c[g]]=null}});f.exports=s},92980:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};f.exports=S},31803:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="addedtoscene"},94817:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="boot"},28977:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="create"},91959:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="destroy"},363:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pause"},15643:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="postupdate"},17058:f=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="prerender"},77125:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="preupdate"},76018:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="ready"},28620:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="removedfromscene"},41538:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="render"},34268:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="resume"},2342:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="shutdown"},96541:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="sleep"},74244:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="start"},17046:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="transitioncomplete"},13637:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="transitioninit"},14733:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="transitionout"},33899:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="transitionstart"},52418:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="transitionwake"},31735:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="update"},8470:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="wake"},7599:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={ADDED_TO_SCENE:t(31803),BOOT:t(94817),CREATE:t(28977),DESTROY:t(91959),PAUSE:t(363),POST_UPDATE:t(15643),PRE_RENDER:t(17058),PRE_UPDATE:t(77125),READY:t(76018),REMOVED_FROM_SCENE:t(28620),RENDER:t(41538),RESUME:t(34268),SHUTDOWN:t(2342),SLEEP:t(96541),START:t(74244),TRANSITION_COMPLETE:t(17046),TRANSITION_INIT:t(13637),TRANSITION_OUT:t(14733),TRANSITION_START:t(33899),TRANSITION_WAKE:t(52418),UPDATE:t(31735),WAKE:t(8470)}},20436:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(92980),m=t(98611),o={Events:t(7599),GetPhysicsPlugins:t(47736),GetScenePlugins:t(91088),SceneManager:t(13553),ScenePlugin:t(64051),Settings:t(36765),Systems:t(63946)};o=m(!1,o,h),f.exports=o},25798:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(6659),o=t(76038),a=t(98611),r=t(72283),i=new h({Extends:m,initialize:function(u,s,l){m.call(this),this.manager=u,this.key=s,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=a(this.config,l),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(n){return!n||!n.name||typeof n.name!="string"?!1:this.markers[n.name]?(console.error("addMarker "+n.name+" already exists in Sound"),!1):(n=a(!0,{name:"",start:0,duration:this.totalDuration-(n.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},n),this.markers[n.name]=n,!0)},updateMarker:function(n){return!n||!n.name||typeof n.name!="string"?!1:this.markers[n.name]?(this.markers[n.name]=a(!0,this.markers[n.name],n),!0):(console.warn("Audio Marker: "+n.name+" missing in Sound: "+this.key),!1)},removeMarker:function(n){var u=this.markers[n];return u?(this.markers[n]=null,u):null},play:function(n,u){if(n===void 0&&(n=""),typeof n=="object"&&(u=n,n=""),typeof n!="string")return!1;if(!n)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[n])return console.warn("Marker: "+n+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[n],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=a(this.currentConfig,u),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:r,calculateRate:function(){var n=1.0005777895065548,u=this.currentConfig.detune+this.manager.detune,s=Math.pow(n,u);this.totalRate=this.currentConfig.rate*this.manager.rate*s},destroy:function(){this.pendingRemove||(this.emit(o.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});f.exports=i},12486:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(32742),o=t(6659),a=t(76038),r=t(97081),i=t(71608),n=t(51463),u=t(72283),s=t(93736),l=new h({Extends:o,initialize:function(c){o.call(this),this.game=c,this.jsonCache=c.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new s,c.events.on(r.BLUR,this.onGameBlur,this),c.events.on(r.FOCUS,this.onGameFocus,this),c.events.on(r.PRE_STEP,this.update,this),c.events.once(r.DESTROY,this.destroy,this)},add:u,addAudioSprite:function(v,c){c===void 0&&(c={});var g=this.add(v,c);g.spritemap=this.jsonCache.get(v).spritemap;for(var y in g.spritemap)if(g.spritemap.hasOwnProperty(y)){var E=m(c),C=g.spritemap[y];E.loop=C.hasOwnProperty("loop")?C.loop:!1,g.addMarker({name:y,start:C.start,duration:C.end-C.start,config:E})}return g},get:function(v){return n(this.sounds,"key",v)},getAll:function(v){return v?i(this.sounds,"key",v):i(this.sounds)},getAllPlaying:function(){return i(this.sounds,"isPlaying",!0)},play:function(v,c){var g=this.add(v);return g.once(a.COMPLETE,g.destroy,g),c?c.name?(g.addMarker(c),g.play(c.name)):g.play(c):g.play()},playAudioSprite:function(v,c,g){var y=this.addAudioSprite(v);return y.once(a.COMPLETE,y.destroy,y),y.play(c,g)},remove:function(v){var c=this.sounds.indexOf(v);return c!==-1?(v.destroy(),this.sounds.splice(c,1),!0):!1},removeAll:function(){this.sounds.forEach(function(v){v.destroy()}),this.sounds.length=0},removeByKey:function(v){for(var c=0,g=this.sounds.length-1;g>=0;g--){var y=this.sounds[g];y.key===v&&(y.destroy(),this.sounds.splice(g,1),c++)}return c},pauseAll:function(){this.forEachActiveSound(function(v){v.pause()}),this.emit(a.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(v){v.resume()}),this.emit(a.RESUME_ALL,this)},setListenerPosition:u,stopAll:function(){this.forEachActiveSound(function(v){v.stop()}),this.emit(a.STOP_ALL,this)},stopByKey:function(v){var c=0;return this.getAll(v).forEach(function(g){g.stop()&&c++}),c},unlock:u,onBlur:u,onFocus:u,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(v,c){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(a.UNLOCKED,this));for(var g=this.sounds.length-1;g>=0;g--)this.sounds[g].pendingRemove&&this.sounds.splice(g,1);this.sounds.forEach(function(y){y.update(v,c)})},destroy:function(){this.game.events.off(r.BLUR,this.onGameBlur,this),this.game.events.off(r.FOCUS,this.onGameFocus,this),this.game.events.off(r.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(v,c){var g=this;this.sounds.forEach(function(y,E){y&&!y.pendingRemove&&v.call(c||g,y,E,g.sounds)})},setRate:function(v){return this.rate=v,this},rate:{get:function(){return this._rate},set:function(v){this._rate=v,this.forEachActiveSound(function(c){c.calculateRate()}),this.emit(a.GLOBAL_RATE,this,v)}},setDetune:function(v){return this.detune=v,this},detune:{get:function(){return this._detune},set:function(v){this._detune=v,this.forEachActiveSound(function(c){c.calculateRate()}),this.emit(a.GLOBAL_DETUNE,this,v)}}});f.exports=l},84191:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(27622),m=t(17546),o=t(55491),a={create:function(r){var i=r.config.audio,n=r.device.audio;return i.noAudio||!n.webAudio&&!n.audioData?new m(r):n.webAudio&&!i.disableWebAudio?new o(r):new h(r)}};f.exports=a},77578:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="complete"},19679:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="decodedall"},56951:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="decoded"},16436:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="destroy"},55154:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="detune"},57818:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="detune"},57890:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="mute"},83022:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="rate"},99170:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="volume"},64289:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="looped"},67214:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="loop"},53128:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="mute"},73078:f=>{/**
 * @author       pi-kei
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pan"},76763:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pauseall"},88426:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pause"},13765:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="play"},80291:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="rate"},11124:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="resumeall"},55382:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="resume"},71157:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="seek"},31776:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="stopall"},39450:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="stop"},21939:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="unlocked"},33019:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="volume"},76038:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={COMPLETE:t(77578),DECODED:t(56951),DECODED_ALL:t(19679),DESTROY:t(16436),DETUNE:t(55154),GLOBAL_DETUNE:t(57818),GLOBAL_MUTE:t(57890),GLOBAL_RATE:t(83022),GLOBAL_VOLUME:t(99170),LOOP:t(67214),LOOPED:t(64289),MUTE:t(53128),PAN:t(73078),PAUSE_ALL:t(76763),PAUSE:t(88426),PLAY:t(13765),RATE:t(80291),RESUME_ALL:t(11124),RESUME:t(55382),SEEK:t(71157),STOP_ALL:t(31776),STOP:t(39450),UNLOCKED:t(21939),VOLUME:t(33019)}},34350:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(25798),m=t(56694),o=t(76038),a=t(82897),r=new m({Extends:h,initialize:function(n,u,s){if(s===void 0&&(s={}),this.tags=n.game.cache.audio.get(u),!this.tags)throw new Error('No cached audio asset with key "'+u);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,h.call(this,n,u,s)},play:function(i,n){return this.manager.isLocked(this,"play",[i,n])||!h.prototype.play.call(this,i,n)||!this.pickAndPlayAudioTag()?!1:(this.emit(o.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!h.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(o.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!h.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(o.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!h.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(o.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var i=this.currentConfig.seek,n=this.currentConfig.delay,u=(this.currentMarker?this.currentMarker.start:0)+i;return this.previousTime=u,this.audio.currentTime=u,this.applyConfig(),n===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+n*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var i=0;i<this.tags.length;i++){var n=this.tags[i];if(n.dataset.used==="false")return n.dataset.used="true",this.audio=n,!0}if(!this.manager.override)return!1;var u=[];this.manager.forEachActiveSound(function(l){l.key===this.key&&l.audio&&u.push(l)},this),u.sort(function(l,v){return l.loop===v.loop?v.seek/v.duration-l.seek/l.duration:l.loop?1:-1});var s=u[0];return this.audio=s.audio,s.reset(),s.audio=null,s.startTime=0,s.previousTime=0,!0},playCatchPromise:function(){var i=this.audio.play();i&&i.catch(function(n){console.warn(n)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){h.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(i){if(this.isPlaying){if(this.startTime>0){this.startTime<i-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,i-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var n=this.currentMarker?this.currentMarker.start:0,u=n+this.duration,s=this.audio.currentTime;if(this.currentConfig.loop)s>=u-this.manager.loopEndOffset?(this.audio.currentTime=n+Math.max(0,s-u),s=this.audio.currentTime):s<n&&(this.audio.currentTime+=n,s=this.audio.currentTime),s<this.previousTime&&this.emit(o.LOOPED,this);else if(s>=u){this.reset(),this.stopAndReleaseAudioTag(),this.emit(o.COMPLETE,this);return}this.previousTime=s}},destroy:function(){h.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=a(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){h.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(i){this.currentConfig.mute=i,!this.manager.isLocked(this,"mute",i)&&(this.updateMute(),this.emit(o.MUTE,this,i))}},setMute:function(i){return this.mute=i,this},volume:{get:function(){return this.currentConfig.volume},set:function(i){this.currentConfig.volume=i,!this.manager.isLocked(this,"volume",i)&&(this.updateVolume(),this.emit(o.VOLUME,this,i))}},setVolume:function(i){return this.volume=i,this},rate:{get:function(){return this.currentConfig.rate},set:function(i){this.currentConfig.rate=i,!this.manager.isLocked(this,o.RATE,i)&&(this.calculateRate(),this.emit(o.RATE,this,i))}},setRate:function(i){return this.rate=i,this},detune:{get:function(){return this.currentConfig.detune},set:function(i){this.currentConfig.detune=i,!this.manager.isLocked(this,o.DETUNE,i)&&(this.calculateRate(),this.emit(o.DETUNE,this,i))}},setDetune:function(i){return this.detune=i,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(i){this.manager.isLocked(this,"seek",i)||this.startTime>0||(this.isPlaying||this.isPaused)&&(i=Math.min(Math.max(0,i),this.duration),this.isPlaying?(this.previousTime=i,this.audio.currentTime=i):this.isPaused&&(this.currentConfig.seek=i),this.emit(o.SEEK,this,i))}},setSeek:function(i){return this.seek=i,this},loop:{get:function(){return this.currentConfig.loop},set:function(i){this.currentConfig.loop=i,!this.manager.isLocked(this,"loop",i)&&(this.audio&&(this.audio.loop=i),this.emit(o.LOOP,this,i))}},setLoop:function(i){return this.loop=i,this},pan:{get:function(){return this.currentConfig.pan},set:function(i){this.currentConfig.pan=i,this.emit(o.PAN,this,i)}},setPan:function(i){return this.pan=i,this}});f.exports=r},27622:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(12486),m=t(56694),o=t(76038),a=t(34350),r=new m({Extends:h,initialize:function(n){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,h.call(this,n)},add:function(i,n){var u=new a(this,i,n);return this.sounds.push(u),u},unlock:function(){this.locked=!1;var i=this;if(this.game.cache.audio.entries.each(function(l,v){for(var c=0;c<v.length;c++)if(v[c].dataset.locked==="true")return i.locked=!0,!1;return!0}),!!this.locked){var n=!1,u=function(){n=!0},s=function(){if(n){n=!1;return}document.body.removeEventListener("touchmove",u),document.body.removeEventListener("touchend",s);var l=[];if(i.game.cache.audio.entries.each(function(c,g){for(var y=0;y<g.length;y++){var E=g[y];E.dataset.locked==="true"&&l.push(E)}return!0}),l.length!==0){var v=l[l.length-1];v.oncanplaythrough=function(){v.oncanplaythrough=null,l.forEach(function(c){c.dataset.locked="false"}),i.unlocked=!0},l.forEach(function(c){c.load()})}};this.once(o.UNLOCKED,function(){for(this.forEachActiveSound(function(v){v.currentMarker===null&&v.duration===0&&(v.duration=v.tags[0].duration),v.totalDuration=v.tags[0].duration});this.lockedActionsQueue.length;){var l=this.lockedActionsQueue.shift();l.sound[l.prop].apply?l.sound[l.prop].apply(l.sound,l.value||[]):l.sound[l.prop]=l.value}},this),document.body.addEventListener("touchmove",u,!1),document.body.addEventListener("touchend",s,!1)}},onBlur:function(){this.forEachActiveSound(function(i){i.isPlaying&&(this.onBlurPausedSounds.push(i),i.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(i){i.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){h.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(i,n,u){return i.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:i,prop:n,value:u}),!0):!1},setMute:function(i){return this.mute=i,this},mute:{get:function(){return this._mute},set:function(i){this._mute=i,this.forEachActiveSound(function(n){n.updateMute()}),this.emit(o.GLOBAL_MUTE,this,i)}},setVolume:function(i){return this.volume=i,this},volume:{get:function(){return this._volume},set:function(i){this._volume=i,this.forEachActiveSound(function(n){n.updateVolume()}),this.emit(o.GLOBAL_VOLUME,this,i)}}});f.exports=r},56751:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={SoundManagerCreator:t(84191),Events:t(76038),BaseSound:t(25798),BaseSoundManager:t(12486),WebAudioSound:t(96008),WebAudioSoundManager:t(55491),HTML5AudioSound:t(34350),HTML5AudioSoundManager:t(27622),NoAudioSound:t(38662),NoAudioSoundManager:t(17546)}},38662:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(25798),m=t(56694),o=t(6659),a=t(98611),r=t(72283),i=function(){return!1},n=function(){return null},u=function(){return this},s=new m({Extends:o,initialize:function(v,c,g){g===void 0&&(g={}),o.call(this),this.manager=v,this.key=c,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=a({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},g),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:i,updateMarker:i,removeMarker:n,play:i,pause:i,resume:i,stop:i,setMute:u,setVolume:u,setRate:u,setDetune:u,setSeek:u,setLoop:u,setPan:u,applyConfig:n,resetConfig:n,update:r,calculateRate:n,destroy:function(){h.prototype.destroy.call(this)}});f.exports=s},17546:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(12486),m=t(56694),o=t(6659),a=t(38662),r=t(72283),i=new m({Extends:o,initialize:function(u){o.call(this),this.game=u,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(n,u){var s=new a(this,n,u);return this.sounds.push(s),s},addAudioSprite:function(n,u){var s=this.add(n,u);return s.spritemap={},s},get:function(n){return h.prototype.get.call(this,n)},getAll:function(n){return h.prototype.getAll.call(this,n)},play:function(n,u){return!1},playAudioSprite:function(n,u,s){return!1},remove:function(n){return h.prototype.remove.call(this,n)},removeAll:function(){return h.prototype.removeAll.call(this)},removeByKey:function(n){return h.prototype.removeByKey.call(this,n)},stopByKey:function(n){return h.prototype.stopByKey.call(this,n)},onBlur:r,onFocus:r,onGameBlur:r,onGameFocus:r,pauseAll:r,resumeAll:r,stopAll:r,update:r,setRate:r,setDetune:r,setMute:r,setVolume:r,unlock:r,forEachActiveSound:function(n,u){h.prototype.forEachActiveSound.call(this,n,u)},destroy:function(){h.prototype.destroy.call(this)}});f.exports=i},96008:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(25798),m=t(56694),o=t(76038),a=t(72632),r=new m({Extends:h,initialize:function(n,u,s){if(s===void 0&&(s={}),this.audioBuffer=n.game.cache.audio.get(u),!this.audioBuffer)throw new Error('Audio key "'+u+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=n.context.createGain(),this.volumeNode=n.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),n.context.createPanner&&(this.spatialNode=n.context.createPanner(),this.volumeNode.connect(this.spatialNode)),n.context.createStereoPanner?(this.pannerNode=n.context.createStereoPanner(),n.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(n.destination)):n.context.createPanner?this.spatialNode.connect(n.destination):this.volumeNode.connect(n.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,h.call(this,n,u,s)},play:function(i,n){return h.prototype.play.call(this,i,n)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(o.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!h.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(o.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!h.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(o.RESUME,this),!0)},stop:function(){return h.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(o.STOP,this),!0):!1},createAndStartBufferSource:function(){var i=this.currentConfig.seek,n=this.currentConfig.delay,u=this.manager.context.currentTime+n,s=(this.currentMarker?this.currentMarker.start:0)+i,l=this.duration-i;this.playTime=u-i,this.startTime=u,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,u),Math.max(0,s),Math.max(0,l)),this.resetConfig()},createAndStartLoopBufferSource:function(){var i=this.getLoopTime(),n=this.currentMarker?this.currentMarker.start:0,u=this.duration;this.loopTime=i,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,i),Math.max(0,n),Math.max(0,u))},createBufferSource:function(){var i=this,n=this.manager.context.createBufferSource();return n.buffer=this.audioBuffer,n.connect(this.muteNode),n.onended=function(u){u.target===i.source&&(i.currentConfig.loop?i.hasLooped=!0:i.hasEnded=!0)},n},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var i=this.currentConfig.source;if(i&&this.manager.context.createPanner){var n=this.spatialNode;n.panningModel=a(i,"panningModel","equalpower"),n.distanceModel=a(i,"distanceModel","inverse"),n.orientationX.value=a(i,"orientationX",0),n.orientationY.value=a(i,"orientationY",0),n.orientationZ.value=a(i,"orientationZ",-1),n.refDistance=a(i,"refDistance",1),n.maxDistance=a(i,"maxDistance",1e4),n.rolloffFactor=a(i,"rolloffFactor",1),n.coneInnerAngle=a(i,"coneInnerAngle",360),n.coneOuterAngle=a(i,"coneOuterAngle",0),n.coneOuterGain=a(i,"coneOuterGain",0),this.spatialSource=a(i,"follow",null),this.spatialSource||(n.positionX.value=a(i,"x",0),n.positionY.value=a(i,"y",0),n.positionZ.value=a(i,"z",0))}h.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(i){this.spatialNode&&(this.spatialNode.positionX.value=i)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(i){this.spatialNode&&(this.spatialNode.positionY.value=i)}},update:function(){if(this.isPlaying&&this.spatialSource){var i=a(this.spatialSource,"x",null),n=a(this.spatialSource,"y",null);i&&i!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=i),n&&n!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=n)}this.hasEnded?(this.hasEnded=!1,h.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(o.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(o.LOOPED,this))},destroy:function(){this.pendingRemove||(h.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){h.prototype.calculateRate.call(this);var i=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,i),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,i)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var i=0,n=0;n<this.rateUpdates.length;n++){var u=0;n<this.rateUpdates.length-1?u=this.rateUpdates[n+1].time:u=this.manager.context.currentTime-this.playTime,i+=(u-this.rateUpdates[n].time)*this.rateUpdates[n].rate}return i},getLoopTime:function(){for(var i=0,n=0;n<this.rateUpdates.length-1;n++)i+=(this.rateUpdates[n+1].time-this.rateUpdates[n].time)*this.rateUpdates[n].rate;var u=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+u.time+(this.duration-i)/u.rate},rate:{get:function(){return this.currentConfig.rate},set:function(i){this.currentConfig.rate=i,this.calculateRate(),this.emit(o.RATE,this,i)}},setRate:function(i){return this.rate=i,this},detune:{get:function(){return this.currentConfig.detune},set:function(i){this.currentConfig.detune=i,this.calculateRate(),this.emit(o.DETUNE,this,i)}},setDetune:function(i){return this.detune=i,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(i){this.currentConfig.mute=i,this.muteNode.gain.setValueAtTime(i?0:1,0),this.emit(o.MUTE,this,i)}},setMute:function(i){return this.mute=i,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(i){this.currentConfig.volume=i,this.volumeNode.gain.setValueAtTime(i,0),this.emit(o.VOLUME,this,i)}},setVolume:function(i){return this.volume=i,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(i){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(i=Math.min(Math.max(0,i),this.duration),this.currentConfig.seek=i,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(o.SEEK,this,i))}},setSeek:function(i){return this.seek=i,this},loop:{get:function(){return this.currentConfig.loop},set:function(i){this.currentConfig.loop=i,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),i&&this.createAndStartLoopBufferSource()),this.emit(o.LOOP,this,i)}},setLoop:function(i){return this.loop=i,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(i){this.currentConfig.pan=i,this.pannerNode&&this.pannerNode.pan.setValueAtTime(i,this.manager.context.currentTime),this.emit(o.PAN,this,i)}},setPan:function(i){return this.pan=i,this}});f.exports=r},55491:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82329),m=t(12486),o=t(56694),a=t(76038),r=t(97081),i=t(96008),n=t(72632),u=new o({Extends:m,initialize:function(l){this.context=this.createAudioContext(l),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),m.call(this,l),this.locked&&l.isBooted?this.unlock():l.events.once(r.BOOT,this.unlock,this)},createAudioContext:function(s){var l=s.config.audio;if(l.context)return l.context.resume(),l.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(s){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=s,this.masterMuteNode=s.createGain(),this.masterVolumeNode=s.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(s.destination),this.destination=this.masterMuteNode,this},add:function(s,l){var v=new i(this,s,l);return this.sounds.push(v),v},decodeAudio:function(s,l){var v;Array.isArray(s)?v=s:v=[{key:s,data:l}];for(var c=this.game.cache.audio,g=v.length,y=0;y<v.length;y++){var E=v[y],C=E.key,T=E.data;typeof T=="string"&&(T=h(T));var A=(function(M,w){c.add(M,w),this.emit(a.DECODED,M),g--,g===0&&this.emit(a.DECODED_ALL)}).bind(this,C),P=(function(M,w){console.error("Error decoding audio: "+M+" - ",w?w.message:""),g--,g===0&&this.emit(a.DECODED_ALL)}).bind(this,C);this.context.decodeAudioData(T,A,P)}},setListenerPosition:function(s,l){return s===void 0&&(s=this.game.scale.width/2),l===void 0&&(l=this.game.scale.height/2),this.listenerPosition.set(s,l),this},unlock:function(){var s=this,l=document.body,v=function c(){if(s.context&&l){var g=l.removeEventListener;s.context.resume().then(function(){g("touchstart",c),g("touchend",c),g("click",c),g("keydown",c),s.unlocked=!0},function(){g("touchstart",c),g("touchend",c),g("click",c),g("keydown",c)})}};l&&(l.addEventListener("touchstart",v,!1),l.addEventListener("touchend",v,!1),l.addEventListener("click",v,!1),l.addEventListener("keydown",v,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var s=this.context;s&&!this.locked&&(s.state==="suspended"||s.state==="interrupted")&&s.resume()},update:function(s,l){var v=this.context.listener;if(v&&v.positionX!==void 0){var c=n(this.listenerPosition,"x",null),g=n(this.listenerPosition,"y",null);c&&c!==this._spatialx&&(this._spatialx=v.positionX.value=c),g&&g!==this._spatialy&&(this._spatialy=v.positionY.value=g)}m.prototype.update.call(this,s,l),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var s=this;this.context.close().then(function(){s.context=null})}m.prototype.destroy.call(this)},setMute:function(s){return this.mute=s,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(s){this.masterMuteNode.gain.setValueAtTime(s?0:1,0),this.emit(a.GLOBAL_MUTE,this,s)}},setVolume:function(s){return this.volume=s,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(s){this.masterVolumeNode.gain.setValueAtTime(s,0),this.emit(a.GLOBAL_VOLUME,this,s)}}});f.exports=u},71207:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(59959),m=t(56694),o=t(72283),a=t(17922),r=new m({initialize:function(n){this.parent=n,this.list=[],this.position=0,this.addCallback=o,this.removeCallback=o,this._sortKey=""},add:function(i,n){return n?h.Add(this.list,i):h.Add(this.list,i,0,this.addCallback,this)},addAt:function(i,n,u){return u?h.AddAt(this.list,i,n):h.AddAt(this.list,i,n,0,this.addCallback,this)},getAt:function(i){return this.list[i]},getIndex:function(i){return this.list.indexOf(i)},sort:function(i,n){return i?(n===void 0&&(n=function(u,s){return u[i]-s[i]}),a(this.list,n),this):this},getByName:function(i){return h.GetFirst(this.list,"name",i)},getRandom:function(i,n){return h.GetRandom(this.list,i,n)},getFirst:function(i,n,u,s){return h.GetFirst(this.list,i,n,u,s)},getAll:function(i,n,u,s){return h.GetAll(this.list,i,n,u,s)},count:function(i,n){return h.CountAllMatching(this.list,i,n)},swap:function(i,n){h.Swap(this.list,i,n)},moveTo:function(i,n){return h.MoveTo(this.list,i,n)},moveAbove:function(i,n){return h.MoveAbove(this.list,i,n)},moveBelow:function(i,n){return h.MoveBelow(this.list,i,n)},remove:function(i,n){return n?h.Remove(this.list,i):h.Remove(this.list,i,this.removeCallback,this)},removeAt:function(i,n){return n?h.RemoveAt(this.list,i):h.RemoveAt(this.list,i,this.removeCallback,this)},removeBetween:function(i,n,u){return u?h.RemoveBetween(this.list,i,n):h.RemoveBetween(this.list,i,n,this.removeCallback,this)},removeAll:function(i){for(var n=this.list.length;n--;)this.remove(this.list[n],i);return this},bringToTop:function(i){return h.BringToTop(this.list,i)},sendToBack:function(i){return h.SendToBack(this.list,i)},moveUp:function(i){return h.MoveUp(this.list,i),i},moveDown:function(i){return h.MoveDown(this.list,i),i},reverse:function(){return this.list.reverse(),this},shuffle:function(){return h.Shuffle(this.list),this},replace:function(i,n){return h.Replace(this.list,i,n)},exists:function(i){return this.list.indexOf(i)>-1},setAll:function(i,n,u,s){return h.SetAll(this.list,i,n,u,s),this},each:function(i,n){for(var u=[null],s=2;s<arguments.length;s++)u.push(arguments[s]);for(s=0;s<this.list.length;s++)u[0]=this.list[s],i.apply(n,u)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});f.exports=r},33885:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=new h({initialize:function(a){if(this.entries={},this.size=0,Array.isArray(a))for(var r=0;r<a.length;r++)this.set(a[r][0],a[r][1])},set:function(o,a){return this.has(o)||this.size++,this.entries[o]=a,this},get:function(o){if(this.has(o))return this.entries[o]},getArray:function(){var o=[],a=this.entries;for(var r in a)o.push(a[r]);return o},has:function(o){return this.entries.hasOwnProperty(o)},delete:function(o){return this.has(o)&&(delete this.entries[o],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(o){delete this.entries[o]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var o=[],a=this.entries;for(var r in a)o.push(a[r]);return o},dump:function(){var o=this.entries;console.group("Map");for(var a in o)console.log(a,o[a]);console.groupEnd()},each:function(o){var a=this.entries;for(var r in a)if(o(r,a[r])===!1)break;return this},contains:function(o){var a=this.entries;for(var r in a)if(a[r]===o)return!0;return!1},merge:function(o,a){a===void 0&&(a=!1);var r=this.entries,i=o.entries;for(var n in i)r.hasOwnProperty(n)&&a?r[n]=i[n]:this.set(n,i[n]);return this}});f.exports=m},74623:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(6659),o=t(36716),a=new h({Extends:m,initialize:function(){m.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(r){return this._active.indexOf(r)>-1},isPending:function(r){return this._toProcess>0&&this._pending.indexOf(r)>-1},isDestroying:function(r){return this._destroy.indexOf(r)>-1},add:function(r){return this.checkQueue&&this.isActive()&&!this.isDestroying()||this.isPending()||(this._pending.push(r),this._toProcess++),r},remove:function(r){if(this.isPending(r)){var i=this._pending,n=i.indexOf(r);n!==-1&&i.splice(n,1)}else this.isActive(r)&&(this._destroy.push(r),this._toProcess++);return r},removeAll:function(){for(var r=this._active,i=this._destroy,n=r.length;n--;)i.push(r[n]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var r=this._destroy,i=this._active,n,u;for(n=0;n<r.length;n++){u=r[n];var s=i.indexOf(u);s!==-1&&(i.splice(s,1),this.emit(o.PROCESS_QUEUE_REMOVE,u))}for(r.length=0,r=this._pending,n=0;n<r.length;n++)u=r[n],(!this.checkQueue||this.checkQueue&&i.indexOf(u)===-1)&&(i.push(u),this.emit(o.PROCESS_QUEUE_ADD,u));return r.length=0,this._toProcess=0,i},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});f.exports=a},68687:(f,S,t)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(53466);function m(T){if(!(this instanceof m))return new m(T);this._maxEntries=Math.max(4,T||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}m.prototype={all:function(){return this._all(this.data,[])},search:function(T){var A=this.data,P=[],M=this.toBBox;if(!y(T,A))return P;for(var w=[],L,F,D,N;A;){for(L=0,F=A.children.length;L<F;L++)D=A.children[L],N=A.leaf?M(D):D,y(T,N)&&(A.leaf?P.push(D):g(T,N)?this._all(D,P):w.push(D));A=w.pop()}return P},collides:function(T){var A=this.data,P=this.toBBox;if(!y(T,A))return!1;for(var M=[],w,L,F,D;A;){for(w=0,L=A.children.length;w<L;w++)if(F=A.children[w],D=A.leaf?P(F):F,y(T,D)){if(A.leaf||g(T,D))return!0;M.push(F)}A=M.pop()}return!1},load:function(T){if(!(T&&T.length))return this;if(T.length<this._minEntries){for(var A=0,P=T.length;A<P;A++)this.insert(T[A]);return this}var M=this._build(T.slice(),0,T.length-1,0);if(!this.data.children.length)this.data=M;else if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(this.data.height<M.height){var w=this.data;this.data=M,M=w}this._insert(M,this.data.height-M.height-1,!0)}return this},insert:function(T){return T&&this._insert(T,this.data.height-1),this},clear:function(){return this.data=E([]),this},remove:function(T,A){if(!T)return this;for(var P=this.data,M=this.toBBox(T),w=[],L=[],F,D,N,B;P||w.length;){if(P||(P=w.pop(),D=w[w.length-1],F=L.pop(),B=!0),P.leaf&&(N=o(T,P.children,A),N!==-1))return P.children.splice(N,1),w.push(P),this._condense(w),this;!B&&!P.leaf&&g(P,M)?(w.push(P),L.push(F),F=0,D=P,P=P.children[0]):D?(F++,P=D.children[F],B=!1):P=null}return this},toBBox:function(T){return T},compareMinX:n,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(T){return this.data=T,this},_all:function(T,A){for(var P=[];T;)T.leaf?A.push.apply(A,T.children):P.push.apply(P,T.children),T=P.pop();return A},_build:function(T,A,P,M){var w=P-A+1,L=this._maxEntries,F;if(w<=L)return F=E(T.slice(A,P+1)),a(F,this.toBBox),F;M||(M=Math.ceil(Math.log(w)/Math.log(L)),L=Math.ceil(w/Math.pow(L,M-1))),F=E([]),F.leaf=!1,F.height=M;var D=Math.ceil(w/L),N=D*Math.ceil(Math.sqrt(L)),B,b,W,Y;for(C(T,A,P,N,this.compareMinX),B=A;B<=P;B+=N)for(W=Math.min(B+N-1,P),C(T,B,W,D,this.compareMinY),b=B;b<=W;b+=D)Y=Math.min(b+D-1,W),F.children.push(this._build(T,b,Y,M-1));return a(F,this.toBBox),F},_chooseSubtree:function(T,A,P,M){for(var w,L,F,D,N,B,b,W;M.push(A),!(A.leaf||M.length-1===P);){for(b=W=1/0,w=0,L=A.children.length;w<L;w++)F=A.children[w],N=s(F),B=v(T,F)-N,B<W?(W=B,b=N<b?N:b,D=F):B===W&&N<b&&(b=N,D=F);A=D||A.children[0]}return A},_insert:function(T,A,P){var M=this.toBBox,w=P?T:M(T),L=[],F=this._chooseSubtree(w,this.data,A,L);for(F.children.push(T),i(F,w);A>=0&&L[A].children.length>this._maxEntries;)this._split(L,A),A--;this._adjustParentBBoxes(w,L,A)},_split:function(T,A){var P=T[A],M=P.children.length,w=this._minEntries;this._chooseSplitAxis(P,w,M);var L=this._chooseSplitIndex(P,w,M),F=E(P.children.splice(L,P.children.length-L));F.height=P.height,F.leaf=P.leaf,a(P,this.toBBox),a(F,this.toBBox),A?T[A-1].children.push(F):this._splitRoot(P,F)},_splitRoot:function(T,A){this.data=E([T,A]),this.data.height=T.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(T,A,P){var M,w,L,F,D,N,B,b;for(N=B=1/0,M=A;M<=P-A;M++)w=r(T,0,M,this.toBBox),L=r(T,M,P,this.toBBox),F=c(w,L),D=s(w)+s(L),F<N?(N=F,b=M,B=D<B?D:B):F===N&&D<B&&(B=D,b=M);return b},_chooseSplitAxis:function(T,A,P){var M=T.leaf?this.compareMinX:n,w=T.leaf?this.compareMinY:u,L=this._allDistMargin(T,A,P,M),F=this._allDistMargin(T,A,P,w);L<F&&T.children.sort(M)},_allDistMargin:function(T,A,P,M){T.children.sort(M);var w=this.toBBox,L=r(T,0,A,w),F=r(T,P-A,P,w),D=l(L)+l(F),N,B;for(N=A;N<P-A;N++)B=T.children[N],i(L,T.leaf?w(B):B),D+=l(L);for(N=P-A-1;N>=A;N--)B=T.children[N],i(F,T.leaf?w(B):B),D+=l(F);return D},_adjustParentBBoxes:function(T,A,P){for(var M=P;M>=0;M--)i(A[M],T)},_condense:function(T){for(var A=T.length-1,P;A>=0;A--)T[A].children.length===0?A>0?(P=T[A-1].children,P.splice(P.indexOf(T[A]),1)):this.clear():a(T[A],this.toBBox)},compareMinX:function(T,A){return T.left-A.left},compareMinY:function(T,A){return T.top-A.top},toBBox:function(T){return{minX:T.left,minY:T.top,maxX:T.right,maxY:T.bottom}}};function o(T,A,P){if(!P)return A.indexOf(T);for(var M=0;M<A.length;M++)if(P(T,A[M]))return M;return-1}function a(T,A){r(T,0,T.children.length,A,T)}function r(T,A,P,M,w){w||(w=E(null)),w.minX=1/0,w.minY=1/0,w.maxX=-1/0,w.maxY=-1/0;for(var L=A,F;L<P;L++)F=T.children[L],i(w,T.leaf?M(F):F);return w}function i(T,A){return T.minX=Math.min(T.minX,A.minX),T.minY=Math.min(T.minY,A.minY),T.maxX=Math.max(T.maxX,A.maxX),T.maxY=Math.max(T.maxY,A.maxY),T}function n(T,A){return T.minX-A.minX}function u(T,A){return T.minY-A.minY}function s(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function l(T){return T.maxX-T.minX+(T.maxY-T.minY)}function v(T,A){return(Math.max(A.maxX,T.maxX)-Math.min(A.minX,T.minX))*(Math.max(A.maxY,T.maxY)-Math.min(A.minY,T.minY))}function c(T,A){var P=Math.max(T.minX,A.minX),M=Math.max(T.minY,A.minY),w=Math.min(T.maxX,A.maxX),L=Math.min(T.maxY,A.maxY);return Math.max(0,w-P)*Math.max(0,L-M)}function g(T,A){return T.minX<=A.minX&&T.minY<=A.minY&&A.maxX<=T.maxX&&A.maxY<=T.maxY}function y(T,A){return A.minX<=T.maxX&&A.minY<=T.maxY&&A.maxX>=T.minX&&A.maxY>=T.minY}function E(T){return{children:T,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function C(T,A,P,M,w){for(var L=[A,P],F;L.length;)P=L.pop(),A=L.pop(),!(P-A<=M)&&(F=A+Math.ceil((P-A)/M/2)*M,h(T,F,A,P,w),L.push(A,F,F,P))}f.exports=m},58403:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=new h({initialize:function(a){if(this.entries=[],Array.isArray(a))for(var r=0;r<a.length;r++)this.set(a[r])},set:function(o){return this.entries.indexOf(o)===-1&&this.entries.push(o),this},get:function(o,a){for(var r=0;r<this.entries.length;r++){var i=this.entries[r];if(i[o]===a)return i}},getArray:function(){return this.entries.slice(0)},delete:function(o){var a=this.entries.indexOf(o);return a>-1&&this.entries.splice(a,1),this},dump:function(){console.group("Set");for(var o=0;o<this.entries.length;o++){var a=this.entries[o];console.log(a)}console.groupEnd()},each:function(o,a){var r,i=this.entries.slice(),n=i.length;if(a)for(r=0;r<n&&o.call(a,i[r],r)!==!1;r++);else for(r=0;r<n&&o(i[r],r)!==!1;r++);return this},iterate:function(o,a){var r,i=this.entries.length;if(a)for(r=0;r<i&&o.call(a,this.entries[r],r)!==!1;r++);else for(r=0;r<i&&o(this.entries[r],r)!==!1;r++);return this},iterateLocal:function(o){var a,r=[];for(a=1;a<arguments.length;a++)r.push(arguments[a]);var i=this.entries.length;for(a=0;a<i;a++){var n=this.entries[a];n[o].apply(n,r)}return this},clear:function(){return this.entries.length=0,this},contains:function(o){return this.entries.indexOf(o)>-1},union:function(o){var a=new m;return o.entries.forEach(function(r){a.set(r)}),this.entries.forEach(function(r){a.set(r)}),a},intersect:function(o){var a=new m;return this.entries.forEach(function(r){o.contains(r)&&a.set(r)}),a},difference:function(o){var a=new m;return this.entries.forEach(function(r){o.contains(r)||a.set(r)}),a},size:{get:function(){return this.entries.length},set:function(o){return o<this.entries.length?this.entries.length=o:this.entries.length}}});f.exports=m},90881:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82897),m=t(56694),o=t(84314),a=t(93736),r=new m({initialize:function(n,u,s,l){n===void 0&&(n=0),u===void 0&&(u=n),s===void 0&&(s=0),l===void 0&&(l=null),this._width=n,this._height=u,this._parent=l,this.aspectMode=s,this.aspectRatio=u===0?1:n/u,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new a},setAspectMode:function(i){return i===void 0&&(i=0),this.aspectMode=i,this.setSize(this._width,this._height)},setSnap:function(i,n){return i===void 0&&(i=0),n===void 0&&(n=i),this.snapTo.set(i,n),this.setSize(this._width,this._height)},setParent:function(i){return this._parent=i,this.setSize(this._width,this._height)},setMin:function(i,n){return i===void 0&&(i=0),n===void 0&&(n=i),this.minWidth=h(i,0,this.maxWidth),this.minHeight=h(n,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(i,n){return i===void 0&&(i=Number.MAX_VALUE),n===void 0&&(n=i),this.maxWidth=h(i,this.minWidth,Number.MAX_VALUE),this.maxHeight=h(n,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(i,n){switch(i===void 0&&(i=0),n===void 0&&(n=i),this.aspectMode){case r.NONE:this._width=this.getNewWidth(o(i,this.snapTo.x)),this._height=this.getNewHeight(o(n,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case r.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(o(i,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case r.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(o(n,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case r.FIT:this.constrain(i,n,!0);break;case r.ENVELOP:this.constrain(i,n,!1);break}return this},setAspectRatio:function(i){return this.aspectRatio=i,this.setSize(this._width,this._height)},resize:function(i,n){return this._width=this.getNewWidth(o(i,this.snapTo.x)),this._height=this.getNewHeight(o(n,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(i,n){return n===void 0&&(n=!0),i=h(i,this.minWidth,this.maxWidth),n&&this._parent&&i>this._parent.width&&(i=Math.max(this.minWidth,this._parent.width)),i},getNewHeight:function(i,n){return n===void 0&&(n=!0),i=h(i,this.minHeight,this.maxHeight),n&&this._parent&&i>this._parent.height&&(i=Math.max(this.minHeight,this._parent.height)),i},constrain:function(i,n,u){i===void 0&&(i=0),n===void 0&&(n=i),u===void 0&&(u=!0),i=this.getNewWidth(i),n=this.getNewHeight(n);var s=this.snapTo,l=n===0?1:i/n;return u&&this.aspectRatio>l||!u&&this.aspectRatio<l?(i=o(i,s.x),n=i/this.aspectRatio,s.y>0&&(n=o(n,s.y),i=n*this.aspectRatio)):(u&&this.aspectRatio<l||!u&&this.aspectRatio>l)&&(n=o(n,s.y),i=n*this.aspectRatio,s.x>0&&(i=o(i,s.x),n=i*(1/this.aspectRatio))),this._width=i,this._height=n,this},fitTo:function(i,n){return this.constrain(i,n,!0)},envelop:function(i,n){return this.constrain(i,n,!1)},setWidth:function(i){return this.setSize(i,this._height)},setHeight:function(i){return this.setSize(this._width,i)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(i){i&&i.style&&(i.style.width=this._width+"px",i.style.height=this._height+"px")},copy:function(i){return i.setAspectMode(this.aspectMode),i.aspectRatio=this.aspectRatio,i.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(i){this.setSize(i,this._height)}},height:{get:function(){return this._height},set:function(i){this.setSize(this._width,i)}}});r.NONE=0,r.WIDTH_CONTROLS_HEIGHT=1,r.HEIGHT_CONTROLS_WIDTH=2,r.FIT=3,r.ENVELOP=4,f.exports=r},94160:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="add"},95393:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="remove"},36716:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={PROCESS_QUEUE_ADD:t(94160),PROCESS_QUEUE_REMOVE:t(95393)}},20010:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Events:t(36716),List:t(71207),Map:t(33885),ProcessQueue:t(74623),RTree:t(68687),Set:t(58403),Size:t(90881)}},17487:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(82897),o=t(27119),a=t(86459),r=t(28621),i=t(31673),n=new h({Extends:i,initialize:function(s,l,v,c,g){i.call(this,s,l,v,c,g),this.add("__BASE",0,0,0,c,g),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=c,this.height=g,this.imageData=this.context.getImageData(0,0,c,g),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===a.WEBGL&&this.refresh(),this},draw:function(u,s,l,v){return v===void 0&&(v=!0),this.context.drawImage(l,u,s),v&&this.update(),this},drawFrame:function(u,s,l,v,c){l===void 0&&(l=0),v===void 0&&(v=0),c===void 0&&(c=!0);var g=this.manager.getFrame(u,s);if(g){var y=g.canvasData,E=g.cutWidth,C=g.cutHeight,T=g.source.resolution;this.context.drawImage(g.source.image,y.x,y.y,E,C,l,v,E/T,C/T),c&&this.update()}return this},setPixel:function(u,s,l,v,c,g){g===void 0&&(g=255),u=Math.abs(Math.floor(u)),s=Math.abs(Math.floor(s));var y=this.getIndex(u,s);if(y>-1){var E=this.context.getImageData(u,s,1,1);E.data[0]=l,E.data[1]=v,E.data[2]=c,E.data[3]=g,this.context.putImageData(E,u,s)}return this},putData:function(u,s,l,v,c,g,y){return v===void 0&&(v=0),c===void 0&&(c=0),g===void 0&&(g=u.width),y===void 0&&(y=u.height),this.context.putImageData(u,s,l,v,c,g,y),this},getData:function(u,s,l,v){u=m(Math.floor(u),0,this.width-1),s=m(Math.floor(s),0,this.height-1),l=m(l,1,this.width-u),v=m(v,1,this.height-s);var c=this.context.getImageData(u,s,l,v);return c},getPixel:function(u,s,l){l||(l=new o);var v=this.getIndex(u,s);if(v>-1){var c=this.data,g=c[v+0],y=c[v+1],E=c[v+2],C=c[v+3];l.setTo(g,y,E,C)}return l},getPixels:function(u,s,l,v){u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=this.width),v===void 0&&(v=l),u=Math.abs(Math.round(u)),s=Math.abs(Math.round(s));for(var c=m(u,0,this.width),g=m(u+l,0,this.width),y=m(s,0,this.height),E=m(s+v,0,this.height),C=new o,T=[],A=y;A<E;A++){for(var P=[],M=c;M<g;M++)C=this.getPixel(M,A,C),P.push({x:M,y:A,color:C.color,alpha:C.alphaGL});T.push(P)}return T},getIndex:function(u,s){return u=Math.abs(Math.round(u)),s=Math.abs(Math.round(s)),u<this.width&&s<this.height?(u+s*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(u,s,l,v,c){return u===void 0&&(u=0),s===void 0&&(s=0),l===void 0&&(l=this.width),v===void 0&&(v=this.height),c===void 0&&(c=!0),this.context.clearRect(u,s,l,v),c&&this.update(),this},setSize:function(u,s){return s===void 0&&(s=u),(u!==this.width||s!==this.height)&&(this.canvas.width=u,this.canvas.height=s,this._source.width=u,this._source.height=s,this._source.isPowerOf2=r(u,s),this.frames.__BASE.setSize(u,s,0,0),this.width=u,this.height=s,this.refresh()),this},destroy:function(){i.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});f.exports=n},845:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(95723),m=t(51052),o=t(61068),a=t(56694),r=t(86459),i=t(82047),n=t(72632),u=t(65641),s=t(37410),l=t(31673),v=t(75512),c=new a({Extends:l,initialize:function(y,E,C,T){C===void 0&&(C=256),T===void 0&&(T=256),this.type="DynamicTexture";var A=y.game.renderer,P=A&&A.type===r.CANVAS,M=P?o.create2D(this,C,T):[this];l.call(this,y,E,M,C,T),this.add("__BASE",0,0,0,C,T),this.renderer=A,this.isDrawing=!1,this.canvas=P?M:null,this.context=P?M.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new m(0,0,C,T).setScene(y.game.scene.systemScene,!1),this.renderTarget=P?null:new s(A,C,T,1,0,!1,!0,!0,!1),this.pipeline=P?null:A.pipelines.get(u.SINGLE_PIPELINE),this.setSize(C,T)},setSize:function(g,y){y===void 0&&(y=g);var E=this.get(),C=E.source;if(g!==this.width||y!==this.height){this.canvas&&(this.canvas.width=g,this.canvas.height=y);var T=this.renderTarget;T&&(T.resize(g,y),E.glTexture=T.texture,C.isRenderTexture=!0,C.isGLTexture=!0,C.glTexture=T.texture,C.glTexture.flipY=!0),this.camera.setSize(g,y),C.width=g,C.height=y,E.setSize(g,y),this.width=g,this.height=y}else{var A=this.getSourceImage();E.cutX+g>A.width&&(g=A.width-E.cutX),E.cutY+y>A.height&&(y=A.height-E.cutY),E.setSize(g,y,E.cutX,E.cutY)}return this},setIsSpriteTexture:function(g){return this.isSpriteTexture=g,this},fill:function(g,y,E,C,T,A){var P=this.camera,M=this.renderer;y===void 0&&(y=1),E===void 0&&(E=0),C===void 0&&(C=0),T===void 0&&(T=this.width),A===void 0&&(A=this.height);var w=g>>16&255,L=g>>8&255,F=g&255,D=this.renderTarget;if(P.preRender(),D){D.bind(!0);var N=this.pipeline.manager.set(this.pipeline),B=M.width/D.width,b=M.height/D.height;N.drawFillRect(E*B,C*b,T*B,A*b,v.getTintFromFloats(F/255,L/255,w/255,1),y),D.unbind(!0)}else{var W=this.context;M.setContext(W),W.globalCompositeOperation="source-over",W.fillStyle="rgba("+w+","+L+","+F+","+y+")",W.fillRect(E,C,T,A),M.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var g=this.context,y=this.renderTarget;y?y.clear():g&&(g.save(),g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,this.width,this.height),g.restore()),this.dirty=!1}return this},stamp:function(g,y,E,C,T){E===void 0&&(E=0),C===void 0&&(C=0);var A=n(T,"alpha",1),P=n(T,"tint",16777215),M=n(T,"angle",0),w=n(T,"rotation",0),L=n(T,"scale",1),F=n(T,"scaleX",L),D=n(T,"scaleY",L),N=n(T,"originX",.5),B=n(T,"originY",.5),b=n(T,"blendMode",0),W=n(T,"erase",!1),Y=n(T,"skipBatch",!1),K=this.manager.resetStamp(A,P);return K.setAngle(0),M!==0?K.setAngle(M):w!==0&&K.setRotation(w),K.setScale(F,D),K.setTexture(g,y),K.setOrigin(N,B),K.setBlendMode(b),W&&(this._eraseMode=!0),Y?this.batchGameObject(K,E,C):this.draw(K,E,C),W&&(this._eraseMode=!1),this},erase:function(g,y,E){return this._eraseMode=!0,this.draw(g,y,E),this._eraseMode=!1,this},draw:function(g,y,E,C,T){return this.beginDraw(),this.batchDraw(g,y,E,C,T),this.endDraw(),this},drawFrame:function(g,y,E,C,T,A){return this.beginDraw(),this.batchDrawFrame(g,y,E,C,T,A),this.endDraw(),this},repeat:function(g,y,E,C,T,A,P,M,w){if(E===void 0&&(E=0),C===void 0&&(C=0),T===void 0&&(T=this.width),A===void 0&&(A=this.height),P===void 0&&(P=1),M===void 0&&(M=16777215),w===void 0&&(w=!1),g instanceof i?y=g:y=this.manager.getFrame(g,y),!y)return this;var L=this.manager.resetStamp(P,M);L.setFrame(y),L.setOrigin(0);var F=y.width,D=y.height;T=Math.floor(T),A=Math.floor(A);var N=Math.ceil(T/F),B=Math.ceil(A/D),b=N*F-T,W=B*D-A;b>0&&(b=F-b),W>0&&(W=D-W),E<0&&(N+=Math.ceil(Math.abs(E)/F)),C<0&&(B+=Math.ceil(Math.abs(C)/D));var Y=E,K=C,G=!1,z=this.manager.stampCrop.setTo(0,0,F,D);w||this.beginDraw();for(var O=0;O<B;O++){if(K+D<0){K+=D;continue}for(var V=0;V<N;V++){if(G=!1,Y+F<0){Y+=F;continue}else Y<0&&(G=!0,z.width=F+Y,z.x=F-z.width);K<0&&(G=!0,z.height=D+K,z.y=D-z.height),b>0&&V===N-1&&(G=!0,z.width=b),W>0&&O===B-1&&(G=!0,z.height=W),G&&L.setCrop(z),this.batchGameObject(L,Y,K),L.isCropped=!1,z.setTo(0,0,F,D),Y+=F}Y=E,K+=D}return w||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var g=this.camera,y=this.renderer,E=this.renderTarget;g.preRender(),E?y.beginCapture(E.width,E.height):y.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(g,y,E,C,T){return Array.isArray(g)||(g=[g]),this.batchList(g,y,E,C,T),this},batchDrawFrame:function(g,y,E,C,T,A){E===void 0&&(E=0),C===void 0&&(C=0),T===void 0&&(T=1),A===void 0&&(A=16777215);var P=this.manager.getFrame(g,y);return P&&(this.renderTarget?this.pipeline.batchTextureFrame(P,E,C,A,T,this.camera.matrix,null):this.batchTextureFrame(P,E,C,T,A)),this},endDraw:function(g){if(g===void 0&&(g=this._eraseMode),this.isDrawing){var y=this.renderer,E=this.renderTarget;if(E){var C=y.endCapture(),T=y.pipelines.setUtility();T.blitFrame(C,E,1,!1,!1,g,this.isSpriteTexture),y.resetScissor(),y.resetViewport()}else y.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(g,y,E,C,T){var A=g.length;if(A!==0)for(var P=0;P<A;P++){var M=g[P];!M||M===this||(M.renderWebGL||M.renderCanvas?this.batchGameObject(M,y,E):M.isParent||M.list?this.batchGroup(M.getChildren(),y,E):typeof M=="string"?this.batchTextureFrameKey(M,null,y,E,C,T):M instanceof i?this.batchTextureFrame(M,y,E,C,T):Array.isArray(M)&&this.batchList(M,y,E,C,T))}},batchGroup:function(g,y,E){y===void 0&&(y=0),E===void 0&&(E=0);for(var C=0;C<g.length;C++){var T=g[C];T.willRender(this.camera)&&this.batchGameObject(T,T.x+y,T.y+E)}},batchGameObject:function(g,y,E){y===void 0&&(y=g.x),E===void 0&&(E=g.y);var C=g.x,T=g.y,A=this.camera,P=this.renderer,M=this._eraseMode,w=g.mask;if(g.setPosition(y,E),this.canvas){if(M){var L=g.blendMode;g.blendMode=h.ERASE}w&&w.preRenderCanvas(P,g,A),g.renderCanvas(P,g,A,null),w&&w.postRenderCanvas(P,g,A),M&&(g.blendMode=L)}else P&&(w&&w.preRenderWebGL(P,g,A),M||P.setBlendMode(g.blendMode),g.renderWebGL(P,g,A),w&&w.postRenderWebGL(P,A,this.renderTarget));g.setPosition(C,T)},batchTextureFrameKey:function(g,y,E,C,T,A){var P=this.manager.getFrame(g,y);P&&this.batchTextureFrame(P,E,C,T,A)},batchTextureFrame:function(g,y,E,C,T){y===void 0&&(y=0),E===void 0&&(E=0),C===void 0&&(C=1),T===void 0&&(T=16777215);var A=this.camera.matrix,P=this.renderTarget;if(P)this.pipeline.batchTextureFrame(g,y,E,T,C,A,null);else{var M=this.context,w=g.canvasData,L=g.source.image;M.save(),M.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",M.globalAlpha=C,A.setToContext(M),w.width>0&&w.height>0&&M.drawImage(L,w.x,w.y,w.width,w.height,y,E,w.width,w.height),M.restore()}},snapshotArea:function(g,y,E,C,T,A,P){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,T,!1,g,y,E,C,A,P):this.renderer.snapshotCanvas(this.canvas,T,!1,g,y,E,C,A,P),this},snapshot:function(g,y,E){return this.snapshotArea(0,0,this.width,this.height,g,y,E)},snapshotPixel:function(g,y,E){return this.snapshotArea(g,y,1,1,E,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(g,y,E,C){var T=this.manager.resetStamp();T.setTexture(this),T.setOrigin(0),T.renderWebGL(g,T,E,C)},renderCanvas:function(){},preDestroy:function(){o.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.stamp.destroy(),this.canvas=null,this.context=null,this.renderer=null,this.scene=null}});f.exports=c},82047:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(82897),o=t(98611),a=new h({initialize:function(i,n,u,s,l,v,c){this.texture=i,this.name=n,this.source=i.source[u],this.sourceIndex=u,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(v,c,s,l)},setSize:function(r,i,n,u){n===void 0&&(n=0),u===void 0&&(u=0),this.cutX=n,this.cutY=u,this.cutWidth=r,this.cutHeight=i,this.width=r,this.height=i,this.halfWidth=Math.floor(r*.5),this.halfHeight=Math.floor(i*.5),this.centerX=Math.floor(r/2),this.centerY=Math.floor(i/2);var s=this.data,l=s.cut;l.x=n,l.y=u,l.w=r,l.h=i,l.r=n+r,l.b=u+i,s.sourceSize.w=r,s.sourceSize.h=i,s.spriteSourceSize.w=r,s.spriteSourceSize.h=i,s.radius=.5*Math.sqrt(r*r+i*i);var v=s.drawImage;return v.x=n,v.y=u,v.width=r,v.height=i,this.updateUVs()},setTrim:function(r,i,n,u,s,l){var v=this.data,c=v.spriteSourceSize;return v.trim=!0,v.sourceSize.w=r,v.sourceSize.h=i,c.x=n,c.y=u,c.w=s,c.h=l,c.r=n+s,c.b=u+l,this.x=n,this.y=u,this.width=s,this.height=l,this.halfWidth=s*.5,this.halfHeight=l*.5,this.centerX=Math.floor(s/2),this.centerY=Math.floor(l/2),this.updateUVs()},setCropUVs:function(r,i,n,u,s,l,v){var c=this.cutX,g=this.cutY,y=this.cutWidth,E=this.cutHeight,C=this.realWidth,T=this.realHeight;i=m(i,0,C),n=m(n,0,T),u=m(u,0,C-i),s=m(s,0,T-n);var A=c+i,P=g+n,M=u,w=s,L=this.data;if(L.trim){var F=L.spriteSourceSize;u=m(u,0,y-i),s=m(s,0,E-n);var D=i+u,N=n+s,B=!(F.r<i||F.b<n||F.x>D||F.y>N);if(B){var b=Math.max(F.x,i),W=Math.max(F.y,n),Y=Math.min(F.r,D)-b,K=Math.min(F.b,N)-W;M=Y,w=K,l?A=c+(y-(b-F.x)-Y):A=c+(b-F.x),v?P=g+(E-(W-F.y)-K):P=g+(W-F.y),i=b,n=W,u=Y,s=K}else A=0,P=0,M=0,w=0}else l&&(A=c+(y-i-u)),v&&(P=g+(E-n-s));var G=this.source.width,z=this.source.height;return r.u0=Math.max(0,A/G),r.v0=Math.max(0,P/z),r.u1=Math.min(1,(A+M)/G),r.v1=Math.min(1,(P+w)/z),r.x=i,r.y=n,r.cx=A,r.cy=P,r.cw=M,r.ch=w,r.width=u,r.height=s,r.flipX=l,r.flipY=v,r},updateCropUVs:function(r,i,n){return this.setCropUVs(r,r.x,r.y,r.width,r.height,i,n)},setUVs:function(r,i,n,u,s,l){var v=this.data.drawImage;return v.width=r,v.height=i,this.u0=n,this.v0=u,this.u1=s,this.v1=l,this},updateUVs:function(){var r=this.cutX,i=this.cutY,n=this.cutWidth,u=this.cutHeight,s=this.data.drawImage;s.width=n,s.height=u;var l=this.source.width,v=this.source.height;return this.u0=r/l,this.v0=i/v,this.u1=(r+n)/l,this.v1=(i+u)/v,this},updateUVsInverted:function(){var r=this.source.width,i=this.source.height;return this.u0=(this.cutX+this.cutHeight)/r,this.v0=this.cutY/i,this.u1=this.cutX/r,this.v1=(this.cutY+this.cutWidth)/i,this},clone:function(){var r=new a(this.texture,this.name,this.sourceIndex);return r.cutX=this.cutX,r.cutY=this.cutY,r.cutWidth=this.cutWidth,r.cutHeight=this.cutHeight,r.x=this.x,r.y=this.y,r.width=this.width,r.height=this.height,r.halfWidth=this.halfWidth,r.halfHeight=this.halfHeight,r.centerX=this.centerX,r.centerY=this.centerY,r.rotated=this.rotated,r.data=o(!0,r.data,this.data),r.updateUVs(),r},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});f.exports=a},31673:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(82047),o=t(32547),a='Texture "%s" has no frame "%s"',r=new h({initialize:function(n,u,s,l,v){Array.isArray(s)||(s=[s]),this.manager=n,this.key=u,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var c=0;c<s.length;c++)this.source.push(new o(this,s[c],l,v))},add:function(i,n,u,s,l,v){if(this.has(i))return null;var c=new m(this,i,n,u,s,l,v);return this.frames[i]=c,this.firstFrame==="__BASE"&&(this.firstFrame=i),this.frameTotal++,c},remove:function(i){if(this.has(i)){var n=this.get(i);return n.destroy(),delete this.frames[i],!0}return!1},has:function(i){return this.frames.hasOwnProperty(i)},get:function(i){i||(i=this.firstFrame);var n=this.frames[i];return n||(console.warn(a,this.key,i),n=this.frames[this.firstFrame]),n},getTextureSourceIndex:function(i){for(var n=0;n<this.source.length;n++)if(this.source[n]===i)return n;return-1},getFramesFromTextureSource:function(i,n){n===void 0&&(n=!1);var u=[];for(var s in this.frames)if(!(s==="__BASE"&&!n)){var l=this.frames[s];l.sourceIndex===i&&u.push(l)}return u},getFrameNames:function(i){i===void 0&&(i=!1);var n=Object.keys(this.frames);if(!i){var u=n.indexOf("__BASE");u!==-1&&n.splice(u,1)}return n},getSourceImage:function(i){(i==null||this.frameTotal===1)&&(i="__BASE");var n=this.frames[i];return n?n.source.image:(console.warn(a,this.key,i),this.frames.__BASE.source.image)},getDataSourceImage:function(i){(i==null||this.frameTotal===1)&&(i="__BASE");var n=this.frames[i],u;return n?u=n.sourceIndex:(console.warn(a,this.key,i),u=this.frames.__BASE.sourceIndex),this.dataSource[u].image},setDataSource:function(i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++){var u=this.source[n];this.dataSource.push(new o(this,i[n],u.width,u.height))}},setFilter:function(i){var n;for(n=0;n<this.source.length;n++)this.source[n].setFilter(i);for(n=0;n<this.dataSource.length;n++)this.dataSource[n].setFilter(i)},destroy:function(){var i,n=this.source,u=this.dataSource;for(i=0;i<n.length;i++)n[i]&&n[i].destroy();for(i=0;i<u.length;i++)u[i]&&u[i].destroy();for(var s in this.frames){var l=this.frames[s];l&&l.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});f.exports=r},6237:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61068),m=t(17487),o=t(56694),a=t(27119),r=t(86459),i=t(845),n=t(6659),u=t(38203),s=t(82047),l=t(97081),v=t(52780),c=t(10850),g=t(1539),y=t(42911),E=t(69150),C=t(74118),T=t(31673),A=new o({Extends:n,initialize:function(M){n.call(this),this.game=M,this.name="TextureManager",this.list={},this._tempCanvas=h.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new C,this.silentWarnings=!1,M.events.once(l.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(u.LOAD,this.updatePending,this),this.on(u.ERROR,this.updatePending,this);var P=this.game.config;this.addBase64("__DEFAULT",P.defaultImage),this.addBase64("__MISSING",P.missingImage),this.addBase64("__WHITE",P.whiteImage),this.game.events.once(l.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(u.LOAD),this.off(u.ERROR),this.emit(u.READY),this.stamp=new g(this.game.scene.systemScene).setOrigin(0))},checkKey:function(P){return this.exists(P)?(this.silentWarnings||console.error("Texture key already in use: "+P),!1):!0},remove:function(P){if(typeof P=="string")if(this.exists(P))P=this.get(P);else return this.silentWarnings||console.warn("No texture found matching key: "+P),this;return this.list.hasOwnProperty(P.key)&&(P.destroy(),this.emit(u.REMOVE,P.key),this.emit(u.REMOVE_KEY+P.key)),this},removeKey:function(P){return this.list.hasOwnProperty(P)&&delete this.list[P],this},addBase64:function(P,M){if(this.checkKey(P)){var w=this,L=new Image;L.onerror=function(){w.emit(u.ERROR,P)},L.onload=function(){var F=w.create(P,L);E.Image(F,0),w.emit(u.ADD,P,F),w.emit(u.ADD_KEY+P,F),w.emit(u.LOAD,P,F)},L.src=M}return this},getBase64:function(P,M,w,L){w===void 0&&(w="image/png"),L===void 0&&(L=.92);var F="",D=this.getFrame(P,M);if(D&&(D.source.isRenderTexture||D.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(D){var N=D.canvasData,B=h.create2D(this,N.width,N.height),b=B.getContext("2d",{willReadFrequently:!0});N.width>0&&N.height>0&&b.drawImage(D.source.image,N.x,N.y,N.width,N.height,0,0,N.width,N.height),F=B.toDataURL(w,L),h.remove(B)}return F},addImage:function(P,M,w){var L=null;return this.checkKey(P)&&(L=this.create(P,M),E.Image(L,0),w&&L.setDataSource(w),this.emit(u.ADD,P,L),this.emit(u.ADD_KEY+P,L)),L},addGLTexture:function(P,M,w,L){var F=null;return this.checkKey(P)&&(w===void 0&&(w=M.width),L===void 0&&(L=M.height),F=this.create(P,M,w,L),F.add("__BASE",0,0,0,w,L),this.emit(u.ADD,P,F),this.emit(u.ADD_KEY+P,F)),F},addCompressedTexture:function(P,M,w){var L=null;if(this.checkKey(P)){if(L=this.create(P,M),L.add("__BASE",0,0,0,M.width,M.height),w)if(Array.isArray(w))for(var F=0;F<w.length;F++)E.JSONHash(L,F,w[F]);else E.JSONHash(L,0,w);this.emit(u.ADD,P,L),this.emit(u.ADD_KEY+P,L)}return L},addRenderTexture:function(P,M){var w=null;return this.checkKey(P)&&(w=this.create(P,M),w.add("__BASE",0,0,0,M.width,M.height),this.emit(u.ADD,P,w),this.emit(u.ADD_KEY+P,w)),w},generate:function(P,M){if(this.checkKey(P)){var w=h.create(this,1,1);return M.canvas=w,v(M),this.addCanvas(P,w)}else return null},createCanvas:function(P,M,w){if(M===void 0&&(M=256),w===void 0&&(w=256),this.checkKey(P)){var L=h.create(this,M,w,r.CANVAS,!0);return this.addCanvas(P,L)}return null},addCanvas:function(P,M,w){w===void 0&&(w=!1);var L=null;return w?L=new m(this,P,M,M.width,M.height):this.checkKey(P)&&(L=new m(this,P,M,M.width,M.height),this.list[P]=L,this.emit(u.ADD,P,L),this.emit(u.ADD_KEY+P,L)),L},addDynamicTexture:function(P,M,w){var L=null;return typeof P=="string"&&!this.exists(P)?L=new i(this,P,M,w):(L=P,P=L.key),this.checkKey(P)?(this.list[P]=L,this.emit(u.ADD,P,L),this.emit(u.ADD_KEY+P,L)):L=null,L},addAtlas:function(P,M,w,L){return Array.isArray(w.textures)||Array.isArray(w.frames)?this.addAtlasJSONArray(P,M,w,L):this.addAtlasJSONHash(P,M,w,L)},addAtlasJSONArray:function(P,M,w,L){var F=null;if(M instanceof T?(P=F.key,F=M):this.checkKey(P)&&(F=this.create(P,M)),F){if(Array.isArray(w))for(var D=w.length===1,N=0;N<F.source.length;N++){var B=D?w[0]:w[N];E.JSONArray(F,N,B)}else E.JSONArray(F,0,w);L&&F.setDataSource(L),this.emit(u.ADD,P,F),this.emit(u.ADD_KEY+P,F)}return F},addAtlasJSONHash:function(P,M,w,L){var F=null;if(M instanceof T?(P=F.key,F=M):this.checkKey(P)&&(F=this.create(P,M)),F){if(Array.isArray(w))for(var D=0;D<w.length;D++)E.JSONHash(F,D,w[D]);else E.JSONHash(F,0,w);L&&F.setDataSource(L),this.emit(u.ADD,P,F),this.emit(u.ADD_KEY+P,F)}return F},addAtlasXML:function(P,M,w,L){var F=null;return M instanceof T?(P=F.key,F=M):this.checkKey(P)&&(F=this.create(P,M)),F&&(E.AtlasXML(F,0,w),L&&F.setDataSource(L),this.emit(u.ADD,P,F),this.emit(u.ADD_KEY+P,F)),F},addUnityAtlas:function(P,M,w,L){var F=null;return M instanceof T?(P=F.key,F=M):this.checkKey(P)&&(F=this.create(P,M)),F&&(E.UnityYAML(F,0,w),L&&F.setDataSource(L),this.emit(u.ADD,P,F),this.emit(u.ADD_KEY+P,F)),F},addSpriteSheet:function(P,M,w,L){var F=null;if(M instanceof T?(P=F.key,F=M):this.checkKey(P)&&(F=this.create(P,M)),F){var D=F.source[0].width,N=F.source[0].height;E.SpriteSheet(F,0,0,0,D,N,w),L&&F.setDataSource(L),this.emit(u.ADD,P,F),this.emit(u.ADD_KEY+P,F)}return F},addSpriteSheetFromAtlas:function(P,M){if(!this.checkKey(P))return null;var w=c(M,"atlas",null),L=c(M,"frame",null);if(!(!w||!L)){var F=this.get(w),D=F.get(L);if(D){var N=this.create(P,D.source.image);return D.trimmed?E.SpriteSheetFromAtlas(N,D,M):E.SpriteSheet(N,0,D.cutX,D.cutY,D.cutWidth,D.cutHeight,M),this.emit(u.ADD,P,N),this.emit(u.ADD_KEY+P,N),N}}},create:function(P,M,w,L){var F=null;return this.checkKey(P)&&(F=new T(this,P,M,w,L),this.list[P]=F),F},exists:function(P){return this.list.hasOwnProperty(P)},get:function(P){return P===void 0&&(P="__DEFAULT"),this.list[P]?this.list[P]:P instanceof T?P:P instanceof s?P.texture:this.list.__MISSING},cloneFrame:function(P,M){if(this.list[P])return this.list[P].get(M).clone()},getFrame:function(P,M){if(this.list[P])return this.list[P].get(M)},parseFrame:function(P){if(P){if(typeof P=="string")return this.getFrame(P);if(Array.isArray(P)&&P.length===2)return this.getFrame(P[0],P[1]);if(y(P))return this.getFrame(P.key,P.frame);if(P instanceof T)return P.get();if(P instanceof s)return P}else return},getTextureKeys:function(){var P=[];for(var M in this.list)M!=="__DEFAULT"&&M!=="__MISSING"&&M!=="__WHITE"&&P.push(M);return P},getPixel:function(P,M,w,L){var F=this.getFrame(w,L);if(F){P-=F.x,M-=F.y;var D=F.data.cut;if(P+=D.x,M+=D.y,P>=D.x&&P<D.r&&M>=D.y&&M<D.b){var N=this._tempContext;N.clearRect(0,0,1,1),N.drawImage(F.source.image,P,M,1,1,0,0,1,1);var B=N.getImageData(0,0,1,1);return new a(B.data[0],B.data[1],B.data[2],B.data[3])}}return null},getPixelAlpha:function(P,M,w,L){var F=this.getFrame(w,L);if(F){P-=F.x,M-=F.y;var D=F.data.cut;if(P+=D.x,M+=D.y,P>=D.x&&P<D.r&&M>=D.y&&M<D.b){var N=this._tempContext;N.clearRect(0,0,1,1),N.drawImage(F.source.image,P,M,1,1,0,0,1,1);var B=N.getImageData(0,0,1,1);return B.data[3]}}return null},setTexture:function(P,M,w){return this.list[M]&&(P.texture=this.list[M],P.frame=P.texture.get(w)),P},renameTexture:function(P,M){var w=this.get(P);return w&&P!==M?(w.key=M,this.list[M]=w,delete this.list[P],!0):!1},each:function(P,M){for(var w=[null],L=1;L<arguments.length;L++)w.push(arguments[L]);for(var F in this.list)w[0]=this.list[F],P.apply(M,w)},resetStamp:function(P,M){P===void 0&&(P=1),M===void 0&&(M=16777215);var w=this.stamp;return w.setCrop(),w.setPosition(0),w.setAngle(0),w.setScale(1),w.setAlpha(P),w.setTint(M),w},destroy:function(){for(var P in this.list)this.list[P].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,h.remove(this._tempCanvas)}});f.exports=A},32547:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61068),m=t(56694),o=t(28621),a=t(27394),r=new m({initialize:function(n,u,s,l,v){v===void 0&&(v=!1);var c=n.manager.game;this.renderer=c.renderer,this.texture=n,this.source=u,this.image=u.compressed?null:u,this.compressionAlgorithm=u.compressed?u.format:null,this.resolution=1,this.width=s||u.naturalWidth||u.videoWidth||u.width||0,this.height=l||u.naturalHeight||u.videoHeight||u.height||0,this.scaleMode=a.DEFAULT,this.isCanvas=u instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&u instanceof HTMLVideoElement,this.isRenderTexture=u.type==="RenderTexture"||u.type==="DynamicTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&u instanceof WebGLTexture,this.isPowerOf2=o(this.width,this.height),this.glTexture=null,this.flipY=v,this.init(c)},init:function(i){var n=this.renderer;if(n){var u=this.source;if(n.gl){var s=this.image,l=this.flipY,v=this.width,c=this.height,g=this.scaleMode;this.isCanvas?this.glTexture=n.createCanvasTexture(s,!1,l):this.isVideo?this.glTexture=n.createVideoTexture(s,!1,l):this.isRenderTexture?this.glTexture=n.createTextureFromSource(null,v,c,g):this.isGLTexture?this.glTexture=u:this.compressionAlgorithm?this.glTexture=n.createTextureFromSource(u):this.glTexture=n.createTextureFromSource(s,v,c,g)}else this.isRenderTexture&&(this.image=u.canvas)}i.config.antialias||this.setFilter(1)},setFilter:function(i){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,i),this.scaleMode=i},setFlipY:function(i){return i===void 0&&(i=!0),this.flipY=i,this},update:function(){var i=this.renderer,n=this.image,u=this.flipY,s=i.gl;s&&this.isCanvas?this.glTexture=i.updateCanvasTexture(n,this.glTexture,u):s&&this.isVideo&&(this.glTexture=i.updateVideoTexture(n,this.glTexture,u))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&h.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});f.exports=r},65154:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={LINEAR:0,NEAREST:1};f.exports=S},49644:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="addtexture"},29569:f=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="addtexture-"},60079:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="onerror"},72665:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="onload"},93006:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="ready"},69018:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="removetexture"},85549:f=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="removetexture-"},38203:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={ADD:t(49644),ADD_KEY:t(29569),ERROR:t(60079),LOAD:t(72665),READY:t(93006),REMOVE:t(69018),REMOVE_KEY:t(85549)}},87499:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(98611),m=t(65154),o={CanvasTexture:t(17487),DynamicTexture:t(845),Events:t(38203),FilterMode:m,Frame:t(82047),Parsers:t(69150),Texture:t(31673),TextureManager:t(6237),TextureSource:t(32547)};o=h(!1,o,m),f.exports=o},35082:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){if(!m.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var o=t.source[h];t.add("__BASE",h,0,0,o.width,o.height);for(var a=m.getElementsByTagName("SubTexture"),r,i=0;i<a.length;i++){var n=a[i].attributes,u=n.name.value,s=parseInt(n.x.value,10),l=parseInt(n.y.value,10),v=parseInt(n.width.value,10),c=parseInt(n.height.value,10);if(r=t.add(u,h,s,l,v,c),n.frameX){var g=Math.abs(parseInt(n.frameX.value,10)),y=Math.abs(parseInt(n.frameY.value,10)),E=parseInt(n.frameWidth.value,10),C=parseInt(n.frameHeight.value,10);r.setTrim(v,c,g,y,E,C)}}return t};f.exports=S},83332:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){var m=t.source[h];return t.add("__BASE",h,0,0,m.width,m.height),t};f.exports=S},21560:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){var m=t.source[h];return t.add("__BASE",h,0,0,m.width,m.height),t};f.exports=S},64423:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(32742),m=function(o,a,r){if(!r.frames&&!r.textures){console.warn("Invalid Texture Atlas JSON Array");return}var i=o.source[a];o.add("__BASE",a,0,0,i.width,i.height);for(var n=Array.isArray(r.textures)?r.textures[a].frames:r.frames,u,s=0;s<n.length;s++){var l=n[s];if(u=o.add(l.filename,a,l.frame.x,l.frame.y,l.frame.w,l.frame.h),!u){console.warn("Invalid atlas json, frame already exists: "+l.filename);continue}l.trimmed&&u.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h),l.rotated&&(u.rotated=!0,u.updateUVsInverted());var v=l.anchor||l.pivot;v&&(u.customPivot=!0,u.pivotX=v.x,u.pivotY=v.y),u.customData=h(l)}for(var c in r)c!=="frames"&&(Array.isArray(r[c])?o.customData[c]=r[c].slice(0):o.customData[c]=r[c]);return o};f.exports=m},17264:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(32742),m=function(o,a,r){if(!r.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var i=o.source[a];o.add("__BASE",a,0,0,i.width,i.height);var n=r.frames,u;for(var s in n)if(n.hasOwnProperty(s)){var l=n[s];if(u=o.add(s,a,l.frame.x,l.frame.y,l.frame.w,l.frame.h),!u){console.warn("Invalid atlas json, frame already exists: "+s);continue}l.trimmed&&u.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h),l.rotated&&(u.rotated=!0,u.updateUVsInverted());var v=l.anchor||l.pivot;v&&(u.customPivot=!0,u.pivotX=v.x,u.pivotY=v.y),u.customData=h(l)}for(var c in r)c!=="frames"&&(Array.isArray(r[c])?o.customData[c]=r[c].slice(0):o.customData[c]=r[c]);return o};f.exports=m},67409:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var h=[171,75,84,88,32,49,49,187,13,10,26,10],m,o=new Uint8Array(t,0,12);for(m=0;m<o.length;m++)if(o[m]!==h[m]){console.warn("KTXParser - Invalid file format");return}var a=Uint32Array.BYTES_PER_ELEMENT,r=new DataView(t,12,13*a),i=r.getUint32(0,!0)===67305985,n=r.getUint32(1*a,i);if(n!==0){console.warn("KTXParser - Only compressed formats supported");return}var u=r.getUint32(4*a,i),s=r.getUint32(6*a,i),l=r.getUint32(7*a,i),v=Math.max(1,r.getUint32(11*a,i)),c=r.getUint32(12*a,i),g=new Array(v),y=12+13*4+c,E=s,C=l;for(m=0;m<v;m++){var T=new Int32Array(t,y,1)[0];y+=4,g[m]={data:new Uint8Array(t,y,T),width:E,height:C},E=Math.max(1,E>>1),C=Math.max(1,C>>1),y+=T}return{mipmaps:g,width:s,height:l,internalFormat:u,compressed:!0,generateMipmap:!1}};f.exports=S},24904:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(P,M,w,L,F,D,N){return N===void 0&&(N=16),Math.floor((P+w)/F)*Math.floor((M+L)/D)*N}function t(P,M){return P=Math.max(P,16),M=Math.max(M,8),P*M/4}function h(P,M){return P=Math.max(P,8),M=Math.max(M,8),P*M/2}function m(P,M){return S(P,M,3,3,4,4,8)}function o(P,M){return S(P,M,3,3,4,4)}function a(P,M){return S(P,M,4,3,5,4)}function r(P,M){return S(P,M,4,4,5,5)}function i(P,M){return S(P,M,5,4,6,5)}function n(P,M){return S(P,M,5,5,6,6)}function u(P,M){return S(P,M,7,4,8,5)}function s(P,M){return S(P,M,7,5,8,6)}function l(P,M){return S(P,M,7,7,8,8)}function v(P,M){return S(P,M,9,4,10,5)}function c(P,M){return S(P,M,9,5,10,6)}function g(P,M){return S(P,M,9,7,10,8)}function y(P,M){return S(P,M,9,9,10,10)}function E(P,M){return S(P,M,11,9,12,10)}function C(P,M){return S(P,M,11,11,12,12)}var T={0:{sizeFunc:t,glFormat:35841},1:{sizeFunc:t,glFormat:35843},2:{sizeFunc:h,glFormat:35840},3:{sizeFunc:h,glFormat:35842},6:{sizeFunc:m,glFormat:36196},7:{sizeFunc:m,glFormat:33776},8:{sizeFunc:o,glFormat:33777},9:{sizeFunc:o,glFormat:33778},11:{sizeFunc:o,glFormat:33779},22:{sizeFunc:m,glFormat:37492},23:{sizeFunc:o,glFormat:37496},24:{sizeFunc:m,glFormat:37494},25:{sizeFunc:m,glFormat:37488},26:{sizeFunc:o,glFormat:37490},27:{sizeFunc:o,glFormat:37808},28:{sizeFunc:a,glFormat:37809},29:{sizeFunc:r,glFormat:37810},30:{sizeFunc:i,glFormat:37811},31:{sizeFunc:n,glFormat:37812},32:{sizeFunc:u,glFormat:37813},33:{sizeFunc:s,glFormat:37814},34:{sizeFunc:l,glFormat:37815},35:{sizeFunc:v,glFormat:37816},36:{sizeFunc:c,glFormat:37817},37:{sizeFunc:g,glFormat:37818},38:{sizeFunc:y,glFormat:37819},39:{sizeFunc:E,glFormat:37820},40:{sizeFunc:C,glFormat:37821}},A=function(P){for(var M=new Uint32Array(P,0,13),w=M[2],L=T[w].glFormat,F=T[w].sizeFunc,D=M[11],N=M[7],B=M[6],b=52+M[12],W=new Uint8Array(P,b),Y=new Array(D),K=0,G=N,z=B,O=0;O<D;O++){var V=F(G,z);Y[O]={data:new Uint8Array(W.buffer,W.byteOffset+K,V),width:G,height:z},G=Math.max(1,G>>1),z=Math.max(1,z>>1),K+=V}return{mipmaps:Y,width:N,height:B,internalFormat:L,compressed:!0,generateMipmap:!1}};f.exports=A},6143:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72632),m=function(o,a,r,i,n,u,s){var l=h(s,"frameWidth",null),v=h(s,"frameHeight",l);if(l===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var c=o.source[a];o.add("__BASE",a,0,0,c.width,c.height);var g=h(s,"startFrame",0),y=h(s,"endFrame",-1),E=h(s,"margin",0),C=h(s,"spacing",0),T=Math.floor((n-E+C)/(l+C)),A=Math.floor((u-E+C)/(v+C)),P=T*A;P===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",o.key),(g>P||g<-P)&&(g=0),g<0&&(g=P+g),(y===-1||y>P||y<g)&&(y=P);for(var M=E,w=E,L=0,F=0,D=0,N=0;N<P;N++){L=0,F=0;var B=M+l,b=w+v;B>n&&(L=B-n),b>u&&(F=b-u),N>=g&&N<=y&&(o.add(D,a,r+M,i+w,l-L,v-F),D++),M+=l+C,M+l>n&&(M=E,w+=v+C)}return o};f.exports=m},20030:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72632),m=function(o,a,r){var i=h(r,"frameWidth",null),n=h(r,"frameHeight",i);if(!i)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var u=o.source[0];o.add("__BASE",0,0,0,u.width,u.height),h(r,"startFrame",0),h(r,"endFrame",-1);for(var s=h(r,"margin",0),l=h(r,"spacing",0),v=a.cutX,c=a.cutY,g=a.cutWidth,y=a.cutHeight,E=a.realWidth,C=a.realHeight,T=Math.floor((E-s+l)/(i+l)),A=Math.floor((C-s+l)/(n+l)),P=a.x,M=i-P,w=i-(E-g-P),L=a.y,F=n-L,D=n-(C-y-L),N,B=s,b=s,W=0,Y=0,K=0;K<A;K++){for(var G=K===0,z=K===A-1,O=0;O<T;O++){var V=O===0,U=O===T-1;if(N=o.add(W,Y,v+B,c+b,i,n),V||G||U||z){var X=V?P:0,H=G?L:0,Q=0,$=0;V&&(Q+=i-M),U&&(Q+=i-w),G&&($+=n-F),z&&($+=n-D);var k=i-Q,J=n-$;N.cutWidth=k,N.cutHeight=J,N.setTrim(i,n,X,H,k,J)}B+=l,V?B+=M:U?B+=w:B+=i,W++}B=s,b+=l,G?b+=F:z?b+=D:b+=n}return o};f.exports=m},89187:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=0,t=function(m,o,a,r){var i=S-r.y-r.height;m.add(a,o,r.x,i,r.width,r.height)},h=function(m,o,a){var r=m.source[o];m.add("__BASE",o,0,0,r.width,r.height),S=r.height;for(var i=a.split(`
`),n=/^[ ]*(- )*(\w+)+[: ]+(.*)/,u="",s="",l={x:0,y:0,width:0,height:0},v=0;v<i.length;v++){var c=i[v].match(n);if(c){var g=c[1]==="- ",y=c[2],E=c[3];if(g&&(s!==u&&(t(m,o,s,l),u=s),l={x:0,y:0,width:0,height:0}),y==="name"){s=E;continue}switch(y){case"x":case"y":case"width":case"height":l[y]=parseInt(E,10);break}}}return s!==u&&t(m,o,s,l),m};f.exports=h},69150:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={AtlasXML:t(35082),Canvas:t(83332),Image:t(21560),JSONArray:t(64423),JSONHash:t(17264),KTXParser:t(67409),PVRParser:t(24904),SpriteSheet:t(6143),SpriteSheetFromAtlas:t(20030),UnityYAML:t(89187)}},93560:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},97042:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=new h({initialize:function(a,r,i,n,u,s,l){(i===void 0||i<=0)&&(i=32),(n===void 0||n<=0)&&(n=32),u===void 0&&(u=0),s===void 0&&(s=0),this.name=a,this.firstgid=r|0,this.imageWidth=i|0,this.imageHeight=n|0,this.imageMargin=u|0,this.imageSpacing=s|0,this.properties=l||{},this.images=[],this.total=0},containsImageIndex:function(o){return o>=this.firstgid&&o<this.firstgid+this.total},addImage:function(o,a){return this.images.push({gid:o,image:a}),this.total++,this}});f.exports=m},46422:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=new h({initialize:function(a){if(this.gids=[],a!==void 0)for(var r=0;r<a.length;++r)for(var i=a[r],n=0;n<i.total;++n)this.gids[i.firstgid+n]=i;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(o){this.gids=o?this._gids:void 0}},getTypeIncludingTile:function(o){if(o.type!==void 0&&o.type!=="")return o.type;if(!(!this.gids||o.gid===void 0)){var a=this.gids[o.gid];if(a){var r=a.getTileData(o.gid);if(r)return r.type}}},setTextureAndFrame:function(o,a,r,i){if(a===null&&this.gids&&i.gid!==void 0){var n=this.gids[i.gid];n&&(a===null&&n.image!==void 0&&(a=n.image.key),r===null&&(r=i.gid-n.firstgid),o.scene.textures.getFrame(a,r)||(a=null,r=null))}o.setTexture(a,r)},setPropertiesFromTiledObject:function(o,a){if(this.gids!==void 0&&a.gid!==void 0){var r=this.gids[a.gid];r!==void 0&&this.setFromJSON(o,r.getTileProperties(a.gid))}this.setFromJSON(o,a.properties)},setFromJSON:function(o,a){if(a){if(Array.isArray(a)){a.forEach(function(i){o.setData(i.name,i.value)});return}for(var r in a)o[r]!==void 0?o[r]=a[r]:o.setData(r,a[r])}}});f.exports=m},15043:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(93560),m=t(16586),o=t(90715),a=t(89797),r=function(i,n,u,s,l,v,c,g){u===void 0&&(u=32),s===void 0&&(s=32),l===void 0&&(l=10),v===void 0&&(v=10),g===void 0&&(g=!1);var y=null;if(Array.isArray(c)){var E=n!==void 0?n:"map";y=o(E,h.ARRAY_2D,c,u,s,g)}else if(n!==void 0){var C=i.cache.tilemap.get(n);C?y=o(n,C.format,C.data,u,s,g):console.warn("No map data found for key "+n)}return y===null&&(y=new m({tileWidth:u,tileHeight:s,width:l,height:v})),new a(i,y)};f.exports=r},29633:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(64937),o=t(12920),a=t(28699),r=t(66658),i=new h({Mixins:[m.Alpha,m.Flip,m.Visible],initialize:function(u,s,l,v,c,g,y,E){this.layer=u,this.index=s,this.x=l,this.y=v,this.width=c,this.height=g,this.right,this.bottom,this.baseWidth=y!==void 0?y:c,this.baseHeight=E!==void 0?E:g,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(n,u){return!(n<this.pixelX||u<this.pixelY||n>this.right||u>this.bottom)},copy:function(n){return this.index=n.index,this.alpha=n.alpha,this.properties=a(n.properties),this.visible=n.visible,this.setFlip(n.flipX,n.flipY),this.tint=n.tint,this.rotation=n.rotation,this.collideUp=n.collideUp,this.collideDown=n.collideDown,this.collideLeft=n.collideLeft,this.collideRight=n.collideRight,this.collisionCallback=n.collisionCallback,this.collisionCallbackContext=n.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(n){var u=this.tilemapLayer;if(u){var s=u.tileToWorldXY(this.x,this.y,void 0,n);return s.x}return this.x*this.baseWidth},getRight:function(n){var u=this.tilemapLayer;return u?this.getLeft(n)+this.width*u.scaleX:this.getLeft(n)+this.width},getTop:function(n){var u=this.tilemapLayer;if(u){var s=u.tileToWorldXY(this.x,this.y,void 0,n);return s.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(n){var u=this.tilemapLayer;return u?this.getTop(n)+this.height*u.scaleY:this.getTop(n)+this.height},getBounds:function(n,u){return u===void 0&&(u=new r),u.x=this.getLeft(n),u.y=this.getTop(n),u.width=this.getRight(n)-u.x,u.height=this.getBottom(n)-u.y,u},getCenterX:function(n){return(this.getLeft(n)+this.getRight(n))/2},getCenterY:function(n){return(this.getTop(n)+this.getBottom(n))/2},intersects:function(n,u,s,l){return!(s<=this.pixelX||l<=this.pixelY||n>=this.right||u>=this.bottom)},isInteresting:function(n,u){return n&&u?this.canCollide||this.hasInterestingFace:n?this.collides:u?this.hasInterestingFace:!1},resetCollision:function(n){if(n===void 0&&(n=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,n){var u=this.tilemapLayer;u&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(n,u,s,l,v){if(u===void 0&&(u=n),s===void 0&&(s=n),l===void 0&&(l=n),v===void 0&&(v=!0),this.collideLeft=n,this.collideRight=u,this.collideUp=s,this.collideDown=l,this.faceLeft=n,this.faceRight=u,this.faceTop=s,this.faceBottom=l,v){var c=this.tilemapLayer;c&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(n,u){return n===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=n,this.collisionCallbackContext=u),this},setSize:function(n,u,s,l){return n!==void 0&&(this.width=n),u!==void 0&&(this.height=u),s!==void 0&&(this.baseWidth=s),l!==void 0&&(this.baseHeight=l),this.updatePixelXY(),this},updatePixelXY:function(){var n=this.layer.orientation;if(n===o.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(n===o.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(n===o.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(n===o.HEXAGONAL){var u=this.layer.staggerAxis,s=this.layer.staggerIndex,l=this.layer.hexSideLength,v,c;u==="y"?(c=(this.baseHeight-l)/2+l,s==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*c):u==="x"&&(v=(this.baseWidth-l)/2+l,this.pixelX=this.x*v,s==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var n=this.layer.tilemapLayer;if(n){var u=n.gidMap[this.index];if(u)return u}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var n=this.tilemapLayer;return n?n.tilemap:null}}});f.exports=i},89797:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(14556),m=t(56694),o=t(75606),a=t(93560),r=t(72632),i=t(94990),n=t(46422),u=t(12920),s=t(52257),l=t(72677),v=t(13747),c=t(29633),g=t(5047),y=t(87177),E=t(47975),C=new m({initialize:function(A,P){this.scene=A,this.tileWidth=P.tileWidth,this.tileHeight=P.tileHeight,this.width=P.width,this.height=P.height,this.orientation=P.orientation,this.renderOrder=P.renderOrder,this.format=P.format,this.version=P.version,this.properties=P.properties,this.widthInPixels=P.widthInPixels,this.heightInPixels=P.heightInPixels,this.imageCollections=P.imageCollections,this.images=P.images,this.layers=P.layers,this.tiles=P.tiles,this.tilesets=P.tilesets,this.objects=P.objects,this.currentLayerIndex=0,this.hexSideLength=P.hexSideLength;var M=this.orientation;this._convert={WorldToTileXY:g.GetWorldToTileXYFunction(M),WorldToTileX:g.GetWorldToTileXFunction(M),WorldToTileY:g.GetWorldToTileYFunction(M),TileToWorldXY:g.GetTileToWorldXYFunction(M),TileToWorldX:g.GetTileToWorldXFunction(M),TileToWorldY:g.GetTileToWorldYFunction(M),GetTileCorners:g.GetTileCornersFunction(M)}},setRenderOrder:function(T){var A=["right-down","left-down","right-up","left-up"];return typeof T=="number"&&(T=A[T]),A.indexOf(T)>-1&&(this.renderOrder=T),this},addTilesetImage:function(T,A,P,M,w,L,F,D){if(T===void 0)return null;if(A==null&&(A=T),!this.scene.sys.textures.exists(A))return console.warn("Invalid Tileset Image: "+A),null;var N=this.scene.sys.textures.get(A),B=this.getTilesetIndex(T);if(B===null&&this.format===a.TILED_JSON)return console.warn("No data found for Tileset: "+T),null;var b=this.tilesets[B];return b?(b.setTileSize(P,M),b.setSpacing(w,L),b.setImage(N),b):(P===void 0&&(P=this.tileWidth),M===void 0&&(M=this.tileHeight),w===void 0&&(w=0),L===void 0&&(L=0),F===void 0&&(F=0),D===void 0&&(D={x:0,y:0}),b=new E(T,F,P,M,w,L,void 0,void 0,D),b.setImage(N),this.tilesets.push(b),this.tiles=h(this),b)},copy:function(T,A,P,M,w,L,F,D){return D=this.getLayer(D),D!==null?(g.Copy(T,A,P,M,w,L,F,D),this):null},createBlankLayer:function(T,A,P,M,w,L,F,D){P===void 0&&(P=0),M===void 0&&(M=0),w===void 0&&(w=this.width),L===void 0&&(L=this.height),F===void 0&&(F=this.tileWidth),D===void 0&&(D=this.tileHeight);var N=this.getLayerIndex(T);if(N!==null)return console.warn("Invalid Tilemap Layer ID: "+T),null;for(var B=new i({name:T,tileWidth:F,tileHeight:D,width:w,height:L,orientation:this.orientation}),b,W=0;W<L;W++){b=[];for(var Y=0;Y<w;Y++)b.push(new c(B,-1,Y,W,F,D,this.tileWidth,this.tileHeight));B.data.push(b)}this.layers.push(B),this.currentLayerIndex=this.layers.length-1;var K=new y(this.scene,this,this.currentLayerIndex,A,P,M);return K.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(K),K},createLayer:function(T,A,P,M){var w=this.getLayerIndex(T);if(w===null)return console.warn("Invalid Tilemap Layer ID: "+T),typeof T=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var L=this.layers[w];if(L.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+T),null;this.currentLayerIndex=w,P===void 0&&(P=L.x),M===void 0&&(M=L.y);var F=new y(this.scene,this,w,A,P,M);return F.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(F),F},createFromObjects:function(T,A,P){P===void 0&&(P=!0);var M=[],w=this.getObjectLayer(T);if(!w)return console.warn("createFromObjects: Invalid objectLayerName given: "+T),M;var L=new n(P?this.tilesets:void 0);Array.isArray(A)||(A=[A]);for(var F=w.objects,D=0;D<A.length;D++){var N=A[D],B=r(N,"id",null),b=r(N,"gid",null),W=r(N,"name",null),Y=r(N,"type",null);L.enabled=!r(N,"ignoreTileset",null);for(var K,G=[],z=0;z<F.length;z++)K=F[z],(B===null&&b===null&&W===null&&Y===null||B!==null&&K.id===B||b!==null&&K.gid===b||W!==null&&K.name===W||Y!==null&&L.getTypeIncludingTile(K)===Y)&&G.push(K);for(var O=r(N,"classType",v),V=r(N,"scene",this.scene),U=r(N,"container",null),X=r(N,"key",null),H=r(N,"frame",null),Q=0;Q<G.length;Q++){K=G[Q];var $=new O(V);if($.setName(K.name),$.setPosition(K.x,K.y),L.setTextureAndFrame($,X,H,K),K.width&&($.displayWidth=K.width),K.height&&($.displayHeight=K.height),this.orientation===u.ISOMETRIC){var k=this.tileWidth/this.tileHeight,J={x:$.x-$.y,y:($.x+$.y)/k};$.x=J.x,$.y=J.y}var Z={x:$.originX*K.width,y:($.originY-(K.gid?1:0))*K.height};if(K.rotation){var j=o(K.rotation);s(Z,j),$.rotation=j}$.x+=Z.x,$.y+=Z.y,(K.flippedHorizontal!==void 0||K.flippedVertical!==void 0)&&$.setFlip(K.flippedHorizontal,K.flippedVertical),K.visible||($.visible=!1),L.setPropertiesFromTiledObject($,K),U?U.add($):V.add.existing($),M.push($)}}return M},createFromTiles:function(T,A,P,M,w,L){return L=this.getLayer(L),L===null?null:g.CreateFromTiles(T,A,P,M,w,L)},fill:function(T,A,P,M,w,L,F){return L===void 0&&(L=!0),F=this.getLayer(F),F===null?null:(g.Fill(T,A,P,M,w,L,F),this)},filterObjects:function(T,A,P){if(typeof T=="string"){var M=T;if(T=this.getObjectLayer(T),!T)return console.warn("No object layer found with the name: "+M),null}return T.objects.filter(A,P)},filterTiles:function(T,A,P,M,w,L,F,D){return D=this.getLayer(D),D===null?null:g.FilterTiles(T,A,P,M,w,L,F,D)},findByIndex:function(T,A,P,M){return M=this.getLayer(M),M===null?null:g.FindByIndex(T,A,P,M)},findObject:function(T,A,P){if(typeof T=="string"){var M=T;if(T=this.getObjectLayer(T),!T)return console.warn("No object layer found with the name: "+M),null}return T.objects.find(A,P)||null},findTile:function(T,A,P,M,w,L,F,D){return D=this.getLayer(D),D===null?null:g.FindTile(T,A,P,M,w,L,F,D)},forEachTile:function(T,A,P,M,w,L,F,D){return D=this.getLayer(D),D===null?null:(g.ForEachTile(T,A,P,M,w,L,F,D),this)},getImageIndex:function(T){return this.getIndex(this.images,T)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(T){return T.name})},getIndex:function(T,A){for(var P=0;P<T.length;P++)if(T[P].name===A)return P;return null},getLayer:function(T){var A=this.getLayerIndex(T);return A!==null?this.layers[A]:null},getObjectLayer:function(T){var A=this.getIndex(this.objects,T);return A!==null?this.objects[A]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(T){return T.name})},getLayerIndex:function(T){return T===void 0?this.currentLayerIndex:typeof T=="string"?this.getLayerIndexByName(T):typeof T=="number"&&T<this.layers.length?T:T instanceof y&&T.tilemap===this?T.layerIndex:null},getLayerIndexByName:function(T){return this.getIndex(this.layers,T)},getTileAt:function(T,A,P,M){return M=this.getLayer(M),M===null?null:g.GetTileAt(T,A,P,M)},getTileAtWorldXY:function(T,A,P,M,w){return w=this.getLayer(w),w===null?null:g.GetTileAtWorldXY(T,A,P,M,w)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(T){return T.name})},getTilesWithin:function(T,A,P,M,w,L){return L=this.getLayer(L),L===null?null:g.GetTilesWithin(T,A,P,M,w,L)},getTilesWithinShape:function(T,A,P,M){return M=this.getLayer(M),M===null?null:g.GetTilesWithinShape(T,A,P,M)},getTilesWithinWorldXY:function(T,A,P,M,w,L,F){return F=this.getLayer(F),F===null?null:g.GetTilesWithinWorldXY(T,A,P,M,w,L,F)},getTileset:function(T){var A=this.getIndex(this.tilesets,T);return A!==null?this.tilesets[A]:null},getTilesetIndex:function(T){return this.getIndex(this.tilesets,T)},hasTileAt:function(T,A,P){return P=this.getLayer(P),P===null?null:g.HasTileAt(T,A,P)},hasTileAtWorldXY:function(T,A,P,M){return M=this.getLayer(M),M===null?null:g.HasTileAtWorldXY(T,A,P,M)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(T){this.setLayer(T)}},putTileAt:function(T,A,P,M,w){return M===void 0&&(M=!0),w=this.getLayer(w),w===null?null:g.PutTileAt(T,A,P,M,w)},putTileAtWorldXY:function(T,A,P,M,w,L){return M===void 0&&(M=!0),L=this.getLayer(L),L===null?null:g.PutTileAtWorldXY(T,A,P,M,w,L)},putTilesAt:function(T,A,P,M,w){return M===void 0&&(M=!0),w=this.getLayer(w),w===null?null:(g.PutTilesAt(T,A,P,M,w),this)},randomize:function(T,A,P,M,w,L){return L=this.getLayer(L),L===null?null:(g.Randomize(T,A,P,M,w,L),this)},calculateFacesAt:function(T,A,P){return P=this.getLayer(P),P===null?null:(g.CalculateFacesAt(T,A,P),this)},calculateFacesWithin:function(T,A,P,M,w){return w=this.getLayer(w),w===null?null:(g.CalculateFacesWithin(T,A,P,M,w),this)},removeLayer:function(T){var A=this.getLayerIndex(T);if(A!==null){l(this.layers,A);for(var P=A;P<this.layers.length;P++)this.layers[P].tilemapLayer&&this.layers[P].tilemapLayer.layerIndex--;return this.currentLayerIndex===A&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(T){var A=this.getLayerIndex(T);return A!==null?(T=this.layers[A],T.tilemapLayer.destroy(),l(this.layers,A),this.currentLayerIndex===A&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var T=this.layers,A=0;A<T.length;A++)T[A].tilemapLayer&&T[A].tilemapLayer.destroy(!1);return T.length=0,this.currentLayerIndex=0,this},removeTile:function(T,A,P){A===void 0&&(A=-1),P===void 0&&(P=!0);var M=[];Array.isArray(T)||(T=[T]);for(var w=0;w<T.length;w++){var L=T[w];M.push(this.removeTileAt(L.x,L.y,!0,P,L.tilemapLayer)),A>-1&&this.putTileAt(A,L.x,L.y,P,L.tilemapLayer)}return M},removeTileAt:function(T,A,P,M,w){return P===void 0&&(P=!0),M===void 0&&(M=!0),w=this.getLayer(w),w===null?null:g.RemoveTileAt(T,A,P,M,w)},removeTileAtWorldXY:function(T,A,P,M,w,L){return P===void 0&&(P=!0),M===void 0&&(M=!0),L=this.getLayer(L),L===null?null:g.RemoveTileAtWorldXY(T,A,P,M,w,L)},renderDebug:function(T,A,P){return P=this.getLayer(P),P===null?null:(this.orientation===u.ORTHOGONAL&&g.RenderDebug(T,A,P),this)},renderDebugFull:function(T,A){for(var P=this.layers,M=0;M<P.length;M++)g.RenderDebug(T,A,P[M]);return this},replaceByIndex:function(T,A,P,M,w,L,F){return F=this.getLayer(F),F===null?null:(g.ReplaceByIndex(T,A,P,M,w,L,F),this)},setCollision:function(T,A,P,M,w){return A===void 0&&(A=!0),P===void 0&&(P=!0),w===void 0&&(w=!0),M=this.getLayer(M),M===null?null:(g.SetCollision(T,A,P,M,w),this)},setCollisionBetween:function(T,A,P,M,w){return P===void 0&&(P=!0),M===void 0&&(M=!0),w=this.getLayer(w),w===null?null:(g.SetCollisionBetween(T,A,P,M,w),this)},setCollisionByProperty:function(T,A,P,M){return A===void 0&&(A=!0),P===void 0&&(P=!0),M=this.getLayer(M),M===null?null:(g.SetCollisionByProperty(T,A,P,M),this)},setCollisionByExclusion:function(T,A,P,M){return A===void 0&&(A=!0),P===void 0&&(P=!0),M=this.getLayer(M),M===null?null:(g.SetCollisionByExclusion(T,A,P,M),this)},setCollisionFromCollisionGroup:function(T,A,P){return T===void 0&&(T=!0),A===void 0&&(A=!0),P=this.getLayer(P),P===null?null:(g.SetCollisionFromCollisionGroup(T,A,P),this)},setTileIndexCallback:function(T,A,P,M){return M=this.getLayer(M),M===null?null:(g.SetTileIndexCallback(T,A,P,M),this)},setTileLocationCallback:function(T,A,P,M,w,L,F){return F=this.getLayer(F),F===null?null:(g.SetTileLocationCallback(T,A,P,M,w,L,F),this)},setLayer:function(T){var A=this.getLayerIndex(T);return A!==null&&(this.currentLayerIndex=A),this},setBaseTileSize:function(T,A){this.tileWidth=T,this.tileHeight=A,this.widthInPixels=this.width*T,this.heightInPixels=this.height*A;for(var P=0;P<this.layers.length;P++){this.layers[P].baseTileWidth=T,this.layers[P].baseTileHeight=A;for(var M=this.layers[P].data,w=this.layers[P].width,L=this.layers[P].height,F=0;F<L;F++)for(var D=0;D<w;D++){var N=M[F][D];N!==null&&N.setSize(void 0,void 0,T,A)}}return this},setLayerTileSize:function(T,A,P){if(P=this.getLayer(P),P===null)return this;P.tileWidth=T,P.tileHeight=A;for(var M=P.data,w=P.width,L=P.height,F=0;F<L;F++)for(var D=0;D<w;D++){var N=M[F][D];N!==null&&N.setSize(T,A)}return this},shuffle:function(T,A,P,M,w){return w=this.getLayer(w),w===null?null:(g.Shuffle(T,A,P,M,w),this)},swapByIndex:function(T,A,P,M,w,L,F){return F=this.getLayer(F),F===null?null:(g.SwapByIndex(T,A,P,M,w,L,F),this)},tileToWorldX:function(T,A,P){return P=this.getLayer(P),P===null?null:this._convert.TileToWorldX(T,A,P)},tileToWorldY:function(T,A,P){return P=this.getLayer(P),P===null?null:this._convert.TileToWorldY(T,A,P)},tileToWorldXY:function(T,A,P,M,w){return w=this.getLayer(w),w===null?null:this._convert.TileToWorldXY(T,A,P,M,w)},getTileCorners:function(T,A,P,M){return M=this.getLayer(M),M===null?null:this._convert.GetTileCorners(T,A,P,M)},weightedRandomize:function(T,A,P,M,w,L){return L=this.getLayer(L),L===null?null:(g.WeightedRandomize(A,P,M,w,T,L),this)},worldToTileX:function(T,A,P,M){return M=this.getLayer(M),M===null?null:this._convert.WorldToTileX(T,A,P,M)},worldToTileY:function(T,A,P,M){return M=this.getLayer(M),M===null?null:this._convert.WorldToTileY(T,A,P,M)},worldToTileXY:function(T,A,P,M,w,L){return L=this.getLayer(L),L===null?null:this._convert.WorldToTileXY(T,A,P,M,w,L)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});f.exports=C},4843:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(99325),m=t(15043);h.register("tilemap",function(o){var a=o!==void 0?o:{};return m(this.scene,a.key,a.tileWidth,a.tileHeight,a.width,a.height,a.data,a.insertNull)})},37940:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(61286),m=t(15043);h.register("tilemap",function(o,a,r,i,n,u,s){return o===null&&(o=void 0),a===null&&(a=void 0),r===null&&(r=void 0),i===null&&(i=void 0),n===null&&(n=void 0),m(this.scene,o,a,r,i,n,u,s)})},87177:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(64937),o=t(89980),a=t(5047),r=t(96193),i=t(93736),n=new h({Extends:o,Mixins:[m.Alpha,m.BlendMode,m.ComputedSize,m.Depth,m.Flip,m.GetBounds,m.Mask,m.Origin,m.Pipeline,m.PostPipeline,m.Transform,m.Visible,m.ScrollFactor,r],initialize:function(s,l,v,c,g,y){o.call(this,s,"TilemapLayer"),this.isTilemap=!0,this.tilemap=l,this.layerIndex=v,this.layer=l.layers[v],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=a.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new i,this.setTilesets(c),this.setAlpha(this.layer.alpha),this.setPosition(g,y),this.setOrigin(0,0),this.setSize(l.tileWidth*this.layer.width,l.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(u){var s=[],l=[],v=this.tilemap;Array.isArray(u)||(u=[u]);for(var c=0;c<u.length;c++){var g=u[c];if(typeof g=="string"&&(g=v.getTileset(g)),g){l.push(g);for(var y=g.firstgid,E=0;E<g.total;E++)s[y+E]=g}}this.gidMap=s,this.tileset=l},setRenderOrder:function(u){var s=["right-down","left-down","right-up","left-up"];return typeof u=="string"&&(u=s.indexOf(u)),u>=0&&u<4&&(this._renderOrder=u),this},calculateFacesAt:function(u,s){return a.CalculateFacesAt(u,s,this.layer),this},calculateFacesWithin:function(u,s,l,v){return a.CalculateFacesWithin(u,s,l,v,this.layer),this},createFromTiles:function(u,s,l,v,c){return a.CreateFromTiles(u,s,l,v,c,this.layer)},cull:function(u){return this.cullCallback(this.layer,u,this.culledTiles,this._renderOrder)},copy:function(u,s,l,v,c,g,y){return a.Copy(u,s,l,v,c,g,y,this.layer),this},fill:function(u,s,l,v,c,g){return a.Fill(u,s,l,v,c,g,this.layer),this},filterTiles:function(u,s,l,v,c,g,y){return a.FilterTiles(u,s,l,v,c,g,y,this.layer)},findByIndex:function(u,s,l){return a.FindByIndex(u,s,l,this.layer)},findTile:function(u,s,l,v,c,g,y){return a.FindTile(u,s,l,v,c,g,y,this.layer)},forEachTile:function(u,s,l,v,c,g,y){return a.ForEachTile(u,s,l,v,c,g,y,this.layer),this},setTint:function(u,s,l,v,c,g){u===void 0&&(u=16777215);var y=function(E){E.tint=u};return this.forEachTile(y,this,s,l,v,c,g)},getTileAt:function(u,s,l){return a.GetTileAt(u,s,l,this.layer)},getTileAtWorldXY:function(u,s,l,v){return a.GetTileAtWorldXY(u,s,l,v,this.layer)},getIsoTileAtWorldXY:function(u,s,l,v,c){l===void 0&&(l=!0);var g=this.tempVec;return a.IsometricWorldToTileXY(u,s,!0,g,c,this.layer,l),this.getTileAt(g.x,g.y,v)},getTilesWithin:function(u,s,l,v,c){return a.GetTilesWithin(u,s,l,v,c,this.layer)},getTilesWithinShape:function(u,s,l){return a.GetTilesWithinShape(u,s,l,this.layer)},getTilesWithinWorldXY:function(u,s,l,v,c,g){return a.GetTilesWithinWorldXY(u,s,l,v,c,g,this.layer)},hasTileAt:function(u,s){return a.HasTileAt(u,s,this.layer)},hasTileAtWorldXY:function(u,s,l){return a.HasTileAtWorldXY(u,s,l,this.layer)},putTileAt:function(u,s,l,v){return a.PutTileAt(u,s,l,v,this.layer)},putTileAtWorldXY:function(u,s,l,v,c){return a.PutTileAtWorldXY(u,s,l,v,c,this.layer)},putTilesAt:function(u,s,l,v){return a.PutTilesAt(u,s,l,v,this.layer),this},randomize:function(u,s,l,v,c){return a.Randomize(u,s,l,v,c,this.layer),this},removeTileAt:function(u,s,l,v){return a.RemoveTileAt(u,s,l,v,this.layer)},removeTileAtWorldXY:function(u,s,l,v,c){return a.RemoveTileAtWorldXY(u,s,l,v,c,this.layer)},renderDebug:function(u,s){return a.RenderDebug(u,s,this.layer),this},replaceByIndex:function(u,s,l,v,c,g){return a.ReplaceByIndex(u,s,l,v,c,g,this.layer),this},setSkipCull:function(u){return u===void 0&&(u=!0),this.skipCull=u,this},setCullPadding:function(u,s){return u===void 0&&(u=1),s===void 0&&(s=1),this.cullPaddingX=u,this.cullPaddingY=s,this},setCollision:function(u,s,l,v){return a.SetCollision(u,s,l,this.layer,v),this},setCollisionBetween:function(u,s,l,v){return a.SetCollisionBetween(u,s,l,v,this.layer),this},setCollisionByProperty:function(u,s,l){return a.SetCollisionByProperty(u,s,l,this.layer),this},setCollisionByExclusion:function(u,s,l){return a.SetCollisionByExclusion(u,s,l,this.layer),this},setCollisionFromCollisionGroup:function(u,s){return a.SetCollisionFromCollisionGroup(u,s,this.layer),this},setTileIndexCallback:function(u,s,l){return a.SetTileIndexCallback(u,s,l,this.layer),this},setTileLocationCallback:function(u,s,l,v,c,g){return a.SetTileLocationCallback(u,s,l,v,c,g,this.layer),this},shuffle:function(u,s,l,v){return a.Shuffle(u,s,l,v,this.layer),this},swapByIndex:function(u,s,l,v,c,g){return a.SwapByIndex(u,s,l,v,c,g,this.layer),this},tileToWorldX:function(u,s){return this.tilemap.tileToWorldX(u,s,this)},tileToWorldY:function(u,s){return this.tilemap.tileToWorldY(u,s,this)},tileToWorldXY:function(u,s,l,v){return this.tilemap.tileToWorldXY(u,s,l,v,this)},getTileCorners:function(u,s,l){return this.tilemap.getTileCorners(u,s,l,this)},weightedRandomize:function(u,s,l,v,c){return a.WeightedRandomize(s,l,v,c,u,this.layer),this},worldToTileX:function(u,s,l){return this.tilemap.worldToTileX(u,s,l,this)},worldToTileY:function(u,s,l){return this.tilemap.worldToTileY(u,s,l,this)},worldToTileXY:function(u,s,l,v,c){return this.tilemap.worldToTileXY(u,s,l,v,c,this)},destroy:function(u){u===void 0&&(u=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),u&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],o.prototype.destroy.call(this))}});f.exports=n},17394:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(69360),m=new h,o=new h,a=new h,r=function(i,n,u,s){var l=n.cull(u),v=l.length,c=u.alpha*n.alpha;if(!(v===0||c<=0)){var g=m,y=o,E=a;y.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),g.copyFrom(u.matrix);var C=i.currentContext,T=n.gidMap;C.save(),s?(g.multiplyWithOffset(s,-u.scrollX*n.scrollFactorX,-u.scrollY*n.scrollFactorY),y.e=n.x,y.f=n.y,g.multiply(y,E),E.copyToContext(C)):(y.e-=u.scrollX*n.scrollFactorX,y.f-=u.scrollY*n.scrollFactorY,y.copyToContext(C)),(!i.antialias||n.scaleX>1||n.scaleY>1)&&(C.imageSmoothingEnabled=!1);for(var A=0;A<v;A++){var P=l[A],M=T[P.index];if(M){var w=M.image.getSourceImage(),L=M.getTileTextureCoordinates(P.index),F=M.tileWidth,D=M.tileHeight;if(!(L===null||F===0||D===0)){var N=F*.5,B=D*.5;L.x+=M.tileOffset.x,L.y+=M.tileOffset.y,C.save(),C.translate(P.pixelX+N,P.pixelY+B),P.rotation!==0&&C.rotate(P.rotation),(P.flipX||P.flipY)&&C.scale(P.flipX?-1:1,P.flipY?-1:1),C.globalAlpha=c*P.alpha,C.drawImage(w,L.x,L.y,F,D,-N,-B,F,D),C.restore()}}}C.restore()}};f.exports=r},96193:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72283),m=h,o=h;m=t(51395),o=t(17394),f.exports={renderWebGL:m,renderCanvas:o}},51395:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(75512),m=function(o,a,r){var i=a.cull(r),n=i.length,u=r.alpha*a.alpha;if(!(n===0||u<=0)){var s=a.gidMap,l=o.pipelines.set(a.pipeline,a),v=h.getTintAppendFloatAlpha,c=a.scrollFactorX,g=a.scrollFactorY,y=a.x,E=a.y,C=a.scaleX,T=a.scaleY;o.pipelines.preBatch(a);for(var A=0;A<n;A++){var P=i[A],M=s[P.index];if(M){var w=M.getTileTextureCoordinates(P.index);if(w!==null){var L=M.glTexture,F=l.setTexture2D(L,a),D=M.tileWidth,N=M.tileHeight,B=w.x,b=w.y,W=M.tileWidth*.5,Y=M.tileHeight*.5,K=M.tileOffset.x,G=M.tileOffset.y,z=v(P.tint,u*P.alpha);l.batchTexture(a,L,L.width,L.height,y+P.pixelX*C+(W*C-K),E+P.pixelY*T+(Y*T-G),P.width,P.height,C,T,P.rotation,P.flipX,P.flipY,c,g,W,Y,B,b,D,N,z,z,z,z,!1,0,0,r,null,!0,F)}}}o.pipelines.postBatch(a)}};f.exports=m},47975:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(93736),o=new h({initialize:function(r,i,n,u,s,l,v,c,g){(n===void 0||n<=0)&&(n=32),(u===void 0||u<=0)&&(u=32),s===void 0&&(s=0),l===void 0&&(l=0),v===void 0&&(v={}),c===void 0&&(c={}),this.name=r,this.firstgid=i,this.tileWidth=n,this.tileHeight=u,this.tileMargin=s,this.tileSpacing=l,this.tileProperties=v,this.tileData=c,this.tileOffset=new m,g!==void 0&&this.tileOffset.set(g.x,g.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(a){return this.containsTileIndex(a)?this.tileProperties[a-this.firstgid]:null},getTileData:function(a){return this.containsTileIndex(a)?this.tileData[a-this.firstgid]:null},getTileCollisionGroup:function(a){var r=this.getTileData(a);return r&&r.objectgroup?r.objectgroup:null},containsTileIndex:function(a){return a>=this.firstgid&&a<this.firstgid+this.total},getTileTextureCoordinates:function(a){return this.containsTileIndex(a)?this.texCoordinates[a-this.firstgid]:null},setImage:function(a){return this.image=a,this.glTexture=a.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(a,r){return a!==void 0&&(this.tileWidth=a),r!==void 0&&(this.tileHeight=r),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(a,r){return a!==void 0&&(this.tileMargin=a),r!==void 0&&(this.tileSpacing=r),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(a,r){var i=(r-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),n=(a-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(i%1!==0||n%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),i=Math.floor(i),n=Math.floor(n),this.rows=i,this.columns=n,this.total=i*n,this.texCoordinates.length=0;for(var u=this.tileMargin,s=this.tileMargin,l=0;l<this.rows;l++){for(var v=0;v<this.columns;v++)this.texCoordinates.push({x:u,y:s}),u+=this.tileWidth+this.tileSpacing;u=this.tileMargin,s+=this.tileHeight+this.tileSpacing}return this}});f.exports=o},92839:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(15494),m=function(o,a,r){var i=h(o,a,!0,r),n=h(o,a-1,!0,r),u=h(o,a+1,!0,r),s=h(o-1,a,!0,r),l=h(o+1,a,!0,r),v=i&&i.collides;return v&&(i.faceTop=!0,i.faceBottom=!0,i.faceLeft=!0,i.faceRight=!0),n&&n.collides&&(v&&(i.faceTop=!1),n.faceBottom=!v),u&&u.collides&&(v&&(i.faceBottom=!1),u.faceTop=!v),s&&s.collides&&(v&&(i.faceLeft=!1),s.faceRight=!v),l&&l.collides&&(v&&(i.faceRight=!1),l.faceLeft=!v),i&&!i.collides&&i.resetFaces(),i};f.exports=m},60386:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(15494),m=t(50811),o=function(a,r,i,n,u){for(var s=null,l=null,v=null,c=null,g=m(a,r,i,n,null,u),y=0;y<g.length;y++){var E=g[y];E&&(E.collides?(s=h(E.x,E.y-1,!0,u),l=h(E.x,E.y+1,!0,u),v=h(E.x-1,E.y,!0,u),c=h(E.x+1,E.y,!0,u),E.faceTop=!(s&&s.collides),E.faceBottom=!(l&&l.collides),E.faceLeft=!(v&&v.collides),E.faceRight=!(c&&c.collides)):E.resetFaces())}};f.exports=o},13125:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(93736),m=new h,o=function(a,r,i,n){var u=i.tilemapLayer,s=u.cullPaddingX,l=u.cullPaddingY,v=u.tilemap.tileToWorldXY(a,r,m,n,u);return v.x>n.worldView.x+u.scaleX*i.tileWidth*(-s-.5)&&v.x<n.worldView.right+u.scaleX*i.tileWidth*(s-.5)&&v.y>n.worldView.y+u.scaleY*i.tileHeight*(-l-1)&&v.y<n.worldView.bottom+u.scaleY*i.tileHeight*(l-.5)};f.exports=o},17347:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(60386),m=t(50811),o=t(62839),a=t(29633),r=function(i,n,u,s,l,v,c,g){c===void 0&&(c=!0);var y=m(i,n,u,s,null,g),E=[];y.forEach(function(L){var F=new a(L.layer,L.index,L.x,L.y,L.width,L.height,L.baseWidth,L.baseHeight);F.copy(L),E.push(F)});for(var C=l-i,T=v-n,A=0;A<E.length;A++){var P=E[A],M=P.x+C,w=P.y+T;o(M,w,g)&&g.data[w][M]&&(P.x=M,P.y=w,P.updatePixelXY(),g.data[w][M]=P)}c&&h(l-1,v-1,u+2,s+2,g),y.length=0,E.length=0};f.exports=r},93604:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(50811),m=t(51202),o=function(a,r,i,n,u,s){i||(i={}),Array.isArray(a)||(a=[a]);var l=s.tilemapLayer;n||(n=l.scene),u||(u=n.cameras.main);var v=h(0,0,s.width,s.height,null,s),c=[],g;for(g=0;g<v.length;g++){var y=v[g];if(a.indexOf(y.index)!==-1){var E=l.tileToWorldXY(y.x,y.y,void 0,u,s);i.x=E.x,i.y=E.y,c.push(n.make.sprite(i))}}if(typeof r=="number")for(g=0;g<a.length;g++)m(a[g],r,0,0,s.width,s.height,s);else if(Array.isArray(r))for(g=0;g<a.length;g++)m(a[g],r[g],0,0,s.width,s.height,s);return c};f.exports=o},71586:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(74118),m=t(82127),o=t(84314),a=new h,r=function(i,n){var u=i.tilemapLayer.tilemap,s=i.tilemapLayer,l=Math.floor(u.tileWidth*s.scaleX),v=Math.floor(u.tileHeight*s.scaleY),c=o(n.worldView.x-s.x,l,0,!0)-s.cullPaddingX,g=m(n.worldView.right-s.x,l,0,!0)+s.cullPaddingX,y=o(n.worldView.y-s.y,v,0,!0)-s.cullPaddingY,E=m(n.worldView.bottom-s.y,v,0,!0)+s.cullPaddingY;return a.setTo(c,y,g-c,E-y)};f.exports=r},381:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(71586),m=t(6987),o=function(a,r,i,n){i===void 0&&(i=[]),n===void 0&&(n=0),i.length=0;var u=a.tilemapLayer,s=h(a,r);return(u.skipCull||u.scrollFactorX!==1||u.scrollFactorY!==1)&&(s.left=0,s.right=a.width,s.top=0,s.bottom=a.height),m(a,s,n,i),i};f.exports=o},97734:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(50811),m=t(60386),o=t(68234),a=function(r,i,n,u,s,l,v){for(var c=v.collideIndexes.indexOf(r)!==-1,g=h(i,n,u,s,null,v),y=0;y<g.length;y++)g[y].index=r,o(g[y],c);l&&m(i-1,n-1,u+2,s+2,v)};f.exports=a},63555:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(50811),m=function(o,a,r,i,n,u,s,l){var v=h(r,i,n,u,s,l);return v.filter(o,a)};f.exports=m},37982:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){h===void 0&&(h=0),m===void 0&&(m=!1);var a=0,r,i,n;if(m){for(i=o.height-1;i>=0;i--)for(r=o.width-1;r>=0;r--)if(n=o.data[i][r],n&&n.index===t){if(a===h)return n;a+=1}}else for(i=0;i<o.height;i++)for(r=0;r<o.width;r++)if(n=o.data[i][r],n&&n.index===t){if(a===h)return n;a+=1}return null};f.exports=S},48297:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(50811),m=function(o,a,r,i,n,u,s,l){var v=h(r,i,n,u,s,l);return v.find(o,a)||null};f.exports=m},80916:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(50811),m=function(o,a,r,i,n,u,s,l){var v=h(r,i,n,u,s,l);v.forEach(o,a)};f.exports=m},31493:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(12920),m=t(381),o=t(37524),a=t(20887),r=t(72283),i=t(19242),n=function(u){return u===h.ORTHOGONAL?m:u===h.HEXAGONAL?o:u===h.STAGGERED?i:u===h.ISOMETRIC?a:r};f.exports=n},15494:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(62839),m=function(o,a,r,i){if(r===void 0&&(r=!1),h(o,a,i)){var n=i.data[a][o]||null;return n?n.index===-1?r?n:null:n:null}else return null};f.exports=m},24640:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(15494),m=t(93736),o=new m,a=function(r,i,n,u,s){return s.tilemapLayer.worldToTileXY(r,i,!0,o,u),h(o.x,o.y,n,s)};f.exports=a},48495:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(93736),m=function(o,a,r,i){var n=i.baseTileWidth,u=i.baseTileHeight,s=i.tilemapLayer,l=0,v=0;s&&(r||(r=s.scene.cameras.main),l=s.x+r.scrollX*(1-s.scrollFactorX),v=s.y+r.scrollY*(1-s.scrollFactorY),n*=s.scaleX,u*=s.scaleY);var c=l+o*n,g=v+a*u;return[new h(c,g),new h(c+n,g),new h(c+n,g+u),new h(c,g+u)]};f.exports=m},7160:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(12920),m=t(63634),o=t(72283),a=t(48495),r=function(i){return i===h.ORTHOGONAL?a:i===h.ISOMETRIC?o:i===h.HEXAGONAL?m:(i===h.STAGGERED,o)};f.exports=r},16884:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(12920),m=t(72283),o=t(44150),a=function(r){return r===h.ORTHOGONAL?o:m};f.exports=a},68182:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(12920),m=t(21715),o=t(21808),a=t(72283),r=t(33388),i=t(46836),n=function(u){return u===h.ORTHOGONAL?i:u===h.ISOMETRIC?o:u===h.HEXAGONAL?m:u===h.STAGGERED?r:a};f.exports=n},3752:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(12920),m=t(72283),o=t(84132),a=t(42477),r=function(i){return i===h.ORTHOGONAL?a:i===h.STAGGERED?o:m};f.exports=r},50811:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72632),m=function(o,a,r,i,n,u){o===void 0&&(o=0),a===void 0&&(a=0),r===void 0&&(r=u.width),i===void 0&&(i=u.height),n||(n={});var s=h(n,"isNotEmpty",!1),l=h(n,"isColliding",!1),v=h(n,"hasInterestingFace",!1);o<0&&(r+=o,o=0),a<0&&(i+=a,a=0),o+r>u.width&&(r=Math.max(u.width-o,0)),a+i>u.height&&(i=Math.max(u.height-a,0));for(var c=[],g=a;g<a+i;g++)for(var y=o;y<o+r;y++){var E=u.data[g][y];if(E!==null){if(s&&E.index===-1||l&&!E.collides||v&&!E.hasInterestingFace)continue;c.push(E)}}return c};f.exports=m},31674:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(84068),m=t(50811),o=t(7563),a=t(72283),r=t(93736),i=function(v,c){return o.RectangleToTriangle(c,v)},n=new r,u=new r,s=new r,l=function(v,c,g,y){if(v===void 0)return[];var E=a;v instanceof h.Circle?E=o.CircleToRectangle:v instanceof h.Rectangle?E=o.RectangleToRectangle:v instanceof h.Triangle?E=i:v instanceof h.Line&&(E=o.LineToRectangle),y.tilemapLayer.worldToTileXY(v.left,v.top,!0,u,g);var C=u.x,T=u.y;y.tilemapLayer.worldToTileXY(v.right,v.bottom,!1,s,g);var A=Math.ceil(s.x),P=Math.ceil(s.y),M=Math.max(A-C,1),w=Math.max(P-T,1),L=m(C,T,M,w,c,y),F=y.tileWidth,D=y.tileHeight;y.tilemapLayer&&(F*=y.tilemapLayer.scaleX,D*=y.tilemapLayer.scaleY);for(var N=[],B=new h.Rectangle(0,0,F,D),b=0;b<L.length;b++){var W=L[b];y.tilemapLayer.tileToWorldXY(W.x,W.y,n,g),B.x=n.x,B.y=n.y,E(v,B)&&N.push(W)}return N};f.exports=l},44662:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(50811),m=t(93736),o=new m,a=new m,r=function(i,n,u,s,l,v,c){var g=c.tilemapLayer.tilemap._convert.WorldToTileXY;g(i,n,!0,o,v,c);var y=o.x,E=o.y;g(i+u,n+s,!1,a,v,c);var C=Math.ceil(a.x),T=Math.ceil(a.y);return h(y,E,C-y,T-E,l,c)};f.exports=r},29296:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(12920),m=t(10618),o=t(806),a=function(r){return r===h.ORTHOGONAL?o:m};f.exports=a},32688:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(12920),m=t(11516),o=t(18750),a=t(72283),r=t(90562),i=t(45676),n=function(u){return u===h.ORTHOGONAL?i:u===h.ISOMETRIC?o:u===h.HEXAGONAL?m:u===h.STAGGERED?r:a};f.exports=n},74326:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(12920),m=t(10618),o=t(3689),a=t(70520),r=function(i){return i===h.ORTHOGONAL?a:i===h.STAGGERED?o:m};f.exports=r},46598:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(62839),m=function(o,a,r){if(h(o,a,r)){var i=r.data[a][o];return i!==null&&i.index>-1}else return!1};f.exports=m},28654:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(46598),m=t(93736),o=new m,a=function(r,i,n,u){u.tilemapLayer.worldToTileXY(r,i,!0,o,n);var s=o.x,l=o.y;return h(s,l,u)};f.exports=a},6358:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82127),m=t(84314),o=function(a,r){var i=a.tilemapLayer.tilemap,n=a.tilemapLayer,u=Math.floor(i.tileWidth*n.scaleX),s=Math.floor(i.tileHeight*n.scaleY),l=a.hexSideLength,v,c,g,y;if(this.staggerAxis==="y"){var E=(s-l)/2+l;v=m(r.worldView.x-n.x,u,0,!0)-n.cullPaddingX,c=h(r.worldView.right-n.x,u,0,!0)+n.cullPaddingX,g=m(r.worldView.y-n.y,E,0,!0)-n.cullPaddingY,y=h(r.worldView.bottom-n.y,E,0,!0)+n.cullPaddingY}else{var C=(u-l)/2+l;v=m(r.worldView.x-n.x,C,0,!0)-n.cullPaddingX,c=h(r.worldView.right-n.x,C,0,!0)+n.cullPaddingX,g=m(r.worldView.y-n.y,s,0,!0)-n.cullPaddingY,y=h(r.worldView.bottom-n.y,s,0,!0)+n.cullPaddingY}return{left:v,right:c,top:g,bottom:y}};f.exports=o},37524:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(6358),m=t(6987),o=function(a,r,i,n){i===void 0&&(i=[]),n===void 0&&(n=0),i.length=0;var u=a.tilemapLayer,s=h(a,r);return u.skipCull&&u.scrollFactorX===1&&u.scrollFactorY===1&&(s.left=0,s.right=a.width,s.top=0,s.bottom=a.height),m(a,s,n,i),i};f.exports=o},63634:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(21715),m=t(93736),o=new m,a=function(r,i,n,u){var s=u.baseTileWidth,l=u.baseTileHeight,v=u.tilemapLayer;v&&(s*=v.scaleX,l*=v.scaleY);var c=h(r,i,o,n,u),g=[],y=.5773502691896257,E,C;this.staggerAxis==="y"?(E=y*s,C=l/2):(E=s/2,C=y*l);for(var T=0;T<6;T++){var A=2*Math.PI*(.5-T)/6;g.push(new m(c.x+E*Math.cos(A),c.y+C*Math.sin(A)))}return g};f.exports=a},21715:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(93736),m=function(o,a,r,i,n){r||(r=new h);var u=n.baseTileWidth,s=n.baseTileHeight,l=n.tilemapLayer,v=0,c=0;l&&(i||(i=l.scene.cameras.main),v=l.x+i.scrollX*(1-l.scrollFactorX),c=l.y+i.scrollY*(1-l.scrollFactorY),u*=l.scaleX,s*=l.scaleY);var g=u/2,y=s/2,E,C;return this.staggerAxis==="y"?(E=v+u*o+u,C=c+1.5*a*y+y,a%2===0&&(this.staggerIndex==="odd"?E-=g:E+=g)):this.staggerAxis==="x"&&this.staggerIndex==="odd"&&(E=v+1.5*o*g+g,C=c+s*o+s,o%2===0&&(this.staggerIndex==="odd"?C-=y:C+=y)),r.set(E,C)};f.exports=m},11516:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(93736),m=function(o,a,r,i,n,u){i||(i=new h);var s=u.baseTileWidth,l=u.baseTileHeight,v=u.tilemapLayer;v&&(n||(n=v.scene.cameras.main),o=o-(v.x+n.scrollX*(1-v.scrollFactorX)),a=a-(v.y+n.scrollY*(1-v.scrollFactorY)),s*=v.scaleX,l*=v.scaleY);var c=.5773502691896257,g=-.3333333333333333,y=0,E=.6666666666666666,C=s/2,T=l/2,A,P,M,w,L;u.staggerAxis==="y"?(A=(o-C)/(c*s),P=(a-T)/T,M=c*A+g*P,w=y*A+E*P):(A=(o-C)/C,P=(a-T)/(c*l),M=g*A+c*P,w=E*A+y*P),L=-M-w;var F=Math.round(M),D=Math.round(w),N=Math.round(L),B=Math.abs(F-M),b=Math.abs(D-w),W=Math.abs(N-L);B>b&&B>W?F=-D-N:b>W&&(D=-F-N);var Y,K=D;return u.staggerIndex==="odd"?Y=K%2===0?D/2+F:D/2+F-.5:Y=K%2===0?D/2+F:D/2+F+.5,i.set(Y,K)};f.exports=m},62839:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return t>=0&&t<m.width&&h>=0&&h<m.height};f.exports=S},20887:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(13125),m=function(o,a,r,i){r===void 0&&(r=[]),i===void 0&&(i=0),r.length=0;var n=o.tilemapLayer,u=o.data,s=o.width,l=o.height,v=n.skipCull,c=0,g=s,y=0,E=l,C,T,A;if(i===0){for(T=y;T<E;T++)for(C=c;C<g;C++)if(v||h(C,T,o,a)){if(A=u[T][C],!A||A.index===-1||!A.visible||A.alpha===0)continue;r.push(A)}}else if(i===1){for(T=y;T<E;T++)for(C=g;C>=c;C--)if(v||h(C,T,o,a)){if(A=u[T][C],!A||A.index===-1||!A.visible||A.alpha===0)continue;r.push(A)}}else if(i===2){for(T=E;T>=y;T--)for(C=c;C<g;C++)if(v||h(C,T,o,a)){if(A=u[T][C],!A||A.index===-1||!A.visible||A.alpha===0)continue;r.push(A)}}else if(i===3){for(T=E;T>=y;T--)for(C=g;C>=c;C--)if(v||h(C,T,o,a)){if(A=u[T][C],!A||A.index===-1||!A.visible||A.alpha===0)continue;r.push(A)}}return n.tilesDrawn=r.length,n.tilesTotal=s*l,r};f.exports=m},21808:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(93736),m=function(o,a,r,i,n){r||(r=new h);var u=n.baseTileWidth,s=n.baseTileHeight,l=n.tilemapLayer,v=0,c=0;l&&(i||(i=l.scene.cameras.main),v=l.x+i.scrollX*(1-l.scrollFactorX),u*=l.scaleX,c=l.y+i.scrollY*(1-l.scrollFactorY),s*=l.scaleY);var g=v+(o-a)*(u/2),y=c+(o+a)*(s/2);return r.set(g,y)};f.exports=m},18750:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(93736),m=function(o,a,r,i,n,u,s){i||(i=new h);var l=u.baseTileWidth,v=u.baseTileHeight,c=u.tilemapLayer;c&&(n||(n=c.scene.cameras.main),a=a-(c.y+n.scrollY*(1-c.scrollFactorY)),v*=c.scaleY,o=o-(c.x+n.scrollX*(1-c.scrollFactorX)),l*=c.scaleX);var g=l/2,y=v/2;o=o-g,s||(a=a-v);var E=.5*(o/g+a/y),C=.5*(-o/g+a/y);return r&&(E=Math.floor(E),C=Math.floor(C)),i.set(E,C)};f.exports=m},29003:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(29633),m=t(62839),o=t(92839),a=t(68234),r=function(i,n,u,s,l){if(s===void 0&&(s=!0),!m(n,u,l))return null;var v,c=l.data[u][n],g=c&&c.collides;i instanceof h?(l.data[u][n]===null&&(l.data[u][n]=new h(l,i.index,n,u,l.tileWidth,l.tileHeight)),l.data[u][n].copy(i)):(v=i,l.data[u][n]===null?l.data[u][n]=new h(l,v,n,u,l.tileWidth,l.tileHeight):l.data[u][n].index=v);var y=l.data[u][n],E=l.collideIndexes.indexOf(y.index)!==-1;if(v=i instanceof h?i.index:i,v===-1)y.width=l.tileWidth,y.height=l.tileHeight;else{var C=l.tilemapLayer.tilemap.tiles,T=C[v][2],A=l.tilemapLayer.tileset[T];y.width=A.tileWidth,y.height=A.tileHeight}return a(y,E),s&&g!==y.collides&&o(n,u,l),y};f.exports=r},48565:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(29003),m=t(93736),o=new m,a=function(r,i,n,u,s,l){return l.tilemapLayer.worldToTileXY(i,n,!0,o,s,l),h(r,o.x,o.y,u,l)};f.exports=a},56547:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(60386),m=t(29003),o=function(a,r,i,n,u){if(n===void 0&&(n=!0),!Array.isArray(a))return null;Array.isArray(a[0])||(a=[a]);for(var s=a.length,l=a[0].length,v=0;v<s;v++)for(var c=0;c<l;c++){var g=a[v][c];m(g,r+c,i+v,!1,u)}n&&h(r-1,i-1,l+2,s+2,u)};f.exports=o},91180:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(50811),m=t(72861),o=function(a,r,i,n,u,s){var l,v=h(a,r,i,n,{},s);if(!u)for(u=[],l=0;l<v.length;l++)u.indexOf(v[l].index)===-1&&u.push(v[l].index);for(l=0;l<v.length;l++)v[l].index=m(u)};f.exports=o},929:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(29633),m=t(62839),o=t(92839),a=function(r,i,n,u,s){if(n===void 0&&(n=!0),u===void 0&&(u=!0),!m(r,i,s))return null;var l=s.data[i][r];if(l)s.data[i][r]=n?null:new h(s,-1,r,i,s.tileWidth,s.tileHeight);else return null;return u&&l&&l.collides&&o(r,i,s),l};f.exports=a},17384:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(929),m=t(93736),o=new m,a=function(r,i,n,u,s,l){return l.tilemapLayer.worldToTileXY(r,i,!0,o,s,l),h(o.x,o.y,n,u,l)};f.exports=a},93763:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(50811),m=t(95509),o=new m(105,210,231,150),a=new m(243,134,48,200),r=new m(40,39,37,150),i=function(n,u,s){u===void 0&&(u={});var l=u.tileColor!==void 0?u.tileColor:o,v=u.collidingTileColor!==void 0?u.collidingTileColor:a,c=u.faceColor!==void 0?u.faceColor:r,g=h(0,0,s.width,s.height,null,s);n.translateCanvas(s.tilemapLayer.x,s.tilemapLayer.y),n.scaleCanvas(s.tilemapLayer.scaleX,s.tilemapLayer.scaleY);for(var y=0;y<g.length;y++){var E=g[y],C=E.width,T=E.height,A=E.pixelX,P=E.pixelY,M=E.collides?v:l;M!==null&&(n.fillStyle(M.color,M.alpha/255),n.fillRect(A,P,C,T)),A+=1,P+=1,C-=2,T-=2,c!==null&&(n.lineStyle(1,c.color,c.alpha/255),E.faceTop&&n.lineBetween(A,P,A+C,P),E.faceRight&&n.lineBetween(A+C,P,A+C,P+T),E.faceBottom&&n.lineBetween(A,P+T,A+C,P+T),E.faceLeft&&n.lineBetween(A,P,A,P+T))}};f.exports=i},51202:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(50811),m=function(o,a,r,i,n,u,s){for(var l=h(r,i,n,u,null,s),v=0;v<l.length;v++)l[v]&&l[v].index===o&&(l[v].index=a)};f.exports=m},6987:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){var a=t.data,r=t.width,i=t.height,n=t.tilemapLayer,u=Math.max(0,h.left),s=Math.min(r,h.right),l=Math.max(0,h.top),v=Math.min(i,h.bottom),c,g,y;if(m===0)for(g=l;g<v;g++)for(c=u;a[g]&&c<s;c++)y=a[g][c],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);else if(m===1)for(g=l;g<v;g++)for(c=s;a[g]&&c>=u;c--)y=a[g][c],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);else if(m===2)for(g=v;g>=l;g--)for(c=u;a[g]&&c<s;c++)y=a[g][c],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);else if(m===3)for(g=v;g>=l;g--)for(c=s;a[g]&&c>=u;c--)y=a[g][c],!(!y||y.index===-1||!y.visible||y.alpha===0)&&o.push(y);return n.tilesDrawn=o.length,n.tilesTotal=r*i,o};f.exports=S},51710:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(68234),m=t(60386),o=t(91181),a=function(r,i,n,u,s){i===void 0&&(i=!0),n===void 0&&(n=!0),s===void 0&&(s=!0),Array.isArray(r)||(r=[r]);for(var l=0;l<r.length;l++)o(r[l],i,u);if(s)for(var v=0;v<u.height;v++)for(var c=0;c<u.width;c++){var g=u.data[v][c];g&&r.indexOf(g.index)!==-1&&h(g,i)}n&&m(0,0,u.width,u.height,u)};f.exports=a},15216:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(68234),m=t(60386),o=t(91181),a=function(r,i,n,u,s,l){if(n===void 0&&(n=!0),u===void 0&&(u=!0),l===void 0&&(l=!0),!(r>i)){for(var v=r;v<=i;v++)o(v,n,s);if(l)for(var c=0;c<s.height;c++)for(var g=0;g<s.width;g++){var y=s.data[c][g];y&&y.index>=r&&y.index<=i&&h(y,n)}u&&m(0,0,s.width,s.height,s)}};f.exports=a},33158:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(68234),m=t(60386),o=t(91181),a=function(r,i,n,u){i===void 0&&(i=!0),n===void 0&&(n=!0),Array.isArray(r)||(r=[r]);for(var s=0;s<u.height;s++)for(var l=0;l<u.width;l++){var v=u.data[s][l];v&&r.indexOf(v.index)===-1&&(h(v,i),o(v.index,i,u))}n&&m(0,0,u.width,u.height,u)};f.exports=a},4180:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(68234),m=t(60386),o=t(19256),a=function(r,i,n,u){i===void 0&&(i=!0),n===void 0&&(n=!0);for(var s=0;s<u.height;s++)for(var l=0;l<u.width;l++){var v=u.data[s][l];if(v){for(var c in r)if(o(v.properties,c)){var g=r[c];Array.isArray(g)||(g=[g]);for(var y=0;y<g.length;y++)v.properties[c]===g[y]&&h(v,i)}}}n&&m(0,0,u.width,u.height,u)};f.exports=a},18625:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(68234),m=t(60386),o=function(a,r,i){a===void 0&&(a=!0),r===void 0&&(r=!0);for(var n=0;n<i.height;n++)for(var u=0;u<i.width;u++){var s=i.data[n][u];if(s){var l=s.getCollisionGroup();l&&l.objects&&l.objects.length>0&&h(s,a)}}r&&m(0,0,i.width,i.height,i)};f.exports=o},91181:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){var o=m.collideIndexes.indexOf(t);h&&o===-1?m.collideIndexes.push(t):!h&&o!==-1&&m.collideIndexes.splice(o,1)};f.exports=S},68234:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){h?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)};f.exports=S},11628:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){if(typeof t=="number")o.callbacks[t]=h!==null?{callback:h,callbackContext:m}:void 0;else for(var a=0,r=t.length;a<r;a++)o.callbacks[t[a]]=h!==null?{callback:h,callbackContext:m}:void 0};f.exports=S},72732:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(50811),m=function(o,a,r,i,n,u,s){for(var l=h(o,a,r,i,null,s),v=0;v<l.length;v++)l[v].setCollisionCallback(n,u)};f.exports=m},34397:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(50811),m=t(18592),o=function(a,r,i,n,u){var s=h(a,r,i,n,null,u),l=s.map(function(c){return c.index});m(l);for(var v=0;v<s.length;v++)s[v].index=l[v]};f.exports=o},53945:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(82127),m=t(84314),o=function(a,r){var i=a.tilemapLayer.tilemap,n=a.tilemapLayer,u=Math.floor(i.tileWidth*n.scaleX),s=Math.floor(i.tileHeight*n.scaleY),l=m(r.worldView.x-n.x,u,0,!0)-n.cullPaddingX,v=h(r.worldView.right-n.x,u,0,!0)+n.cullPaddingX,c=m(r.worldView.y-n.y,s/2,0,!0)-n.cullPaddingY,g=h(r.worldView.bottom-n.y,s/2,0,!0)+n.cullPaddingY;return{left:l,right:v,top:c,bottom:g}};f.exports=o},19242:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(53945),m=t(6987),o=function(a,r,i,n){i===void 0&&(i=[]),n===void 0&&(n=0),i.length=0;var u=a.tilemapLayer,s=h(a,r);return u.skipCull&&u.scrollFactorX===1&&u.scrollFactorY===1&&(s.left=0,s.right=a.width,s.top=0,s.bottom=a.height),m(a,s,n,i),i};f.exports=o},33388:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(93736),m=function(o,a,r,i,n){r||(r=new h);var u=n.baseTileWidth,s=n.baseTileHeight,l=n.tilemapLayer,v=0,c=0;l&&(i||(i=l.scene.cameras.main),v=l.x+i.scrollX*(1-l.scrollFactorX),u*=l.scaleX,c=l.y+i.scrollY*(1-l.scrollFactorY),s*=l.scaleY);var g=v+o*u+a%2*(u/2),y=c+a*(s/2);return r.set(g,y)};f.exports=m},84132:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){var o=m.baseTileHeight,a=m.tilemapLayer,r=0;return a&&(h===void 0&&(h=a.scene.cameras.main),r=a.y+h.scrollY*(1-a.scrollFactorY),o*=a.scaleY),r+t*(o/2)+o};f.exports=S},90562:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(93736),m=function(o,a,r,i,n,u){i||(i=new h);var s=u.baseTileWidth,l=u.baseTileHeight,v=u.tilemapLayer;v&&(n||(n=v.scene.cameras.main),a=a-(v.y+n.scrollY*(1-v.scrollFactorY)),l*=v.scaleY,o=o-(v.x+n.scrollX*(1-v.scrollFactorX)),s*=v.scaleX);var c=r?Math.floor(a/(l/2)):a/(l/2),g=r?Math.floor((o+c%2*.5*s)/s):(o+c%2*.5*s)/s;return i.set(g,c)};f.exports=m},3689:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){var a=o.baseTileHeight,r=o.tilemapLayer;return r&&(m||(m=r.scene.cameras.main),t=t-(r.y+m.scrollY*(1-r.scrollFactorY)),a*=r.scaleY),h?Math.floor(t/(a/2)):t/(a/2)};f.exports=S},55217:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(50811),m=function(o,a,r,i,n,u,s){for(var l=h(r,i,n,u,null,s),v=0;v<l.length;v++)l[v]&&(l[v].index===o?l[v].index=a:l[v].index===a&&(l[v].index=o))};f.exports=m},44150:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){var o=m.baseTileWidth,a=m.tilemapLayer,r=0;return a&&(h||(h=a.scene.cameras.main),r=a.x+h.scrollX*(1-a.scrollFactorX),o*=a.scaleX),r+t*o};f.exports=S},46836:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(44150),m=t(42477),o=t(93736),a=function(r,i,n,u,s){return n||(n=new o(0,0)),n.x=h(r,u,s),n.y=m(i,u,s),n};f.exports=a},42477:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){var o=m.baseTileHeight,a=m.tilemapLayer,r=0;return a&&(h||(h=a.scene.cameras.main),r=a.y+h.scrollY*(1-a.scrollFactorY),o*=a.scaleY),r+t*o};f.exports=S},39677:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(50811),m=function(o,a,r,i,n,u){if(n){var s,l=h(o,a,r,i,null,u),v=0;for(s=0;s<n.length;s++)v+=n[s].weight;if(!(v<=0))for(s=0;s<l.length;s++){for(var c=Math.random()*v,g=0,y=-1,E=0;E<n.length;E++)if(g+=n[E].weight,c<=g){var C=n[E].index;y=Array.isArray(C)?C[Math.floor(Math.random()*C.length)]:C;break}l[s].index=y}}};f.exports=m},806:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(45676),m=t(93736),o=new m,a=function(r,i,n,u){return h(r,0,i,o,n,u),o.x};f.exports=a},45676:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(93736),m=function(o,a,r,i,n,u){r===void 0&&(r=!0),i||(i=new h);var s=u.baseTileWidth,l=u.baseTileHeight,v=u.tilemapLayer;v&&(n||(n=v.scene.cameras.main),o=o-(v.x+n.scrollX*(1-v.scrollFactorX)),a=a-(v.y+n.scrollY*(1-v.scrollFactorY)),s*=v.scaleX,l*=v.scaleY);var c=o/s,g=a/l;return r&&(c=Math.floor(c),g=Math.floor(g)),i.set(c,g)};f.exports=m},70520:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(45676),m=t(93736),o=new m,a=function(r,i,n,u){return h(0,r,i,o,n,u),o.y};f.exports=a},5047:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={CalculateFacesAt:t(92839),CalculateFacesWithin:t(60386),CheckIsoBounds:t(13125),Copy:t(17347),CreateFromTiles:t(93604),CullBounds:t(71586),CullTiles:t(381),Fill:t(97734),FilterTiles:t(63555),FindByIndex:t(37982),FindTile:t(48297),ForEachTile:t(80916),GetCullTilesFunction:t(31493),GetTileAt:t(15494),GetTileAtWorldXY:t(24640),GetTileCorners:t(48495),GetTileCornersFunction:t(7160),GetTilesWithin:t(50811),GetTilesWithinShape:t(31674),GetTilesWithinWorldXY:t(44662),GetTileToWorldXFunction:t(16884),GetTileToWorldXYFunction:t(68182),GetTileToWorldYFunction:t(3752),GetWorldToTileXFunction:t(29296),GetWorldToTileXYFunction:t(32688),GetWorldToTileYFunction:t(74326),HasTileAt:t(46598),HasTileAtWorldXY:t(28654),HexagonalCullBounds:t(6358),HexagonalCullTiles:t(37524),HexagonalGetTileCorners:t(63634),HexagonalTileToWorldXY:t(21715),HexagonalWorldToTileXY:t(11516),IsInLayerBounds:t(62839),IsometricCullTiles:t(20887),IsometricTileToWorldXY:t(21808),IsometricWorldToTileXY:t(18750),PutTileAt:t(29003),PutTileAtWorldXY:t(48565),PutTilesAt:t(56547),Randomize:t(91180),RemoveTileAt:t(929),RemoveTileAtWorldXY:t(17384),RenderDebug:t(93763),ReplaceByIndex:t(51202),RunCull:t(6987),SetCollision:t(51710),SetCollisionBetween:t(15216),SetCollisionByExclusion:t(33158),SetCollisionByProperty:t(4180),SetCollisionFromCollisionGroup:t(18625),SetLayerCollisionIndex:t(91181),SetTileCollision:t(68234),SetTileIndexCallback:t(11628),SetTileLocationCallback:t(72732),Shuffle:t(34397),StaggeredCullBounds:t(53945),StaggeredCullTiles:t(19242),StaggeredTileToWorldXY:t(33388),StaggeredTileToWorldY:t(84132),StaggeredWorldToTileXY:t(90562),StaggeredWorldToTileY:t(3689),SwapByIndex:t(55217),TileToWorldX:t(44150),TileToWorldXY:t(46836),TileToWorldY:t(42477),WeightedRandomize:t(39677),WorldToTileX:t(806),WorldToTileXY:t(45676),WorldToTileY:t(70520)}},12920:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},84758:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h={ORIENTATION:t(12920)};f.exports=h},52678:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(98611),m=t(84758),o={Components:t(5047),Parsers:t(34124),Formats:t(93560),ImageCollection:t(97042),ParseToTilemap:t(15043),Tile:t(29633),Tilemap:t(89797),TilemapCreator:t(4843),TilemapFactory:t(37940),Tileset:t(47975),TilemapLayer:t(87177),Orientation:t(12920),LayerData:t(94990),MapData:t(16586),ObjectLayer:t(15256)};o=h(!1,o,m.ORIENTATION),f.exports=o},94990:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12920),o=t(72632),a=new h({initialize:function(i){i===void 0&&(i={}),this.name=o(i,"name","layer"),this.x=o(i,"x",0),this.y=o(i,"y",0),this.width=o(i,"width",0),this.height=o(i,"height",0),this.tileWidth=o(i,"tileWidth",0),this.tileHeight=o(i,"tileHeight",0),this.baseTileWidth=o(i,"baseTileWidth",this.tileWidth),this.baseTileHeight=o(i,"baseTileHeight",this.tileHeight),this.orientation=o(i,"orientation",m.ORTHOGONAL),this.widthInPixels=o(i,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=o(i,"heightInPixels",this.height*this.baseTileHeight),this.alpha=o(i,"alpha",1),this.visible=o(i,"visible",!0),this.properties=o(i,"properties",[]),this.indexes=o(i,"indexes",[]),this.collideIndexes=o(i,"collideIndexes",[]),this.callbacks=o(i,"callbacks",[]),this.bodies=o(i,"bodies",[]),this.data=o(i,"data",[]),this.tilemapLayer=o(i,"tilemapLayer",null),this.hexSideLength=o(i,"hexSideLength",0),this.staggerAxis=o(i,"staggerAxis","y"),this.staggerIndex=o(i,"staggerIndex","odd")}});f.exports=a},16586:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(12920),o=t(72632),a=new h({initialize:function(i){i===void 0&&(i={}),this.name=o(i,"name","map"),this.width=o(i,"width",0),this.height=o(i,"height",0),this.infinite=o(i,"infinite",!1),this.tileWidth=o(i,"tileWidth",0),this.tileHeight=o(i,"tileHeight",0),this.widthInPixels=o(i,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=o(i,"heightInPixels",this.height*this.tileHeight),this.format=o(i,"format",null),this.orientation=o(i,"orientation",m.ORTHOGONAL),this.renderOrder=o(i,"renderOrder","right-down"),this.version=o(i,"version","1"),this.properties=o(i,"properties",{}),this.layers=o(i,"layers",[]),this.images=o(i,"images",[]),this.objects=o(i,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=o(i,"collision",{}),this.tilesets=o(i,"tilesets",[]),this.imageCollections=o(i,"imageCollections",[]),this.tiles=o(i,"tiles",[]),this.hexSideLength=o(i,"hexSideLength",0),this.staggerAxis=o(i,"staggerAxis","y"),this.staggerIndex=o(i,"staggerIndex","odd")}});f.exports=a},15256:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(72632),o=new h({initialize:function(r){r===void 0&&(r={}),this.name=m(r,"name","object layer"),this.opacity=m(r,"opacity",1),this.properties=m(r,"properties",{}),this.propertyTypes=m(r,"propertytypes",{}),this.type=m(r,"type","objectgroup"),this.visible=m(r,"visible",!0),this.objects=m(r,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});f.exports=o},21394:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(12920),m=function(o){return o=o.toLowerCase(),o==="isometric"?h.ISOMETRIC:o==="staggered"?h.STAGGERED:o==="hexagonal"?h.HEXAGONAL:h.ORTHOGONAL};f.exports=m},90715:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(93560),m=t(84346),o=t(96097),a=t(2378),r=t(44909),i=function(n,u,s,l,v,c){var g;switch(u){case h.ARRAY_2D:g=m(n,s,l,v,c);break;case h.CSV:g=o(n,s,l,v,c);break;case h.TILED_JSON:g=a(n,s,c);break;case h.WELTMEISTER:g=r(n,s,c);break;default:console.warn("Unrecognized tilemap data format: "+u),g=null}return g};f.exports=i},84346:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(93560),m=t(94990),o=t(16586),a=t(29633),r=function(i,n,u,s,l){for(var v=new m({tileWidth:u,tileHeight:s}),c=new o({name:i,tileWidth:u,tileHeight:s,format:h.ARRAY_2D,layers:[v]}),g=[],y=n.length,E=0,C=0;C<n.length;C++){g[C]=[];for(var T=n[C],A=0;A<T.length;A++){var P=parseInt(T[A],10);isNaN(P)||P===-1?g[C][A]=l?null:new a(v,-1,A,C,u,s):g[C][A]=new a(v,P,A,C,u,s)}E===0&&(E=T.length)}return c.width=v.width=E,c.height=v.height=y,c.widthInPixels=v.widthInPixels=E*u,c.heightInPixels=v.heightInPixels=y*s,v.data=g,c};f.exports=r},96097:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(93560),m=t(84346),o=function(a,r,i,n,u){var s=r.trim().split(`
`).map(function(v){return v.split(",")}),l=m(a,s,i,n,u);return l.format=h.CSV,l};f.exports=o},30951:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(94990),m=t(29633),o=function(a,r){for(var i=[],n=0;n<a.layer.length;n++){for(var u=a.layer[n],s=new h({name:u.name,width:u.width,height:u.height,tileWidth:u.tilesize,tileHeight:u.tilesize,visible:u.visible===1}),l=[],v=[],c=0;c<u.data.length;c++){for(var g=0;g<u.data[c].length;g++){var y=u.data[c][g]-1,E;y>-1?E=new m(s,y,g,c,u.tilesize,u.tilesize):E=r?null:new m(s,-1,g,c,u.tilesize,u.tilesize),l.push(E)}v.push(l),l=[]}s.data=v,i.push(s)}return i};f.exports=o},47488:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(47975),m=function(o){for(var a=[],r=[],i=0;i<o.layer.length;i++){var n=o.layer[i],u=n.tilesetName;u!==""&&r.indexOf(u)===-1&&(r.push(u),a.push(new h(u,0,n.tilesize,n.tilesize,0,0)))}return a};f.exports=m},44909:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(93560),m=t(16586),o=t(30951),a=t(47488),r=function(i,n,u){if(n.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+i),null;for(var s=0,l=0,v=0;v<n.layer.length;v++)n.layer[v].width>s&&(s=n.layer[v].width),n.layer[v].height>l&&(l=n.layer[v].height);var c=new m({width:s,height:l,name:i,tileWidth:n.layer[0].tilesize,tileHeight:n.layer[0].tilesize,format:h.WELTMEISTER});return c.layers=o(n,u),c.tilesets=a(n),c};f.exports=r},24507:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={ParseTileLayers:t(30951),ParseTilesets:t(47488),ParseWeltmeister:t(44909)}},34124:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={FromOrientationString:t(21394),Parse:t(90715),Parse2DArray:t(84346),ParseCSV:t(96097),Impact:t(24507),Tiled:t(50044)}},48646:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(98611),m=function(o){for(var a,r,i,n,u,s=0;s<o.layers.length;s++){a=o.layers[s],n=null;for(var l=0;l<a.data.length;l++){u=a.data[l];for(var v=0;v<u.length;v++)r=u[v],!(r===null||r.index<0)&&(i=o.tiles[r.index][2],n=o.tilesets[i],r.width=n.tileWidth,r.height=n.tileHeight,n.tileProperties&&n.tileProperties[r.index-n.firstgid]&&(r.properties=h(r.properties,n.tileProperties[r.index-n.firstgid])))}}};f.exports=m},43908:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){for(var h=window.atob(t),m=h.length,o=new Array(m/4),a=0;a<m;a+=4)o[a/4]=(h.charCodeAt(a)|h.charCodeAt(a+1)<<8|h.charCodeAt(a+2)<<16|h.charCodeAt(a+3)<<24)>>>0;return o};f.exports=S},14556:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(47975),m=function(o){var a,r,i=[];for(a=0;a<o.imageCollections.length;a++)for(var n=o.imageCollections[a],u=n.images,s=0;s<u.length;s++){var l=u[s];r=new h(l.image,l.gid,n.imageWidth,n.imageHeight,0,0),r.updateTileData(n.imageWidth,n.imageHeight),o.tilesets.push(r)}for(a=0;a<o.tilesets.length;a++){r=o.tilesets[a];for(var v=r.tileMargin,c=r.tileMargin,g=0,y=0,E=0,C=r.firstgid;C<r.firstgid+r.total&&(i[C]=[v,c,a],v+=r.tileWidth+r.tileSpacing,g++,!(g===r.total||(y++,y===r.columns&&(v=r.tileMargin,c+=r.tileHeight+r.tileSpacing,y=0,E++,E===r.rows))));C++);}return i};f.exports=m},92044:(f,S,t)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72632),m=function(o,a,r){if(!a)return{i:0,layers:o.layers,name:"",opacity:1,visible:!0,x:0,y:0};var i=a.x+h(a,"startx",0)*o.tilewidth+h(a,"offsetx",0),n=a.y+h(a,"starty",0)*o.tileheight+h(a,"offsety",0);return{i:0,layers:a.layers,name:r.name+a.name+"/",opacity:r.opacity*a.opacity,visible:r.visible&&a.visible,x:r.x+i,y:r.y+n}};f.exports=m},8847:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=2147483648,t=1073741824,h=536870912,m=function(o){var a=!!(o&S),r=!!(o&t),i=!!(o&h);o=o&~(S|t|h);var n=0,u=!1;return a&&r&&i?(n=Math.PI/2,u=!0):a&&r&&!i?(n=Math.PI,u=!1):a&&!r&&i?(n=Math.PI/2,u=!1):a&&!r&&!i?(n=0,u=!0):!a&&r&&i?(n=3*Math.PI/2,u=!1):!a&&r&&!i?(n=Math.PI,u=!0):!a&&!r&&i?(n=3*Math.PI/2,u=!0):!a&&!r&&!i&&(n=0,u=!1),{gid:o,flippedHorizontal:a,flippedVertical:r,flippedAntiDiagonal:i,rotation:n,flipped:u}};f.exports=m},78339:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72632),m=t(92044),o=function(a){for(var r=[],i=[],n=m(a);n.i<n.layers.length||i.length>0;){if(n.i>=n.layers.length){if(i.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}n=i.pop();continue}var u=n.layers[n.i];if(n.i++,u.type!=="imagelayer"){if(u.type==="group"){var s=m(a,u,n);i.push(n),n=s}continue}var l=h(u,"offsetx",0)+h(u,"startx",0),v=h(u,"offsety",0)+h(u,"starty",0);r.push({name:n.name+u.name,image:u.image,x:n.x+l+u.x,y:n.y+v+u.y,alpha:n.opacity*u.opacity,visible:n.visible&&u.visible,properties:h(u,"properties",{})})}return r};f.exports=o},2378:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(48646),m=t(14556),o=t(12920),a=t(28699),r=t(93560),i=t(21394),n=t(16586),u=t(78339),s=t(61136),l=t(95925),v=t(93392),c=function(g,y,E){var C=a(y),T=new n({width:C.width,height:C.height,name:g,tileWidth:C.tilewidth,tileHeight:C.tileheight,orientation:i(C.orientation),format:r.TILED_JSON,version:C.version,properties:C.properties,renderOrder:C.renderorder,infinite:C.infinite});T.orientation===o.HEXAGONAL&&(T.hexSideLength=C.hexsidelength,T.staggerAxis=C.staggeraxis,T.staggerIndex=C.staggerindex),T.layers=l(C,E),T.images=u(C);var A=v(C);return T.tilesets=A.tilesets,T.imageCollections=A.imageCollections,T.objects=s(C),T.tiles=m(T),h(T),T};f.exports=c},4281:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(28820),m=t(8847),o=function(i){return{x:i.x,y:i.y}},a=["id","name","type","rotation","properties","visible","x","y","width","height"],r=function(i,n,u){n===void 0&&(n=0),u===void 0&&(u=0);var s=h(i,a);if(s.x+=n,s.y+=u,i.gid){var l=m(i.gid);s.gid=l.gid,s.flippedHorizontal=l.flippedHorizontal,s.flippedVertical=l.flippedVertical,s.flippedAntiDiagonal=l.flippedAntiDiagonal}else i.polyline?s.polyline=i.polyline.map(o):i.polygon?s.polygon=i.polygon.map(o):i.ellipse?s.ellipse=i.ellipse:i.text?s.text=i.text:i.point?s.point=!0:s.rectangle=!0;return s};f.exports=r},61136:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72632),m=t(4281),o=t(15256),a=t(92044),r=function(i){for(var n=[],u=[],s=a(i);s.i<s.layers.length||u.length>0;){if(s.i>=s.layers.length){if(u.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}s=u.pop();continue}var l=s.layers[s.i];if(s.i++,l.opacity*=s.opacity,l.visible=s.visible&&l.visible,l.type!=="objectgroup"){if(l.type==="group"){var v=a(i,l,s);u.push(s),s=v}continue}l.name=s.name+l.name;for(var c=s.x+h(l,"startx",0)+h(l,"offsetx",0),g=s.y+h(l,"starty",0)+h(l,"offsety",0),y=[],E=0;E<l.objects.length;E++){var C=m(l.objects[E],c,g);y.push(C)}var T=new o(l);T.objects=y,n.push(T)}return n};f.exports=r},95925:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(43908),m=t(12920),o=t(92044),a=t(21394),r=t(72632),i=t(94990),n=t(8847),u=t(29633),s=function(l,v){for(var c=r(l,"infinite",!1),g=[],y=[],E=o(l);E.i<E.layers.length||y.length>0;){if(E.i>=E.layers.length){if(y.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}E=y.pop();continue}var C=E.layers[E.i];if(E.i++,C.type!=="tilelayer"){if(C.type==="group"){var T=o(l,C,E);y.push(E),E=T}continue}if(C.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+C.name+"'");continue}else if(C.encoding&&C.encoding==="base64"){if(C.chunks)for(var A=0;A<C.chunks.length;A++)C.chunks[A].data=h(C.chunks[A].data);C.data&&(C.data=h(C.data)),delete C.encoding}var P,M,w,L,F=[],D=0;if(c){var N=r(C,"startx",0)+C.x,B=r(C,"starty",0)+C.y;P=new i({name:E.name+C.name,x:E.x+r(C,"offsetx",0)+N*l.tilewidth,y:E.y+r(C,"offsety",0)+B*l.tileheight,width:C.width,height:C.height,tileWidth:l.tilewidth,tileHeight:l.tileheight,alpha:E.opacity*C.opacity,visible:E.visible&&C.visible,properties:r(C,"properties",[]),orientation:a(l.orientation)}),P.orientation===m.HEXAGONAL&&(P.hexSideLength=l.hexsidelength,P.staggerAxis=l.staggeraxis,P.staggerIndex=l.staggerindex);for(var b=0;b<C.height;b++){F[b]=[null];for(var W=0;W<C.width;W++)F[b][W]=null}for(b=0,$=C.chunks.length;b<$;b++)for(var Y=C.chunks[b],K=Y.x-N,G=Y.y-B,z=0,O=0,V=Y.data.length;O<V;O++){var U=D+K,X=z+G;M=n(Y.data[O]),M.gid>0?(w=new u(P,M.gid,U,X,l.tilewidth,l.tileheight),w.rotation=M.rotation,w.flipX=M.flipped,F[X][U]=w):(L=v?null:new u(P,-1,U,X,l.tilewidth,l.tileheight),F[X][U]=L),D++,D===Y.width&&(z++,D=0)}}else{P=new i({name:E.name+C.name,x:E.x+r(C,"offsetx",0)+C.x,y:E.y+r(C,"offsety",0)+C.y,width:C.width,height:C.height,tileWidth:l.tilewidth,tileHeight:l.tileheight,alpha:E.opacity*C.opacity,visible:E.visible&&C.visible,properties:r(C,"properties",[]),orientation:a(l.orientation)}),P.orientation===m.HEXAGONAL&&(P.hexSideLength=l.hexsidelength,P.staggerAxis=l.staggeraxis,P.staggerIndex=l.staggerindex);for(var H=[],Q=0,$=C.data.length;Q<$;Q++)M=n(C.data[Q]),M.gid>0?(w=new u(P,M.gid,D,F.length,l.tilewidth,l.tileheight),w.rotation=M.rotation,w.flipX=M.flipped,H.push(w)):(L=v?null:new u(P,-1,D,F.length,l.tilewidth,l.tileheight),H.push(L)),D++,D===C.width&&(F.push(H),D=0,H=[])}P.data=F,g.push(P)}return g};f.exports=s},93392:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(47975),m=t(97042),o=t(4281),a=t(39642),r=function(i){for(var n=[],u=[],s=null,l,v=0;v<i.tilesets.length;v++){var c=i.tilesets[v];if(c.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(c.image){var g=new h(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing,void 0,void 0,c.tileoffset);if(i.version>1){var y=void 0,E=void 0;if(Array.isArray(c.tiles)){y=y||{},E=E||{};for(var C=0;C<c.tiles.length;C++){var T=c.tiles[C];if(T.properties){var A={};T.properties.forEach(function(b){A[b.name]=b.value}),E[T.id]=A}if(T.objectgroup&&((y[T.id]||(y[T.id]={})).objectgroup=T.objectgroup,T.objectgroup.objects)){var P=T.objectgroup.objects.map(function(b){return o(b)});y[T.id].objectgroup.objects=P}T.animation&&((y[T.id]||(y[T.id]={})).animation=T.animation),T.type&&((y[T.id]||(y[T.id]={})).type=T.type)}}Array.isArray(c.wangsets)&&(y=y||{},E=E||{},a(c.wangsets,y)),y&&(g.tileData=y,g.tileProperties=E)}else if(c.tileproperties&&(g.tileProperties=c.tileproperties),c.tiles){g.tileData=c.tiles;for(l in g.tileData){var M=g.tileData[l].objectgroup;if(M&&M.objects){var w=M.objects.map(function(b){return o(b)});g.tileData[l].objectgroup.objects=w}}}g.updateTileData(c.imagewidth,c.imageheight),n.push(g)}else{var L=new m(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing,c.properties),F=0;for(C=0;C<c.tiles.length;C++){T=c.tiles[C];var D=T.image,N=parseInt(T.id,10),B=c.firstgid+N;L.addImage(B,D),F=Math.max(N,F)}L.maxId=F,u.push(L)}s&&(s.lastgid=c.firstgid-1),s=c}return{tilesets:n,imageCollections:u}};f.exports=r},39642:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){for(var m=0;m<t.length;m++){var o=t[m],a=m;if(o.name&&o.name!==""&&(a=o.name),Array.isArray(o.wangtiles)&&o.wangtiles.length>0){var r={},i={},n,u,s;if(Array.isArray(o.edgecolors))for(n=0;n<o.edgecolors.length;n++)s=1+n,u=o.edgecolors[n],u.name!==""&&(r[s]=u.name);if(Array.isArray(o.cornercolors))for(n=0;n<o.cornercolors.length;n++)s=1+n,u=o.cornercolors[n],u.name!==""&&(i[s]=u.name);if(Array.isArray(o.colors))for(n=0;n<o.colors.length;n++)u=o.colors[n],s=1+n,u.name!==""&&(r[s]=i[s]=u.name);for(var l=[r,i,r,i,r,i,r,i],v=0;v<o.wangtiles.length;v++){var c=o.wangtiles[v],g=h[c.tileid]||(h[c.tileid]={});g=g.wangid||(g.wangid={});for(var y=[],E=0;E<Math.min(l.length,c.wangid.length);E++){if(u=c.wangid[E],u===0){y.push(void 0);continue}var C=l[E][u];if(C!==void 0){y.push(C);continue}y.push(u)}g[a]=y}}}};f.exports=S},50044:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={AssignTileProperties:t(48646),Base64Decode:t(43908),BuildTilesetIndex:t(14556),CreateGroupLayer:t(92044),ParseGID:t(8847),ParseImageLayers:t(78339),ParseJSONTiled:t(2378),ParseObject:t(4281),ParseObjectLayers:t(61136),ParseTileLayers:t(95925),ParseTilesets:t(93392)}},73779:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(91963),o=t(7599),a=t(57911),r=t(66458),i=new h({initialize:function(u){this.scene=u,this.systems=u.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],u.sys.events.once(o.BOOT,this.boot,this),u.sys.events.on(o.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var n=this.systems.events;n.on(o.PRE_UPDATE,this.preUpdate,this),n.on(o.UPDATE,this.update,this),n.once(o.SHUTDOWN,this.shutdown,this)},addEvent:function(n){var u;return n instanceof a?(u=n,this.removeEvent(u),u.elapsed=u.startAt,u.hasDispatched=!1,u.repeatCount=u.repeat===-1||u.loop?999999999999:u.repeat):u=new a(n),this._pendingInsertion.push(u),u},delayedCall:function(n,u,s,l){return this.addEvent({delay:n,callback:u,args:s,callbackScope:l})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(n){Array.isArray(n)||(n=[n]);for(var u=0;u<n.length;u++){var s=n[u];r(this._pendingRemoval,s),r(this._pendingInsertion,s),r(this._active,s)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var n=this._pendingRemoval.length,u=this._pendingInsertion.length;if(!(n===0&&u===0)){var s,l;for(s=0;s<n;s++){l=this._pendingRemoval[s];var v=this._active.indexOf(l);v>-1&&this._active.splice(v,1),l.destroy()}for(s=0;s<u;s++)l=this._pendingInsertion[s],this._active.push(l);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(n,u){if(this.now=n,!this.paused){u*=this.timeScale;for(var s=0;s<this._active.length;s++){var l=this._active[s];if(!l.paused&&(l.elapsed+=u*l.timeScale,l.elapsed>=l.delay)){var v=l.elapsed-l.delay;if(l.elapsed=l.delay,!l.hasDispatched&&l.callback&&(l.hasDispatched=!0,l.callback.apply(l.callbackScope,l.args)),l.repeatCount>0){if(l.repeatCount--,v>=l.delay)for(;v>=l.delay&&l.repeatCount>0;)l.callback&&l.callback.apply(l.callbackScope,l.args),v-=l.delay,l.repeatCount--;l.elapsed=v,l.hasDispatched=!1}else l.hasDispatched&&this._pendingRemoval.push(l)}}}},shutdown:function(){var n;for(n=0;n<this._pendingInsertion.length;n++)this._pendingInsertion[n].destroy();for(n=0;n<this._active.length;n++)this._active[n].destroy();for(n=0;n<this._pendingRemoval.length;n++)this._pendingRemoval[n].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var u=this.systems.events;u.off(o.PRE_UPDATE,this.preUpdate,this),u.off(o.UPDATE,this.update,this),u.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});m.register("Clock",i,"time"),f.exports=i},20517:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(6659),o=t(61286),a=t(72632),r=t(7599),i=new h({Extends:m,initialize:function(u,s){m.call(this),this.scene=u,this.systems=u.sys,this.elapsed=0,this.paused=!0,this.complete=!1,this.totalComplete=0,this.events=[];var l=this.systems.events;l.on(r.PRE_UPDATE,this.preUpdate,this),l.on(r.UPDATE,this.update,this),l.once(r.SHUTDOWN,this.destroy,this),s&&this.add(s)},preUpdate:function(n,u){this.paused||(this.elapsed+=u)},update:function(){if(!this.paused){var n,u=this.events,s=!1,l=this.systems,v;for(n=0;n<u.length;n++){var c=u[n];if(!c.complete&&c.time<=this.elapsed){if(c.complete=!0,this.totalComplete++,c.once&&(s=!0),c.set&&c.target)for(var g in c.set)c.target[g]=c.set[g];c.tween&&l.tweens.add(c.tween),c.sound&&(typeof c.sound=="string"?l.sound.play(c.sound):l.sound.play(c.sound.key,c.sound.config)),v=c.target?c.target:this,c.event&&this.emit(c.event,v),c.run&&c.run.call(v),c.stop&&this.stop()}}if(s)for(n=0;n<u.length;n++)u[n].complete&&u[n].once&&(u.splice(n,1),n--);this.totalComplete>=u.length&&(this.complete=!0)}},play:function(n){return n===void 0&&(n=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,n&&this.reset(),this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(){this.elapsed=0;for(var n=0;n<this.events.length;n++)this.events[n].complete=!1;return this.play(!1)},add:function(n){Array.isArray(n)||(n=[n]);var u=this.events,s=0;u.length>0&&(s=u[u.length-1].time);for(var l=0;l<n.length;l++){var v=n[l],c=a(v,"at",0),g=a(v,"in",null);g!==null&&(c=this.elapsed+g);var y=a(v,"from",null);y!==null&&(c=s+y),u.push({complete:!1,time:c,run:a(v,"run",null),event:a(v,"event",null),target:a(v,"target",null),set:a(v,"set",null),tween:a(v,"tween",null),sound:a(v,"sound",null),once:a(v,"once",!1),stop:a(v,"stop",!1)}),s=c}return this.complete=!1,this},clear:function(){return this.events=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var n=Math.min(this.totalComplete,this.events.length);return n/this.events.length},destroy:function(){var n=this.systems.events;n.off(r.PRE_UPDATE,this.preUpdate,this),n.off(r.UPDATE,this.update,this),n.off(r.SHUTDOWN,this.destroy,this),this.scene=null,this.systems=null,this.events=[]}});o.register("timeline",function(n){return new i(this.scene,n)}),f.exports=i},57911:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(72632),o=new h({initialize:function(r){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(r)},reset:function(a){if(this.delay=m(a,"delay",0),this.repeat=m(a,"repeat",0),this.loop=m(a,"loop",!1),this.callback=m(a,"callback",void 0),this.callbackScope=m(a,"callbackScope",this),this.args=m(a,"args",[]),this.timeScale=m(a,"timeScale",1),this.startAt=m(a,"startAt",0),this.paused=m(a,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var a=this.delay+this.delay*this.repeat,r=this.elapsed+this.delay*(this.repeat-this.repeatCount);return r/a}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(a){a===void 0&&(a=!1),this.elapsed=this.delay,this.hasDispatched=!a,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});f.exports=o},97121:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Clock:t(73779),Timeline:t(20517),TimerEvent:t(57911)}},64532:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(66458),m=t(56694),o=t(5454),a=t(68710),r=t(91963),i=t(7599),n=t(91944),u=t(39366),s=t(68061),l=t(45641),v=t(56034),c=new m({initialize:function(y){this.scene=y,this.events=y.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(i.BOOT,this.boot,this),this.events.on(i.START,this.start,this)},boot:function(){this.events.once(i.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(i.UPDATE,this.update,this),this.events.once(i.SHUTDOWN,this.shutdown,this)},create:function(g){Array.isArray(g)||(g=[g]);for(var y=[],E=0;E<g.length;E++){var C=g[E];C instanceof u||C instanceof l?y.push(C):Array.isArray(C.tweens)?y.push(v(this,C)):y.push(s(this,C))}return y.length===1?y[0]:y},add:function(g){var y=g,E=this.tweens;return y instanceof u||y instanceof l||(Array.isArray(y.tweens)?y=v(this,y):y=s(this,y)),E.push(y.reset()),y},addMultiple:function(g){for(var y,E=[],C=this.tweens,T=0;T<g.length;T++)y=g[T],y instanceof u||y instanceof l||(Array.isArray(y.tweens)?y=v(this,y):y=s(this,y)),C.push(y.reset()),E.push(y);return E},chain:function(g){var y=v(this,g);return this.tweens.push(y.init()),y},getChainedTweens:function(g){return g.getChainedTweens()},has:function(g){return this.tweens.indexOf(g)>-1},existing:function(g){return this.has(g)||this.tweens.push(g.reset()),this},addCounter:function(g){var y=a(this,g);return this.tweens.push(y.reset()),y},stagger:function(g,y){return n(g,y)},setLagSmooth:function(g,y){return g===void 0&&(g=1/1e-8),y===void 0&&(y=0),this.maxLag=g,this.lagSkip=Math.min(y,this.maxLag),this},setFps:function(g){return g===void 0&&(g=240),this.gap=1e3/g,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(g){var y=Date.now()-this.prevTime;y>this.maxLag&&(this.startTime+=y-this.lagSkip),this.prevTime+=y;var E=this.prevTime-this.startTime,C=E-this.nextTime,T=E-this.time*1e3;return C>0||g?(E/=1e3,this.time=E,this.nextTime+=C+(C>=this.gap?4:this.gap-C)):T=0,T},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(g){g===void 0&&(g=!1);var y=this.getDelta(g);if(!(y<=0)){this.processing=!0;var E,C,T=[],A=this.tweens;for(E=0;E<A.length;E++)C=A[E],C.update(y)&&T.push(C);var P=T.length;if(P&&A.length>0){for(E=0;E<P;E++){C=T[E];var M=A.indexOf(C);M>-1&&(C.isPendingRemove()||C.isDestroyed())&&(A.splice(M,1),C.destroy())}T.length=0}this.processing=!1}},remove:function(g){return this.processing?g.setPendingRemoveState():(h(this.tweens,g),g.setRemovedState()),this},reset:function(g){return this.existing(g),g.seek(),g.setActiveState(),this},makeActive:function(g){return this.existing(g),g.setActiveState(),this},each:function(g,y){var E,C=[null];for(E=1;E<arguments.length;E++)C.push(arguments[E]);return this.tweens.forEach(function(T){C[0]=T,g.apply(y,C)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(g){var y=[],E=this.tweens;Array.isArray(g)?g=o(g):g=[g];for(var C=g.length,T=0;T<E.length;T++)for(var A=E[T],P=0;P<C;P++)!A.isDestroyed()&&A.hasTarget(g[P])&&y.push(A);return y},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(g){return this.timeScale=g,this},isTweening:function(g){for(var y=this.tweens,E,C=0;C<y.length;C++)if(E=y[C],E.isPlaying()&&E.hasTarget(g))return!0;return!1},killAll:function(){for(var g=this.processing?this.getTweens():this.tweens,y=0;y<g.length;y++)g[y].destroy();return this.processing||(g.length=0),this},killTweensOf:function(g){for(var y=this.getTweensOf(g),E=0;E<y.length;E++)y[E].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(i.UPDATE,this.update,this),this.events.off(i.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(i.START,this.start,this),this.scene=null,this.events=null}});r.register("TweenManager",c,"tweens"),f.exports=c},63130:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){return t&&t.hasOwnProperty(h)?t[h]:m};f.exports=S},21902:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(35060),m=t(40587),o=function(a,r){var i=h.Power0;if(typeof a=="string")if(h.hasOwnProperty(a))i=h[a];else{var n="";if(a.indexOf(".")){n=a.substring(a.indexOf(".")+1);var u=n.toLowerCase();u==="in"?n="easeIn":u==="out"?n="easeOut":u==="inout"&&(n="easeInOut")}a=m(a.substring(0,a.indexOf(".")+1)+n),h.hasOwnProperty(a)&&(i=h[a])}else typeof a=="function"&&(i=a);if(!r)return i;var s=r.slice(0);return s.unshift(0),function(l){return s[0]=l,i.apply(this,s)}};f.exports=o},4840:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(63210),m=t(88332),o=t(47614),a={bezier:h,catmull:m,catmullrom:m,linear:o},r=function(i){if(i===null)return null;var n=a.linear;return typeof i=="string"?a.hasOwnProperty(i)&&(n=a[i]):typeof i=="function"&&(n=i),n};f.exports=r},28348:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){var o;if(t.hasOwnProperty(h)){var a=typeof t[h];a==="function"?o=function(r,i,n,u,s,l){return t[h](r,i,n,u,s,l)}:o=function(){return t[h]}}else typeof m=="function"?o=m:o=function(){return m};return o};f.exports=S},92407:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(53709),m=function(o){var a,r=[];if(o.hasOwnProperty("props"))for(a in o.props)a.substring(0,1)!=="_"&&r.push({key:a,value:o.props[a]});else for(a in o)h.indexOf(a)===-1&&a.substring(0,1)!=="_"&&r.push({key:a,value:o[a]});return r};f.exports=m},65868:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(10850),m=function(o){var a=h(o,"targets",null);return a===null||(typeof a=="function"&&(a=a.call()),Array.isArray(a)||(a=[a])),a};f.exports=m},9744:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(17489),m=t(61616);function o(u){return!!u.getActive&&typeof u.getActive=="function"}function a(u){return!!u.getStart&&typeof u.getStart=="function"}function r(u){return!!u.getEnd&&typeof u.getEnd=="function"}function i(u){return a(u)||r(u)||o(u)}var n=function(u,s){var l,v=function(Y,K,G){return G},c=function(Y,K,G){return G},g=null,y=typeof s;if(y==="number")v=function(){return s};else if(Array.isArray(s))c=function(){return s[0]},v=function(){return s[s.length-1]};else if(y==="string"){var E=s.toLowerCase(),C=E.substring(0,6)==="random",T=E.substring(0,3)==="int";if(C||T){var A=E.indexOf("("),P=E.indexOf(")"),M=E.indexOf(",");if(A&&P&&M){var w=parseFloat(E.substring(A+1,M)),L=parseFloat(E.substring(M+1,P));C?v=function(){return m(w,L)}:v=function(){return h(w,L)}}else throw new Error("invalid random() format")}else{E=E[0];var F=parseFloat(s.substr(2));switch(E){case"+":v=function(Y,K,G){return G+F};break;case"-":v=function(Y,K,G){return G-F};break;case"*":v=function(Y,K,G){return G*F};break;case"/":v=function(Y,K,G){return G/F};break;default:v=function(){return parseFloat(s)}}}}else if(y==="function")v=s;else if(y==="object")if(i(s))o(s)&&(g=s.getActive),r(s)&&(v=s.getEnd),a(s)&&(c=s.getStart);else if(s.hasOwnProperty("value"))l=n(u,s.value);else{var D=s.hasOwnProperty("to"),N=s.hasOwnProperty("from"),B=s.hasOwnProperty("start");if(D&&(N||B)){if(l=n(u,s.to),B){var b=n(u,s.start);l.getActive=b.getEnd}if(N){var W=n(u,s.from);l.getStart=W.getEnd}}}return l||(l={getActive:g,getEnd:v,getStart:c}),l};f.exports=n},68710:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(502),m=t(99730),o=t(20494),a=t(63130),r=t(21902),i=t(28348),n=t(10850),u=t(9744),s=t(72066),l=t(39366),v=function(c,g,y){if(g instanceof l)return g.parent=c,g;y===void 0?y=m:y=s(m,y);var E=n(g,"from",0),C=n(g,"to",1),T=[{value:E}],A=n(g,"delay",y.delay),P=n(g,"easeParams",y.easeParams),M=n(g,"ease",y.ease),w=u("value",C),L=new l(c,T),F=L.add(0,"value",w.getEnd,w.getStart,w.getActive,r(n(g,"ease",M),n(g,"easeParams",P)),i(g,"delay",A),n(g,"duration",y.duration),a(g,"yoyo",y.yoyo),n(g,"hold",y.hold),n(g,"repeat",y.repeat),n(g,"repeatDelay",y.repeatDelay),!1,!1);F.start=E,F.current=E,L.completeDelay=o(g,"completeDelay",0),L.loop=Math.round(o(g,"loop",0)),L.loopDelay=Math.round(o(g,"loopDelay",0)),L.paused=a(g,"paused",!1),L.persist=a(g,"persist",!1),L.callbackScope=n(g,"callbackScope",L);for(var D=h.TYPES,N=0;N<D.length;N++){var B=D[N],b=n(g,B,!1);if(b){var W=n(g,B+"Params",[]);L.setCallback(B,b,W)}}return L};f.exports=v},91944:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(21902),m=t(10850),o=t(83392),a=function(r,i){i===void 0&&(i={});var n,u=m(i,"start",0),s=m(i,"ease",null),l=m(i,"grid",null),v=m(i,"from",0),c=v==="first",g=v==="center",y=v==="last",E=typeof v=="number",C=Array.isArray(r),T=parseFloat(C?r[0]:r),A=C?parseFloat(r[1]):0,P=Math.max(T,A);if(C&&(u+=T),l){var M=l[0],w=l[1],L=0,F=0,D=0,N=0,B=[];y?(L=M-1,F=w-1):E?(L=v%M,F=Math.floor(v/M)):g&&(L=(M-1)/2,F=(w-1)/2);for(var b=o.MIN_SAFE_INTEGER,W=0;W<w;W++){B[W]=[];for(var Y=0;Y<M;Y++){D=L-Y,N=F-W;var K=Math.sqrt(D*D+N*N);K>b&&(b=K),B[W][Y]=K}}}var G=s?h(s):null;return l?n=function(z,O,V,U){var X=0,H=U%M,Q=Math.floor(U/M);H>=0&&H<M&&Q>=0&&Q<w&&(X=B[Q][H]);var $;if(C){var k=A-T;G?$=X/b*k*G(X/b):$=X/b*k}else G?$=X*T*G(X/b):$=X*T;return $+u}:n=function(z,O,V,U,X){X--;var H;c?H=U:g?H=Math.abs(X/2-U):y?H=X-U:E&&(H=Math.abs(v-U));var Q;if(C){var $;g?$=(A-T)/X*(H*2):$=(A-T)/X*H,G?Q=$*G(H/X):Q=$}else G?Q=X*P*G(H/X):Q=H*T;return Q+u},n};f.exports=a},68061:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(502),m=t(99730),o=t(20494),a=t(63130),r=t(21902),i=t(4840),n=t(28348),u=t(92407),s=t(65868),l=t(10850),v=t(9744),c=t(72066),g=t(39366),y=function(E,C,T){if(C instanceof g)return C.parent=E,C;T===void 0?T=m:T=c(m,T);var A=s(C);!A&&T.targets&&(A=T.targets);for(var P=u(C),M=l(C,"delay",T.delay),w=l(C,"duration",T.duration),L=l(C,"easeParams",T.easeParams),F=l(C,"ease",T.ease),D=l(C,"hold",T.hold),N=l(C,"repeat",T.repeat),B=l(C,"repeatDelay",T.repeatDelay),b=a(C,"yoyo",T.yoyo),W=a(C,"flipX",T.flipX),Y=a(C,"flipY",T.flipY),K=l(C,"interpolation",T.interpolation),G=function(Z,j,_,q){if(_==="texture"){var it=q,ht=void 0;Array.isArray(q)?(it=q[0],ht=q[1]):q.hasOwnProperty("value")?(it=q.value,Array.isArray(q.value)?(it=q.value[0],ht=q.value[1]):typeof q.value=="string"&&(it=q.value)):typeof q=="string"&&(it=q),Z.addFrame(j,it,ht,n(q,"delay",M),l(q,"duration",w),l(q,"hold",D),l(q,"repeat",N),l(q,"repeatDelay",B),a(q,"flipX",W),a(q,"flipY",Y))}else{var ft=v(_,q),ut=i(l(q,"interpolation",K));Z.add(j,_,ft.getEnd,ft.getStart,ft.getActive,r(l(q,"ease",F),l(q,"easeParams",L)),n(q,"delay",M),l(q,"duration",w),a(q,"yoyo",b),l(q,"hold",D),l(q,"repeat",N),l(q,"repeatDelay",B),a(q,"flipX",W),a(q,"flipY",Y),ut,ut?q:null)}},z=new g(E,A),O=0;O<P.length;O++)for(var V=P[O].key,U=P[O].value,X=0;X<A.length;X++)V==="scale"&&!A[X].hasOwnProperty("scale")?(G(z,X,"scaleX",U),G(z,X,"scaleY",U)):G(z,X,V,U);z.completeDelay=o(C,"completeDelay",0),z.loop=Math.round(o(C,"loop",0)),z.loopDelay=Math.round(o(C,"loopDelay",0)),z.paused=a(C,"paused",!1),z.persist=a(C,"persist",!1),z.callbackScope=l(C,"callbackScope",z);for(var H=h.TYPES,Q=0;Q<H.length;Q++){var $=H[Q],k=l(C,$,!1);if(k){var J=l(C,$+"Params",[]);z.setCallback($,k,J)}}return z};f.exports=y},56034:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(502),m=t(20494),o=t(63130),a=t(65868),r=t(10850),i=t(68061),n=t(45641),u=function(s,l){if(l instanceof n)return l.parent=s,l;var v=new n(s);v.startDelay=r(l,"delay",0),v.completeDelay=m(l,"completeDelay",0),v.loop=Math.round(m(l,"loop",r(l,"repeat",0))),v.loopDelay=Math.round(m(l,"loopDelay",r(l,"repeatDelay",0))),v.paused=o(l,"paused",!1),v.persist=o(l,"persist",!0),v.callbackScope=r(l,"callbackScope",v);var c,g=h.TYPES;for(c=0;c<g.length;c++){var y=g[c],E=r(l,y,!1);if(E){var C=r(l,y+"Params",[]);v.setCallback(y,E,C)}}var T=r(l,"tweens",null);if(Array.isArray(T)){var A=[],P=a(l),M=void 0;for(P&&(M={targets:P}),c=0;c<T.length;c++)A.push(i(v,T[c],M));v.add(A)}return v};f.exports=u},79619:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={GetBoolean:t(63130),GetEaseFunction:t(21902),GetInterpolationFunction:t(4840),GetNewValue:t(28348),GetProps:t(92407),GetTargets:t(65868),GetValueOp:t(9744),NumberTweenBuilder:t(68710),StaggerBuilder:t(91944),TweenBuilder:t(68061)}},5570:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="active"},6383:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="complete"},72582:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="loop"},90281:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="pause"},80803:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="repeat"},13640:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="resume"},10472:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="start"},5379:f=>{/**
 * @author       samme
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="stop"},43449:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="update"},61541:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports="yoyo"},54272:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={TWEEN_ACTIVE:t(5570),TWEEN_COMPLETE:t(6383),TWEEN_LOOP:t(72582),TWEEN_PAUSE:t(90281),TWEEN_RESUME:t(13640),TWEEN_REPEAT:t(80803),TWEEN_START:t(10472),TWEEN_STOP:t(5379),TWEEN_UPDATE:t(43449),TWEEN_YOYO:t(61541)}},75193:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h={States:t(55303),Builders:t(79619),Events:t(54272),TweenManager:t(64532),Tween:t(39366),TweenData:t(15718),TweenFrameData:t(96490),BaseTween:t(502),TweenChain:t(45641)};f.exports=h},502:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(6659),o=t(54272),a=t(55303),r=new h({Extends:m,initialize:function(n){m.call(this),this.parent=n,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=a.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(i){return this.timeScale=i,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(o.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(o.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(o.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(o.TWEEN_COMPLETE,"onComplete")},complete:function(i){return i===void 0&&(i=0),i?(this.setCompleteDelayState(),this.countdown=i):this.onCompleteHandler(),this},completeAfterLoop:function(i){return i===void 0&&(i=0),this.loopCounter>i&&(this.loopCounter=i),this},remove:function(){return this.parent.remove(this),this},stop:function(){return!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(o.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(i){this.countdown-=i,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(o.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(i){return this.countdown-=i,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(o.TWEEN_START,"onStart"),i=0),i},updateCompleteDelay:function(i){this.countdown-=i,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(i,n,u){return u===void 0&&(u=[]),this.callbacks.hasOwnProperty(i)&&(this.callbacks[i]={func:n,params:u}),this},setPendingState:function(){this.state=a.PENDING},setActiveState:function(){this.state=a.ACTIVE},setLoopDelayState:function(){this.state=a.LOOP_DELAY},setCompleteDelayState:function(){this.state=a.COMPLETE_DELAY},setStartDelayState:function(){this.state=a.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=a.PENDING_REMOVE},setRemovedState:function(){this.state=a.REMOVED},setFinishedState:function(){this.state=a.FINISHED},setDestroyedState:function(){this.state=a.DESTROYED},isPending:function(){return this.state===a.PENDING},isActive:function(){return this.state===a.ACTIVE},isLoopDelayed:function(){return this.state===a.LOOP_DELAY},isCompleteDelayed:function(){return this.state===a.COMPLETE_DELAY},isStartDelayed:function(){return this.state===a.START_DELAY},isPendingRemove:function(){return this.state===a.PENDING_REMOVE},isRemoved:function(){return this.state===a.REMOVED},isFinished:function(){return this.state===a.FINISHED},isDestroyed:function(){return this.state===a.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(i){i.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});r.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],f.exports=r},65521:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(56694),m=t(54272),o=t(55303),a=new h({initialize:function(i,n,u,s,l,v,c,g,y,E){this.tween=i,this.targetIndex=n,this.duration=s,this.totalDuration=0,this.delay=0,this.getDelay=u,this.yoyo=l,this.hold=v,this.repeat=c,this.repeatDelay=g,this.repeatCounter=0,this.flipX=y,this.flipY=E,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(r){r===void 0&&(r=this.current),this.tween.targets[this.targetIndex][this.key]=r},setCreatedState:function(){this.state=o.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=o.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=o.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=o.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=o.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=o.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=o.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=o.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===o.CREATED},isDelayed:function(){return this.state===o.DELAY},isPendingRender:function(){return this.state===o.PENDING_RENDER},isPlayingForward:function(){return this.state===o.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===o.PLAYING_BACKWARD},isHolding:function(){return this.state===o.HOLD_DELAY},isRepeating:function(){return this.state===o.REPEAT_DELAY},isComplete:function(){return this.state===o.COMPLETE},setStateFromEnd:function(r){this.yoyo?this.onRepeat(r,!0,!0):this.repeatCounter>0?this.onRepeat(r,!0,!1):this.setCompleteState()},setStateFromStart:function(r){this.repeatCounter>0?this.onRepeat(r,!1):this.setCompleteState()},reset:function(){var r=this.tween,i=r.totalTargets,n=this.targetIndex,u=r.targets[n],s=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(u,s,0,n,i,r),this.repeatCounter=this.repeat===-1?o.MAX:this.repeat,this.setPendingRenderState();var l=this.duration+this.hold;this.yoyo&&(l+=this.duration);var v=l+this.repeatDelay;this.totalDuration=this.delay+l,this.repeat===-1?(this.totalDuration+=v*o.MAX,r.isInfinite=!0):this.repeat>0&&(this.totalDuration+=v*this.repeat),this.totalDuration>r.duration&&(r.duration=this.totalDuration),this.delay<r.startDelay&&(r.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(r,i,n){var u=this.tween,s=u.totalTargets,l=this.targetIndex,v=u.targets[l],c=this.key,g=c!=="texture";if(this.elapsed=r,this.progress=r/this.duration,this.flipX&&v.toggleFlipX(),this.flipY&&v.toggleFlipY(),g&&(i||n)&&(this.start=this.getStartValue(v,c,this.start,l,s,u)),n){this.setPlayingBackwardState(),this.dispatchEvent(m.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,g&&(this.end=this.getEndValue(v,c,this.start,l,s,u)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-r,g&&(this.current=this.start,v[c]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(m.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});f.exports=a},99730:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};f.exports=S},53709:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},39366:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(502),m=t(56694),o=t(54272),a=t(99325),r=t(61286),i=t(83392),n=t(55303),u=t(15718),s=t(96490),l=new m({Extends:h,initialize:function(c,g){h.call(this,c),this.targets=g,this.totalTargets=g.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(v,c,g,y,E,C,T,A,P,M,w,L,F,D,N,B){var b=new u(this,v,c,g,y,E,C,T,A,P,M,w,L,F,D,N,B);return this.totalData=this.data.push(b),b},addFrame:function(v,c,g,y,E,C,T,A,P,M){var w=new s(this,v,c,g,y,E,C,T,A,P,M);return this.totalData=this.data.push(w),w},getValue:function(v){v===void 0&&(v=0);var c=null;return this.data&&(c=this.data[v].current),c},hasTarget:function(v){return this.targets&&this.targets.indexOf(v)!==-1},updateTo:function(v,c,g){if(g===void 0&&(g=!1),v!=="texture")for(var y=0;y<this.totalData;y++){var E=this.data[y];E.key===v&&(E.isPlayingForward()||E.isPlayingBackward())&&(E.end=c,g&&(E.start=E.current))}return this},restart:function(){switch(this.state){case n.REMOVED:case n.FINISHED:this.seek(),this.parent.makeActive(this);break;case n.PENDING:case n.PENDING_REMOVE:this.parent.reset(this);break;case n.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(o.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,h.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(v,c,g){if(v===void 0&&(v=0),c===void 0&&(c=16.6),g===void 0&&(g=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;g||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(o.TWEEN_ACTIVE,"onActive");var y=this.paused;if(this.paused=!1,v>0){for(var E=Math.floor(v/c),C=v-E*c,T=0;T<E;T++)this.update(c);C>0&&this.update(C)}return this.paused=y,this.isSeeking=!1,this},initTweenData:function(v){v===void 0&&(v=!1),this.duration=0,this.startDelay=i.MAX_SAFE_INTEGER;for(var c=this.data,g=0;g<this.totalData;g++)c[g].reset(v);this.duration=Math.max(this.duration,.01);var y=this.duration,E=this.completeDelay,C=this.loopCounter,T=this.loopDelay;C>0?this.totalDuration=y+E+(y+T)*C:this.totalDuration=y+E},reset:function(v){return v===void 0&&(v=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=n.MAX),v||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(o.TWEEN_ACTIVE,"onActive")),this},update:function(v){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(v*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(v),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(v),!1;this.hasStarted||(this.startDelay-=v,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(o.TWEEN_START,"onStart"),v=0));var c=!1;if(this.isActive())for(var g=this.data,y=0;y<this.totalData;y++)g[y].update(v)&&(c=!0);this.elapsed+=v,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=v,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),c||this.nextState();var E=this.isPendingRemove();return E&&this.persist&&(this.setFinishedState(),E=!1),E},forward:function(v){return this.update(v),this},rewind:function(v){return this.update(-v),this},dispatchEvent:function(v,c){if(!this.isSeeking){this.emit(v,this,this.targets);var g=this.callbacks[c];g&&g.func.apply(this.callbackScope,[this,this.targets].concat(g.params))}},destroy:function(){h.prototype.destroy.call(this),this.targets=null}});r.register("tween",function(v){return this.scene.sys.tweens.add(v)}),a.register("tween",function(v){return this.scene.sys.tweens.create(v)}),f.exports=l},45641:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(66458),m=t(502),o=t(56694),a=t(54272),r=t(99325),i=t(61286),n=t(55303),u=new o({Extends:m,initialize:function(l){m.call(this,l),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?n.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this.dispatchEvent(a.TWEEN_ACTIVE,"onActive"),this},add:function(s){var l=this.parent.create(s);Array.isArray(l)||(l=[l]);for(var v=this.data,c=0;c<l.length;c++){var g=l[c];g.parent=this,v.push(g.reset())}return this.totalData=v.length,this},remove:function(s){return h(this.data,s),s.setRemovedState(),s===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(s){for(var l=this.data,v=0;v<this.totalData;v++)if(l[v].hasTarget(s))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(s){return s.seek(),s.setActiveState(),this},makeActive:function(s){return s.reset(),s.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(a.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var s=this.data,l=this.totalData,v=0;v<l;v++)s[v].reset(!1);this.currentIndex=0,this.currentTween=s[0]},update:function(s){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;s*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(s):this.isCompleteDelayed()?this.updateCompleteDelay(s):this.isStartDelayed()&&(s=this.updateStartCountdown(s));var l=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(s)&&this.nextTween()&&this.nextState(),l=this.isPendingRemove(),l&&this.persist&&(this.setFinishedState(),l=!1)),l},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(s){this.currentIndex=s,this.currentTween=this.data[s],this.currentTween.setActiveState(),this.currentTween.dispatchEvent(a.TWEEN_ACTIVE,"onActive")},dispatchEvent:function(s,l){this.emit(s,this);var v=this.callbacks[l];v&&v.func.apply(this.callbackScope,[this].concat(v.params))},destroy:function(){m.prototype.destroy.call(this),this.currentTween=null}});i.register("tweenchain",function(s){return this.scene.sys.tweens.chain(s)}),r.register("tweenchain",function(s){return this.scene.sys.tweens.create(s)}),f.exports=u},15718:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(65521),m=t(82897),o=t(56694),a=t(54272),r=new o({Extends:h,initialize:function(n,u,s,l,v,c,g,y,E,C,T,A,P,M,w,L,F){h.call(this,n,u,y,E,C,T,A,P,M,w),this.key=s,this.getActiveValue=c,this.getEndValue=l,this.getStartValue=v,this.ease=g,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=L,this.interpolationData=F},reset:function(i){h.prototype.reset.call(this);var n=this.tween.targets[this.targetIndex],u=this.key;i&&(n[u]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(n[u]=this.getActiveValue(n,u,0))},update:function(i){var n=this.tween,u=n.totalTargets,s=this.targetIndex,l=n.targets[s],v=this.key;if(!l)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=i,this.elapsed<=0&&(this.elapsed=0,i=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(a.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(l,v,l[v],s,u,n),this.end=this.getEndValue(l,v,this.start,s,u,n),this.current=this.start,l[v]=this.start,this.setPlayingForwardState(),!0;var c=this.isPlayingForward(),g=this.isPlayingBackward();if(c||g){var y=this.elapsed,E=this.duration,C=0,T=!1;y+=i,y>=E?(C=y-E,y=E,T=!0):y<0&&(y=0);var A=m(y/E,0,1);if(this.elapsed=y,this.progress=A,this.previous=this.current,T)c?(this.current=this.end,l[v]=this.end,this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(C)):(this.current=this.start,l[v]=this.start,this.setStateFromStart(C));else{c||(A=1-A);var P=this.ease(A);this.interpolation?this.current=this.interpolation(this.interpolationData,P):this.current=this.start+(this.end-this.start)*P,l[v]=this.current}this.dispatchEvent(a.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(i,n){var u=this.tween;if(!u.isSeeking){var s=u.targets[this.targetIndex],l=this.key,v=this.current,c=this.previous;u.emit(i,u,l,s,v,c);var g=u.callbacks[n];g&&g.func.apply(u.callbackScope,[u,s,l,v,c].concat(g.params))}},destroy:function(){h.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});f.exports=r},96490:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(65521),m=t(82897),o=t(56694),a=t(54272),r=new o({Extends:h,initialize:function(n,u,s,l,v,c,g,y,E,C,T){h.call(this,n,u,v,c,!1,g,y,E,C,T),this.key="texture",this.startTexture=null,this.endTexture=s,this.startFrame=null,this.endFrame=l,this.yoyo=y!==0},reset:function(i){h.prototype.reset.call(this);var n=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=n.texture.key,this.startFrame=n.frame.name),i&&n.setTexture(this.startTexture,this.startFrame)},update:function(i){var n=this.tween,u=this.targetIndex,s=n.targets[u];if(!s)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=i,this.elapsed<=0&&(this.elapsed=0,i=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(a.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&s.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var l=this.isPlayingForward(),v=this.isPlayingBackward();if(l||v){var c=this.elapsed,g=this.duration,y=0,E=!1;c+=i,c>=g?(y=c-g,c=g,E=!0):c<0&&(c=0);var C=m(c/g,0,1);this.elapsed=c,this.progress=C,E&&(l?(s.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(y)):(s.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(y))),this.dispatchEvent(a.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(i,n){var u=this.tween;if(!u.isSeeking){var s=u.targets[this.targetIndex],l=this.key;u.emit(i,u,l,s);var v=u.callbacks[n];v&&v.func.apply(u.callbackScope,[u,s,l].concat(v.params))}},destroy:function(){h.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});f.exports=r},55303:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};f.exports=S},56694:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(r){return!!r.get&&typeof r.get=="function"||!!r.set&&typeof r.set=="function"}function t(r,i,n){var u=n?r[i]:Object.getOwnPropertyDescriptor(r,i);return!n&&u.value&&typeof u.value=="object"&&(u=u.value),u&&S(u)?(typeof u.enumerable>"u"&&(u.enumerable=!0),typeof u.configurable>"u"&&(u.configurable=!0),u):!1}function h(r,i){var n=Object.getOwnPropertyDescriptor(r,i);return n?(n.value&&typeof n.value=="object"&&(n=n.value),n.configurable===!1):!1}function m(r,i,n,u){for(var s in i)if(i.hasOwnProperty(s)){var l=t(i,s,n);if(l!==!1){var v=u||r;if(h(v.prototype,s)){if(a.ignoreFinals)continue;throw new Error("cannot override final property '"+s+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(r.prototype,s,l)}else r.prototype[s]=i[s]}}function o(r,i){if(i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++)m(r,i[n].prototype||i[n])}}function a(r){r||(r={});var i,n;if(r.initialize){if(typeof r.initialize!="function")throw new Error("initialize must be a function");i=r.initialize,delete r.initialize}else if(r.Extends){var u=r.Extends;i=function(){u.apply(this,arguments)}}else i=function(){};r.Extends?(i.prototype=Object.create(r.Extends.prototype),i.prototype.constructor=i,n=r.Extends,delete r.Extends):i.prototype.constructor=i;var s=null;return r.Mixins&&(s=r.Mixins,delete r.Mixins),o(i,s),m(i,r,!0,n),i}a.extend=m,a.mixin=o,a.ignoreFinals=!1,f.exports=a},72283:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(){};f.exports=S},10618:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(){return null};f.exports=S},78991:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o,a){if(a===void 0&&(a=t),m>0){var r=m-t.length;if(r<=0)return null}if(!Array.isArray(h))return t.indexOf(h)===-1?(t.push(h),o&&o.call(a,h),h):null;for(var i=h.length-1;i>=0;)t.indexOf(h[i])!==-1&&h.splice(i,1),i--;if(i=h.length,i===0)return null;m>0&&i>r&&(h.splice(r),i=r);for(var n=0;n<i;n++){var u=h[n];t.push(u),o&&o.call(a,u)}return h};f.exports=S},48522:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o,a,r){if(m===void 0&&(m=0),r===void 0&&(r=t),o>0){var i=o-t.length;if(i<=0)return null}if(!Array.isArray(h))return t.indexOf(h)===-1?(t.splice(m,0,h),a&&a.call(r,h),h):null;for(var n=h.length-1;n>=0;)t.indexOf(h[n])!==-1&&h.pop(),n--;if(n=h.length,n===0)return null;o>0&&n>i&&(h.splice(i),n=i);for(var u=n-1;u>=0;u--){var s=h[u];t.splice(m,0,s),a&&a.call(r,s)}return h};f.exports=S},58742:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){var m=t.indexOf(h);return m!==-1&&m<t.length&&(t.splice(m,1),t.push(h)),h};f.exports=S},30164:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(45838),m=function(o,a,r,i,n){i===void 0&&(i=0),n===void 0&&(n=o.length);var u=0;if(h(o,i,n))for(var s=i;s<n;s++){var l=o[s];l[a]===r&&u++}return u};f.exports=m},36337:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){var o,a=[null];for(o=3;o<arguments.length;o++)a.push(arguments[o]);for(o=0;o<t.length;o++)a[0]=t[o],h.apply(m,a);return t};f.exports=S},46208:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(45838),m=function(o,a,r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=o.length),h(o,i,n)){var u,s=[null];for(u=5;u<arguments.length;u++)s.push(arguments[u]);for(u=i;u<n;u++)s[0]=o[u],a.apply(r,s)}return o};f.exports=m},2406:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){if(h.length){if(h.length===1)return h[0]}else return NaN;var o=1,a,r;if(m){if(t<h[0][m])return h[0];for(;h[o][m]<t;)o++}else for(;h[o]<t;)o++;return o>h.length&&(o=h.length),m?(a=h[o-1][m],r=h[o][m],r-t<=t-a?h[o]:h[o-1]):(a=h[o-1],r=h[o],r-t<=t-a?r:a)};f.exports=S},5454:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){h===void 0&&(h=[]);for(var m=0;m<t.length;m++)Array.isArray(t[m])?S(t[m],h):h.push(t[m]);return h};f.exports=S},71608:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(45838),m=function(o,a,r,i,n){i===void 0&&(i=0),n===void 0&&(n=o.length);var u=[];if(h(o,i,n))for(var s=i;s<n;s++){var l=o[s];(!a||a&&r===void 0&&l.hasOwnProperty(a)||a&&r!==void 0&&l[a]===r)&&u.push(l)}return u};f.exports=m},51463:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(45838),m=function(o,a,r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=o.length),h(o,i,n))for(var u=i;u<n;u++){var s=o[u];if(!a||a&&r===void 0&&s.hasOwnProperty(a)||a&&r!==void 0&&s[a]===r)return s}return null};f.exports=m},72861:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){h===void 0&&(h=0),m===void 0&&(m=t.length);var o=h+Math.floor(Math.random()*m);return t[o]===void 0?null:t[o]};f.exports=S},24218:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){if(h===m)return t;var o=t.indexOf(h),a=t.indexOf(m);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return o>a||(t.splice(o,1),a===t.length-1?t.push(h):t.splice(a,0,h)),t};f.exports=S},58258:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){if(h===m)return t;var o=t.indexOf(h),a=t.indexOf(m);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return o<a||(t.splice(o,1),a===0?t.unshift(h):t.splice(a,0,h)),t};f.exports=S},51172:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){var m=t.indexOf(h);if(m>0){var o=t[m-1],a=t.indexOf(o);t[m]=o,t[a]=h}return t};f.exports=S},68396:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){var o=t.indexOf(h);if(o===-1||m<0||m>=t.length)throw new Error("Supplied index out of bounds");return o!==m&&(t.splice(o,1),t.splice(m,0,h)),h};f.exports=S},27555:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){var m=t.indexOf(h);if(m!==-1&&m<t.length-1){var o=t[m+1],a=t.indexOf(o);t[m]=o,t[a]=h}return t};f.exports=S},13401:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){var a=[],r,i=!1;if((m||o)&&(i=!0,m||(m=""),o||(o="")),h<t)for(r=t;r>=h;r--)i?a.push(m+r.toString()+o):a.push(r);else for(r=t;r<=h;r++)i?a.push(m+r.toString()+o):a.push(r);return a};f.exports=S},89955:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(67233),m=function(o,a,r){o===void 0&&(o=0),a===void 0&&(a=null),r===void 0&&(r=1),a===null&&(a=o,o=0);for(var i=[],n=Math.max(h((a-o)/(r||1)),0),u=0;u<n;u++)i.push(o),o+=r;return i};f.exports=m},53466:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function S(m,o,a){var r=m[o];m[o]=m[a],m[a]=r}function t(m,o){return m<o?-1:m>o?1:0}var h=function(m,o,a,r,i){for(a===void 0&&(a=0),r===void 0&&(r=m.length-1),i===void 0&&(i=t);r>a;){if(r-a>600){var n=r-a+1,u=o-a+1,s=Math.log(n),l=.5*Math.exp(2*s/3),v=.5*Math.sqrt(s*l*(n-l)/n)*(u-n/2<0?-1:1),c=Math.max(a,Math.floor(o-u*l/n+v)),g=Math.min(r,Math.floor(o+(n-u)*l/n+v));h(m,o,c,g,i)}var y=m[o],E=a,C=r;for(S(m,a,o),i(m[r],y)>0&&S(m,a,r);E<C;){for(S(m,E,C),E++,C--;i(m[E],y)<0;)E++;for(;i(m[C],y)>0;)C--}i(m[a],y)===0?S(m,a,C):(C++,S(m,C,r)),C<=o&&(a=C+1),o<=C&&(r=C-1)}};f.exports=h},75757:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(10850),m=t(18592),o=function(r,i,n){for(var u=[],s=0;s<r.length;s++)for(var l=0;l<i.length;l++)for(var v=0;v<n;v++)u.push({a:r[s],b:i[l]});return u},a=function(r,i,n){var u=h(n,"max",0),s=h(n,"qty",1),l=h(n,"random",!1),v=h(n,"randomB",!1),c=h(n,"repeat",0),g=h(n,"yoyo",!1),y=[];if(v&&m(i),c===-1)if(u===0)c=0;else{var E=r.length*i.length*s;g&&(E*=2),c=Math.ceil(u/E)}for(var C=0;C<=c;C++){var T=o(r,i,s);l&&m(T),y=y.concat(T),g&&(T.reverse(),y=y.concat(T))}return u&&y.splice(u),y};f.exports=a},66458:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72677),m=function(o,a,r,i){i===void 0&&(i=o);var n;if(!Array.isArray(a))return n=o.indexOf(a),n!==-1?(h(o,n),r&&r.call(i,a),a):null;for(var u=a.length-1,s=[];u>=0;){var l=a[u];n=o.indexOf(l),n!==-1&&(h(o,n),s.push(l),r&&r.call(i,l)),u--}return s};f.exports=m},8324:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72677),m=function(o,a,r,i){if(i===void 0&&(i=o),a<0||a>o.length-1)throw new Error("Index out of bounds");var n=h(o,a);return r&&r.call(i,n),n};f.exports=m},47427:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(45838),m=function(o,a,r,i,n){if(a===void 0&&(a=0),r===void 0&&(r=o.length),n===void 0&&(n=o),h(o,a,r)){var u=r-a,s=o.splice(a,u);if(i)for(var l=0;l<s.length;l++){var v=s[l];i.call(n,v)}return s}else return[]};f.exports=m},50147:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(72677),m=function(o,a,r){a===void 0&&(a=0),r===void 0&&(r=o.length);var i=a+Math.floor(Math.random()*r);return h(o,i)};f.exports=m},80402:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){var o=t.indexOf(h),a=t.indexOf(m);return o!==-1&&a===-1?(t[o]=m,!0):!1};f.exports=S},77640:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){h===void 0&&(h=1);for(var m=null,o=0;o<h;o++)m=t.shift(),t.push(m);return m};f.exports=S},38487:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){h===void 0&&(h=1);for(var m=null,o=0;o<h;o++)m=t.pop(),t.unshift(m);return m};f.exports=S},45838:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){var a=t.length;if(h<0||h>a||h>=m||m>a){if(o)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};f.exports=S},27847:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){var m=t.indexOf(h);return m!==-1&&m>0&&(t.splice(m,1),t.unshift(h)),h};f.exports=S},6034:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(45838),m=function(o,a,r,i,n){if(i===void 0&&(i=0),n===void 0&&(n=o.length),h(o,i,n))for(var u=i;u<n;u++){var s=o[u];s.hasOwnProperty(a)&&(s[a]=r)}return o};f.exports=m},18592:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){for(var h=t.length-1;h>0;h--){var m=Math.floor(Math.random()*(h+1)),o=t[h];t[h]=t[m],t[m]=o}return t};f.exports=S},28834:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var h=/\D/g;return t.sort(function(m,o){return parseInt(m.replace(h,""),10)-parseInt(o.replace(h,""),10)}),t};f.exports=S},72677:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){if(!(h>=t.length)){for(var m=t.length-1,o=t[h],a=h;a<m;a++)t[a]=t[a+1];return t.length=m,o}};f.exports=S},17922:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(77290);function m(i,n){return String(i).localeCompare(n)}function o(i,n){var u=i.length;if(u<=1)return i;for(var s=new Array(u),l=1;l<u;l*=2){a(i,n,l,s);var v=i;i=s,s=v}return i}function a(i,n,u,s){var l=i.length,v=0,c=u*2,g,y,E,C,T;for(g=0;g<l;g+=c)for(y=g+u,E=y+u,y>l&&(y=l),E>l&&(E=l),C=g,T=y;;)if(C<y&&T<E)n(i[C],i[T])<=0?s[v++]=i[C++]:s[v++]=i[T++];else if(C<y)s[v++]=i[C++];else if(T<E)s[v++]=i[T++];else break}var r=function(i,n){if(n===void 0&&(n=m),!i||i.length<2)return i;if(h.features.stableSort)return i.sort(n);var u=o(i,n);return u!==i&&a(u,null,i.length,i),i};f.exports=r},96928:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){if(h===m)return t;var o=t.indexOf(h),a=t.indexOf(m);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return t[o]=m,t[a]=h,t};f.exports=S},59959:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Matrix:t(13515),Add:t(78991),AddAt:t(48522),BringToTop:t(58742),CountAllMatching:t(30164),Each:t(36337),EachInRange:t(46208),FindClosestInSorted:t(2406),Flatten:t(5454),GetAll:t(71608),GetFirst:t(51463),GetRandom:t(72861),MoveDown:t(51172),MoveTo:t(68396),MoveUp:t(27555),MoveAbove:t(24218),MoveBelow:t(58258),NumberArray:t(13401),NumberArrayStep:t(89955),QuickSelect:t(53466),Range:t(75757),Remove:t(66458),RemoveAt:t(8324),RemoveBetween:t(47427),RemoveRandomElement:t(50147),Replace:t(80402),RotateLeft:t(77640),RotateRight:t(38487),SafeRange:t(45838),SendToBack:t(27847),SetAll:t(6034),Shuffle:t(18592),SortByDigits:t(28834),SpliceOne:t(72677),StableSort:t(17922),Swap:t(96928)}},97494:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))return!1;for(var h=t[0].length,m=1;m<t.length;m++)if(t[m].length!==h)return!1;return!0};f.exports=S},68428:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(76400),m=t(97494),o=function(a){var r="";if(!m(a))return r;for(var i=0;i<a.length;i++){for(var n=0;n<a[i].length;n++){var u=a[i][n].toString();u!=="undefined"?r+=h(u,2):r+="?",n<a[i].length-1&&(r+=" |")}if(i<a.length-1){r+=`
`;for(var s=0;s<a[i].length;s++)r+="---",s<a[i].length-1&&(r+="+");r+=`
`}}return r};f.exports=o},59521:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.reverse()};f.exports=S},51995:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){for(var h=0;h<t.length;h++)t[h].reverse();return t};f.exports=S},89011:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(63515),m=function(o){return h(o,180)};f.exports=m},42549:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(63515),m=function(o){return h(o,90)};f.exports=m},63515:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(97494),m=t(78581),o=function(a,r){if(r===void 0&&(r=90),!h(a))return null;if(typeof r!="string"&&(r=(r%360+360)%360),r===90||r===-270||r==="rotateLeft")a=m(a),a.reverse();else if(r===-90||r===270||r==="rotateRight")a.reverse(),a=m(a);else if(Math.abs(r)===180||r==="rotate180"){for(var i=0;i<a.length;i++)a[i].reverse();a.reverse()}return a};f.exports=o},14305:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(63515),m=function(o){return h(o,-90)};f.exports=m},27365:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(77640),m=t(38487),o=function(a,r,i){if(r===void 0&&(r=0),i===void 0&&(i=0),i!==0&&(i<0?h(a,Math.abs(i)):m(a,i)),r!==0)for(var n=0;n<a.length;n++){var u=a[n];r<0?h(u,Math.abs(r)):m(u,r)}return a};f.exports=o},78581:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){for(var h=t.length,m=t[0].length,o=new Array(m),a=0;a<m;a++){o[a]=new Array(h);for(var r=h-1;r>-1;r--)o[a][r]=t[r][a]}return o};f.exports=S},13515:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={CheckMatrix:t(97494),MatrixToString:t(68428),ReverseColumns:t(59521),ReverseRows:t(51995),Rotate180:t(89011),RotateLeft:t(42549),RotateMatrix:t(63515),RotateRight:t(14305),Translate:t(27365),TransposeMatrix:t(78581)}},40581:f=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=function(h,m){for(var o=new Uint8Array(h),a=o.length,r=m?"data:"+m+";base64,":"",i=0;i<a;i+=3)r+=S[o[i]>>2],r+=S[(o[i]&3)<<4|o[i+1]>>4],r+=S[(o[i+1]&15)<<2|o[i+2]>>6],r+=S[o[i+2]&63];return a%3===2?r=r.substring(0,r.length-1)+"=":a%3===1&&(r=r.substring(0,r.length-2)+"=="),r};f.exports=t},82329:f=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),h=0;h<S.length;h++)t[S.charCodeAt(h)]=h;var m=function(o){o=o.substr(o.indexOf(",")+1);var a=o.length,r=a*.75,i=0,n,u,s,l;o[a-1]==="="&&(r--,o[a-2]==="="&&r--);for(var v=new ArrayBuffer(r),c=new Uint8Array(v),g=0;g<a;g+=4)n=t[o.charCodeAt(g)],u=t[o.charCodeAt(g+1)],s=t[o.charCodeAt(g+2)],l=t[o.charCodeAt(g+3)],c[i++]=n<<2|u>>4,c[i++]=(u&15)<<4|s>>2,c[i++]=(s&3)<<6|l&63;return v};f.exports=m},78417:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={ArrayBufferToBase64:t(40581),Base64ToArrayBuffer:t(82329)}},22178:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Array:t(59959),Base64:t(78417),Objects:t(64615),String:t(50379),NOOP:t(72283),NULL:t(10618)}},32742:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var h={};for(var m in t)Array.isArray(t[m])?h[m]=t[m].slice(0):h[m]=t[m];return h};f.exports=S},28699:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){var h,m,o;if(typeof t!="object"||t===null)return t;h=Array.isArray(t)?[]:{};for(o in t)m=t[o],h[o]=S(m);return h};f.exports=S},98611:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(42911),m=function(){var o,a,r,i,n,u,s=arguments[0]||{},l=1,v=arguments.length,c=!1;for(typeof s=="boolean"&&(c=s,s=arguments[1]||{},l=2),v===l&&(s=this,--l);l<v;l++)if((o=arguments[l])!=null)for(a in o)r=s[a],i=o[a],s!==i&&(c&&i&&(h(i)||(n=Array.isArray(i)))?(n?(n=!1,u=r&&Array.isArray(r)?r:[]):u=r&&h(r)?r:{},s[a]=m(c,u,i)):i!==void 0&&(s[a]=i));return s};f.exports=m},20494:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(5923),m=t(10850),o=function(a,r,i){var n=m(a,r,null);if(n===null)return i;if(Array.isArray(n))return h.RND.pick(n);if(typeof n=="object"){if(n.hasOwnProperty("randInt"))return h.RND.integerInRange(n.randInt[0],n.randInt[1]);if(n.hasOwnProperty("randFloat"))return h.RND.realInRange(n.randFloat[0],n.randFloat[1])}else if(typeof n=="function")return n(r);return n};f.exports=o},72632:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){var o=typeof t;return!t||o==="number"||o==="string"?m:t.hasOwnProperty(h)&&t[h]!==void 0?t[h]:m};f.exports=S},94324:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(10850),m=t(82897),o=function(a,r,i,n,u){u===void 0&&(u=i);var s=h(a,r,u);return m(s,i,n)};f.exports=o},10850:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){if(!t&&!o||typeof t=="number")return m;if(t&&t.hasOwnProperty(h))return t[h];if(o&&o.hasOwnProperty(h))return o[h];if(h.indexOf(".")!==-1){for(var a=h.split("."),r=t,i=o,n=m,u=m,s=!0,l=!0,v=0;v<a.length;v++)r&&r.hasOwnProperty(a[v])?(n=r[a[v]],r=r[a[v]]):s=!1,i&&i.hasOwnProperty(a[v])?(u=i[a[v]],i=i[a[v]]):l=!1;return s?n:l?u:m}else return m};f.exports=S},87701:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){for(var m=0;m<h.length;m++)if(!t.hasOwnProperty(h[m]))return!1;return!0};f.exports=S},53523:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){for(var m=0;m<h.length;m++)if(t.hasOwnProperty(h[m]))return!0;return!1};f.exports=S},19256:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.hasOwnProperty(h)};f.exports=S},42911:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){if(!t||typeof t!="object"||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};f.exports=S},30657:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(32742),m=function(o,a){var r=h(o);for(var i in a)r.hasOwnProperty(i)||(r[i]=a[i]);return r};f.exports=m},72066:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(32742),m=function(o,a){var r=h(o);for(var i in a)r.hasOwnProperty(i)&&(r[i]=a[i]);return r};f.exports=m},28820:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var h=t(19256),m=function(o,a){for(var r={},i=0;i<a.length;i++){var n=a[i];h(o,n)&&(r[n]=o[n])}return r};f.exports=m},22440:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m){if(!t||typeof t=="number")return!1;if(t.hasOwnProperty(h))return t[h]=m,!0;if(h.indexOf(".")!==-1){for(var o=h.split("."),a=t,r=t,i=0;i<o.length;i++)if(a.hasOwnProperty(o[i]))r=a,a=a[o[i]];else return!1;return r[o[o.length-1]]=m,!0}return!1};f.exports=S},64615:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Clone:t(32742),DeepCopy:t(28699),Extend:t(98611),GetAdvancedValue:t(20494),GetFastValue:t(72632),GetMinMaxValue:t(94324),GetValue:t(10850),HasAll:t(87701),HasAny:t(53523),HasValue:t(19256),IsPlainObject:t(42911),Merge:t(30657),MergeRight:t(72066),Pick:t(28820),SetValue:t(22440)}},69429:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return t.replace(/%([0-9]+)/g,function(m,o){return h[Number(o)-1]})};f.exports=S},76400:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h,m,o){h===void 0&&(h=0),m===void 0&&(m=" "),o===void 0&&(o=3),t=t.toString();var a=0;if(h+1>=t.length)switch(o){case 1:t=new Array(h+1-t.length).join(m)+t;break;case 3:var r=Math.ceil((a=h-t.length)/2),i=a-r;t=new Array(i+1).join(m)+t+new Array(r+1).join(m);break;default:t=t+new Array(h+1-t.length).join(m);break}return t};f.exports=S},76872:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t,h){return h===0?t.slice(1):t.slice(0,h-1)+t.slice(h)};f.exports=S},8051:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t.split("").reverse().join("")};f.exports=S},76583:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var h=Math.random()*16|0,m=t==="x"?h:h&3|8;return m.toString(16)})};f.exports=S},40587:f=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var S=function(t){return t&&t[0].toUpperCase()+t.slice(1)};f.exports=S},50379:(f,S,t)=>{/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2013-2023 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */f.exports={Format:t(69429),Pad:t(76400),RemoveAt:t(76872),Reverse:t(8051),UppercaseFirst:t(40587),UUID:t(76583)}}},x={};function R(f){var S=x[f];if(S!==void 0)return S.exports;var t=x[f]={exports:{}};return d[f](t,t.exports,R),t.exports}R.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var I=R(92491);return I})())})(_f);var Ng=_f.exports;const pi=Dg(Ng);class Bg extends pi.GameObjects.Container{constructor(d,x,R){super(d,x,R);hi(this,"coin");hi(this,"shadow");this.scene.add.existing(this),this.coin=this.scene.add.image(0,0,"coin"),this.shadow=this.scene.add.image(0,0,"coin-shadow"),this.scale=3,this.add([this.coin,this.shadow])}}const Vg="/phaser-multiplayer-test/assets/characters-DQ_qrRUg.png",Gg="/phaser-multiplayer-test/assets/map-D_YHDveZ.png",Ug="/phaser-multiplayer-test/assets/shadow-T5njCqVs.png",bg="/phaser-multiplayer-test/assets/coin-BN3YfpQ6.png",zg="/phaser-multiplayer-test/assets/coin-shadow-D4Qh2TZh.png",Xg=["red","blue","green","yellow","orange","purple"];class Wg extends pi.Scene{constructor(){super("TestScene")}preload(){this.load.spritesheet("characters",Vg,{frameWidth:16,frameHeight:16}),this.load.image("map",Gg),this.load.image("shadow",Ug),this.load.image("coin",bg),this.load.image("coin-shadow",zg)}create(){this.cameras.main.backgroundColor=pi.Display.Color.HexStringToColor("#5E98FD"),this.add.image(400,300,"map").scale=3,new Bg(this,400,300),this.firebase.signInAnonymously().then(),this.firebase.onLoggedIn(()=>{var e;console.log("Logged in"),console.log((e=this.firebase.getUser())==null?void 0:e.uid),this.createPlayer()}),this.initInput(),this.initGame()}update(e,d){super.update(e,d)}initInput(){}initGame(){}createPlayer(){var d;const e=(d=this.firebase.getUser())==null?void 0:d.uid;e!=null&&this.firebase.setUserData(e,{id:e,name:this.createName(),direction:"right",color:this.randomFromArray(Xg),x:400,y:300,coins:0}).then()}createName(){const e=this.randomFromArray(["COOL","SUPER","HIP","SMUG","SILKY","GOOD","SAFE","DEAR","DAMP","WARM","RICH","LONG","DARK","SOFT","BUFF","DOPE"]),d=this.randomFromArray(["BEAR","DOG","CAT","FOX","LAMB","LION","BOAR","GOAT","VOLE","SEAL","PUMA","MULE","BULL","BIRD","BUG"]);return`${e} ${d}`}randomFromArray(e){return e[Math.floor(Math.random()*e.length)]}}const Yg=[Wg];var Jl={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at=function(p,e){if(!p)throw Bn(e)},Bn=function(p){return new Error("Firebase Database ("+td.SDK_VERSION+") INTERNAL ASSERT FAILED: "+p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed=function(p){const e=[];let d=0;for(let x=0;x<p.length;x++){let R=p.charCodeAt(x);R<128?e[d++]=R:R<2048?(e[d++]=R>>6|192,e[d++]=R&63|128):(R&64512)===55296&&x+1<p.length&&(p.charCodeAt(x+1)&64512)===56320?(R=65536+((R&1023)<<10)+(p.charCodeAt(++x)&1023),e[d++]=R>>18|240,e[d++]=R>>12&63|128,e[d++]=R>>6&63|128,e[d++]=R&63|128):(e[d++]=R>>12|224,e[d++]=R>>6&63|128,e[d++]=R&63|128)}return e},Hg=function(p){const e=[];let d=0,x=0;for(;d<p.length;){const R=p[d++];if(R<128)e[x++]=String.fromCharCode(R);else if(R>191&&R<224){const I=p[d++];e[x++]=String.fromCharCode((R&31)<<6|I&63)}else if(R>239&&R<365){const I=p[d++],f=p[d++],S=p[d++],t=((R&7)<<18|(I&63)<<12|(f&63)<<6|S&63)-65536;e[x++]=String.fromCharCode(55296+(t>>10)),e[x++]=String.fromCharCode(56320+(t&1023))}else{const I=p[d++],f=p[d++];e[x++]=String.fromCharCode((R&15)<<12|(I&63)<<6|f&63)}}return e.join("")},lh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(p,e){if(!Array.isArray(p))throw Error("encodeByteArray takes an array as a parameter");this.init_();const d=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,x=[];for(let R=0;R<p.length;R+=3){const I=p[R],f=R+1<p.length,S=f?p[R+1]:0,t=R+2<p.length,h=t?p[R+2]:0,m=I>>2,o=(I&3)<<4|S>>4;let a=(S&15)<<2|h>>6,r=h&63;t||(r=64,f||(a=64)),x.push(d[m],d[o],d[a],d[r])}return x.join("")},encodeString(p,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(p):this.encodeByteArray(ed(p),e)},decodeString(p,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(p):Hg(this.decodeStringToByteArray(p,e))},decodeStringToByteArray(p,e){this.init_();const d=e?this.charToByteMapWebSafe_:this.charToByteMap_,x=[];for(let R=0;R<p.length;){const I=d[p.charAt(R++)],S=R<p.length?d[p.charAt(R)]:0;++R;const h=R<p.length?d[p.charAt(R)]:64;++R;const o=R<p.length?d[p.charAt(R)]:64;if(++R,I==null||S==null||h==null||o==null)throw new Kg;const a=I<<2|S>>4;if(x.push(a),h!==64){const r=S<<4&240|h>>2;if(x.push(r),o!==64){const i=h<<6&192|o;x.push(i)}}}return x},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let p=0;p<this.ENCODED_VALS.length;p++)this.byteToCharMap_[p]=this.ENCODED_VALS.charAt(p),this.charToByteMap_[this.byteToCharMap_[p]]=p,this.byteToCharMapWebSafe_[p]=this.ENCODED_VALS_WEBSAFE.charAt(p),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[p]]=p,p>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(p)]=p,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(p)]=p)}}};class Kg extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const id=function(p){const e=ed(p);return lh.encodeByteArray(e,!0)},Pr=function(p){return id(p).replace(/\./g,"")},Rr=function(p){try{return lh.decodeString(p,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(p){return nd(void 0,p)}function nd(p,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const d=e;return new Date(d.getTime());case Object:p===void 0&&(p={});break;case Array:p=[];break;default:return e}for(const d in e)!e.hasOwnProperty(d)||!$g(d)||(p[d]=nd(p[d],e[d]));return p}function $g(p){return p!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg=()=>kg().__FIREBASE_DEFAULTS__,Zg=()=>{if(typeof process>"u"||typeof Jl>"u")return;const p=Jl.__FIREBASE_DEFAULTS__;if(p)return JSON.parse(p)},jg=()=>{if(typeof document>"u")return;let p;try{p=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=p&&Rr(p[1]);return e&&JSON.parse(e)},uh=()=>{try{return Jg()||Zg()||jg()}catch(p){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${p}`);return}},sd=p=>{var e,d;return(d=(e=uh())===null||e===void 0?void 0:e.emulatorHosts)===null||d===void 0?void 0:d[p]},rd=p=>{const e=sd(p);if(!e)return;const d=e.lastIndexOf(":");if(d<=0||d+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const x=parseInt(e.substring(d+1),10);return e[0]==="["?[e.substring(1,d-1),x]:[e.substring(0,d),x]},ad=()=>{var p;return(p=uh())===null||p===void 0?void 0:p.config},od=p=>{var e;return(e=uh())===null||e===void 0?void 0:e[`_${p}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,d)=>{this.resolve=e,this.reject=d})}wrapCallback(e){return(d,x)=>{d?this.reject(d):this.resolve(x),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(d):e(d,x))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(p,e){if(p.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const d={alg:"none",type:"JWT"},x=e||"demo-project",R=p.iat||0,I=p.sub||p.user_id;if(!I)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${x}`,aud:x,iat:R,exp:R+3600,auth_time:R,sub:I,user_id:I,firebase:{sign_in_provider:"custom",identities:{}}},p);return[Pr(JSON.stringify(d)),Pr(JSON.stringify(f)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fh(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(me())}function qg(){const p=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof p=="object"&&p.id!==void 0}function ld(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _g(){const p=me();return p.indexOf("MSIE ")>=0||p.indexOf("Trident/")>=0}function ud(){return td.NODE_ADMIN===!0}function tm(){try{return typeof indexedDB=="object"}catch{return!1}}function em(){return new Promise((p,e)=>{try{let d=!0;const x="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open(x);R.onsuccess=()=>{R.result.close(),d||self.indexedDB.deleteDatabase(x),p(!0)},R.onupgradeneeded=()=>{d=!1},R.onerror=()=>{var I;e(((I=R.error)===null||I===void 0?void 0:I.message)||"")}}catch(d){e(d)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="FirebaseError";class ai extends Error{constructor(e,d,x){super(d),this.code=e,this.customData=x,this.name=im,Object.setPrototypeOf(this,ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bs.prototype.create)}}class Bs{constructor(e,d,x){this.service=e,this.serviceName=d,this.errors=x}create(e,...d){const x=d[0]||{},R=`${this.service}/${e}`,I=this.errors[e],f=I?nm(I,x):"Error",S=`${this.serviceName}: ${f} (${R}).`;return new ai(R,S,x)}}function nm(p,e){return p.replace(sm,(d,x)=>{const R=e[x];return R!=null?String(R):`<${x}?>`})}const sm=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(p){return JSON.parse(p)}function ae(p){return JSON.stringify(p)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=function(p){let e={},d={},x={},R="";try{const I=p.split(".");e=vs(Rr(I[0])||""),d=vs(Rr(I[1])||""),R=I[2],x=d.d||{},delete d.d}catch{}return{header:e,claims:d,data:x,signature:R}},rm=function(p){const e=fd(p),d=e.claims;return!!d&&typeof d=="object"&&d.hasOwnProperty("iat")},am=function(p){const e=fd(p).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(p,e){return Object.prototype.hasOwnProperty.call(p,e)}function An(p,e){if(Object.prototype.hasOwnProperty.call(p,e))return p[e]}function mo(p){for(const e in p)if(Object.prototype.hasOwnProperty.call(p,e))return!1;return!0}function Mr(p,e,d){const x={};for(const R in p)Object.prototype.hasOwnProperty.call(p,R)&&(x[R]=e.call(d,p[R],R,p));return x}function Ir(p,e){if(p===e)return!0;const d=Object.keys(p),x=Object.keys(e);for(const R of d){if(!x.includes(R))return!1;const I=p[R],f=e[R];if(Zl(I)&&Zl(f)){if(!Ir(I,f))return!1}else if(I!==f)return!1}for(const R of x)if(!d.includes(R))return!1;return!0}function Zl(p){return p!==null&&typeof p=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(p){const e=[];for(const[d,x]of Object.entries(p))Array.isArray(x)?x.forEach(R=>{e.push(encodeURIComponent(d)+"="+encodeURIComponent(R))}):e.push(encodeURIComponent(d)+"="+encodeURIComponent(x));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,d){d||(d=0);const x=this.W_;if(typeof e=="string")for(let o=0;o<16;o++)x[o]=e.charCodeAt(d)<<24|e.charCodeAt(d+1)<<16|e.charCodeAt(d+2)<<8|e.charCodeAt(d+3),d+=4;else for(let o=0;o<16;o++)x[o]=e[d]<<24|e[d+1]<<16|e[d+2]<<8|e[d+3],d+=4;for(let o=16;o<80;o++){const a=x[o-3]^x[o-8]^x[o-14]^x[o-16];x[o]=(a<<1|a>>>31)&4294967295}let R=this.chain_[0],I=this.chain_[1],f=this.chain_[2],S=this.chain_[3],t=this.chain_[4],h,m;for(let o=0;o<80;o++){o<40?o<20?(h=S^I&(f^S),m=1518500249):(h=I^f^S,m=1859775393):o<60?(h=I&f|S&(I|f),m=2400959708):(h=I^f^S,m=3395469782);const a=(R<<5|R>>>27)+h+t+m+x[o]&4294967295;t=S,S=f,f=(I<<30|I>>>2)&4294967295,I=R,R=a}this.chain_[0]=this.chain_[0]+R&4294967295,this.chain_[1]=this.chain_[1]+I&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+S&4294967295,this.chain_[4]=this.chain_[4]+t&4294967295}update(e,d){if(e==null)return;d===void 0&&(d=e.length);const x=d-this.blockSize;let R=0;const I=this.buf_;let f=this.inbuf_;for(;R<d;){if(f===0)for(;R<=x;)this.compress_(e,R),R+=this.blockSize;if(typeof e=="string"){for(;R<d;)if(I[f]=e.charCodeAt(R),++f,++R,f===this.blockSize){this.compress_(I),f=0;break}}else for(;R<d;)if(I[f]=e[R],++f,++R,f===this.blockSize){this.compress_(I),f=0;break}}this.inbuf_=f,this.total_+=d}digest(){const e=[];let d=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let R=this.blockSize-1;R>=56;R--)this.buf_[R]=d&255,d/=256;this.compress_(this.buf_);let x=0;for(let R=0;R<5;R++)for(let I=24;I>=0;I-=8)e[x]=this.chain_[R]>>I&255,++x;return e}}function hm(p,e){const d=new lm(p,e);return d.subscribe.bind(d)}class lm{constructor(e,d){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=d,this.task.then(()=>{e(this)}).catch(x=>{this.error(x)})}next(e){this.forEachObserver(d=>{d.next(e)})}error(e){this.forEachObserver(d=>{d.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,d,x){let R;if(e===void 0&&d===void 0&&x===void 0)throw new Error("Missing Observer.");um(e,["next","error","complete"])?R=e:R={next:e,error:d,complete:x},R.next===void 0&&(R.next=Ha),R.error===void 0&&(R.error=Ha),R.complete===void 0&&(R.complete=Ha);const I=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?R.error(this.finalError):R.complete()}catch{}}),this.observers.push(R),I}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let d=0;d<this.observers.length;d++)this.sendOne(d,e)}sendOne(e,d){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{d(this.observers[e])}catch(x){typeof console<"u"&&console.error&&console.error(x)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function um(p,e){if(typeof p!="object"||p===null)return!1;for(const d of e)if(d in p&&typeof p[d]=="function")return!0;return!1}function Ha(){}function dh(p,e){return`${p} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=function(p){const e=[];let d=0;for(let x=0;x<p.length;x++){let R=p.charCodeAt(x);if(R>=55296&&R<=56319){const I=R-55296;x++,at(x<p.length,"Surrogate pair missing trail surrogate.");const f=p.charCodeAt(x)-56320;R=65536+(I<<10)+f}R<128?e[d++]=R:R<2048?(e[d++]=R>>6|192,e[d++]=R&63|128):R<65536?(e[d++]=R>>12|224,e[d++]=R>>6&63|128,e[d++]=R&63|128):(e[d++]=R>>18|240,e[d++]=R>>12&63|128,e[d++]=R>>6&63|128,e[d++]=R&63|128)}return e},ra=function(p){let e=0;for(let d=0;d<p.length;d++){const x=p.charCodeAt(d);x<128?e++:x<2048?e+=2:x>=55296&&x<=56319?(e+=4,d++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(p){return p&&p._delegate?p._delegate:p}class Ei{constructor(e,d,x){this.name=e,this.instanceFactory=d,this.type=x,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,d){this.name=e,this.container=d,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const d=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(d)){const x=new sa;if(this.instancesDeferred.set(d,x),this.isInitialized(d)||this.shouldAutoInitialize())try{const R=this.getOrInitializeService({instanceIdentifier:d});R&&x.resolve(R)}catch{}}return this.instancesDeferred.get(d).promise}getImmediate(e){var d;const x=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),R=(d=e==null?void 0:e.optional)!==null&&d!==void 0?d:!1;if(this.isInitialized(x)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:x})}catch(I){if(R)return null;throw I}else{if(R)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vm(e))try{this.getOrInitializeService({instanceIdentifier:Vi})}catch{}for(const[d,x]of this.instancesDeferred.entries()){const R=this.normalizeInstanceIdentifier(d);try{const I=this.getOrInitializeService({instanceIdentifier:R});x.resolve(I)}catch{}}}}clearInstance(e=Vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(d=>"INTERNAL"in d).map(d=>d.INTERNAL.delete()),...e.filter(d=>"_delete"in d).map(d=>d._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vi){return this.instances.has(e)}getOptions(e=Vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:d={}}=e,x=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(x))throw Error(`${this.name}(${x}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const R=this.getOrInitializeService({instanceIdentifier:x,options:d});for(const[I,f]of this.instancesDeferred.entries()){const S=this.normalizeInstanceIdentifier(I);x===S&&f.resolve(R)}return R}onInit(e,d){var x;const R=this.normalizeInstanceIdentifier(d),I=(x=this.onInitCallbacks.get(R))!==null&&x!==void 0?x:new Set;I.add(e),this.onInitCallbacks.set(R,I);const f=this.instances.get(R);return f&&e(f,R),()=>{I.delete(e)}}invokeOnInitCallbacks(e,d){const x=this.onInitCallbacks.get(d);if(x)for(const R of x)try{R(e,d)}catch{}}getOrInitializeService({instanceIdentifier:e,options:d={}}){let x=this.instances.get(e);if(!x&&this.component&&(x=this.component.instanceFactory(this.container,{instanceIdentifier:cm(e),options:d}),this.instances.set(e,x),this.instancesOptions.set(e,d),this.invokeOnInitCallbacks(x,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,x)}catch{}return x||null}normalizeInstanceIdentifier(e=Vi){return this.component?this.component.multipleInstances?e:Vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cm(p){return p===Vi?void 0:p}function vm(p){return p.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const d=this.getProvider(e.name);if(d.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);d.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const d=new dm(e,this);return this.providers.set(e,d),d}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St;(function(p){p[p.DEBUG=0]="DEBUG",p[p.VERBOSE=1]="VERBOSE",p[p.INFO=2]="INFO",p[p.WARN=3]="WARN",p[p.ERROR=4]="ERROR",p[p.SILENT=5]="SILENT"})(St||(St={}));const gm={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},mm=St.INFO,ym={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},xm=(p,e,...d)=>{if(e<p.logLevel)return;const x=new Date().toISOString(),R=ym[e];if(R)console[R](`[${x}]  ${p.name}:`,...d);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class aa{constructor(e){this.name=e,this._logLevel=mm,this._logHandler=xm,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in St))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gm[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...e),this._logHandler(this,St.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...e),this._logHandler(this,St.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,St.INFO,...e),this._logHandler(this,St.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,St.WARN,...e),this._logHandler(this,St.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...e),this._logHandler(this,St.ERROR,...e)}}const Tm=(p,e)=>e.some(d=>p instanceof d);let jl,ql;function Em(){return jl||(jl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Sm(){return ql||(ql=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dd=new WeakMap,yo=new WeakMap,cd=new WeakMap,Ka=new WeakMap,ch=new WeakMap;function Cm(p){const e=new Promise((d,x)=>{const R=()=>{p.removeEventListener("success",I),p.removeEventListener("error",f)},I=()=>{d(gi(p.result)),R()},f=()=>{x(p.error),R()};p.addEventListener("success",I),p.addEventListener("error",f)});return e.then(d=>{d instanceof IDBCursor&&dd.set(d,p)}).catch(()=>{}),ch.set(e,p),e}function Am(p){if(yo.has(p))return;const e=new Promise((d,x)=>{const R=()=>{p.removeEventListener("complete",I),p.removeEventListener("error",f),p.removeEventListener("abort",f)},I=()=>{d(),R()},f=()=>{x(p.error||new DOMException("AbortError","AbortError")),R()};p.addEventListener("complete",I),p.addEventListener("error",f),p.addEventListener("abort",f)});yo.set(p,e)}let xo={get(p,e,d){if(p instanceof IDBTransaction){if(e==="done")return yo.get(p);if(e==="objectStoreNames")return p.objectStoreNames||cd.get(p);if(e==="store")return d.objectStoreNames[1]?void 0:d.objectStore(d.objectStoreNames[0])}return gi(p[e])},set(p,e,d){return p[e]=d,!0},has(p,e){return p instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in p}};function Pm(p){xo=p(xo)}function Rm(p){return p===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...d){const x=p.call(Qa(this),e,...d);return cd.set(x,e.sort?e.sort():[e]),gi(x)}:Sm().includes(p)?function(...e){return p.apply(Qa(this),e),gi(dd.get(this))}:function(...e){return gi(p.apply(Qa(this),e))}}function Mm(p){return typeof p=="function"?Rm(p):(p instanceof IDBTransaction&&Am(p),Tm(p,Em())?new Proxy(p,xo):p)}function gi(p){if(p instanceof IDBRequest)return Cm(p);if(Ka.has(p))return Ka.get(p);const e=Mm(p);return e!==p&&(Ka.set(p,e),ch.set(e,p)),e}const Qa=p=>ch.get(p);function Im(p,e,{blocked:d,upgrade:x,blocking:R,terminated:I}={}){const f=indexedDB.open(p,e),S=gi(f);return x&&f.addEventListener("upgradeneeded",t=>{x(gi(f.result),t.oldVersion,t.newVersion,gi(f.transaction),t)}),d&&f.addEventListener("blocked",t=>d(t.oldVersion,t.newVersion,t)),S.then(t=>{I&&t.addEventListener("close",()=>I()),R&&t.addEventListener("versionchange",h=>R(h.oldVersion,h.newVersion,h))}).catch(()=>{}),S}const wm=["get","getKey","getAll","getAllKeys","count"],Fm=["put","add","delete","clear"],$a=new Map;function _l(p,e){if(!(p instanceof IDBDatabase&&!(e in p)&&typeof e=="string"))return;if($a.get(e))return $a.get(e);const d=e.replace(/FromIndex$/,""),x=e!==d,R=Fm.includes(d);if(!(d in(x?IDBIndex:IDBObjectStore).prototype)||!(R||wm.includes(d)))return;const I=async function(f,...S){const t=this.transaction(f,R?"readwrite":"readonly");let h=t.store;return x&&(h=h.index(S.shift())),(await Promise.all([h[d](...S),R&&t.done]))[0]};return $a.set(e,I),I}Pm(p=>({...p,get:(e,d,x)=>_l(e,d)||p.get(e,d,x),has:(e,d)=>!!_l(e,d)||p.has(e,d)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(d=>{if(Om(d)){const x=d.getImmediate();return`${x.library}/${x.version}`}else return null}).filter(d=>d).join(" ")}}function Om(p){const e=p.getComponent();return(e==null?void 0:e.type)==="VERSION"}const To="@firebase/app",tu="0.9.22";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi=new aa("@firebase/app"),Dm="@firebase/app-compat",Nm="@firebase/analytics-compat",Bm="@firebase/analytics",Vm="@firebase/app-check-compat",Gm="@firebase/app-check",Um="@firebase/auth",bm="@firebase/auth-compat",zm="@firebase/database",Xm="@firebase/database-compat",Wm="@firebase/functions",Ym="@firebase/functions-compat",Hm="@firebase/installations",Km="@firebase/installations-compat",Qm="@firebase/messaging",$m="@firebase/messaging-compat",km="@firebase/performance",Jm="@firebase/performance-compat",Zm="@firebase/remote-config",jm="@firebase/remote-config-compat",qm="@firebase/storage",_m="@firebase/storage-compat",t0="@firebase/firestore",e0="@firebase/firestore-compat",i0="firebase",n0="10.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="[DEFAULT]",s0={[To]:"fire-core",[Dm]:"fire-core-compat",[Bm]:"fire-analytics",[Nm]:"fire-analytics-compat",[Gm]:"fire-app-check",[Vm]:"fire-app-check-compat",[Um]:"fire-auth",[bm]:"fire-auth-compat",[zm]:"fire-rtdb",[Xm]:"fire-rtdb-compat",[Wm]:"fire-fn",[Ym]:"fire-fn-compat",[Hm]:"fire-iid",[Km]:"fire-iid-compat",[Qm]:"fire-fcm",[$m]:"fire-fcm-compat",[km]:"fire-perf",[Jm]:"fire-perf-compat",[Zm]:"fire-rc",[jm]:"fire-rc-compat",[qm]:"fire-gcs",[_m]:"fire-gcs-compat",[t0]:"fire-fst",[e0]:"fire-fst-compat","fire-js":"fire-js",[i0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new Map,So=new Map;function r0(p,e){try{p.container.addComponent(e)}catch(d){Qi.debug(`Component ${e.name} failed to register with FirebaseApp ${p.name}`,d)}}function $i(p){const e=p.name;if(So.has(e))return Qi.debug(`There were multiple attempts to register component ${e}.`),!1;So.set(e,p);for(const d of wr.values())r0(d,p);return!0}function oa(p,e){const d=p.container.getProvider("heartbeat").getImmediate({optional:!0});return d&&d.triggerHeartbeat(),p.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},mi=new Bs("app","Firebase",a0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,d,x){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},d),this._name=d.name,this._automaticDataCollectionEnabled=d.automaticDataCollectionEnabled,this._container=x,this.container.addComponent(new Ei("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en=n0;function vd(p,e={}){let d=p;typeof e!="object"&&(e={name:e});const x=Object.assign({name:Eo,automaticDataCollectionEnabled:!1},e),R=x.name;if(typeof R!="string"||!R)throw mi.create("bad-app-name",{appName:String(R)});if(d||(d=ad()),!d)throw mi.create("no-options");const I=wr.get(R);if(I){if(Ir(d,I.options)&&Ir(x,I.config))return I;throw mi.create("duplicate-app",{appName:R})}const f=new pm(R);for(const t of So.values())f.addComponent(t);const S=new o0(d,x,f);return wr.set(R,S),S}function vh(p=Eo){const e=wr.get(p);if(!e&&p===Eo&&ad())return vd();if(!e)throw mi.create("no-app",{appName:p});return e}function be(p,e,d){var x;let R=(x=s0[p])!==null&&x!==void 0?x:p;d&&(R+=`-${d}`);const I=R.match(/\s|\//),f=e.match(/\s|\//);if(I||f){const S=[`Unable to register library "${R}" with version "${e}":`];I&&S.push(`library name "${R}" contains illegal characters (whitespace or "/")`),I&&f&&S.push("and"),f&&S.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qi.warn(S.join(" "));return}$i(new Ei(`${R}-version`,()=>({library:R,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="firebase-heartbeat-database",l0=1,ps="firebase-heartbeat-store";let ka=null;function pd(){return ka||(ka=Im(h0,l0,{upgrade:(p,e)=>{switch(e){case 0:p.createObjectStore(ps)}}}).catch(p=>{throw mi.create("idb-open",{originalErrorMessage:p.message})})),ka}async function u0(p){try{return await(await pd()).transaction(ps).objectStore(ps).get(gd(p))}catch(e){if(e instanceof ai)Qi.warn(e.message);else{const d=mi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qi.warn(d.message)}}}async function eu(p,e){try{const x=(await pd()).transaction(ps,"readwrite");await x.objectStore(ps).put(e,gd(p)),await x.done}catch(d){if(d instanceof ai)Qi.warn(d.message);else{const x=mi.create("idb-set",{originalErrorMessage:d==null?void 0:d.message});Qi.warn(x.message)}}}function gd(p){return`${p.name}!${p.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=1024,d0=30*24*60*60*1e3;class c0{constructor(e){this.container=e,this._heartbeatsCache=null;const d=this.container.getProvider("app").getImmediate();this._storage=new p0(d),this._heartbeatsCachePromise=this._storage.read().then(x=>(this._heartbeatsCache=x,x))}async triggerHeartbeat(){const d=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),x=iu();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===x||this._heartbeatsCache.heartbeats.some(R=>R.date===x)))return this._heartbeatsCache.heartbeats.push({date:x,agent:d}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(R=>{const I=new Date(R.date).valueOf();return Date.now()-I<=d0}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=iu(),{heartbeatsToSend:d,unsentEntries:x}=v0(this._heartbeatsCache.heartbeats),R=Pr(JSON.stringify({version:2,heartbeats:d}));return this._heartbeatsCache.lastSentHeartbeatDate=e,x.length>0?(this._heartbeatsCache.heartbeats=x,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),R}}function iu(){return new Date().toISOString().substring(0,10)}function v0(p,e=f0){const d=[];let x=p.slice();for(const R of p){const I=d.find(f=>f.agent===R.agent);if(I){if(I.dates.push(R.date),nu(d)>e){I.dates.pop();break}}else if(d.push({agent:R.agent,dates:[R.date]}),nu(d)>e){d.pop();break}x=x.slice(1)}return{heartbeatsToSend:d,unsentEntries:x}}class p0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tm()?em().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await u0(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var d;if(await this._canUseIndexedDBPromise){const R=await this.read();return eu(this.app,{lastSentHeartbeatDate:(d=e.lastSentHeartbeatDate)!==null&&d!==void 0?d:R.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var d;if(await this._canUseIndexedDBPromise){const R=await this.read();return eu(this.app,{lastSentHeartbeatDate:(d=e.lastSentHeartbeatDate)!==null&&d!==void 0?d:R.lastSentHeartbeatDate,heartbeats:[...R.heartbeats,...e.heartbeats]})}else return}}function nu(p){return Pr(JSON.stringify({version:2,heartbeats:p})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(p){$i(new Ei("platform-logger",e=>new Lm(e),"PRIVATE")),$i(new Ei("heartbeat",e=>new c0(e),"PRIVATE")),be(To,tu,p),be(To,tu,"esm2017"),be("fire-js","")}g0("");var m0="firebase",y0="10.5.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */be(m0,y0,"app");var x0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ot,ph=ph||{},pt=x0||self;function ha(p){var e=typeof p;return e=e!="object"?e:p?Array.isArray(p)?"array":e:"null",e=="array"||e=="object"&&typeof p.length=="number"}function Vs(p){var e=typeof p;return e=="object"&&p!=null||e=="function"}function T0(p){return Object.prototype.hasOwnProperty.call(p,Ja)&&p[Ja]||(p[Ja]=++E0)}var Ja="closure_uid_"+(1e9*Math.random()>>>0),E0=0;function S0(p,e,d){return p.call.apply(p.bind,arguments)}function C0(p,e,d){if(!p)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,x),p.apply(e,R)}}return function(){return p.apply(e,arguments)}}function pe(p,e,d){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?pe=S0:pe=C0,pe.apply(null,arguments)}function ar(p,e){var d=Array.prototype.slice.call(arguments,1);return function(){var x=d.slice();return x.push.apply(x,arguments),p.apply(this,x)}}function ie(p,e){function d(){}d.prototype=e.prototype,p.$=e.prototype,p.prototype=new d,p.prototype.constructor=p,p.ac=function(x,R,I){for(var f=Array(arguments.length-2),S=2;S<arguments.length;S++)f[S-2]=arguments[S];return e.prototype[R].apply(x,f)}}function Ii(){this.s=this.s,this.o=this.o}var A0=0;Ii.prototype.s=!1;Ii.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),A0!=0)&&T0(this)};Ii.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const md=Array.prototype.indexOf?function(p,e){return Array.prototype.indexOf.call(p,e,void 0)}:function(p,e){if(typeof p=="string")return typeof e!="string"||e.length!=1?-1:p.indexOf(e,0);for(let d=0;d<p.length;d++)if(d in p&&p[d]===e)return d;return-1};function gh(p){const e=p.length;if(0<e){const d=Array(e);for(let x=0;x<e;x++)d[x]=p[x];return d}return[]}function su(p,e){for(let d=1;d<arguments.length;d++){const x=arguments[d];if(ha(x)){const R=p.length||0,I=x.length||0;p.length=R+I;for(let f=0;f<I;f++)p[R+f]=x[f]}else p.push(x)}}function ge(p,e){this.type=p,this.g=this.target=e,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var P0=function(){if(!pt.addEventListener||!Object.defineProperty)return!1;var p=!1,e=Object.defineProperty({},"passive",{get:function(){p=!0}});try{pt.addEventListener("test",()=>{},e),pt.removeEventListener("test",()=>{},e)}catch{}return p}();function gs(p){return/^[\s\xa0]*$/.test(p)}function la(){var p=pt.navigator;return p&&(p=p.userAgent)?p:""}function Be(p){return la().indexOf(p)!=-1}function mh(p){return mh[" "](p),p}mh[" "]=function(){};function R0(p,e){var d=yy;return Object.prototype.hasOwnProperty.call(d,p)?d[p]:d[p]=e(p)}var M0=Be("Opera"),Pn=Be("Trident")||Be("MSIE"),yd=Be("Edge"),Co=yd||Pn,xd=Be("Gecko")&&!(la().toLowerCase().indexOf("webkit")!=-1&&!Be("Edge"))&&!(Be("Trident")||Be("MSIE"))&&!Be("Edge"),I0=la().toLowerCase().indexOf("webkit")!=-1&&!Be("Edge");function Td(){var p=pt.document;return p?p.documentMode:void 0}var Ao;t:{var Za="",ja=function(){var p=la();if(xd)return/rv:([^\);]+)(\)|;)/.exec(p);if(yd)return/Edge\/([\d\.]+)/.exec(p);if(Pn)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(p);if(I0)return/WebKit\/(\S+)/.exec(p);if(M0)return/(?:Version)[ \/]?(\S+)/.exec(p)}();if(ja&&(Za=ja?ja[1]:""),Pn){var qa=Td();if(qa!=null&&qa>parseFloat(Za)){Ao=String(qa);break t}}Ao=Za}var Po;if(pt.document&&Pn){var ru=Td();Po=ru||parseInt(Ao,10)||void 0}else Po=void 0;var w0=Po;function ms(p,e){if(ge.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var d=this.type=p.type,x=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=e,e=p.relatedTarget){if(xd){t:{try{mh(e.nodeName);var R=!0;break t}catch{}R=!1}R||(e=null)}}else d=="mouseover"?e=p.fromElement:d=="mouseout"&&(e=p.toElement);this.relatedTarget=e,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:F0[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&ms.$.h.call(this)}}ie(ms,ge);var F0={2:"touch",3:"pen",4:"mouse"};ms.prototype.h=function(){ms.$.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Gs="closure_listenable_"+(1e6*Math.random()|0),L0=0;function O0(p,e,d,x,R){this.listener=p,this.proxy=null,this.src=e,this.type=d,this.capture=!!x,this.la=R,this.key=++L0,this.fa=this.ia=!1}function ua(p){p.fa=!0,p.listener=null,p.proxy=null,p.src=null,p.la=null}function yh(p,e,d){for(const x in p)e.call(d,p[x],x,p)}function D0(p,e){for(const d in p)e.call(void 0,p[d],d,p)}function Ed(p){const e={};for(const d in p)e[d]=p[d];return e}const au="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sd(p,e){let d,x;for(let R=1;R<arguments.length;R++){x=arguments[R];for(d in x)p[d]=x[d];for(let I=0;I<au.length;I++)d=au[I],Object.prototype.hasOwnProperty.call(x,d)&&(p[d]=x[d])}}function fa(p){this.src=p,this.g={},this.h=0}fa.prototype.add=function(p,e,d,x,R){var I=p.toString();p=this.g[I],p||(p=this.g[I]=[],this.h++);var f=Mo(p,e,x,R);return-1<f?(e=p[f],d||(e.ia=!1)):(e=new O0(e,this.src,I,!!x,R),e.ia=d,p.push(e)),e};function Ro(p,e){var d=e.type;if(d in p.g){var x=p.g[d],R=md(x,e),I;(I=0<=R)&&Array.prototype.splice.call(x,R,1),I&&(ua(e),p.g[d].length==0&&(delete p.g[d],p.h--))}}function Mo(p,e,d,x){for(var R=0;R<p.length;++R){var I=p[R];if(!I.fa&&I.listener==e&&I.capture==!!d&&I.la==x)return R}return-1}var xh="closure_lm_"+(1e6*Math.random()|0),_a={};function Cd(p,e,d,x,R){if(x&&x.once)return Pd(p,e,d,x,R);if(Array.isArray(e)){for(var I=0;I<e.length;I++)Cd(p,e[I],d,x,R);return null}return d=Sh(d),p&&p[Gs]?p.O(e,d,Vs(x)?!!x.capture:!!x,R):Ad(p,e,d,!1,x,R)}function Ad(p,e,d,x,R,I){if(!e)throw Error("Invalid event type");var f=Vs(R)?!!R.capture:!!R,S=Eh(p);if(S||(p[xh]=S=new fa(p)),d=S.add(e,d,x,f,I),d.proxy)return d;if(x=N0(),d.proxy=x,x.src=p,x.listener=d,p.addEventListener)P0||(R=f),R===void 0&&(R=!1),p.addEventListener(e.toString(),x,R);else if(p.attachEvent)p.attachEvent(Md(e.toString()),x);else if(p.addListener&&p.removeListener)p.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return d}function N0(){function p(d){return e.call(p.src,p.listener,d)}const e=B0;return p}function Pd(p,e,d,x,R){if(Array.isArray(e)){for(var I=0;I<e.length;I++)Pd(p,e[I],d,x,R);return null}return d=Sh(d),p&&p[Gs]?p.P(e,d,Vs(x)?!!x.capture:!!x,R):Ad(p,e,d,!0,x,R)}function Rd(p,e,d,x,R){if(Array.isArray(e))for(var I=0;I<e.length;I++)Rd(p,e[I],d,x,R);else x=Vs(x)?!!x.capture:!!x,d=Sh(d),p&&p[Gs]?(p=p.i,e=String(e).toString(),e in p.g&&(I=p.g[e],d=Mo(I,d,x,R),-1<d&&(ua(I[d]),Array.prototype.splice.call(I,d,1),I.length==0&&(delete p.g[e],p.h--)))):p&&(p=Eh(p))&&(e=p.g[e.toString()],p=-1,e&&(p=Mo(e,d,x,R)),(d=-1<p?e[p]:null)&&Th(d))}function Th(p){if(typeof p!="number"&&p&&!p.fa){var e=p.src;if(e&&e[Gs])Ro(e.i,p);else{var d=p.type,x=p.proxy;e.removeEventListener?e.removeEventListener(d,x,p.capture):e.detachEvent?e.detachEvent(Md(d),x):e.addListener&&e.removeListener&&e.removeListener(x),(d=Eh(e))?(Ro(d,p),d.h==0&&(d.src=null,e[xh]=null)):ua(p)}}}function Md(p){return p in _a?_a[p]:_a[p]="on"+p}function B0(p,e){if(p.fa)p=!0;else{e=new ms(e,this);var d=p.listener,x=p.la||p.src;p.ia&&Th(p),p=d.call(x,e)}return p}function Eh(p){return p=p[xh],p instanceof fa?p:null}var to="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sh(p){return typeof p=="function"?p:(p[to]||(p[to]=function(e){return p.handleEvent(e)}),p[to])}function ee(){Ii.call(this),this.i=new fa(this),this.S=this,this.J=null}ie(ee,Ii);ee.prototype[Gs]=!0;ee.prototype.removeEventListener=function(p,e,d,x){Rd(this,p,e,d,x)};function he(p,e){var d,x=p.J;if(x)for(d=[];x;x=x.J)d.push(x);if(p=p.S,x=e.type||e,typeof e=="string")e=new ge(e,p);else if(e instanceof ge)e.target=e.target||p;else{var R=e;e=new ge(x,p),Sd(e,R)}if(R=!0,d)for(var I=d.length-1;0<=I;I--){var f=e.g=d[I];R=or(f,x,!0,e)&&R}if(f=e.g=p,R=or(f,x,!0,e)&&R,R=or(f,x,!1,e)&&R,d)for(I=0;I<d.length;I++)f=e.g=d[I],R=or(f,x,!1,e)&&R}ee.prototype.N=function(){if(ee.$.N.call(this),this.i){var p=this.i,e;for(e in p.g){for(var d=p.g[e],x=0;x<d.length;x++)ua(d[x]);delete p.g[e],p.h--}}this.J=null};ee.prototype.O=function(p,e,d,x){return this.i.add(String(p),e,!1,d,x)};ee.prototype.P=function(p,e,d,x){return this.i.add(String(p),e,!0,d,x)};function or(p,e,d,x){if(e=p.i.g[String(e)],!e)return!0;e=e.concat();for(var R=!0,I=0;I<e.length;++I){var f=e[I];if(f&&!f.fa&&f.capture==d){var S=f.listener,t=f.la||f.src;f.ia&&Ro(p.i,f),R=S.call(t,x)!==!1&&R}}return R&&!x.defaultPrevented}var Ch=pt.JSON.stringify;class V0{constructor(e,d){this.i=e,this.j=d,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function G0(){var p=Ah;let e=null;return p.g&&(e=p.g,p.g=p.g.next,p.g||(p.h=null),e.next=null),e}class U0{constructor(){this.h=this.g=null}add(e,d){const x=Id.get();x.set(e,d),this.h?this.h.next=x:this.g=x,this.h=x}}var Id=new V0(()=>new b0,p=>p.reset());class b0{constructor(){this.next=this.g=this.h=null}set(e,d){this.h=e,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}function z0(p){var e=1;p=p.split(":");const d=[];for(;0<e&&p.length;)d.push(p.shift()),e--;return p.length&&d.push(p.join(":")),d}function X0(p){pt.setTimeout(()=>{throw p},0)}let ys,xs=!1,Ah=new U0,wd=()=>{const p=pt.Promise.resolve(void 0);ys=()=>{p.then(W0)}};var W0=()=>{for(var p;p=G0();){try{p.h.call(p.g)}catch(d){X0(d)}var e=Id;e.j(p),100>e.h&&(e.h++,p.next=e.g,e.g=p)}xs=!1};function da(p,e){ee.call(this),this.h=p||1,this.g=e||pt,this.j=pe(this.qb,this),this.l=Date.now()}ie(da,ee);ot=da.prototype;ot.ga=!1;ot.T=null;ot.qb=function(){if(this.ga){var p=Date.now()-this.l;0<p&&p<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-p):(this.T&&(this.g.clearTimeout(this.T),this.T=null),he(this,"tick"),this.ga&&(Ph(this),this.start()))}};ot.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Ph(p){p.ga=!1,p.T&&(p.g.clearTimeout(p.T),p.T=null)}ot.N=function(){da.$.N.call(this),Ph(this),delete this.g};function Rh(p,e,d){if(typeof p=="function")d&&(p=pe(p,d));else if(p&&typeof p.handleEvent=="function")p=pe(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:pt.setTimeout(p,e||0)}function Fd(p){p.g=Rh(()=>{p.g=null,p.i&&(p.i=!1,Fd(p))},p.j);const e=p.h;p.h=null,p.m.apply(null,e)}class Y0 extends Ii{constructor(e,d){super(),this.m=e,this.j=d,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Fd(this)}N(){super.N(),this.g&&(pt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ts(p){Ii.call(this),this.h=p,this.g={}}ie(Ts,Ii);var ou=[];function Ld(p,e,d,x){Array.isArray(d)||(d&&(ou[0]=d.toString()),d=ou);for(var R=0;R<d.length;R++){var I=Cd(e,d[R],x||p.handleEvent,!1,p.h||p);if(!I)break;p.g[I.key]=I}}function Od(p){yh(p.g,function(e,d){this.g.hasOwnProperty(d)&&Th(e)},p),p.g={}}Ts.prototype.N=function(){Ts.$.N.call(this),Od(this)};Ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ca(){this.g=!0}ca.prototype.Ea=function(){this.g=!1};function H0(p,e,d,x,R,I){p.info(function(){if(p.g)if(I)for(var f="",S=I.split("&"),t=0;t<S.length;t++){var h=S[t].split("=");if(1<h.length){var m=h[0];h=h[1];var o=m.split("_");f=2<=o.length&&o[1]=="type"?f+(m+"="+h+"&"):f+(m+"=redacted&")}}else f=null;else f=I;return"XMLHTTP REQ ("+x+") [attempt "+R+"]: "+e+`
`+d+`
`+f})}function K0(p,e,d,x,R,I,f){p.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+R+"]: "+e+`
`+d+`
`+I+" "+f})}function cn(p,e,d,x){p.info(function(){return"XMLHTTP TEXT ("+e+"): "+$0(p,d)+(x?" "+x:"")})}function Q0(p,e){p.info(function(){return"TIMEOUT: "+e})}ca.prototype.info=function(){};function $0(p,e){if(!p.g)return e;if(!e)return null;try{var d=JSON.parse(e);if(d){for(p=0;p<d.length;p++)if(Array.isArray(d[p])){var x=d[p];if(!(2>x.length)){var R=x[1];if(Array.isArray(R)&&!(1>R.length)){var I=R[0];if(I!="noop"&&I!="stop"&&I!="close")for(var f=1;f<R.length;f++)R[f]=""}}}}return Ch(d)}catch{return e}}var nn={},hu=null;function va(){return hu=hu||new ee}nn.Ta="serverreachability";function Dd(p){ge.call(this,nn.Ta,p)}ie(Dd,ge);function Es(p){const e=va();he(e,new Dd(e))}nn.STAT_EVENT="statevent";function Nd(p,e){ge.call(this,nn.STAT_EVENT,p),this.stat=e}ie(Nd,ge);function xe(p){const e=va();he(e,new Nd(e,p))}nn.Ua="timingevent";function Bd(p,e){ge.call(this,nn.Ua,p),this.size=e}ie(Bd,ge);function Us(p,e){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return pt.setTimeout(function(){p()},e)}var pa={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Vd={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Mh(){}Mh.prototype.h=null;function lu(p){return p.h||(p.h=p.i())}function Gd(){}var bs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ih(){ge.call(this,"d")}ie(Ih,ge);function wh(){ge.call(this,"c")}ie(wh,ge);var Io;function ga(){}ie(ga,Mh);ga.prototype.g=function(){return new XMLHttpRequest};ga.prototype.i=function(){return{}};Io=new ga;function zs(p,e,d,x){this.l=p,this.j=e,this.m=d,this.W=x||1,this.U=new Ts(this),this.P=k0,p=Co?125:void 0,this.V=new da(p),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ud}function Ud(){this.i=null,this.g="",this.h=!1}var k0=45e3,wo={},Fr={};ot=zs.prototype;ot.setTimeout=function(p){this.P=p};function Fo(p,e,d){p.L=1,p.v=ya(_e(e)),p.s=d,p.S=!0,bd(p,null)}function bd(p,e){p.G=Date.now(),Xs(p),p.A=_e(p.v);var d=p.A,x=p.W;Array.isArray(x)||(x=[String(x)]),$d(d.i,"t",x),p.C=0,d=p.l.J,p.h=new Ud,p.g=vc(p.l,d?e:null,!p.s),0<p.O&&(p.M=new Y0(pe(p.Pa,p,p.g),p.O)),Ld(p.U,p.g,"readystatechange",p.nb),e=p.I?Ed(p.I):{},p.s?(p.u||(p.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",p.g.ha(p.A,p.u,p.s,e)):(p.u="GET",p.g.ha(p.A,p.u,null,e)),Es(),H0(p.j,p.u,p.A,p.m,p.W,p.s)}ot.nb=function(p){p=p.target;const e=this.M;e&&Ve(p)==3?e.l():this.Pa(p)};ot.Pa=function(p){try{if(p==this.g)t:{const m=Ve(this.g);var e=this.g.Ia();const o=this.g.da();if(!(3>m)&&(m!=3||Co||this.g&&(this.h.h||this.g.ja()||cu(this.g)))){this.J||m!=4||e==7||(e==8||0>=o?Es(3):Es(2)),ma(this);var d=this.g.da();this.ca=d;e:if(zd(this)){var x=cu(this.g);p="";var R=x.length,I=Ve(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ui(this),rs(this);var f="";break e}this.h.i=new pt.TextDecoder}for(e=0;e<R;e++)this.h.h=!0,p+=this.h.i.decode(x[e],{stream:I&&e==R-1});x.splice(0,R),this.h.g+=p,this.C=0,f=this.h.g}else f=this.g.ja();if(this.i=d==200,K0(this.j,this.u,this.A,this.m,this.W,m,d),this.i){if(this.aa&&!this.K){e:{if(this.g){var S,t=this.g;if((S=t.g?t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gs(S)){var h=S;break e}}h=null}if(d=h)cn(this.j,this.m,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lo(this,d);else{this.i=!1,this.o=3,xe(12),Ui(this),rs(this);break t}}this.S?(Xd(this,m,f),Co&&this.i&&m==3&&(Ld(this.U,this.V,"tick",this.mb),this.V.start())):(cn(this.j,this.m,f,null),Lo(this,f)),m==4&&Ui(this),this.i&&!this.J&&(m==4?uc(this.l,this):(this.i=!1,Xs(this)))}else py(this.g),d==400&&0<f.indexOf("Unknown SID")?(this.o=3,xe(12)):(this.o=0,xe(13)),Ui(this),rs(this)}}}catch{}finally{}};function zd(p){return p.g?p.u=="GET"&&p.L!=2&&p.l.Ha:!1}function Xd(p,e,d){let x=!0,R;for(;!p.J&&p.C<d.length;)if(R=J0(p,d),R==Fr){e==4&&(p.o=4,xe(14),x=!1),cn(p.j,p.m,null,"[Incomplete Response]");break}else if(R==wo){p.o=4,xe(15),cn(p.j,p.m,d,"[Invalid Chunk]"),x=!1;break}else cn(p.j,p.m,R,null),Lo(p,R);zd(p)&&R!=Fr&&R!=wo&&(p.h.g="",p.C=0),e!=4||d.length!=0||p.h.h||(p.o=1,xe(16),x=!1),p.i=p.i&&x,x?0<d.length&&!p.ba&&(p.ba=!0,e=p.l,e.g==p&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+d.length),Bh(e),e.M=!0,xe(11))):(cn(p.j,p.m,d,"[Invalid Chunked Response]"),Ui(p),rs(p))}ot.mb=function(){if(this.g){var p=Ve(this.g),e=this.g.ja();this.C<e.length&&(ma(this),Xd(this,p,e),this.i&&p!=4&&Xs(this))}};function J0(p,e){var d=p.C,x=e.indexOf(`
`,d);return x==-1?Fr:(d=Number(e.substring(d,x)),isNaN(d)?wo:(x+=1,x+d>e.length?Fr:(e=e.slice(x,x+d),p.C=x+d,e)))}ot.cancel=function(){this.J=!0,Ui(this)};function Xs(p){p.Y=Date.now()+p.P,Wd(p,p.P)}function Wd(p,e){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Us(pe(p.lb,p),e)}function ma(p){p.B&&(pt.clearTimeout(p.B),p.B=null)}ot.lb=function(){this.B=null;const p=Date.now();0<=p-this.Y?(Q0(this.j,this.A),this.L!=2&&(Es(),xe(17)),Ui(this),this.o=2,rs(this)):Wd(this,this.Y-p)};function rs(p){p.l.H==0||p.J||uc(p.l,p)}function Ui(p){ma(p);var e=p.M;e&&typeof e.sa=="function"&&e.sa(),p.M=null,Ph(p.V),Od(p.U),p.g&&(e=p.g,p.g=null,e.abort(),e.sa())}function Lo(p,e){try{var d=p.l;if(d.H!=0&&(d.g==p||Oo(d.i,p))){if(!p.K&&Oo(d.i,p)&&d.H==3){try{var x=d.Ja.g.parse(e)}catch{x=null}if(Array.isArray(x)&&x.length==3){var R=x;if(R[0]==0){t:if(!d.u){if(d.g)if(d.g.G+3e3<p.G)Dr(d),Ea(d);else break t;Nh(d),xe(18)}}else d.Fa=R[1],0<d.Fa-d.V&&37500>R[2]&&d.G&&d.A==0&&!d.v&&(d.v=Us(pe(d.ib,d),6e3));if(1>=Zd(d.i)&&d.oa){try{d.oa()}catch{}d.oa=void 0}}else bi(d,11)}else if((p.K||d.g==p)&&Dr(d),!gs(e))for(R=d.Ja.g.parse(e),e=0;e<R.length;e++){let h=R[e];if(d.V=h[0],h=h[1],d.H==2)if(h[0]=="c"){d.K=h[1],d.pa=h[2];const m=h[3];m!=null&&(d.ra=m,d.l.info("VER="+d.ra));const o=h[4];o!=null&&(d.Ga=o,d.l.info("SVER="+d.Ga));const a=h[5];a!=null&&typeof a=="number"&&0<a&&(x=1.5*a,d.L=x,d.l.info("backChannelRequestTimeoutMs_="+x)),x=d;const r=p.g;if(r){const i=r.g?r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(i){var I=x.i;I.g||i.indexOf("spdy")==-1&&i.indexOf("quic")==-1&&i.indexOf("h2")==-1||(I.j=I.l,I.g=new Set,I.h&&(Fh(I,I.h),I.h=null))}if(x.F){const n=r.g?r.g.getResponseHeader("X-HTTP-Session-Id"):null;n&&(x.Da=n,Gt(x.I,x.F,n))}}d.H=3,d.h&&d.h.Ba(),d.ca&&(d.S=Date.now()-p.G,d.l.info("Handshake RTT: "+d.S+"ms")),x=d;var f=p;if(x.wa=cc(x,x.J?x.pa:null,x.Y),f.K){jd(x.i,f);var S=f,t=x.L;t&&S.setTimeout(t),S.B&&(ma(S),Xs(S)),x.g=f}else hc(x);0<d.j.length&&Sa(d)}else h[0]!="stop"&&h[0]!="close"||bi(d,7);else d.H==3&&(h[0]=="stop"||h[0]=="close"?h[0]=="stop"?bi(d,7):Dh(d):h[0]!="noop"&&d.h&&d.h.Aa(h),d.A=0)}}Es(4)}catch{}}function Z0(p){if(p.Z&&typeof p.Z=="function")return p.Z();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(ha(p)){for(var e=[],d=p.length,x=0;x<d;x++)e.push(p[x]);return e}e=[],d=0;for(x in p)e[d++]=p[x];return e}function j0(p){if(p.ta&&typeof p.ta=="function")return p.ta();if(!p.Z||typeof p.Z!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(ha(p)||typeof p=="string"){var e=[];p=p.length;for(var d=0;d<p;d++)e.push(d);return e}e=[],d=0;for(const x in p)e[d++]=x;return e}}}function Yd(p,e){if(p.forEach&&typeof p.forEach=="function")p.forEach(e,void 0);else if(ha(p)||typeof p=="string")Array.prototype.forEach.call(p,e,void 0);else for(var d=j0(p),x=Z0(p),R=x.length,I=0;I<R;I++)e.call(void 0,x[I],d&&d[I],p)}var Hd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function q0(p,e){if(p){p=p.split("&");for(var d=0;d<p.length;d++){var x=p[d].indexOf("="),R=null;if(0<=x){var I=p[d].substring(0,x);R=p[d].substring(x+1)}else I=p[d];e(I,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Yi(p){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,p instanceof Yi){this.h=p.h,Lr(this,p.j),this.s=p.s,this.g=p.g,Or(this,p.m),this.l=p.l;var e=p.i,d=new Ss;d.i=e.i,e.g&&(d.g=new Map(e.g),d.h=e.h),uu(this,d),this.o=p.o}else p&&(e=String(p).match(Hd))?(this.h=!1,Lr(this,e[1]||"",!0),this.s=ts(e[2]||""),this.g=ts(e[3]||"",!0),Or(this,e[4]),this.l=ts(e[5]||"",!0),uu(this,e[6]||"",!0),this.o=ts(e[7]||"")):(this.h=!1,this.i=new Ss(null,this.h))}Yi.prototype.toString=function(){var p=[],e=this.j;e&&p.push(es(e,fu,!0),":");var d=this.g;return(d||e=="file")&&(p.push("//"),(e=this.s)&&p.push(es(e,fu,!0),"@"),p.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.m,d!=null&&p.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&p.push("/"),p.push(es(d,d.charAt(0)=="/"?ey:ty,!0))),(d=this.i.toString())&&p.push("?",d),(d=this.o)&&p.push("#",es(d,ny)),p.join("")};function _e(p){return new Yi(p)}function Lr(p,e,d){p.j=d?ts(e,!0):e,p.j&&(p.j=p.j.replace(/:$/,""))}function Or(p,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);p.m=e}else p.m=null}function uu(p,e,d){e instanceof Ss?(p.i=e,sy(p.i,p.h)):(d||(e=es(e,iy)),p.i=new Ss(e,p.h))}function Gt(p,e,d){p.i.set(e,d)}function ya(p){return Gt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function ts(p,e){return p?e?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function es(p,e,d){return typeof p=="string"?(p=encodeURI(p).replace(e,_0),d&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function _0(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var fu=/[#\/\?@]/g,ty=/[#\?:]/g,ey=/[#\?]/g,iy=/[#\?@]/g,ny=/#/g;function Ss(p,e){this.h=this.g=null,this.i=p||null,this.j=!!e}function wi(p){p.g||(p.g=new Map,p.h=0,p.i&&q0(p.i,function(e,d){p.add(decodeURIComponent(e.replace(/\+/g," ")),d)}))}ot=Ss.prototype;ot.add=function(p,e){wi(this),this.i=null,p=Gn(this,p);var d=this.g.get(p);return d||this.g.set(p,d=[]),d.push(e),this.h+=1,this};function Kd(p,e){wi(p),e=Gn(p,e),p.g.has(e)&&(p.i=null,p.h-=p.g.get(e).length,p.g.delete(e))}function Qd(p,e){return wi(p),e=Gn(p,e),p.g.has(e)}ot.forEach=function(p,e){wi(this),this.g.forEach(function(d,x){d.forEach(function(R){p.call(e,R,x,this)},this)},this)};ot.ta=function(){wi(this);const p=Array.from(this.g.values()),e=Array.from(this.g.keys()),d=[];for(let x=0;x<e.length;x++){const R=p[x];for(let I=0;I<R.length;I++)d.push(e[x])}return d};ot.Z=function(p){wi(this);let e=[];if(typeof p=="string")Qd(this,p)&&(e=e.concat(this.g.get(Gn(this,p))));else{p=Array.from(this.g.values());for(let d=0;d<p.length;d++)e=e.concat(p[d])}return e};ot.set=function(p,e){return wi(this),this.i=null,p=Gn(this,p),Qd(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[e]),this.h+=1,this};ot.get=function(p,e){return p?(p=this.Z(p),0<p.length?String(p[0]):e):e};function $d(p,e,d){Kd(p,e),0<d.length&&(p.i=null,p.g.set(Gn(p,e),gh(d)),p.h+=d.length)}ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],e=Array.from(this.g.keys());for(var d=0;d<e.length;d++){var x=e[d];const I=encodeURIComponent(String(x)),f=this.Z(x);for(x=0;x<f.length;x++){var R=I;f[x]!==""&&(R+="="+encodeURIComponent(String(f[x]))),p.push(R)}}return this.i=p.join("&")};function Gn(p,e){return e=String(e),p.j&&(e=e.toLowerCase()),e}function sy(p,e){e&&!p.j&&(wi(p),p.i=null,p.g.forEach(function(d,x){var R=x.toLowerCase();x!=R&&(Kd(this,x),$d(this,R,d))},p)),p.j=e}var ry=class{constructor(p,e){this.g=p,this.map=e}};function kd(p){this.l=p||ay,pt.PerformanceNavigationTiming?(p=pt.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(pt.g&&pt.g.Ka&&pt.g.Ka()&&pt.g.Ka().dc),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ay=10;function Jd(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Zd(p){return p.h?1:p.g?p.g.size:0}function Oo(p,e){return p.h?p.h==e:p.g?p.g.has(e):!1}function Fh(p,e){p.g?p.g.add(e):p.h=e}function jd(p,e){p.h&&p.h==e?p.h=null:p.g&&p.g.has(e)&&p.g.delete(e)}kd.prototype.cancel=function(){if(this.i=qd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function qd(p){if(p.h!=null)return p.i.concat(p.h.F);if(p.g!=null&&p.g.size!==0){let e=p.i;for(const d of p.g.values())e=e.concat(d.F);return e}return gh(p.i)}var oy=class{stringify(p){return pt.JSON.stringify(p,void 0)}parse(p){return pt.JSON.parse(p,void 0)}};function hy(){this.g=new oy}function ly(p,e,d){const x=d||"";try{Yd(p,function(R,I){let f=R;Vs(R)&&(f=Ch(R)),e.push(x+I+"="+encodeURIComponent(f))})}catch(R){throw e.push(x+"type="+encodeURIComponent("_badmap")),R}}function uy(p,e){const d=new ca;if(pt.Image){const x=new Image;x.onload=ar(hr,d,x,"TestLoadImage: loaded",!0,e),x.onerror=ar(hr,d,x,"TestLoadImage: error",!1,e),x.onabort=ar(hr,d,x,"TestLoadImage: abort",!1,e),x.ontimeout=ar(hr,d,x,"TestLoadImage: timeout",!1,e),pt.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=p}else e(!1)}function hr(p,e,d,x,R){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,R(x)}catch{}}function Ws(p){this.l=p.ec||null,this.j=p.ob||!1}ie(Ws,Mh);Ws.prototype.g=function(){return new xa(this.l,this.j)};Ws.prototype.i=function(p){return function(){return p}}({});function xa(p,e){ee.call(this),this.F=p,this.u=e,this.m=void 0,this.readyState=Lh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ie(xa,ee);var Lh=0;ot=xa.prototype;ot.open=function(p,e){if(this.readyState!=Lh)throw this.abort(),Error("Error reopening a connection");this.C=p,this.B=e,this.readyState=1,Cs(this)};ot.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};p&&(e.body=p),(this.F||pt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ys(this)),this.readyState=Lh};ot.$a=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Cs(this)),this.g&&(this.readyState=3,Cs(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof pt.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_d(this)}else p.text().then(this.Za.bind(this),this.ka.bind(this))};function _d(p){p.j.read().then(p.Xa.bind(p)).catch(p.ka.bind(p))}ot.Xa=function(p){if(this.g){if(this.u&&p.value)this.response.push(p.value);else if(!this.u){var e=p.value?p.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!p.done}))&&(this.response=this.responseText+=e)}p.done?Ys(this):Cs(this),this.readyState==3&&_d(this)}};ot.Za=function(p){this.g&&(this.response=this.responseText=p,Ys(this))};ot.Ya=function(p){this.g&&(this.response=p,Ys(this))};ot.ka=function(){this.g&&Ys(this)};function Ys(p){p.readyState=4,p.l=null,p.j=null,p.A=null,Cs(p)}ot.setRequestHeader=function(p,e){this.v.append(p,e)};ot.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""};ot.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],e=this.h.entries();for(var d=e.next();!d.done;)d=d.value,p.push(d[0]+": "+d[1]),d=e.next();return p.join(`\r
`)};function Cs(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(xa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});var fy=pt.JSON.parse;function Wt(p){ee.call(this),this.headers=new Map,this.u=p||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=tc,this.L=this.M=!1}ie(Wt,ee);var tc="",dy=/^https?$/i,cy=["POST","PUT"];ot=Wt.prototype;ot.Oa=function(p){this.M=p};ot.ha=function(p,e,d,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+p);e=e?e.toUpperCase():"GET",this.I=p,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Io.g(),this.C=this.u?lu(this.u):lu(Io),this.g.onreadystatechange=pe(this.La,this);try{this.G=!0,this.g.open(e,String(p),!0),this.G=!1}catch(I){du(this,I);return}if(p=d||"",d=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var R in x)d.set(R,x[R]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const I of x.keys())d.set(I,x.get(I));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(d.keys()).find(I=>I.toLowerCase()=="content-type"),R=pt.FormData&&p instanceof pt.FormData,!(0<=md(cy,e))||x||R||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[I,f]of d)this.g.setRequestHeader(I,f);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{nc(this),0<this.B&&((this.L=vy(this.g))?(this.g.timeout=this.B,this.g.ontimeout=pe(this.ua,this)):this.A=Rh(this.ua,this.B,this)),this.v=!0,this.g.send(p),this.v=!1}catch(I){du(this,I)}};function vy(p){return Pn&&typeof p.timeout=="number"&&p.ontimeout!==void 0}ot.ua=function(){typeof ph<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,he(this,"timeout"),this.abort(8))};function du(p,e){p.h=!1,p.g&&(p.l=!0,p.g.abort(),p.l=!1),p.j=e,p.m=5,ec(p),Ta(p)}function ec(p){p.F||(p.F=!0,he(p,"complete"),he(p,"error"))}ot.abort=function(p){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=p||7,he(this,"complete"),he(this,"abort"),Ta(this))};ot.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ta(this,!0)),Wt.$.N.call(this)};ot.La=function(){this.s||(this.G||this.v||this.l?ic(this):this.kb())};ot.kb=function(){ic(this)};function ic(p){if(p.h&&typeof ph<"u"&&(!p.C[1]||Ve(p)!=4||p.da()!=2)){if(p.v&&Ve(p)==4)Rh(p.La,0,p);else if(he(p,"readystatechange"),Ve(p)==4){p.h=!1;try{const f=p.da();t:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var d;if(!(d=e)){var x;if(x=f===0){var R=String(p.I).match(Hd)[1]||null;!R&&pt.self&&pt.self.location&&(R=pt.self.location.protocol.slice(0,-1)),x=!dy.test(R?R.toLowerCase():"")}d=x}if(d)he(p,"complete"),he(p,"success");else{p.m=6;try{var I=2<Ve(p)?p.g.statusText:""}catch{I=""}p.j=I+" ["+p.da()+"]",ec(p)}}finally{Ta(p)}}}}function Ta(p,e){if(p.g){nc(p);const d=p.g,x=p.C[0]?()=>{}:null;p.g=null,p.C=null,e||he(p,"ready");try{d.onreadystatechange=x}catch{}}}function nc(p){p.g&&p.L&&(p.g.ontimeout=null),p.A&&(pt.clearTimeout(p.A),p.A=null)}ot.isActive=function(){return!!this.g};function Ve(p){return p.g?p.g.readyState:0}ot.da=function(){try{return 2<Ve(this)?this.g.status:-1}catch{return-1}};ot.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ot.Wa=function(p){if(this.g){var e=this.g.responseText;return p&&e.indexOf(p)==0&&(e=e.substring(p.length)),fy(e)}};function cu(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.K){case tc:case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function py(p){const e={};p=(p.g&&2<=Ve(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<p.length;x++){if(gs(p[x]))continue;var d=z0(p[x]);const R=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const I=e[R]||[];e[R]=I,I.push(d)}D0(e,function(x){return x.join(", ")})}ot.Ia=function(){return this.m};ot.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function sc(p){let e="";return yh(p,function(d,x){e+=x,e+=":",e+=d,e+=`\r
`}),e}function Oh(p,e,d){t:{for(x in d){var x=!1;break t}x=!0}x||(d=sc(d),typeof p=="string"?d!=null&&encodeURIComponent(String(d)):Gt(p,e,d))}function $n(p,e,d){return d&&d.internalChannelParams&&d.internalChannelParams[p]||e}function rc(p){this.Ga=0,this.j=[],this.l=new ca,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=$n("failFast",!1,p),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=$n("baseRetryDelayMs",5e3,p),this.hb=$n("retryDelaySeedMs",1e4,p),this.eb=$n("forwardChannelMaxRetries",2,p),this.xa=$n("forwardChannelRequestTimeoutMs",2e4,p),this.va=p&&p.xmlHttpFactory||void 0,this.Ha=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.i=new kd(p&&p.concurrentRequestLimit),this.Ja=new hy,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=p&&p.bc||!1,p&&p.Ea&&this.l.Ea(),p&&p.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&p&&p.detectBufferingProxy||!1,this.qa=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.qa=p.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ot=rc.prototype;ot.ra=8;ot.H=1;function Dh(p){if(ac(p),p.H==3){var e=p.W++,d=_e(p.I);if(Gt(d,"SID",p.K),Gt(d,"RID",e),Gt(d,"TYPE","terminate"),Hs(p,d),e=new zs(p,p.l,e),e.L=2,e.v=ya(_e(d)),d=!1,pt.navigator&&pt.navigator.sendBeacon)try{d=pt.navigator.sendBeacon(e.v.toString(),"")}catch{}!d&&pt.Image&&(new Image().src=e.v,d=!0),d||(e.g=vc(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Xs(e)}dc(p)}function Ea(p){p.g&&(Bh(p),p.g.cancel(),p.g=null)}function ac(p){Ea(p),p.u&&(pt.clearTimeout(p.u),p.u=null),Dr(p),p.i.cancel(),p.m&&(typeof p.m=="number"&&pt.clearTimeout(p.m),p.m=null)}function Sa(p){if(!Jd(p.i)&&!p.m){p.m=!0;var e=p.Na;ys||wd(),xs||(ys(),xs=!0),Ah.add(e,p),p.C=0}}function gy(p,e){return Zd(p.i)>=p.i.j-(p.m?1:0)?!1:p.m?(p.j=e.F.concat(p.j),!0):p.H==1||p.H==2||p.C>=(p.cb?0:p.eb)?!1:(p.m=Us(pe(p.Na,p,e),fc(p,p.C)),p.C++,!0)}ot.Na=function(p){if(this.m)if(this.m=null,this.H==1){if(!p){this.W=Math.floor(1e5*Math.random()),p=this.W++;const R=new zs(this,this.l,p);let I=this.s;if(this.U&&(I?(I=Ed(I),Sd(I,this.U)):I=this.U),this.o!==null||this.O||(R.I=I,I=null),this.P)t:{for(var e=0,d=0;d<this.j.length;d++){e:{var x=this.j[d];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break e}x=void 0}if(x===void 0)break;if(e+=x,4096<e){e=d;break t}if(e===4096||d===this.j.length-1){e=d+1;break t}}e=1e3}else e=1e3;e=oc(this,R,e),d=_e(this.I),Gt(d,"RID",p),Gt(d,"CVER",22),this.F&&Gt(d,"X-HTTP-Session-Id",this.F),Hs(this,d),I&&(this.O?e="headers="+encodeURIComponent(String(sc(I)))+"&"+e:this.o&&Oh(d,this.o,I)),Fh(this.i,R),this.bb&&Gt(d,"TYPE","init"),this.P?(Gt(d,"$req",e),Gt(d,"SID","null"),R.aa=!0,Fo(R,d,null)):Fo(R,d,e),this.H=2}}else this.H==3&&(p?vu(this,p):this.j.length==0||Jd(this.i)||vu(this))};function vu(p,e){var d;e?d=e.m:d=p.W++;const x=_e(p.I);Gt(x,"SID",p.K),Gt(x,"RID",d),Gt(x,"AID",p.V),Hs(p,x),p.o&&p.s&&Oh(x,p.o,p.s),d=new zs(p,p.l,d,p.C+1),p.o===null&&(d.I=p.s),e&&(p.j=e.F.concat(p.j)),e=oc(p,d,1e3),d.setTimeout(Math.round(.5*p.xa)+Math.round(.5*p.xa*Math.random())),Fh(p.i,d),Fo(d,x,e)}function Hs(p,e){p.na&&yh(p.na,function(d,x){Gt(e,x,d)}),p.h&&Yd({},function(d,x){Gt(e,x,d)})}function oc(p,e,d){d=Math.min(p.j.length,d);var x=p.h?pe(p.h.Va,p.h,p):null;t:{var R=p.j;let I=-1;for(;;){const f=["count="+d];I==-1?0<d?(I=R[0].g,f.push("ofs="+I)):I=0:f.push("ofs="+I);let S=!0;for(let t=0;t<d;t++){let h=R[t].g;const m=R[t].map;if(h-=I,0>h)I=Math.max(0,R[t].g-100),S=!1;else try{ly(m,f,"req"+h+"_")}catch{x&&x(m)}}if(S){x=f.join("&");break t}}}return p=p.j.splice(0,d),e.F=p,x}function hc(p){if(!p.g&&!p.u){p.ba=1;var e=p.Ma;ys||wd(),xs||(ys(),xs=!0),Ah.add(e,p),p.A=0}}function Nh(p){return p.g||p.u||3<=p.A?!1:(p.ba++,p.u=Us(pe(p.Ma,p),fc(p,p.A)),p.A++,!0)}ot.Ma=function(){if(this.u=null,lc(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var p=2*this.S;this.l.info("BP detection timer enabled: "+p),this.B=Us(pe(this.jb,this),p)}};ot.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,xe(10),Ea(this),lc(this))};function Bh(p){p.B!=null&&(pt.clearTimeout(p.B),p.B=null)}function lc(p){p.g=new zs(p,p.l,"rpc",p.ba),p.o===null&&(p.g.I=p.s),p.g.O=0;var e=_e(p.wa);Gt(e,"RID","rpc"),Gt(e,"SID",p.K),Gt(e,"AID",p.V),Gt(e,"CI",p.G?"0":"1"),!p.G&&p.qa&&Gt(e,"TO",p.qa),Gt(e,"TYPE","xmlhttp"),Hs(p,e),p.o&&p.s&&Oh(e,p.o,p.s),p.L&&p.g.setTimeout(p.L);var d=p.g;p=p.pa,d.L=1,d.v=ya(_e(e)),d.s=null,d.S=!0,bd(d,p)}ot.ib=function(){this.v!=null&&(this.v=null,Ea(this),Nh(this),xe(19))};function Dr(p){p.v!=null&&(pt.clearTimeout(p.v),p.v=null)}function uc(p,e){var d=null;if(p.g==e){Dr(p),Bh(p),p.g=null;var x=2}else if(Oo(p.i,e))d=e.F,jd(p.i,e),x=1;else return;if(p.H!=0){if(e.i)if(x==1){d=e.s?e.s.length:0,e=Date.now()-e.G;var R=p.C;x=va(),he(x,new Bd(x,d)),Sa(p)}else hc(p);else if(R=e.o,R==3||R==0&&0<e.ca||!(x==1&&gy(p,e)||x==2&&Nh(p)))switch(d&&0<d.length&&(e=p.i,e.i=e.i.concat(d)),R){case 1:bi(p,5);break;case 4:bi(p,10);break;case 3:bi(p,6);break;default:bi(p,2)}}}function fc(p,e){let d=p.ab+Math.floor(Math.random()*p.hb);return p.isActive()||(d*=2),d*e}function bi(p,e){if(p.l.info("Error code "+e),e==2){var d=null;p.h&&(d=null);var x=pe(p.pb,p);d||(d=new Yi("//www.google.com/images/cleardot.gif"),pt.location&&pt.location.protocol=="http"||Lr(d,"https"),ya(d)),uy(d.toString(),x)}else xe(2);p.H=0,p.h&&p.h.za(e),dc(p),ac(p)}ot.pb=function(p){p?(this.l.info("Successfully pinged google.com"),xe(2)):(this.l.info("Failed to ping google.com"),xe(1))};function dc(p){if(p.H=0,p.ma=[],p.h){const e=qd(p.i);(e.length!=0||p.j.length!=0)&&(su(p.ma,e),su(p.ma,p.j),p.i.i.length=0,gh(p.j),p.j.length=0),p.h.ya()}}function cc(p,e,d){var x=d instanceof Yi?_e(d):new Yi(d);if(x.g!="")e&&(x.g=e+"."+x.g),Or(x,x.m);else{var R=pt.location;x=R.protocol,e=e?e+"."+R.hostname:R.hostname,R=+R.port;var I=new Yi(null);x&&Lr(I,x),e&&(I.g=e),R&&Or(I,R),d&&(I.l=d),x=I}return d=p.F,e=p.Da,d&&e&&Gt(x,d,e),Gt(x,"VER",p.ra),Hs(p,x),x}function vc(p,e,d){if(e&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=d&&p.Ha&&!p.va?new Wt(new Ws({ob:!0})):new Wt(p.va),e.Oa(p.J),e}ot.isActive=function(){return!!this.h&&this.h.isActive(this)};function pc(){}ot=pc.prototype;ot.Ba=function(){};ot.Aa=function(){};ot.za=function(){};ot.ya=function(){};ot.isActive=function(){return!0};ot.Va=function(){};function Nr(){if(Pn&&!(10<=Number(w0)))throw Error("Environmental error: no available transport.")}Nr.prototype.g=function(p,e){return new Ae(p,e)};function Ae(p,e){ee.call(this),this.g=new rc(e),this.l=p,this.h=e&&e.messageUrlParams||null,p=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.s=p,p=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(p?p["X-WebChannel-Content-Type"]=e.messageContentType:p={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(p?p["X-WebChannel-Client-Profile"]=e.Ca:p={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=p,(p=e&&e.cc)&&!gs(p)&&(this.g.o=p),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!gs(e)&&(this.g.F=e,p=this.h,p!==null&&e in p&&(p=this.h,e in p&&delete p[e])),this.j=new Un(this)}ie(Ae,ee);Ae.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var p=this.g,e=this.l,d=this.h||void 0;xe(0),p.Y=e,p.na=d||{},p.G=p.aa,p.I=cc(p,null,p.Y),Sa(p)};Ae.prototype.close=function(){Dh(this.g)};Ae.prototype.u=function(p){var e=this.g;if(typeof p=="string"){var d={};d.__data__=p,p=d}else this.v&&(d={},d.__data__=Ch(p),p=d);e.j.push(new ry(e.fb++,p)),e.H==3&&Sa(e)};Ae.prototype.N=function(){this.g.h=null,delete this.j,Dh(this.g),delete this.g,Ae.$.N.call(this)};function gc(p){Ih.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var e=p.__sm__;if(e){t:{for(const d in e){p=d;break t}p=void 0}(this.i=p)&&(p=this.i,e=e!==null&&p in e?e[p]:void 0),this.data=e}else this.data=p}ie(gc,Ih);function mc(){wh.call(this),this.status=1}ie(mc,wh);function Un(p){this.g=p}ie(Un,pc);Un.prototype.Ba=function(){he(this.g,"a")};Un.prototype.Aa=function(p){he(this.g,new gc(p))};Un.prototype.za=function(p){he(this.g,new mc)};Un.prototype.ya=function(){he(this.g,"b")};function my(){this.blockSize=-1}function De(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ie(De,my);De.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function eo(p,e,d){d||(d=0);var x=Array(16);if(typeof e=="string")for(var R=0;16>R;++R)x[R]=e.charCodeAt(d++)|e.charCodeAt(d++)<<8|e.charCodeAt(d++)<<16|e.charCodeAt(d++)<<24;else for(R=0;16>R;++R)x[R]=e[d++]|e[d++]<<8|e[d++]<<16|e[d++]<<24;e=p.g[0],d=p.g[1],R=p.g[2];var I=p.g[3],f=e+(I^d&(R^I))+x[0]+3614090360&4294967295;e=d+(f<<7&4294967295|f>>>25),f=I+(R^e&(d^R))+x[1]+3905402710&4294967295,I=e+(f<<12&4294967295|f>>>20),f=R+(d^I&(e^d))+x[2]+606105819&4294967295,R=I+(f<<17&4294967295|f>>>15),f=d+(e^R&(I^e))+x[3]+3250441966&4294967295,d=R+(f<<22&4294967295|f>>>10),f=e+(I^d&(R^I))+x[4]+4118548399&4294967295,e=d+(f<<7&4294967295|f>>>25),f=I+(R^e&(d^R))+x[5]+1200080426&4294967295,I=e+(f<<12&4294967295|f>>>20),f=R+(d^I&(e^d))+x[6]+2821735955&4294967295,R=I+(f<<17&4294967295|f>>>15),f=d+(e^R&(I^e))+x[7]+4249261313&4294967295,d=R+(f<<22&4294967295|f>>>10),f=e+(I^d&(R^I))+x[8]+1770035416&4294967295,e=d+(f<<7&4294967295|f>>>25),f=I+(R^e&(d^R))+x[9]+2336552879&4294967295,I=e+(f<<12&4294967295|f>>>20),f=R+(d^I&(e^d))+x[10]+4294925233&4294967295,R=I+(f<<17&4294967295|f>>>15),f=d+(e^R&(I^e))+x[11]+2304563134&4294967295,d=R+(f<<22&4294967295|f>>>10),f=e+(I^d&(R^I))+x[12]+1804603682&4294967295,e=d+(f<<7&4294967295|f>>>25),f=I+(R^e&(d^R))+x[13]+4254626195&4294967295,I=e+(f<<12&4294967295|f>>>20),f=R+(d^I&(e^d))+x[14]+2792965006&4294967295,R=I+(f<<17&4294967295|f>>>15),f=d+(e^R&(I^e))+x[15]+1236535329&4294967295,d=R+(f<<22&4294967295|f>>>10),f=e+(R^I&(d^R))+x[1]+4129170786&4294967295,e=d+(f<<5&4294967295|f>>>27),f=I+(d^R&(e^d))+x[6]+3225465664&4294967295,I=e+(f<<9&4294967295|f>>>23),f=R+(e^d&(I^e))+x[11]+643717713&4294967295,R=I+(f<<14&4294967295|f>>>18),f=d+(I^e&(R^I))+x[0]+3921069994&4294967295,d=R+(f<<20&4294967295|f>>>12),f=e+(R^I&(d^R))+x[5]+3593408605&4294967295,e=d+(f<<5&4294967295|f>>>27),f=I+(d^R&(e^d))+x[10]+38016083&4294967295,I=e+(f<<9&4294967295|f>>>23),f=R+(e^d&(I^e))+x[15]+3634488961&4294967295,R=I+(f<<14&4294967295|f>>>18),f=d+(I^e&(R^I))+x[4]+3889429448&4294967295,d=R+(f<<20&4294967295|f>>>12),f=e+(R^I&(d^R))+x[9]+568446438&4294967295,e=d+(f<<5&4294967295|f>>>27),f=I+(d^R&(e^d))+x[14]+3275163606&4294967295,I=e+(f<<9&4294967295|f>>>23),f=R+(e^d&(I^e))+x[3]+4107603335&4294967295,R=I+(f<<14&4294967295|f>>>18),f=d+(I^e&(R^I))+x[8]+1163531501&4294967295,d=R+(f<<20&4294967295|f>>>12),f=e+(R^I&(d^R))+x[13]+2850285829&4294967295,e=d+(f<<5&4294967295|f>>>27),f=I+(d^R&(e^d))+x[2]+4243563512&4294967295,I=e+(f<<9&4294967295|f>>>23),f=R+(e^d&(I^e))+x[7]+1735328473&4294967295,R=I+(f<<14&4294967295|f>>>18),f=d+(I^e&(R^I))+x[12]+2368359562&4294967295,d=R+(f<<20&4294967295|f>>>12),f=e+(d^R^I)+x[5]+4294588738&4294967295,e=d+(f<<4&4294967295|f>>>28),f=I+(e^d^R)+x[8]+2272392833&4294967295,I=e+(f<<11&4294967295|f>>>21),f=R+(I^e^d)+x[11]+1839030562&4294967295,R=I+(f<<16&4294967295|f>>>16),f=d+(R^I^e)+x[14]+4259657740&4294967295,d=R+(f<<23&4294967295|f>>>9),f=e+(d^R^I)+x[1]+2763975236&4294967295,e=d+(f<<4&4294967295|f>>>28),f=I+(e^d^R)+x[4]+1272893353&4294967295,I=e+(f<<11&4294967295|f>>>21),f=R+(I^e^d)+x[7]+4139469664&4294967295,R=I+(f<<16&4294967295|f>>>16),f=d+(R^I^e)+x[10]+3200236656&4294967295,d=R+(f<<23&4294967295|f>>>9),f=e+(d^R^I)+x[13]+681279174&4294967295,e=d+(f<<4&4294967295|f>>>28),f=I+(e^d^R)+x[0]+3936430074&4294967295,I=e+(f<<11&4294967295|f>>>21),f=R+(I^e^d)+x[3]+3572445317&4294967295,R=I+(f<<16&4294967295|f>>>16),f=d+(R^I^e)+x[6]+76029189&4294967295,d=R+(f<<23&4294967295|f>>>9),f=e+(d^R^I)+x[9]+3654602809&4294967295,e=d+(f<<4&4294967295|f>>>28),f=I+(e^d^R)+x[12]+3873151461&4294967295,I=e+(f<<11&4294967295|f>>>21),f=R+(I^e^d)+x[15]+530742520&4294967295,R=I+(f<<16&4294967295|f>>>16),f=d+(R^I^e)+x[2]+3299628645&4294967295,d=R+(f<<23&4294967295|f>>>9),f=e+(R^(d|~I))+x[0]+4096336452&4294967295,e=d+(f<<6&4294967295|f>>>26),f=I+(d^(e|~R))+x[7]+1126891415&4294967295,I=e+(f<<10&4294967295|f>>>22),f=R+(e^(I|~d))+x[14]+2878612391&4294967295,R=I+(f<<15&4294967295|f>>>17),f=d+(I^(R|~e))+x[5]+4237533241&4294967295,d=R+(f<<21&4294967295|f>>>11),f=e+(R^(d|~I))+x[12]+1700485571&4294967295,e=d+(f<<6&4294967295|f>>>26),f=I+(d^(e|~R))+x[3]+2399980690&4294967295,I=e+(f<<10&4294967295|f>>>22),f=R+(e^(I|~d))+x[10]+4293915773&4294967295,R=I+(f<<15&4294967295|f>>>17),f=d+(I^(R|~e))+x[1]+2240044497&4294967295,d=R+(f<<21&4294967295|f>>>11),f=e+(R^(d|~I))+x[8]+1873313359&4294967295,e=d+(f<<6&4294967295|f>>>26),f=I+(d^(e|~R))+x[15]+4264355552&4294967295,I=e+(f<<10&4294967295|f>>>22),f=R+(e^(I|~d))+x[6]+2734768916&4294967295,R=I+(f<<15&4294967295|f>>>17),f=d+(I^(R|~e))+x[13]+1309151649&4294967295,d=R+(f<<21&4294967295|f>>>11),f=e+(R^(d|~I))+x[4]+4149444226&4294967295,e=d+(f<<6&4294967295|f>>>26),f=I+(d^(e|~R))+x[11]+3174756917&4294967295,I=e+(f<<10&4294967295|f>>>22),f=R+(e^(I|~d))+x[2]+718787259&4294967295,R=I+(f<<15&4294967295|f>>>17),f=d+(I^(R|~e))+x[9]+3951481745&4294967295,p.g[0]=p.g[0]+e&4294967295,p.g[1]=p.g[1]+(R+(f<<21&4294967295|f>>>11))&4294967295,p.g[2]=p.g[2]+R&4294967295,p.g[3]=p.g[3]+I&4294967295}De.prototype.j=function(p,e){e===void 0&&(e=p.length);for(var d=e-this.blockSize,x=this.m,R=this.h,I=0;I<e;){if(R==0)for(;I<=d;)eo(this,p,I),I+=this.blockSize;if(typeof p=="string"){for(;I<e;)if(x[R++]=p.charCodeAt(I++),R==this.blockSize){eo(this,x),R=0;break}}else for(;I<e;)if(x[R++]=p[I++],R==this.blockSize){eo(this,x),R=0;break}}this.h=R,this.i+=e};De.prototype.l=function(){var p=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);p[0]=128;for(var e=1;e<p.length-8;++e)p[e]=0;var d=8*this.i;for(e=p.length-8;e<p.length;++e)p[e]=d&255,d/=256;for(this.j(p),p=Array(16),e=d=0;4>e;++e)for(var x=0;32>x;x+=8)p[d++]=this.g[e]>>>x&255;return p};function Lt(p,e){this.h=e;for(var d=[],x=!0,R=p.length-1;0<=R;R--){var I=p[R]|0;x&&I==e||(d[R]=I,x=!1)}this.g=d}var yy={};function Vh(p){return-128<=p&&128>p?R0(p,function(e){return new Lt([e|0],0>e?-1:0)}):new Lt([p|0],0>p?-1:0)}function Ge(p){if(isNaN(p)||!isFinite(p))return gn;if(0>p)return se(Ge(-p));for(var e=[],d=1,x=0;p>=d;x++)e[x]=p/d|0,d*=Do;return new Lt(e,0)}function yc(p,e){if(p.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(p.charAt(0)=="-")return se(yc(p.substring(1),e));if(0<=p.indexOf("-"))throw Error('number format error: interior "-" character');for(var d=Ge(Math.pow(e,8)),x=gn,R=0;R<p.length;R+=8){var I=Math.min(8,p.length-R),f=parseInt(p.substring(R,R+I),e);8>I?(I=Ge(Math.pow(e,I)),x=x.R(I).add(Ge(f))):(x=x.R(d),x=x.add(Ge(f)))}return x}var Do=4294967296,gn=Vh(0),No=Vh(1),pu=Vh(16777216);ot=Lt.prototype;ot.ea=function(){if(Pe(this))return-se(this).ea();for(var p=0,e=1,d=0;d<this.g.length;d++){var x=this.D(d);p+=(0<=x?x:Do+x)*e,e*=Do}return p};ot.toString=function(p){if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if($e(this))return"0";if(Pe(this))return"-"+se(this).toString(p);for(var e=Ge(Math.pow(p,6)),d=this,x="";;){var R=Vr(d,e).g;d=Br(d,R.R(e));var I=((0<d.g.length?d.g[0]:d.h)>>>0).toString(p);if(d=R,$e(d))return I+x;for(;6>I.length;)I="0"+I;x=I+x}};ot.D=function(p){return 0>p?0:p<this.g.length?this.g[p]:this.h};function $e(p){if(p.h!=0)return!1;for(var e=0;e<p.g.length;e++)if(p.g[e]!=0)return!1;return!0}function Pe(p){return p.h==-1}ot.X=function(p){return p=Br(this,p),Pe(p)?-1:$e(p)?0:1};function se(p){for(var e=p.g.length,d=[],x=0;x<e;x++)d[x]=~p.g[x];return new Lt(d,~p.h).add(No)}ot.abs=function(){return Pe(this)?se(this):this};ot.add=function(p){for(var e=Math.max(this.g.length,p.g.length),d=[],x=0,R=0;R<=e;R++){var I=x+(this.D(R)&65535)+(p.D(R)&65535),f=(I>>>16)+(this.D(R)>>>16)+(p.D(R)>>>16);x=f>>>16,I&=65535,f&=65535,d[R]=f<<16|I}return new Lt(d,d[d.length-1]&-2147483648?-1:0)};function Br(p,e){return p.add(se(e))}ot.R=function(p){if($e(this)||$e(p))return gn;if(Pe(this))return Pe(p)?se(this).R(se(p)):se(se(this).R(p));if(Pe(p))return se(this.R(se(p)));if(0>this.X(pu)&&0>p.X(pu))return Ge(this.ea()*p.ea());for(var e=this.g.length+p.g.length,d=[],x=0;x<2*e;x++)d[x]=0;for(x=0;x<this.g.length;x++)for(var R=0;R<p.g.length;R++){var I=this.D(x)>>>16,f=this.D(x)&65535,S=p.D(R)>>>16,t=p.D(R)&65535;d[2*x+2*R]+=f*t,lr(d,2*x+2*R),d[2*x+2*R+1]+=I*t,lr(d,2*x+2*R+1),d[2*x+2*R+1]+=f*S,lr(d,2*x+2*R+1),d[2*x+2*R+2]+=I*S,lr(d,2*x+2*R+2)}for(x=0;x<e;x++)d[x]=d[2*x+1]<<16|d[2*x];for(x=e;x<2*e;x++)d[x]=0;return new Lt(d,0)};function lr(p,e){for(;(p[e]&65535)!=p[e];)p[e+1]+=p[e]>>>16,p[e]&=65535,e++}function kn(p,e){this.g=p,this.h=e}function Vr(p,e){if($e(e))throw Error("division by zero");if($e(p))return new kn(gn,gn);if(Pe(p))return e=Vr(se(p),e),new kn(se(e.g),se(e.h));if(Pe(e))return e=Vr(p,se(e)),new kn(se(e.g),e.h);if(30<p.g.length){if(Pe(p)||Pe(e))throw Error("slowDivide_ only works with positive integers.");for(var d=No,x=e;0>=x.X(p);)d=gu(d),x=gu(x);var R=hn(d,1),I=hn(x,1);for(x=hn(x,2),d=hn(d,2);!$e(x);){var f=I.add(x);0>=f.X(p)&&(R=R.add(d),I=f),x=hn(x,1),d=hn(d,1)}return e=Br(p,R.R(e)),new kn(R,e)}for(R=gn;0<=p.X(e);){for(d=Math.max(1,Math.floor(p.ea()/e.ea())),x=Math.ceil(Math.log(d)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),I=Ge(d),f=I.R(e);Pe(f)||0<f.X(p);)d-=x,I=Ge(d),f=I.R(e);$e(I)&&(I=No),R=R.add(I),p=Br(p,f)}return new kn(R,p)}ot.gb=function(p){return Vr(this,p).h};ot.and=function(p){for(var e=Math.max(this.g.length,p.g.length),d=[],x=0;x<e;x++)d[x]=this.D(x)&p.D(x);return new Lt(d,this.h&p.h)};ot.or=function(p){for(var e=Math.max(this.g.length,p.g.length),d=[],x=0;x<e;x++)d[x]=this.D(x)|p.D(x);return new Lt(d,this.h|p.h)};ot.xor=function(p){for(var e=Math.max(this.g.length,p.g.length),d=[],x=0;x<e;x++)d[x]=this.D(x)^p.D(x);return new Lt(d,this.h^p.h)};function gu(p){for(var e=p.g.length+1,d=[],x=0;x<e;x++)d[x]=p.D(x)<<1|p.D(x-1)>>>31;return new Lt(d,p.h)}function hn(p,e){var d=e>>5;e%=32;for(var x=p.g.length-d,R=[],I=0;I<x;I++)R[I]=0<e?p.D(I+d)>>>e|p.D(I+d+1)<<32-e:p.D(I+d);return new Lt(R,p.h)}Nr.prototype.createWebChannel=Nr.prototype.g;Ae.prototype.send=Ae.prototype.u;Ae.prototype.open=Ae.prototype.m;Ae.prototype.close=Ae.prototype.close;pa.NO_ERROR=0;pa.TIMEOUT=8;pa.HTTP_ERROR=6;Vd.COMPLETE="complete";Gd.EventType=bs;bs.OPEN="a";bs.CLOSE="b";bs.ERROR="c";bs.MESSAGE="d";ee.prototype.listen=ee.prototype.O;Wt.prototype.listenOnce=Wt.prototype.P;Wt.prototype.getLastError=Wt.prototype.Sa;Wt.prototype.getLastErrorCode=Wt.prototype.Ia;Wt.prototype.getStatus=Wt.prototype.da;Wt.prototype.getResponseJson=Wt.prototype.Wa;Wt.prototype.getResponseText=Wt.prototype.ja;Wt.prototype.send=Wt.prototype.ha;Wt.prototype.setWithCredentials=Wt.prototype.Oa;De.prototype.digest=De.prototype.l;De.prototype.reset=De.prototype.reset;De.prototype.update=De.prototype.j;Lt.prototype.add=Lt.prototype.add;Lt.prototype.multiply=Lt.prototype.R;Lt.prototype.modulo=Lt.prototype.gb;Lt.prototype.compare=Lt.prototype.X;Lt.prototype.toNumber=Lt.prototype.ea;Lt.prototype.toString=Lt.prototype.toString;Lt.prototype.getBits=Lt.prototype.D;Lt.fromNumber=Ge;Lt.fromString=yc;var xy=function(){return new Nr},Ty=function(){return va()},io=pa,Ey=Vd,Sy=nn,mu={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Cy=Ws,ur=Gd,Ay=Wt,Py=De,mn=Lt;const yu="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fe.UNAUTHENTICATED=new fe(null),fe.GOOGLE_CREDENTIALS=new fe("google-credentials-uid"),fe.FIRST_PARTY=new fe("first-party-uid"),fe.MOCK_USER=new fe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bn="10.5.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new aa("@firebase/firestore");function Jn(){return ki.logLevel}function dt(p,...e){if(ki.logLevel<=St.DEBUG){const d=e.map(Gh);ki.debug(`Firestore (${bn}): ${p}`,...d)}}function ti(p,...e){if(ki.logLevel<=St.ERROR){const d=e.map(Gh);ki.error(`Firestore (${bn}): ${p}`,...d)}}function Rn(p,...e){if(ki.logLevel<=St.WARN){const d=e.map(Gh);ki.warn(`Firestore (${bn}): ${p}`,...d)}}function Gh(p){if(typeof p=="string")return p;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(d){return JSON.stringify(d)}(p)}catch{return p}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(p="Unexpected state"){const e=`FIRESTORE (${bn}) INTERNAL ASSERTION FAILED: `+p;throw ti(e),new Error(e)}function bt(p,e){p||vt()}function Tt(p,e){return p}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends ai{constructor(e,d){super(e,d),this.code=e,this.message=d,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(){this.promise=new Promise((e,d)=>{this.resolve=e,this.reject=d})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,d){this.user=d,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ry{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,d){e.enqueueRetryable(()=>d(fe.UNAUTHENTICATED))}shutdown(){}}class My{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,d){this.changeListener=d,e.enqueueRetryable(()=>d(this.token.user))}shutdown(){this.changeListener=null}}class Iy{constructor(e){this.t=e,this.currentUser=fe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,d){let x=this.i;const R=t=>this.i!==x?(x=this.i,d(t)):Promise.resolve();let I=new je;this.o=()=>{this.i++,this.currentUser=this.u(),I.resolve(),I=new je,e.enqueueRetryable(()=>R(this.currentUser))};const f=()=>{const t=I;e.enqueueRetryable(async()=>{await t.promise,await R(this.currentUser)})},S=t=>{dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(t=>S(t)),setTimeout(()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?S(t):(dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),I.resolve(),I=new je)}},0),f()}getToken(){const e=this.i,d=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(d).then(x=>this.i!==e?(dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):x?(bt(typeof x.accessToken=="string"),new xc(x.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string"),new fe(e)}}class wy{constructor(e,d,x){this.l=e,this.h=d,this.P=x,this.type="FirstParty",this.user=fe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Fy{constructor(e,d,x){this.l=e,this.h=d,this.P=x}getToken(){return Promise.resolve(new wy(this.l,this.h,this.P))}start(e,d){e.enqueueRetryable(()=>d(fe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ly{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Oy{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,d){const x=I=>{I.error!=null&&dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${I.error.message}`);const f=I.token!==this.R;return this.R=I.token,dt("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?d(I.token):Promise.resolve()};this.o=I=>{e.enqueueRetryable(()=>x(I))};const R=I=>{dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=I,this.appCheck.addTokenListener(this.o)};this.A.onInit(I=>R(I)),setTimeout(()=>{if(!this.appCheck){const I=this.A.getImmediate({optional:!0});I?R(I):dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(d=>d?(bt(typeof d.token=="string"),this.R=d.token,new Ly(d.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(p){const e=typeof self<"u"&&(self.crypto||self.msCrypto),d=new Uint8Array(p);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(d);else for(let x=0;x<p;x++)d[x]=Math.floor(256*Math.random());return d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=Math.floor(256/e.length)*e.length;let x="";for(;x.length<20;){const R=Dy(40);for(let I=0;I<R.length;++I)x.length<20&&R[I]<d&&(x+=e.charAt(R[I]%e.length))}return x}}function wt(p,e){return p<e?-1:p>e?1:0}function Mn(p,e,d){return p.length===e.length&&p.every((x,R)=>d(x,e[R]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,d){if(this.seconds=e,this.nanoseconds=d,d<0)throw new lt(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+d);if(d>=1e9)throw new lt(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+d);if(e<-62135596800)throw new lt(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new lt(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Jt.fromMillis(Date.now())}static fromDate(e){return Jt.fromMillis(e.getTime())}static fromMillis(e){const d=Math.floor(e/1e3),x=Math.floor(1e6*(e-1e3*d));return new Jt(d,x)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?wt(this.nanoseconds,e.nanoseconds):wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new Jt(0,0))}static max(){return new mt(new Jt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,d,x){d===void 0?d=0:d>e.length&&vt(),x===void 0?x=e.length-d:x>e.length-d&&vt(),this.segments=e,this.offset=d,this.len=x}get length(){return this.len}isEqual(e){return As.comparator(this,e)===0}child(e){const d=this.segments.slice(this.offset,this.limit());return e instanceof As?e.forEach(x=>{d.push(x)}):d.push(e),this.construct(d)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let d=0;d<this.length;d++)if(this.get(d)!==e.get(d))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let d=0;d<this.length;d++)if(this.get(d)!==e.get(d))return!1;return!0}forEach(e){for(let d=this.offset,x=this.limit();d<x;d++)e(this.segments[d])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,d){const x=Math.min(e.length,d.length);for(let R=0;R<x;R++){const I=e.get(R),f=d.get(R);if(I<f)return-1;if(I>f)return 1}return e.length<d.length?-1:e.length>d.length?1:0}}class Ut extends As{construct(e,d,x){return new Ut(e,d,x)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const d=[];for(const x of e){if(x.indexOf("//")>=0)throw new lt(et.INVALID_ARGUMENT,`Invalid segment (${x}). Paths must not contain // in them.`);d.push(...x.split("/").filter(R=>R.length>0))}return new Ut(d)}static emptyPath(){return new Ut([])}}const Ny=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oe extends As{construct(e,d,x){return new oe(e,d,x)}static isValidIdentifier(e){return Ny.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new oe(["__name__"])}static fromServerFormat(e){const d=[];let x="",R=0;const I=()=>{if(x.length===0)throw new lt(et.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);d.push(x),x=""};let f=!1;for(;R<e.length;){const S=e[R];if(S==="\\"){if(R+1===e.length)throw new lt(et.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[R+1];if(t!=="\\"&&t!=="."&&t!=="`")throw new lt(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);x+=t,R+=2}else S==="`"?(f=!f,R++):S!=="."||f?(x+=S,R++):(I(),R++)}if(I(),f)throw new lt(et.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new oe(d)}static emptyPath(){return new oe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.path=e}static fromPath(e){return new ct(Ut.fromString(e))}static fromName(e){return new ct(Ut.fromString(e).popFirst(5))}static empty(){return new ct(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,d){return Ut.comparator(e.path,d.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ct(new Ut(e.slice()))}}function By(p,e){const d=p.toTimestamp().seconds,x=p.toTimestamp().nanoseconds+1,R=mt.fromTimestamp(x===1e9?new Jt(d+1,0):new Jt(d,x));return new Si(R,ct.empty(),e)}function Vy(p){return new Si(p.readTime,p.key,-1)}class Si{constructor(e,d,x){this.readTime=e,this.documentKey=d,this.largestBatchId=x}static min(){return new Si(mt.min(),ct.empty(),-1)}static max(){return new Si(mt.max(),ct.empty(),-1)}}function Gy(p,e){let d=p.readTime.compareTo(e.readTime);return d!==0?d:(d=ct.comparator(p.documentKey,e.documentKey),d!==0?d:wt(p.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class by{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ks(p){if(p.code!==et.FAILED_PRECONDITION||p.message!==Uy)throw p;dt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(d=>{this.isDone=!0,this.result=d,this.nextCallback&&this.nextCallback(d)},d=>{this.isDone=!0,this.error=d,this.catchCallback&&this.catchCallback(d)})}catch(e){return this.next(void 0,e)}next(e,d){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(d,this.error):this.wrapSuccess(e,this.result):new nt((x,R)=>{this.nextCallback=I=>{this.wrapSuccess(e,I).next(x,R)},this.catchCallback=I=>{this.wrapFailure(d,I).next(x,R)}})}toPromise(){return new Promise((e,d)=>{this.next(e,d)})}wrapUserFunction(e){try{const d=e();return d instanceof nt?d:nt.resolve(d)}catch(d){return nt.reject(d)}}wrapSuccess(e,d){return e?this.wrapUserFunction(()=>e(d)):nt.resolve(d)}wrapFailure(e,d){return e?this.wrapUserFunction(()=>e(d)):nt.reject(d)}static resolve(e){return new nt((d,x)=>{d(e)})}static reject(e){return new nt((d,x)=>{x(e)})}static waitFor(e){return new nt((d,x)=>{let R=0,I=0,f=!1;e.forEach(S=>{++R,S.next(()=>{++I,f&&I===R&&d()},t=>x(t))}),f=!0,I===R&&d()})}static or(e){let d=nt.resolve(!1);for(const x of e)d=d.next(R=>R?nt.resolve(R):x());return d}static forEach(e,d){const x=[];return e.forEach((R,I)=>{x.push(d.call(this,R,I))}),this.waitFor(x)}static mapArray(e,d){return new nt((x,R)=>{const I=e.length,f=new Array(I);let S=0;for(let t=0;t<I;t++){const h=t;d(e[h]).next(m=>{f[h]=m,++S,S===I&&x(f)},m=>R(m))}})}static doWhile(e,d){return new nt((x,R)=>{const I=()=>{e()===!0?d().next(()=>{I()},R):x()};I()})}}function Qs(p){return p.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,d){this.previousValue=e,d&&(d.sequenceNumberHandler=x=>this.se(x),this.oe=x=>d.writeSequenceNumber(x))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}Uh._e=-1;function Ca(p){return p==null}function Gr(p){return p===0&&1/p==-1/0}function zy(p){return typeof p=="number"&&Number.isInteger(p)&&!Gr(p)&&p<=Number.MAX_SAFE_INTEGER&&p>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(p){let e=0;for(const d in p)Object.prototype.hasOwnProperty.call(p,d)&&e++;return e}function zn(p,e){for(const d in p)Object.prototype.hasOwnProperty.call(p,d)&&e(d,p[d])}function Ec(p){for(const e in p)if(Object.prototype.hasOwnProperty.call(p,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qt=class Bo{constructor(e,d){this.comparator=e,this.root=d||yi.EMPTY}insert(e,d){return new Bo(this.comparator,this.root.insert(e,d,this.comparator).copy(null,null,yi.BLACK,null,null))}remove(e){return new Bo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yi.BLACK,null,null))}get(e){let d=this.root;for(;!d.isEmpty();){const x=this.comparator(e,d.key);if(x===0)return d.value;x<0?d=d.left:x>0&&(d=d.right)}return null}indexOf(e){let d=0,x=this.root;for(;!x.isEmpty();){const R=this.comparator(e,x.key);if(R===0)return d+x.left.size;R<0?x=x.left:(d+=x.left.size+1,x=x.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((d,x)=>(e(d,x),!1))}toString(){const e=[];return this.inorderTraversal((d,x)=>(e.push(`${d}:${x}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fr(this.root,e,this.comparator,!1)}getReverseIterator(){return new fr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fr(this.root,e,this.comparator,!0)}},fr=class{constructor(e,d,x,R){this.isReverse=R,this.nodeStack=[];let I=1;for(;!e.isEmpty();)if(I=d?x(e.key,d):1,d&&R&&(I*=-1),I<0)e=this.isReverse?e.left:e.right;else{if(I===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const d={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return d}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},yi=class Qe{constructor(e,d,x,R,I){this.key=e,this.value=d,this.color=x??Qe.RED,this.left=R??Qe.EMPTY,this.right=I??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,d,x,R,I){return new Qe(e??this.key,d??this.value,x??this.color,R??this.left,I??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,d,x){let R=this;const I=x(e,R.key);return R=I<0?R.copy(null,null,null,R.left.insert(e,d,x),null):I===0?R.copy(null,d,null,null,null):R.copy(null,null,null,null,R.right.insert(e,d,x)),R.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,d){let x,R=this;if(d(e,R.key)<0)R.left.isEmpty()||R.left.isRed()||R.left.left.isRed()||(R=R.moveRedLeft()),R=R.copy(null,null,null,R.left.remove(e,d),null);else{if(R.left.isRed()&&(R=R.rotateRight()),R.right.isEmpty()||R.right.isRed()||R.right.left.isRed()||(R=R.moveRedRight()),d(e,R.key)===0){if(R.right.isEmpty())return Qe.EMPTY;x=R.right.min(),R=R.copy(x.key,x.value,null,null,R.right.removeMin())}R=R.copy(null,null,null,null,R.right.remove(e,d))}return R.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),d=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,d)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const e=this.left.check();if(e!==this.right.check())throw vt();return e+(this.isRed()?0:1)}};yi.EMPTY=null,yi.RED=!0,yi.BLACK=!1;yi.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(e,d,x,R,I){return this}insert(e,d,x){return new yi(e,d)}remove(e,d){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.comparator=e,this.data=new Qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((d,x)=>(e(d),!1))}forEachInRange(e,d){const x=this.data.getIteratorFrom(e[0]);for(;x.hasNext();){const R=x.getNext();if(this.comparator(R.key,e[1])>=0)return;d(R.key)}}forEachWhile(e,d){let x;for(x=d!==void 0?this.data.getIteratorFrom(d):this.data.getIterator();x.hasNext();)if(!e(x.getNext().key))return}firstAfterOrEqual(e){const d=this.data.getIteratorFrom(e);return d.hasNext()?d.getNext().key:null}getIterator(){return new Tu(this.data.getIterator())}getIteratorFrom(e){return new Tu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let d=this;return d.size<e.size&&(d=e,e=this),e.forEach(x=>{d=d.add(x)}),d}isEqual(e){if(!(e instanceof le)||this.size!==e.size)return!1;const d=this.data.getIterator(),x=e.data.getIterator();for(;d.hasNext();){const R=d.getNext().key,I=x.getNext().key;if(this.comparator(R,I)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(d=>{e.push(d)}),e}toString(){const e=[];return this.forEach(d=>e.push(d)),"SortedSet("+e.toString()+")"}copy(e){const d=new le(this.comparator);return d.data=e,d}}class Tu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.fields=e,e.sort(oe.comparator)}static empty(){return new Fe([])}unionWith(e){let d=new le(oe.comparator);for(const x of this.fields)d=d.add(x);for(const x of e)d=d.add(x);return new Fe(d.toArray())}covers(e){for(const d of this.fields)if(d.isPrefixOf(e))return!0;return!1}isEqual(e){return Mn(this.fields,e.fields,(d,x)=>d.isEqual(x))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.binaryString=e}static fromBase64String(e){const d=function(R){try{return atob(R)}catch(I){throw typeof DOMException<"u"&&I instanceof DOMException?new Sc("Invalid base64 string: "+I):I}}(e);return new ye(d)}static fromUint8Array(e){const d=function(R){let I="";for(let f=0;f<R.length;++f)I+=String.fromCharCode(R[f]);return I}(e);return new ye(d)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(d){return btoa(d)}(this.binaryString)}toUint8Array(){return function(d){const x=new Uint8Array(d.length);for(let R=0;R<d.length;R++)x[R]=d.charCodeAt(R);return x}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ye.EMPTY_BYTE_STRING=new ye("");const Xy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(p){if(bt(!!p),typeof p=="string"){let e=0;const d=Xy.exec(p);if(bt(!!d),d[1]){let R=d[1];R=(R+"000000000").substr(0,9),e=Number(R)}const x=new Date(p);return{seconds:Math.floor(x.getTime()/1e3),nanos:e}}return{seconds:Ht(p.seconds),nanos:Ht(p.nanos)}}function Ht(p){return typeof p=="number"?p:typeof p=="string"?Number(p):0}function Ji(p){return typeof p=="string"?ye.fromBase64String(p):ye.fromUint8Array(p)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(p){var e,d;return((d=(((e=p==null?void 0:p.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||d===void 0?void 0:d.stringValue)==="server_timestamp"}function zh(p){const e=p.mapValue.fields.__previous_value__;return bh(e)?zh(e):e}function Ps(p){const e=Ci(p.mapValue.fields.__local_write_time__.timestampValue);return new Jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,d,x,R,I,f,S,t,h){this.databaseId=e,this.appId=d,this.persistenceKey=x,this.host=R,this.ssl=I,this.forceLongPolling=f,this.autoDetectLongPolling=S,this.longPollingOptions=t,this.useFetchStreams=h}}class Rs{constructor(e,d){this.projectId=e,this.database=d||"(default)"}static empty(){return new Rs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Rs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Zi(p){return"nullValue"in p?0:"booleanValue"in p?1:"integerValue"in p||"doubleValue"in p?2:"timestampValue"in p?3:"stringValue"in p?5:"bytesValue"in p?6:"referenceValue"in p?7:"geoPointValue"in p?8:"arrayValue"in p?9:"mapValue"in p?bh(p)?4:Yy(p)?9007199254740991:10:vt()}function Ke(p,e){if(p===e)return!0;const d=Zi(p);if(d!==Zi(e))return!1;switch(d){case 0:case 9007199254740991:return!0;case 1:return p.booleanValue===e.booleanValue;case 4:return Ps(p).isEqual(Ps(e));case 3:return function(R,I){if(typeof R.timestampValue=="string"&&typeof I.timestampValue=="string"&&R.timestampValue.length===I.timestampValue.length)return R.timestampValue===I.timestampValue;const f=Ci(R.timestampValue),S=Ci(I.timestampValue);return f.seconds===S.seconds&&f.nanos===S.nanos}(p,e);case 5:return p.stringValue===e.stringValue;case 6:return function(R,I){return Ji(R.bytesValue).isEqual(Ji(I.bytesValue))}(p,e);case 7:return p.referenceValue===e.referenceValue;case 8:return function(R,I){return Ht(R.geoPointValue.latitude)===Ht(I.geoPointValue.latitude)&&Ht(R.geoPointValue.longitude)===Ht(I.geoPointValue.longitude)}(p,e);case 2:return function(R,I){if("integerValue"in R&&"integerValue"in I)return Ht(R.integerValue)===Ht(I.integerValue);if("doubleValue"in R&&"doubleValue"in I){const f=Ht(R.doubleValue),S=Ht(I.doubleValue);return f===S?Gr(f)===Gr(S):isNaN(f)&&isNaN(S)}return!1}(p,e);case 9:return Mn(p.arrayValue.values||[],e.arrayValue.values||[],Ke);case 10:return function(R,I){const f=R.mapValue.fields||{},S=I.mapValue.fields||{};if(xu(f)!==xu(S))return!1;for(const t in f)if(f.hasOwnProperty(t)&&(S[t]===void 0||!Ke(f[t],S[t])))return!1;return!0}(p,e);default:return vt()}}function Ms(p,e){return(p.values||[]).find(d=>Ke(d,e))!==void 0}function In(p,e){if(p===e)return 0;const d=Zi(p),x=Zi(e);if(d!==x)return wt(d,x);switch(d){case 0:case 9007199254740991:return 0;case 1:return wt(p.booleanValue,e.booleanValue);case 2:return function(I,f){const S=Ht(I.integerValue||I.doubleValue),t=Ht(f.integerValue||f.doubleValue);return S<t?-1:S>t?1:S===t?0:isNaN(S)?isNaN(t)?0:-1:1}(p,e);case 3:return Eu(p.timestampValue,e.timestampValue);case 4:return Eu(Ps(p),Ps(e));case 5:return wt(p.stringValue,e.stringValue);case 6:return function(I,f){const S=Ji(I),t=Ji(f);return S.compareTo(t)}(p.bytesValue,e.bytesValue);case 7:return function(I,f){const S=I.split("/"),t=f.split("/");for(let h=0;h<S.length&&h<t.length;h++){const m=wt(S[h],t[h]);if(m!==0)return m}return wt(S.length,t.length)}(p.referenceValue,e.referenceValue);case 8:return function(I,f){const S=wt(Ht(I.latitude),Ht(f.latitude));return S!==0?S:wt(Ht(I.longitude),Ht(f.longitude))}(p.geoPointValue,e.geoPointValue);case 9:return function(I,f){const S=I.values||[],t=f.values||[];for(let h=0;h<S.length&&h<t.length;++h){const m=In(S[h],t[h]);if(m)return m}return wt(S.length,t.length)}(p.arrayValue,e.arrayValue);case 10:return function(I,f){if(I===dr.mapValue&&f===dr.mapValue)return 0;if(I===dr.mapValue)return 1;if(f===dr.mapValue)return-1;const S=I.fields||{},t=Object.keys(S),h=f.fields||{},m=Object.keys(h);t.sort(),m.sort();for(let o=0;o<t.length&&o<m.length;++o){const a=wt(t[o],m[o]);if(a!==0)return a;const r=In(S[t[o]],h[m[o]]);if(r!==0)return r}return wt(t.length,m.length)}(p.mapValue,e.mapValue);default:throw vt()}}function Eu(p,e){if(typeof p=="string"&&typeof e=="string"&&p.length===e.length)return wt(p,e);const d=Ci(p),x=Ci(e),R=wt(d.seconds,x.seconds);return R!==0?R:wt(d.nanos,x.nanos)}function wn(p){return Vo(p)}function Vo(p){return"nullValue"in p?"null":"booleanValue"in p?""+p.booleanValue:"integerValue"in p?""+p.integerValue:"doubleValue"in p?""+p.doubleValue:"timestampValue"in p?function(d){const x=Ci(d);return`time(${x.seconds},${x.nanos})`}(p.timestampValue):"stringValue"in p?p.stringValue:"bytesValue"in p?function(d){return Ji(d).toBase64()}(p.bytesValue):"referenceValue"in p?function(d){return ct.fromName(d).toString()}(p.referenceValue):"geoPointValue"in p?function(d){return`geo(${d.latitude},${d.longitude})`}(p.geoPointValue):"arrayValue"in p?function(d){let x="[",R=!0;for(const I of d.values||[])R?R=!1:x+=",",x+=Vo(I);return x+"]"}(p.arrayValue):"mapValue"in p?function(d){const x=Object.keys(d.fields||{}).sort();let R="{",I=!0;for(const f of x)I?I=!1:R+=",",R+=`${f}:${Vo(d.fields[f])}`;return R+"}"}(p.mapValue):vt()}function Su(p,e){return{referenceValue:`projects/${p.projectId}/databases/${p.database}/documents/${e.path.canonicalString()}`}}function Go(p){return!!p&&"integerValue"in p}function Xh(p){return!!p&&"arrayValue"in p}function Cu(p){return!!p&&"nullValue"in p}function Au(p){return!!p&&"doubleValue"in p&&isNaN(Number(p.doubleValue))}function mr(p){return!!p&&"mapValue"in p}function as(p){if(p.geoPointValue)return{geoPointValue:Object.assign({},p.geoPointValue)};if(p.timestampValue&&typeof p.timestampValue=="object")return{timestampValue:Object.assign({},p.timestampValue)};if(p.mapValue){const e={mapValue:{fields:{}}};return zn(p.mapValue.fields,(d,x)=>e.mapValue.fields[d]=as(x)),e}if(p.arrayValue){const e={arrayValue:{values:[]}};for(let d=0;d<(p.arrayValue.values||[]).length;++d)e.arrayValue.values[d]=as(p.arrayValue.values[d]);return e}return Object.assign({},p)}function Yy(p){return(((p.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.value=e}static empty(){return new Re({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let d=this.value;for(let x=0;x<e.length-1;++x)if(d=(d.mapValue.fields||{})[e.get(x)],!mr(d))return null;return d=(d.mapValue.fields||{})[e.lastSegment()],d||null}}set(e,d){this.getFieldsMap(e.popLast())[e.lastSegment()]=as(d)}setAll(e){let d=oe.emptyPath(),x={},R=[];e.forEach((f,S)=>{if(!d.isImmediateParentOf(S)){const t=this.getFieldsMap(d);this.applyChanges(t,x,R),x={},R=[],d=S.popLast()}f?x[S.lastSegment()]=as(f):R.push(S.lastSegment())});const I=this.getFieldsMap(d);this.applyChanges(I,x,R)}delete(e){const d=this.field(e.popLast());mr(d)&&d.mapValue.fields&&delete d.mapValue.fields[e.lastSegment()]}isEqual(e){return Ke(this.value,e.value)}getFieldsMap(e){let d=this.value;d.mapValue.fields||(d.mapValue={fields:{}});for(let x=0;x<e.length;++x){let R=d.mapValue.fields[e.get(x)];mr(R)&&R.mapValue.fields||(R={mapValue:{fields:{}}},d.mapValue.fields[e.get(x)]=R),d=R}return d.mapValue.fields}applyChanges(e,d,x){zn(d,(R,I)=>e[R]=I);for(const R of x)delete e[R]}clone(){return new Re(as(this.value))}}function Cc(p){const e=[];return zn(p.fields,(d,x)=>{const R=new oe([d]);if(mr(x)){const I=Cc(x.mapValue).fields;if(I.length===0)e.push(R);else for(const f of I)e.push(R.child(f))}else e.push(R)}),new Fe(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e,d,x,R,I,f,S){this.key=e,this.documentType=d,this.version=x,this.readTime=R,this.createTime=I,this.data=f,this.documentState=S}static newInvalidDocument(e){return new de(e,0,mt.min(),mt.min(),mt.min(),Re.empty(),0)}static newFoundDocument(e,d,x,R){return new de(e,1,d,mt.min(),x,R,0)}static newNoDocument(e,d){return new de(e,2,d,mt.min(),mt.min(),Re.empty(),0)}static newUnknownDocument(e,d){return new de(e,3,d,mt.min(),mt.min(),Re.empty(),2)}convertToFoundDocument(e,d){return!this.createTime.isEqual(mt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=d,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Re.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Re.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof de&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new de(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,d){this.position=e,this.inclusive=d}}function Pu(p,e,d){let x=0;for(let R=0;R<p.position.length;R++){const I=e[R],f=p.position[R];if(I.field.isKeyField()?x=ct.comparator(ct.fromName(f.referenceValue),d.key):x=In(f,d.data.field(I.field)),I.dir==="desc"&&(x*=-1),x!==0)break}return x}function Ru(p,e){if(p===null)return e===null;if(e===null||p.inclusive!==e.inclusive||p.position.length!==e.position.length)return!1;for(let d=0;d<p.position.length;d++)if(!Ke(p.position[d],e.position[d]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,d="asc"){this.field=e,this.dir=d}}function Hy(p,e){return p.dir===e.dir&&p.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{}class Kt extends Ac{constructor(e,d,x){super(),this.field=e,this.op=d,this.value=x}static create(e,d,x){return e.isKeyField()?d==="in"||d==="not-in"?this.createKeyFieldInFilter(e,d,x):new Qy(e,d,x):d==="array-contains"?new Jy(e,x):d==="in"?new Zy(e,x):d==="not-in"?new jy(e,x):d==="array-contains-any"?new qy(e,x):new Kt(e,d,x)}static createKeyFieldInFilter(e,d,x){return d==="in"?new $y(e,x):new ky(e,x)}matches(e){const d=e.data.field(this.field);return this.op==="!="?d!==null&&this.matchesComparison(In(d,this.value)):d!==null&&Zi(this.value)===Zi(d)&&this.matchesComparison(In(d,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ne extends Ac{constructor(e,d){super(),this.filters=e,this.op=d,this.ue=null}static create(e,d){return new Ne(e,d)}matches(e){return Pc(this)?this.filters.find(d=>!d.matches(e))===void 0:this.filters.find(d=>d.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,d)=>e.concat(d.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Pc(p){return p.op==="and"}function Rc(p){return Ky(p)&&Pc(p)}function Ky(p){for(const e of p.filters)if(e instanceof Ne)return!1;return!0}function Uo(p){if(p instanceof Kt)return p.field.canonicalString()+p.op.toString()+wn(p.value);if(Rc(p))return p.filters.map(e=>Uo(e)).join(",");{const e=p.filters.map(d=>Uo(d)).join(",");return`${p.op}(${e})`}}function Mc(p,e){return p instanceof Kt?function(x,R){return R instanceof Kt&&x.op===R.op&&x.field.isEqual(R.field)&&Ke(x.value,R.value)}(p,e):p instanceof Ne?function(x,R){return R instanceof Ne&&x.op===R.op&&x.filters.length===R.filters.length?x.filters.reduce((I,f,S)=>I&&Mc(f,R.filters[S]),!0):!1}(p,e):void vt()}function Ic(p){return p instanceof Kt?function(d){return`${d.field.canonicalString()} ${d.op} ${wn(d.value)}`}(p):p instanceof Ne?function(d){return d.op.toString()+" {"+d.getFilters().map(Ic).join(" ,")+"}"}(p):"Filter"}class Qy extends Kt{constructor(e,d,x){super(e,d,x),this.key=ct.fromName(x.referenceValue)}matches(e){const d=ct.comparator(e.key,this.key);return this.matchesComparison(d)}}class $y extends Kt{constructor(e,d){super(e,"in",d),this.keys=wc("in",d)}matches(e){return this.keys.some(d=>d.isEqual(e.key))}}class ky extends Kt{constructor(e,d){super(e,"not-in",d),this.keys=wc("not-in",d)}matches(e){return!this.keys.some(d=>d.isEqual(e.key))}}function wc(p,e){var d;return(((d=e.arrayValue)===null||d===void 0?void 0:d.values)||[]).map(x=>ct.fromName(x.referenceValue))}class Jy extends Kt{constructor(e,d){super(e,"array-contains",d)}matches(e){const d=e.data.field(this.field);return Xh(d)&&Ms(d.arrayValue,this.value)}}class Zy extends Kt{constructor(e,d){super(e,"in",d)}matches(e){const d=e.data.field(this.field);return d!==null&&Ms(this.value.arrayValue,d)}}class jy extends Kt{constructor(e,d){super(e,"not-in",d)}matches(e){if(Ms(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const d=e.data.field(this.field);return d!==null&&!Ms(this.value.arrayValue,d)}}class qy extends Kt{constructor(e,d){super(e,"array-contains-any",d)}matches(e){const d=e.data.field(this.field);return!(!Xh(d)||!d.arrayValue.values)&&d.arrayValue.values.some(x=>Ms(this.value.arrayValue,x))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,d=null,x=[],R=[],I=null,f=null,S=null){this.path=e,this.collectionGroup=d,this.orderBy=x,this.filters=R,this.limit=I,this.startAt=f,this.endAt=S,this.ce=null}}function Mu(p,e=null,d=[],x=[],R=null,I=null,f=null){return new _y(p,e,d,x,R,I,f)}function Wh(p){const e=Tt(p);if(e.ce===null){let d=e.path.canonicalString();e.collectionGroup!==null&&(d+="|cg:"+e.collectionGroup),d+="|f:",d+=e.filters.map(x=>Uo(x)).join(","),d+="|ob:",d+=e.orderBy.map(x=>function(I){return I.field.canonicalString()+I.dir}(x)).join(","),Ca(e.limit)||(d+="|l:",d+=e.limit),e.startAt&&(d+="|lb:",d+=e.startAt.inclusive?"b:":"a:",d+=e.startAt.position.map(x=>wn(x)).join(",")),e.endAt&&(d+="|ub:",d+=e.endAt.inclusive?"a:":"b:",d+=e.endAt.position.map(x=>wn(x)).join(",")),e.ce=d}return e.ce}function Yh(p,e){if(p.limit!==e.limit||p.orderBy.length!==e.orderBy.length)return!1;for(let d=0;d<p.orderBy.length;d++)if(!Hy(p.orderBy[d],e.orderBy[d]))return!1;if(p.filters.length!==e.filters.length)return!1;for(let d=0;d<p.filters.length;d++)if(!Mc(p.filters[d],e.filters[d]))return!1;return p.collectionGroup===e.collectionGroup&&!!p.path.isEqual(e.path)&&!!Ru(p.startAt,e.startAt)&&Ru(p.endAt,e.endAt)}function bo(p){return ct.isDocumentKey(p.path)&&p.collectionGroup===null&&p.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,d=null,x=[],R=[],I=null,f="F",S=null,t=null){this.path=e,this.collectionGroup=d,this.explicitOrderBy=x,this.filters=R,this.limit=I,this.limitType=f,this.startAt=S,this.endAt=t,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function tx(p,e,d,x,R,I,f,S){return new Xn(p,e,d,x,R,I,f,S)}function Hh(p){return new Xn(p)}function Iu(p){return p.filters.length===0&&p.limit===null&&p.startAt==null&&p.endAt==null&&(p.explicitOrderBy.length===0||p.explicitOrderBy.length===1&&p.explicitOrderBy[0].field.isKeyField())}function Fc(p){return p.collectionGroup!==null}function os(p){const e=Tt(p);if(e.le===null){e.le=[];const d=new Set;for(const I of e.explicitOrderBy)e.le.push(I),d.add(I.field.canonicalString());const x=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let S=new le(oe.comparator);return f.filters.forEach(t=>{t.getFlattenedFilters().forEach(h=>{h.isInequality()&&(S=S.add(h.field))})}),S})(e).forEach(I=>{d.has(I.canonicalString())||I.isKeyField()||e.le.push(new Is(I,x))}),d.has(oe.keyField().canonicalString())||e.le.push(new Is(oe.keyField(),x))}return e.le}function ze(p){const e=Tt(p);return e.he||(e.he=ex(e,os(p))),e.he}function ex(p,e){if(p.limitType==="F")return Mu(p.path,p.collectionGroup,e,p.filters,p.limit,p.startAt,p.endAt);{e=e.map(R=>{const I=R.dir==="desc"?"asc":"desc";return new Is(R.field,I)});const d=p.endAt?new Ur(p.endAt.position,p.endAt.inclusive):null,x=p.startAt?new Ur(p.startAt.position,p.startAt.inclusive):null;return Mu(p.path,p.collectionGroup,e,p.filters,p.limit,d,x)}}function zo(p,e){const d=p.filters.concat([e]);return new Xn(p.path,p.collectionGroup,p.explicitOrderBy.slice(),d,p.limit,p.limitType,p.startAt,p.endAt)}function br(p,e,d){return new Xn(p.path,p.collectionGroup,p.explicitOrderBy.slice(),p.filters.slice(),e,d,p.startAt,p.endAt)}function Aa(p,e){return Yh(ze(p),ze(e))&&p.limitType===e.limitType}function Lc(p){return`${Wh(ze(p))}|lt:${p.limitType}`}function un(p){return`Query(target=${function(d){let x=d.path.canonicalString();return d.collectionGroup!==null&&(x+=" collectionGroup="+d.collectionGroup),d.filters.length>0&&(x+=`, filters: [${d.filters.map(R=>Ic(R)).join(", ")}]`),Ca(d.limit)||(x+=", limit: "+d.limit),d.orderBy.length>0&&(x+=`, orderBy: [${d.orderBy.map(R=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(R)).join(", ")}]`),d.startAt&&(x+=", startAt: ",x+=d.startAt.inclusive?"b:":"a:",x+=d.startAt.position.map(R=>wn(R)).join(",")),d.endAt&&(x+=", endAt: ",x+=d.endAt.inclusive?"a:":"b:",x+=d.endAt.position.map(R=>wn(R)).join(",")),`Target(${x})`}(ze(p))}; limitType=${p.limitType})`}function Pa(p,e){return e.isFoundDocument()&&function(x,R){const I=R.key.path;return x.collectionGroup!==null?R.key.hasCollectionId(x.collectionGroup)&&x.path.isPrefixOf(I):ct.isDocumentKey(x.path)?x.path.isEqual(I):x.path.isImmediateParentOf(I)}(p,e)&&function(x,R){for(const I of os(x))if(!I.field.isKeyField()&&R.data.field(I.field)===null)return!1;return!0}(p,e)&&function(x,R){for(const I of x.filters)if(!I.matches(R))return!1;return!0}(p,e)&&function(x,R){return!(x.startAt&&!function(f,S,t){const h=Pu(f,S,t);return f.inclusive?h<=0:h<0}(x.startAt,os(x),R)||x.endAt&&!function(f,S,t){const h=Pu(f,S,t);return f.inclusive?h>=0:h>0}(x.endAt,os(x),R))}(p,e)}function ix(p){return p.collectionGroup||(p.path.length%2==1?p.path.lastSegment():p.path.get(p.path.length-2))}function Oc(p){return(e,d)=>{let x=!1;for(const R of os(p)){const I=nx(R,e,d);if(I!==0)return I;x=x||R.field.isKeyField()}return 0}}function nx(p,e,d){const x=p.field.isKeyField()?ct.comparator(e.key,d.key):function(I,f,S){const t=f.data.field(I),h=S.data.field(I);return t!==null&&h!==null?In(t,h):vt()}(p.field,e,d);switch(p.dir){case"asc":return x;case"desc":return-1*x;default:return vt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,d){this.mapKeyFn=e,this.equalsFn=d,this.inner={},this.innerSize=0}get(e){const d=this.mapKeyFn(e),x=this.inner[d];if(x!==void 0){for(const[R,I]of x)if(this.equalsFn(R,e))return I}}has(e){return this.get(e)!==void 0}set(e,d){const x=this.mapKeyFn(e),R=this.inner[x];if(R===void 0)return this.inner[x]=[[e,d]],void this.innerSize++;for(let I=0;I<R.length;I++)if(this.equalsFn(R[I][0],e))return void(R[I]=[e,d]);R.push([e,d]),this.innerSize++}delete(e){const d=this.mapKeyFn(e),x=this.inner[d];if(x===void 0)return!1;for(let R=0;R<x.length;R++)if(this.equalsFn(x[R][0],e))return x.length===1?delete this.inner[d]:x.splice(R,1),this.innerSize--,!0;return!1}forEach(e){zn(this.inner,(d,x)=>{for(const[R,I]of x)e(R,I)})}isEmpty(){return Ec(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=new Qt(ct.comparator);function ei(){return sx}const Dc=new Qt(ct.comparator);function is(...p){let e=Dc;for(const d of p)e=e.insert(d.key,d);return e}function Nc(p){let e=Dc;return p.forEach((d,x)=>e=e.insert(d,x.overlayedDocument)),e}function zi(){return hs()}function Bc(){return hs()}function hs(){return new Wn(p=>p.toString(),(p,e)=>p.isEqual(e))}const rx=new Qt(ct.comparator),ax=new le(ct.comparator);function At(...p){let e=ax;for(const d of p)e=e.add(d);return e}const ox=new le(wt);function hx(){return ox}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(p,e){if(p.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gr(e)?"-0":e}}function Gc(p){return{integerValue:""+p}}function lx(p,e){return zy(e)?Gc(e):Vc(p,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){this._=void 0}}function ux(p,e,d){return p instanceof zr?function(R,I){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:R.seconds,nanos:R.nanoseconds}}}};return I&&bh(I)&&(I=zh(I)),I&&(f.fields.__previous_value__=I),{mapValue:f}}(d,e):p instanceof ws?bc(p,e):p instanceof Fs?zc(p,e):function(R,I){const f=Uc(R,I),S=wu(f)+wu(R.Ie);return Go(f)&&Go(R.Ie)?Gc(S):Vc(R.serializer,S)}(p,e)}function fx(p,e,d){return p instanceof ws?bc(p,e):p instanceof Fs?zc(p,e):d}function Uc(p,e){return p instanceof Xr?function(x){return Go(x)||function(I){return!!I&&"doubleValue"in I}(x)}(e)?e:{integerValue:0}:null}class zr extends Ra{}class ws extends Ra{constructor(e){super(),this.elements=e}}function bc(p,e){const d=Xc(e);for(const x of p.elements)d.some(R=>Ke(R,x))||d.push(x);return{arrayValue:{values:d}}}class Fs extends Ra{constructor(e){super(),this.elements=e}}function zc(p,e){let d=Xc(e);for(const x of p.elements)d=d.filter(R=>!Ke(R,x));return{arrayValue:{values:d}}}class Xr extends Ra{constructor(e,d){super(),this.serializer=e,this.Ie=d}}function wu(p){return Ht(p.integerValue||p.doubleValue)}function Xc(p){return Xh(p)&&p.arrayValue.values?p.arrayValue.values.slice():[]}function dx(p,e){return p.field.isEqual(e.field)&&function(x,R){return x instanceof ws&&R instanceof ws||x instanceof Fs&&R instanceof Fs?Mn(x.elements,R.elements,Ke):x instanceof Xr&&R instanceof Xr?Ke(x.Ie,R.Ie):x instanceof zr&&R instanceof zr}(p.transform,e.transform)}class cx{constructor(e,d){this.version=e,this.transformResults=d}}class Xe{constructor(e,d){this.updateTime=e,this.exists=d}static none(){return new Xe}static exists(e){return new Xe(void 0,e)}static updateTime(e){return new Xe(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yr(p,e){return p.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(p.updateTime):p.exists===void 0||p.exists===e.isFoundDocument()}class Ma{}function Wc(p,e){if(!p.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return p.isNoDocument()?new Hc(p.key,Xe.none()):new $s(p.key,p.data,Xe.none());{const d=p.data,x=Re.empty();let R=new le(oe.comparator);for(let I of e.fields)if(!R.has(I)){let f=d.field(I);f===null&&I.length>1&&(I=I.popLast(),f=d.field(I)),f===null?x.delete(I):x.set(I,f),R=R.add(I)}return new sn(p.key,x,new Fe(R.toArray()),Xe.none())}}function vx(p,e,d){p instanceof $s?function(R,I,f){const S=R.value.clone(),t=Lu(R.fieldTransforms,I,f.transformResults);S.setAll(t),I.convertToFoundDocument(f.version,S).setHasCommittedMutations()}(p,e,d):p instanceof sn?function(R,I,f){if(!yr(R.precondition,I))return void I.convertToUnknownDocument(f.version);const S=Lu(R.fieldTransforms,I,f.transformResults),t=I.data;t.setAll(Yc(R)),t.setAll(S),I.convertToFoundDocument(f.version,t).setHasCommittedMutations()}(p,e,d):function(R,I,f){I.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,d)}function ls(p,e,d,x){return p instanceof $s?function(I,f,S,t){if(!yr(I.precondition,f))return S;const h=I.value.clone(),m=Ou(I.fieldTransforms,t,f);return h.setAll(m),f.convertToFoundDocument(f.version,h).setHasLocalMutations(),null}(p,e,d,x):p instanceof sn?function(I,f,S,t){if(!yr(I.precondition,f))return S;const h=Ou(I.fieldTransforms,t,f),m=f.data;return m.setAll(Yc(I)),m.setAll(h),f.convertToFoundDocument(f.version,m).setHasLocalMutations(),S===null?null:S.unionWith(I.fieldMask.fields).unionWith(I.fieldTransforms.map(o=>o.field))}(p,e,d,x):function(I,f,S){return yr(I.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):S}(p,e,d)}function px(p,e){let d=null;for(const x of p.fieldTransforms){const R=e.data.field(x.field),I=Uc(x.transform,R||null);I!=null&&(d===null&&(d=Re.empty()),d.set(x.field,I))}return d||null}function Fu(p,e){return p.type===e.type&&!!p.key.isEqual(e.key)&&!!p.precondition.isEqual(e.precondition)&&!!function(x,R){return x===void 0&&R===void 0||!(!x||!R)&&Mn(x,R,(I,f)=>dx(I,f))}(p.fieldTransforms,e.fieldTransforms)&&(p.type===0?p.value.isEqual(e.value):p.type!==1||p.data.isEqual(e.data)&&p.fieldMask.isEqual(e.fieldMask))}class $s extends Ma{constructor(e,d,x,R=[]){super(),this.key=e,this.value=d,this.precondition=x,this.fieldTransforms=R,this.type=0}getFieldMask(){return null}}class sn extends Ma{constructor(e,d,x,R,I=[]){super(),this.key=e,this.data=d,this.fieldMask=x,this.precondition=R,this.fieldTransforms=I,this.type=1}getFieldMask(){return this.fieldMask}}function Yc(p){const e=new Map;return p.fieldMask.fields.forEach(d=>{if(!d.isEmpty()){const x=p.data.field(d);e.set(d,x)}}),e}function Lu(p,e,d){const x=new Map;bt(p.length===d.length);for(let R=0;R<d.length;R++){const I=p[R],f=I.transform,S=e.data.field(I.field);x.set(I.field,fx(f,S,d[R]))}return x}function Ou(p,e,d){const x=new Map;for(const R of p){const I=R.transform,f=d.data.field(R.field);x.set(R.field,ux(I,f,e))}return x}class Hc extends Ma{constructor(e,d){super(),this.key=e,this.precondition=d,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gx extends Ma{constructor(e,d){super(),this.key=e,this.precondition=d,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,d,x,R){this.batchId=e,this.localWriteTime=d,this.baseMutations=x,this.mutations=R}applyToRemoteDocument(e,d){const x=d.mutationResults;for(let R=0;R<this.mutations.length;R++){const I=this.mutations[R];I.key.isEqual(e.key)&&vx(I,e,x[R])}}applyToLocalView(e,d){for(const x of this.baseMutations)x.key.isEqual(e.key)&&(d=ls(x,e,d,this.localWriteTime));for(const x of this.mutations)x.key.isEqual(e.key)&&(d=ls(x,e,d,this.localWriteTime));return d}applyToLocalDocumentSet(e,d){const x=Bc();return this.mutations.forEach(R=>{const I=e.get(R.key),f=I.overlayedDocument;let S=this.applyToLocalView(f,I.mutatedFields);S=d.has(R.key)?null:S;const t=Wc(f,S);t!==null&&x.set(R.key,t),f.isValidDocument()||f.convertToNoDocument(mt.min())}),x}keys(){return this.mutations.reduce((e,d)=>e.add(d.key),At())}isEqual(e){return this.batchId===e.batchId&&Mn(this.mutations,e.mutations,(d,x)=>Fu(d,x))&&Mn(this.baseMutations,e.baseMutations,(d,x)=>Fu(d,x))}}class Kh{constructor(e,d,x,R){this.batch=e,this.commitVersion=d,this.mutationResults=x,this.docVersions=R}static from(e,d,x){bt(e.mutations.length===x.length);let R=function(){return rx}();const I=e.mutations;for(let f=0;f<I.length;f++)R=R.insert(I[f].key,x[f].version);return new Kh(e,d,x,R)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,d){this.largestBatchId=e,this.mutation=d}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,d){this.count=e,this.unchangedNames=d}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,Rt;function Tx(p){switch(p){default:return vt();case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0}}function Kc(p){if(p===void 0)return ti("GRPC error has no .code"),et.UNKNOWN;switch(p){case Yt.OK:return et.OK;case Yt.CANCELLED:return et.CANCELLED;case Yt.UNKNOWN:return et.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return et.INTERNAL;case Yt.UNAVAILABLE:return et.UNAVAILABLE;case Yt.UNAUTHENTICATED:return et.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case Yt.NOT_FOUND:return et.NOT_FOUND;case Yt.ALREADY_EXISTS:return et.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return et.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case Yt.ABORTED:return et.ABORTED;case Yt.OUT_OF_RANGE:return et.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return et.UNIMPLEMENTED;case Yt.DATA_LOSS:return et.DATA_LOSS;default:return vt()}}(Rt=Yt||(Yt={}))[Rt.OK=0]="OK",Rt[Rt.CANCELLED=1]="CANCELLED",Rt[Rt.UNKNOWN=2]="UNKNOWN",Rt[Rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rt[Rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rt[Rt.NOT_FOUND=5]="NOT_FOUND",Rt[Rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rt[Rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rt[Rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rt[Rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rt[Rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rt[Rt.ABORTED=10]="ABORTED",Rt[Rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rt[Rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rt[Rt.INTERNAL=13]="INTERNAL",Rt[Rt.UNAVAILABLE=14]="UNAVAILABLE",Rt[Rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=new mn([4294967295,4294967295],0);function Du(p){const e=Ex().encode(p),d=new Py;return d.update(e),new Uint8Array(d.digest())}function Nu(p){const e=new DataView(p.buffer),d=e.getUint32(0,!0),x=e.getUint32(4,!0),R=e.getUint32(8,!0),I=e.getUint32(12,!0);return[new mn([d,x],0),new mn([R,I],0)]}class Qh{constructor(e,d,x){if(this.bitmap=e,this.padding=d,this.hashCount=x,d<0||d>=8)throw new ns(`Invalid padding: ${d}`);if(x<0)throw new ns(`Invalid hash count: ${x}`);if(e.length>0&&this.hashCount===0)throw new ns(`Invalid hash count: ${x}`);if(e.length===0&&d!==0)throw new ns(`Invalid padding when bitmap length is 0: ${d}`);this.Te=8*e.length-d,this.Ee=mn.fromNumber(this.Te)}de(e,d,x){let R=e.add(d.multiply(mn.fromNumber(x)));return R.compare(Sx)===1&&(R=new mn([R.getBits(0),R.getBits(1)],0)),R.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const d=Du(e),[x,R]=Nu(d);for(let I=0;I<this.hashCount;I++){const f=this.de(x,R,I);if(!this.Ae(f))return!1}return!0}static create(e,d,x){const R=e%8==0?0:8-e%8,I=new Uint8Array(Math.ceil(e/8)),f=new Qh(I,R,d);return x.forEach(S=>f.insert(S)),f}insert(e){if(this.Te===0)return;const d=Du(e),[x,R]=Nu(d);for(let I=0;I<this.hashCount;I++){const f=this.de(x,R,I);this.Re(f)}}Re(e){const d=Math.floor(e/8),x=e%8;this.bitmap[d]|=1<<x}}class ns extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,d,x,R,I){this.snapshotVersion=e,this.targetChanges=d,this.targetMismatches=x,this.documentUpdates=R,this.resolvedLimboDocuments=I}static createSynthesizedRemoteEventForCurrentChange(e,d,x){const R=new Map;return R.set(e,ks.createSynthesizedTargetChangeForCurrentChange(e,d,x)),new Ia(mt.min(),R,new Qt(wt),ei(),At())}}class ks{constructor(e,d,x,R,I){this.resumeToken=e,this.current=d,this.addedDocuments=x,this.modifiedDocuments=R,this.removedDocuments=I}static createSynthesizedTargetChangeForCurrentChange(e,d,x){return new ks(x,d,At(),At(),At())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,d,x,R){this.Ve=e,this.removedTargetIds=d,this.key=x,this.me=R}}class Qc{constructor(e,d){this.targetId=e,this.fe=d}}class $c{constructor(e,d,x=ye.EMPTY_BYTE_STRING,R=null){this.state=e,this.targetIds=d,this.resumeToken=x,this.cause=R}}class Bu{constructor(){this.ge=0,this.pe=Gu(),this.ye=ye.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=At(),d=At(),x=At();return this.pe.forEach((R,I)=>{switch(I){case 0:e=e.add(R);break;case 2:d=d.add(R);break;case 1:x=x.add(R);break;default:vt()}}),new ks(this.ye,this.we,e,d,x)}Fe(){this.Se=!1,this.pe=Gu()}Me(e,d){this.Se=!0,this.pe=this.pe.insert(e,d)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1}Be(){this.Se=!0,this.we=!0}}class Cx{constructor(e){this.Le=e,this.ke=new Map,this.qe=ei(),this.Qe=Vu(),this.Ke=new Qt(wt)}$e(e){for(const d of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(d,e.me):this.We(d,e.key,e.me);for(const d of e.removedTargetIds)this.We(d,e.key,e.me)}Ge(e){this.forEachTarget(e,d=>{const x=this.ze(d);switch(e.state){case 0:this.je(d)&&x.Ce(e.resumeToken);break;case 1:x.Ne(),x.be||x.Fe(),x.Ce(e.resumeToken);break;case 2:x.Ne(),x.be||this.removeTarget(d);break;case 3:this.je(d)&&(x.Be(),x.Ce(e.resumeToken));break;case 4:this.je(d)&&(this.He(d),x.Ce(e.resumeToken));break;default:vt()}})}forEachTarget(e,d){e.targetIds.length>0?e.targetIds.forEach(d):this.ke.forEach((x,R)=>{this.je(R)&&d(R)})}Je(e){const d=e.targetId,x=e.fe.count,R=this.Ye(d);if(R){const I=R.target;if(bo(I))if(x===0){const f=new ct(I.path);this.We(d,f,de.newNoDocument(f,mt.min()))}else bt(x===1);else{const f=this.Ze(d);if(f!==x){const S=this.Xe(e),t=S?this.et(S,e,f):1;if(t!==0){this.He(d);const h=t===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(d,h)}}}}}Xe(e){const d=e.fe.unchangedNames;if(!d||!d.bits)return null;const{bits:{bitmap:x="",padding:R=0},hashCount:I=0}=d;let f,S;try{f=Ji(x).toUint8Array()}catch(t){if(t instanceof Sc)return Rn("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{S=new Qh(f,R,I)}catch(t){return Rn(t instanceof ns?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return S.Te===0?null:S}et(e,d,x){return d.fe.count===x-this.rt(e,d.targetId)?0:2}rt(e,d){const x=this.Le.getRemoteKeysForTarget(d);let R=0;return x.forEach(I=>{const f=this.Le.nt(),S=`projects/${f.projectId}/databases/${f.database}/documents/${I.path.canonicalString()}`;e.mightContain(S)||(this.We(d,I,null),R++)}),R}it(e){const d=new Map;this.ke.forEach((I,f)=>{const S=this.Ye(f);if(S){if(I.current&&bo(S.target)){const t=new ct(S.target.path);this.qe.get(t)!==null||this.st(f,t)||this.We(f,t,de.newNoDocument(t,e))}I.De&&(d.set(f,I.ve()),I.Fe())}});let x=At();this.Qe.forEach((I,f)=>{let S=!0;f.forEachWhile(t=>{const h=this.Ye(t);return!h||h.purpose==="TargetPurposeLimboResolution"||(S=!1,!1)}),S&&(x=x.add(I))}),this.qe.forEach((I,f)=>f.setReadTime(e));const R=new Ia(e,d,this.Ke,this.qe,x);return this.qe=ei(),this.Qe=Vu(),this.Ke=new Qt(wt),R}Ue(e,d){if(!this.je(e))return;const x=this.st(e,d.key)?2:0;this.ze(e).Me(d.key,x),this.qe=this.qe.insert(d.key,d),this.Qe=this.Qe.insert(d.key,this.ot(d.key).add(e))}We(e,d,x){if(!this.je(e))return;const R=this.ze(e);this.st(e,d)?R.Me(d,1):R.xe(d),this.Qe=this.Qe.insert(d,this.ot(d).delete(e)),x&&(this.qe=this.qe.insert(d,x))}removeTarget(e){this.ke.delete(e)}Ze(e){const d=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+d.addedDocuments.size-d.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let d=this.ke.get(e);return d||(d=new Bu,this.ke.set(e,d)),d}ot(e){let d=this.Qe.get(e);return d||(d=new le(wt),this.Qe=this.Qe.insert(e,d)),d}je(e){const d=this.Ye(e)!==null;return d||dt("WatchChangeAggregator","Detected inactive target",e),d}Ye(e){const d=this.ke.get(e);return d&&d.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Bu),this.Le.getRemoteKeysForTarget(e).forEach(d=>{this.We(e,d,null)})}st(e,d){return this.Le.getRemoteKeysForTarget(e).has(d)}}function Vu(){return new Qt(ct.comparator)}function Gu(){return new Qt(ct.comparator)}const Ax={asc:"ASCENDING",desc:"DESCENDING"},Px={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Rx={and:"AND",or:"OR"};class Mx{constructor(e,d){this.databaseId=e,this.useProto3Json=d}}function Xo(p,e){return p.useProto3Json||Ca(e)?e:{value:e}}function Wr(p,e){return p.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kc(p,e){return p.useProto3Json?e.toBase64():e.toUint8Array()}function Ix(p,e){return Wr(p,e.toTimestamp())}function We(p){return bt(!!p),mt.fromTimestamp(function(d){const x=Ci(d);return new Jt(x.seconds,x.nanos)}(p))}function $h(p,e){return function(x){return new Ut(["projects",x.projectId,"databases",x.database])}(p).child("documents").child(e).canonicalString()}function Jc(p){const e=Ut.fromString(p);return bt(_c(e)),e}function Wo(p,e){return $h(p.databaseId,e.path)}function no(p,e){const d=Jc(e);if(d.get(1)!==p.databaseId.projectId)throw new lt(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+d.get(1)+" vs "+p.databaseId.projectId);if(d.get(3)!==p.databaseId.database)throw new lt(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+d.get(3)+" vs "+p.databaseId.database);return new ct(Zc(d))}function Yo(p,e){return $h(p.databaseId,e)}function wx(p){const e=Jc(p);return e.length===4?Ut.emptyPath():Zc(e)}function Ho(p){return new Ut(["projects",p.databaseId.projectId,"databases",p.databaseId.database]).canonicalString()}function Zc(p){return bt(p.length>4&&p.get(4)==="documents"),p.popFirst(5)}function Uu(p,e,d){return{name:Wo(p,e),fields:d.value.mapValue.fields}}function Fx(p,e){let d;if("targetChange"in e){e.targetChange;const x=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:vt()}(e.targetChange.targetChangeType||"NO_CHANGE"),R=e.targetChange.targetIds||[],I=function(h,m){return h.useProto3Json?(bt(m===void 0||typeof m=="string"),ye.fromBase64String(m||"")):(bt(m===void 0||m instanceof Uint8Array),ye.fromUint8Array(m||new Uint8Array))}(p,e.targetChange.resumeToken),f=e.targetChange.cause,S=f&&function(h){const m=h.code===void 0?et.UNKNOWN:Kc(h.code);return new lt(m,h.message||"")}(f);d=new $c(x,R,I,S||null)}else if("documentChange"in e){e.documentChange;const x=e.documentChange;x.document,x.document.name,x.document.updateTime;const R=no(p,x.document.name),I=We(x.document.updateTime),f=x.document.createTime?We(x.document.createTime):mt.min(),S=new Re({mapValue:{fields:x.document.fields}}),t=de.newFoundDocument(R,I,f,S),h=x.targetIds||[],m=x.removedTargetIds||[];d=new xr(h,m,t.key,t)}else if("documentDelete"in e){e.documentDelete;const x=e.documentDelete;x.document;const R=no(p,x.document),I=x.readTime?We(x.readTime):mt.min(),f=de.newNoDocument(R,I),S=x.removedTargetIds||[];d=new xr([],S,f.key,f)}else if("documentRemove"in e){e.documentRemove;const x=e.documentRemove;x.document;const R=no(p,x.document),I=x.removedTargetIds||[];d=new xr([],I,R,null)}else{if(!("filter"in e))return vt();{e.filter;const x=e.filter;x.targetId;const{count:R=0,unchangedNames:I}=x,f=new xx(R,I),S=x.targetId;d=new Qc(S,f)}}return d}function Lx(p,e){let d;if(e instanceof $s)d={update:Uu(p,e.key,e.value)};else if(e instanceof Hc)d={delete:Wo(p,e.key)};else if(e instanceof sn)d={update:Uu(p,e.key,e.data),updateMask:zx(e.fieldMask)};else{if(!(e instanceof gx))return vt();d={verify:Wo(p,e.key)}}return e.fieldTransforms.length>0&&(d.updateTransforms=e.fieldTransforms.map(x=>function(I,f){const S=f.transform;if(S instanceof zr)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(S instanceof ws)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:S.elements}};if(S instanceof Fs)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:S.elements}};if(S instanceof Xr)return{fieldPath:f.field.canonicalString(),increment:S.Ie};throw vt()}(0,x))),e.precondition.isNone||(d.currentDocument=function(R,I){return I.updateTime!==void 0?{updateTime:Ix(R,I.updateTime)}:I.exists!==void 0?{exists:I.exists}:vt()}(p,e.precondition)),d}function Ox(p,e){return p&&p.length>0?(bt(e!==void 0),p.map(d=>function(R,I){let f=R.updateTime?We(R.updateTime):We(I);return f.isEqual(mt.min())&&(f=We(I)),new cx(f,R.transformResults||[])}(d,e))):[]}function Dx(p,e){return{documents:[Yo(p,e.path)]}}function Nx(p,e){const d={structuredQuery:{}},x=e.path;e.collectionGroup!==null?(d.parent=Yo(p,x),d.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(d.parent=Yo(p,x.popLast()),d.structuredQuery.from=[{collectionId:x.lastSegment()}]);const R=function(t){if(t.length!==0)return qc(Ne.create(t,"and"))}(e.filters);R&&(d.structuredQuery.where=R);const I=function(t){if(t.length!==0)return t.map(h=>function(o){return{field:fn(o.field),direction:Gx(o.dir)}}(h))}(e.orderBy);I&&(d.structuredQuery.orderBy=I);const f=Xo(p,e.limit);return f!==null&&(d.structuredQuery.limit=f),e.startAt&&(d.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(d.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),d}function Bx(p){let e=wx(p.parent);const d=p.structuredQuery,x=d.from?d.from.length:0;let R=null;if(x>0){bt(x===1);const m=d.from[0];m.allDescendants?R=m.collectionId:e=e.child(m.collectionId)}let I=[];d.where&&(I=function(o){const a=jc(o);return a instanceof Ne&&Rc(a)?a.getFilters():[a]}(d.where));let f=[];d.orderBy&&(f=function(o){return o.map(a=>function(i){return new Is(dn(i.field),function(u){switch(u){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(i.direction))}(a))}(d.orderBy));let S=null;d.limit&&(S=function(o){let a;return a=typeof o=="object"?o.value:o,Ca(a)?null:a}(d.limit));let t=null;d.startAt&&(t=function(o){const a=!!o.before,r=o.values||[];return new Ur(r,a)}(d.startAt));let h=null;return d.endAt&&(h=function(o){const a=!o.before,r=o.values||[];return new Ur(r,a)}(d.endAt)),tx(e,R,f,I,S,"F",t,h)}function Vx(p,e){const d=function(R){switch(R){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt()}}(e.purpose);return d==null?null:{"goog-listen-tags":d}}function jc(p){return p.unaryFilter!==void 0?function(d){switch(d.unaryFilter.op){case"IS_NAN":const x=dn(d.unaryFilter.field);return Kt.create(x,"==",{doubleValue:NaN});case"IS_NULL":const R=dn(d.unaryFilter.field);return Kt.create(R,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const I=dn(d.unaryFilter.field);return Kt.create(I,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=dn(d.unaryFilter.field);return Kt.create(f,"!=",{nullValue:"NULL_VALUE"});default:return vt()}}(p):p.fieldFilter!==void 0?function(d){return Kt.create(dn(d.fieldFilter.field),function(R){switch(R){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}}(d.fieldFilter.op),d.fieldFilter.value)}(p):p.compositeFilter!==void 0?function(d){return Ne.create(d.compositeFilter.filters.map(x=>jc(x)),function(R){switch(R){case"AND":return"and";case"OR":return"or";default:return vt()}}(d.compositeFilter.op))}(p):vt()}function Gx(p){return Ax[p]}function Ux(p){return Px[p]}function bx(p){return Rx[p]}function fn(p){return{fieldPath:p.canonicalString()}}function dn(p){return oe.fromServerFormat(p.fieldPath)}function qc(p){return p instanceof Kt?function(d){if(d.op==="=="){if(Au(d.value))return{unaryFilter:{field:fn(d.field),op:"IS_NAN"}};if(Cu(d.value))return{unaryFilter:{field:fn(d.field),op:"IS_NULL"}}}else if(d.op==="!="){if(Au(d.value))return{unaryFilter:{field:fn(d.field),op:"IS_NOT_NAN"}};if(Cu(d.value))return{unaryFilter:{field:fn(d.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fn(d.field),op:Ux(d.op),value:d.value}}}(p):p instanceof Ne?function(d){const x=d.getFilters().map(R=>qc(R));return x.length===1?x[0]:{compositeFilter:{op:bx(d.op),filters:x}}}(p):vt()}function zx(p){const e=[];return p.fields.forEach(d=>e.push(d.canonicalString())),{fieldPaths:e}}function _c(p){return p.length>=4&&p.get(0)==="projects"&&p.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,d,x,R,I=mt.min(),f=mt.min(),S=ye.EMPTY_BYTE_STRING,t=null){this.target=e,this.targetId=d,this.purpose=x,this.sequenceNumber=R,this.snapshotVersion=I,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=S,this.expectedCount=t}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,d){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,d,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.ut=e}}function Wx(p){const e=Bx({parent:p.parent,structuredQuery:p.structuredQuery});return p.limitType==="LAST"?br(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(){this.on=new Hx}addToCollectionParentIndex(e,d){return this.on.add(d),nt.resolve()}getCollectionParents(e,d){return nt.resolve(this.on.getEntries(d))}addFieldIndex(e,d){return nt.resolve()}deleteFieldIndex(e,d){return nt.resolve()}deleteAllFieldIndexes(e){return nt.resolve()}createTargetIndexes(e,d){return nt.resolve()}getDocumentsMatchingTarget(e,d){return nt.resolve(null)}getIndexType(e,d){return nt.resolve(0)}getFieldIndexes(e,d){return nt.resolve([])}getNextCollectionGroupToUpdate(e){return nt.resolve(null)}getMinOffset(e,d){return nt.resolve(Si.min())}getMinOffsetFromCollectionGroup(e,d){return nt.resolve(Si.min())}updateCollectionGroup(e,d,x){return nt.resolve()}updateIndexEntries(e,d){return nt.resolve()}}class Hx{constructor(){this.index={}}add(e){const d=e.lastSegment(),x=e.popLast(),R=this.index[d]||new le(Ut.comparator),I=!R.has(x);return this.index[d]=R.add(x),I}has(e){const d=e.lastSegment(),x=e.popLast(),R=this.index[d];return R&&R.has(x)}getEntries(e){return(this.index[e]||new le(Ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Fn(0)}static Nn(){return new Fn(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(){this.changes=new Wn(e=>e.toString(),(e,d)=>e.isEqual(d)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,d){this.assertNotApplied(),this.changes.set(e,de.newInvalidDocument(e).setReadTime(d))}getEntry(e,d){this.assertNotApplied();const x=this.changes.get(d);return x!==void 0?nt.resolve(x):this.getFromCache(e,d)}getEntries(e,d){return this.getAllFromCache(e,d)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,d){this.overlayedDocument=e,this.mutatedFields=d}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,d,x,R){this.remoteDocumentCache=e,this.mutationQueue=d,this.documentOverlayCache=x,this.indexManager=R}getDocument(e,d){let x=null;return this.documentOverlayCache.getOverlay(e,d).next(R=>(x=R,this.remoteDocumentCache.getEntry(e,d))).next(R=>(x!==null&&ls(x.mutation,R,Fe.empty(),Jt.now()),R))}getDocuments(e,d){return this.remoteDocumentCache.getEntries(e,d).next(x=>this.getLocalViewOfDocuments(e,x,At()).next(()=>x))}getLocalViewOfDocuments(e,d,x=At()){const R=zi();return this.populateOverlays(e,R,d).next(()=>this.computeViews(e,d,R,x).next(I=>{let f=is();return I.forEach((S,t)=>{f=f.insert(S,t.overlayedDocument)}),f}))}getOverlayedDocuments(e,d){const x=zi();return this.populateOverlays(e,x,d).next(()=>this.computeViews(e,d,x,At()))}populateOverlays(e,d,x){const R=[];return x.forEach(I=>{d.has(I)||R.push(I)}),this.documentOverlayCache.getOverlays(e,R).next(I=>{I.forEach((f,S)=>{d.set(f,S)})})}computeViews(e,d,x,R){let I=ei();const f=hs(),S=function(){return hs()}();return d.forEach((t,h)=>{const m=x.get(h.key);R.has(h.key)&&(m===void 0||m.mutation instanceof sn)?I=I.insert(h.key,h):m!==void 0?(f.set(h.key,m.mutation.getFieldMask()),ls(m.mutation,h,m.mutation.getFieldMask(),Jt.now())):f.set(h.key,Fe.empty())}),this.recalculateAndSaveOverlays(e,I).next(t=>(t.forEach((h,m)=>f.set(h,m)),d.forEach((h,m)=>{var o;return S.set(h,new Qx(m,(o=f.get(h))!==null&&o!==void 0?o:null))}),S))}recalculateAndSaveOverlays(e,d){const x=hs();let R=new Qt((f,S)=>f-S),I=At();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,d).next(f=>{for(const S of f)S.keys().forEach(t=>{const h=d.get(t);if(h===null)return;let m=x.get(t)||Fe.empty();m=S.applyToLocalView(h,m),x.set(t,m);const o=(R.get(S.batchId)||At()).add(t);R=R.insert(S.batchId,o)})}).next(()=>{const f=[],S=R.getReverseIterator();for(;S.hasNext();){const t=S.getNext(),h=t.key,m=t.value,o=Bc();m.forEach(a=>{if(!I.has(a)){const r=Wc(d.get(a),x.get(a));r!==null&&o.set(a,r),I=I.add(a)}}),f.push(this.documentOverlayCache.saveOverlays(e,h,o))}return nt.waitFor(f)}).next(()=>x)}recalculateAndSaveOverlaysForDocumentKeys(e,d){return this.remoteDocumentCache.getEntries(e,d).next(x=>this.recalculateAndSaveOverlays(e,x))}getDocumentsMatchingQuery(e,d,x,R){return function(f){return ct.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(d)?this.getDocumentsMatchingDocumentQuery(e,d.path):Fc(d)?this.getDocumentsMatchingCollectionGroupQuery(e,d,x,R):this.getDocumentsMatchingCollectionQuery(e,d,x,R)}getNextDocuments(e,d,x,R){return this.remoteDocumentCache.getAllFromCollectionGroup(e,d,x,R).next(I=>{const f=R-I.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,d,x.largestBatchId,R-I.size):nt.resolve(zi());let S=-1,t=I;return f.next(h=>nt.forEach(h,(m,o)=>(S<o.largestBatchId&&(S=o.largestBatchId),I.get(m)?nt.resolve():this.remoteDocumentCache.getEntry(e,m).next(a=>{t=t.insert(m,a)}))).next(()=>this.populateOverlays(e,h,I)).next(()=>this.computeViews(e,t,h,At())).next(m=>({batchId:S,changes:Nc(m)})))})}getDocumentsMatchingDocumentQuery(e,d){return this.getDocument(e,new ct(d)).next(x=>{let R=is();return x.isFoundDocument()&&(R=R.insert(x.key,x)),R})}getDocumentsMatchingCollectionGroupQuery(e,d,x,R){const I=d.collectionGroup;let f=is();return this.indexManager.getCollectionParents(e,I).next(S=>nt.forEach(S,t=>{const h=function(o,a){return new Xn(a,null,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(d,t.child(I));return this.getDocumentsMatchingCollectionQuery(e,h,x,R).next(m=>{m.forEach((o,a)=>{f=f.insert(o,a)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,d,x,R){let I;return this.documentOverlayCache.getOverlaysForCollection(e,d.path,x.largestBatchId).next(f=>(I=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,d,x,I,R))).next(f=>{I.forEach((t,h)=>{const m=h.getKey();f.get(m)===null&&(f=f.insert(m,de.newInvalidDocument(m)))});let S=is();return f.forEach((t,h)=>{const m=I.get(t);m!==void 0&&ls(m.mutation,h,Fe.empty(),Jt.now()),Pa(d,h)&&(S=S.insert(t,h))}),S})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,d){return nt.resolve(this.ur.get(d))}saveBundleMetadata(e,d){return this.ur.set(d.id,function(R){return{id:R.id,version:R.version,createTime:We(R.createTime)}}(d)),nt.resolve()}getNamedQuery(e,d){return nt.resolve(this.cr.get(d))}saveNamedQuery(e,d){return this.cr.set(d.name,function(R){return{name:R.name,query:Wx(R.bundledQuery),readTime:We(R.readTime)}}(d)),nt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(){this.overlays=new Qt(ct.comparator),this.lr=new Map}getOverlay(e,d){return nt.resolve(this.overlays.get(d))}getOverlays(e,d){const x=zi();return nt.forEach(d,R=>this.getOverlay(e,R).next(I=>{I!==null&&x.set(R,I)})).next(()=>x)}saveOverlays(e,d,x){return x.forEach((R,I)=>{this.lt(e,d,I)}),nt.resolve()}removeOverlaysForBatchId(e,d,x){const R=this.lr.get(x);return R!==void 0&&(R.forEach(I=>this.overlays=this.overlays.remove(I)),this.lr.delete(x)),nt.resolve()}getOverlaysForCollection(e,d,x){const R=zi(),I=d.length+1,f=new ct(d.child("")),S=this.overlays.getIteratorFrom(f);for(;S.hasNext();){const t=S.getNext().value,h=t.getKey();if(!d.isPrefixOf(h.path))break;h.path.length===I&&t.largestBatchId>x&&R.set(t.getKey(),t)}return nt.resolve(R)}getOverlaysForCollectionGroup(e,d,x,R){let I=new Qt((h,m)=>h-m);const f=this.overlays.getIterator();for(;f.hasNext();){const h=f.getNext().value;if(h.getKey().getCollectionGroup()===d&&h.largestBatchId>x){let m=I.get(h.largestBatchId);m===null&&(m=zi(),I=I.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const S=zi(),t=I.getIterator();for(;t.hasNext()&&(t.getNext().value.forEach((h,m)=>S.set(h,m)),!(S.size()>=R)););return nt.resolve(S)}lt(e,d,x){const R=this.overlays.get(x.key);if(R!==null){const f=this.lr.get(R.largestBatchId).delete(x.key);this.lr.set(R.largestBatchId,f)}this.overlays=this.overlays.insert(x.key,new yx(d,x));let I=this.lr.get(d);I===void 0&&(I=At(),this.lr.set(d,I)),this.lr.set(d,I.add(x.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(){this.hr=new le(qt.Pr),this.Ir=new le(qt.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,d){const x=new qt(e,d);this.hr=this.hr.add(x),this.Ir=this.Ir.add(x)}Er(e,d){e.forEach(x=>this.addReference(x,d))}removeReference(e,d){this.dr(new qt(e,d))}Ar(e,d){e.forEach(x=>this.removeReference(x,d))}Rr(e){const d=new ct(new Ut([])),x=new qt(d,e),R=new qt(d,e+1),I=[];return this.Ir.forEachInRange([x,R],f=>{this.dr(f),I.push(f.key)}),I}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const d=new ct(new Ut([])),x=new qt(d,e),R=new qt(d,e+1);let I=At();return this.Ir.forEachInRange([x,R],f=>{I=I.add(f.key)}),I}containsKey(e){const d=new qt(e,0),x=this.hr.firstAfterOrEqual(d);return x!==null&&e.isEqual(x.key)}}class qt{constructor(e,d){this.key=e,this.gr=d}static Pr(e,d){return ct.comparator(e.key,d.key)||wt(e.gr,d.gr)}static Tr(e,d){return wt(e.gr,d.gr)||ct.comparator(e.key,d.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,d){this.indexManager=e,this.referenceDelegate=d,this.mutationQueue=[],this.pr=1,this.yr=new le(qt.Pr)}checkEmpty(e){return nt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,d,x,R){const I=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new mx(I,d,x,R);this.mutationQueue.push(f);for(const S of R)this.yr=this.yr.add(new qt(S.key,I)),this.indexManager.addToCollectionParentIndex(e,S.key.path.popLast());return nt.resolve(f)}lookupMutationBatch(e,d){return nt.resolve(this.wr(d))}getNextMutationBatchAfterBatchId(e,d){const x=d+1,R=this.Sr(x),I=R<0?0:R;return nt.resolve(this.mutationQueue.length>I?this.mutationQueue[I]:null)}getHighestUnacknowledgedBatchId(){return nt.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return nt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,d){const x=new qt(d,0),R=new qt(d,Number.POSITIVE_INFINITY),I=[];return this.yr.forEachInRange([x,R],f=>{const S=this.wr(f.gr);I.push(S)}),nt.resolve(I)}getAllMutationBatchesAffectingDocumentKeys(e,d){let x=new le(wt);return d.forEach(R=>{const I=new qt(R,0),f=new qt(R,Number.POSITIVE_INFINITY);this.yr.forEachInRange([I,f],S=>{x=x.add(S.gr)})}),nt.resolve(this.br(x))}getAllMutationBatchesAffectingQuery(e,d){const x=d.path,R=x.length+1;let I=x;ct.isDocumentKey(I)||(I=I.child(""));const f=new qt(new ct(I),0);let S=new le(wt);return this.yr.forEachWhile(t=>{const h=t.key.path;return!!x.isPrefixOf(h)&&(h.length===R&&(S=S.add(t.gr)),!0)},f),nt.resolve(this.br(S))}br(e){const d=[];return e.forEach(x=>{const R=this.wr(x);R!==null&&d.push(R)}),d}removeMutationBatch(e,d){bt(this.Dr(d.batchId,"removed")===0),this.mutationQueue.shift();let x=this.yr;return nt.forEach(d.mutations,R=>{const I=new qt(R.key,d.batchId);return x=x.delete(I),this.referenceDelegate.markPotentiallyOrphaned(e,R.key)}).next(()=>{this.yr=x})}Fn(e){}containsKey(e,d){const x=new qt(d,0),R=this.yr.firstAfterOrEqual(x);return nt.resolve(d.isEqual(R&&R.key))}performConsistencyCheck(e){return this.mutationQueue.length,nt.resolve()}Dr(e,d){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){const d=this.Sr(e);return d<0||d>=this.mutationQueue.length?null:this.mutationQueue[d]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){this.Cr=e,this.docs=function(){return new Qt(ct.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,d){const x=d.key,R=this.docs.get(x),I=R?R.size:0,f=this.Cr(d);return this.docs=this.docs.insert(x,{document:d.mutableCopy(),size:f}),this.size+=f-I,this.indexManager.addToCollectionParentIndex(e,x.path.popLast())}removeEntry(e){const d=this.docs.get(e);d&&(this.docs=this.docs.remove(e),this.size-=d.size)}getEntry(e,d){const x=this.docs.get(d);return nt.resolve(x?x.document.mutableCopy():de.newInvalidDocument(d))}getEntries(e,d){let x=ei();return d.forEach(R=>{const I=this.docs.get(R);x=x.insert(R,I?I.document.mutableCopy():de.newInvalidDocument(R))}),nt.resolve(x)}getDocumentsMatchingQuery(e,d,x,R){let I=ei();const f=d.path,S=new ct(f.child("")),t=this.docs.getIteratorFrom(S);for(;t.hasNext();){const{key:h,value:{document:m}}=t.getNext();if(!f.isPrefixOf(h.path))break;h.path.length>f.length+1||Gy(Vy(m),x)<=0||(R.has(m.key)||Pa(d,m))&&(I=I.insert(m.key,m.mutableCopy()))}return nt.resolve(I)}getAllFromCollectionGroup(e,d,x,R){vt()}vr(e,d){return nt.forEach(this.docs,x=>d(x))}newChangeBuffer(e){return new qx(this)}getSize(e){return nt.resolve(this.size)}}class qx extends Kx{constructor(e){super(),this._r=e}applyChanges(e){const d=[];return this.changes.forEach((x,R)=>{R.isValidDocument()?d.push(this._r.addEntry(e,R)):this._r.removeEntry(x)}),nt.waitFor(d)}getFromCache(e,d){return this._r.getEntry(e,d)}getAllFromCache(e,d){return this._r.getEntries(e,d)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){this.persistence=e,this.Fr=new Wn(d=>Wh(d),Yh),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.Mr=0,this.Or=new kh,this.targetCount=0,this.Nr=Fn.On()}forEachTarget(e,d){return this.Fr.forEach((x,R)=>d(R)),nt.resolve()}getLastRemoteSnapshotVersion(e){return nt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return nt.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),nt.resolve(this.highestTargetId)}setTargetsMetadata(e,d,x){return x&&(this.lastRemoteSnapshotVersion=x),d>this.Mr&&(this.Mr=d),nt.resolve()}kn(e){this.Fr.set(e.target,e);const d=e.targetId;d>this.highestTargetId&&(this.Nr=new Fn(d),this.highestTargetId=d),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,d){return this.kn(d),this.targetCount+=1,nt.resolve()}updateTargetData(e,d){return this.kn(d),nt.resolve()}removeTargetData(e,d){return this.Fr.delete(d.target),this.Or.Rr(d.targetId),this.targetCount-=1,nt.resolve()}removeTargets(e,d,x){let R=0;const I=[];return this.Fr.forEach((f,S)=>{S.sequenceNumber<=d&&x.get(S.targetId)===null&&(this.Fr.delete(f),I.push(this.removeMatchingKeysForTargetId(e,S.targetId)),R++)}),nt.waitFor(I).next(()=>R)}getTargetCount(e){return nt.resolve(this.targetCount)}getTargetData(e,d){const x=this.Fr.get(d)||null;return nt.resolve(x)}addMatchingKeys(e,d,x){return this.Or.Er(d,x),nt.resolve()}removeMatchingKeys(e,d,x){this.Or.Ar(d,x);const R=this.persistence.referenceDelegate,I=[];return R&&d.forEach(f=>{I.push(R.markPotentiallyOrphaned(e,f))}),nt.waitFor(I)}removeMatchingKeysForTargetId(e,d){return this.Or.Rr(d),nt.resolve()}getMatchingKeysForTargetId(e,d){const x=this.Or.mr(d);return nt.resolve(x)}containsKey(e,d){return nt.resolve(this.Or.containsKey(d))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,d){this.Br={},this.overlays={},this.Lr=new Uh(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new _x(this),this.indexManager=new Yx,this.remoteDocumentCache=function(R){return new jx(R)}(x=>this.referenceDelegate.Qr(x)),this.serializer=new Xx(d),this.Kr=new kx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let d=this.overlays[e.toKey()];return d||(d=new Jx,this.overlays[e.toKey()]=d),d}getMutationQueue(e,d){let x=this.Br[e.toKey()];return x||(x=new Zx(d,this.referenceDelegate),this.Br[e.toKey()]=x),x}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,d,x){dt("MemoryPersistence","Starting transaction:",e);const R=new eT(this.Lr.next());return this.referenceDelegate.$r(),x(R).next(I=>this.referenceDelegate.Ur(R).next(()=>I)).toPromise().then(I=>(R.raiseOnCommittedEvent(),I))}Wr(e,d){return nt.or(Object.values(this.Br).map(x=>()=>x.containsKey(e,d)))}}class eT extends by{constructor(e){super(),this.currentSequenceNumber=e}}class Jh{constructor(e){this.persistence=e,this.Gr=new kh,this.zr=null}static jr(e){return new Jh(e)}get Hr(){if(this.zr)return this.zr;throw vt()}addReference(e,d,x){return this.Gr.addReference(x,d),this.Hr.delete(x.toString()),nt.resolve()}removeReference(e,d,x){return this.Gr.removeReference(x,d),this.Hr.add(x.toString()),nt.resolve()}markPotentiallyOrphaned(e,d){return this.Hr.add(d.toString()),nt.resolve()}removeTarget(e,d){this.Gr.Rr(d.targetId).forEach(R=>this.Hr.add(R.toString()));const x=this.persistence.getTargetCache();return x.getMatchingKeysForTargetId(e,d.targetId).next(R=>{R.forEach(I=>this.Hr.add(I.toString()))}).next(()=>x.removeTargetData(e,d))}$r(){this.zr=new Set}Ur(e){const d=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nt.forEach(this.Hr,x=>{const R=ct.fromPath(x);return this.Jr(e,R).next(I=>{I||d.removeEntry(R,mt.min())})}).next(()=>(this.zr=null,d.apply(e)))}updateLimboDocument(e,d){return this.Jr(e,d).next(x=>{x?this.Hr.delete(d.toString()):this.Hr.add(d.toString())})}Qr(e){return 0}Jr(e,d){return nt.or([()=>nt.resolve(this.Gr.containsKey(d)),()=>this.persistence.getTargetCache().containsKey(e,d),()=>this.persistence.Wr(e,d)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,d,x,R){this.targetId=e,this.fromCache=d,this.ki=x,this.qi=R}static Qi(e,d){let x=At(),R=At();for(const I of d.docChanges)switch(I.type){case 0:x=x.add(I.doc.key);break;case 1:R=R.add(I.doc.key)}return new Zh(e,d.fromCache,x,R)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,d){this.Gi=e,this.indexManager=d,this.Ki=!0}getDocumentsMatchingQuery(e,d,x,R){const I={result:null};return this.zi(e,d).next(f=>{I.result=f}).next(()=>{if(!I.result)return this.ji(e,d,R,x).next(f=>{I.result=f})}).next(()=>{if(I.result)return;const f=new iT;return this.Hi(e,d,f).next(S=>{if(I.result=S,this.$i)return this.Ji(e,d,f,S.size)})}).next(()=>I.result)}Ji(e,d,x,R){return x.documentReadCount<this.Ui?(Jn()<=St.DEBUG&&dt("QueryEngine","SDK will not create cache indexes for query:",un(d),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),nt.resolve()):(Jn()<=St.DEBUG&&dt("QueryEngine","Query:",un(d),"scans",x.documentReadCount,"local documents and returns",R,"documents as results."),x.documentReadCount>this.Wi*R?(Jn()<=St.DEBUG&&dt("QueryEngine","The SDK decides to create cache indexes for query:",un(d),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ze(d))):nt.resolve())}zi(e,d){if(Iu(d))return nt.resolve(null);let x=ze(d);return this.indexManager.getIndexType(e,x).next(R=>R===0?null:(d.limit!==null&&R===1&&(d=br(d,null,"F"),x=ze(d)),this.indexManager.getDocumentsMatchingTarget(e,x).next(I=>{const f=At(...I);return this.Gi.getDocuments(e,f).next(S=>this.indexManager.getMinOffset(e,x).next(t=>{const h=this.Yi(d,S);return this.Zi(d,h,f,t.readTime)?this.zi(e,br(d,null,"F")):this.Xi(e,h,d,t)}))})))}ji(e,d,x,R){return Iu(d)||R.isEqual(mt.min())?nt.resolve(null):this.Gi.getDocuments(e,x).next(I=>{const f=this.Yi(d,I);return this.Zi(d,f,x,R)?nt.resolve(null):(Jn()<=St.DEBUG&&dt("QueryEngine","Re-using previous result from %s to execute query: %s",R.toString(),un(d)),this.Xi(e,f,d,By(R,-1)).next(S=>S))})}Yi(e,d){let x=new le(Oc(e));return d.forEach((R,I)=>{Pa(e,I)&&(x=x.add(I))}),x}Zi(e,d,x,R){if(e.limit===null)return!1;if(x.size!==d.size)return!0;const I=e.limitType==="F"?d.last():d.first();return!!I&&(I.hasPendingWrites||I.version.compareTo(R)>0)}Hi(e,d,x){return Jn()<=St.DEBUG&&dt("QueryEngine","Using full collection scan to execute query:",un(d)),this.Gi.getDocumentsMatchingQuery(e,d,Si.min(),x)}Xi(e,d,x,R){return this.Gi.getDocumentsMatchingQuery(e,x,R).next(I=>(d.forEach(f=>{I=I.insert(f.key,f)}),I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,d,x,R){this.persistence=e,this.es=d,this.serializer=R,this.ts=new Qt(wt),this.ns=new Wn(I=>Wh(I),Yh),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(x)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $x(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",d=>e.collect(d,this.ts))}}function rT(p,e,d,x){return new sT(p,e,d,x)}async function tv(p,e){const d=Tt(p);return await d.persistence.runTransaction("Handle user change","readonly",x=>{let R;return d.mutationQueue.getAllMutationBatches(x).next(I=>(R=I,d.os(e),d.mutationQueue.getAllMutationBatches(x))).next(I=>{const f=[],S=[];let t=At();for(const h of R){f.push(h.batchId);for(const m of h.mutations)t=t.add(m.key)}for(const h of I){S.push(h.batchId);for(const m of h.mutations)t=t.add(m.key)}return d.localDocuments.getDocuments(x,t).next(h=>({_s:h,removedBatchIds:f,addedBatchIds:S}))})})}function aT(p,e){const d=Tt(p);return d.persistence.runTransaction("Acknowledge batch","readwrite-primary",x=>{const R=e.batch.keys(),I=d.ss.newChangeBuffer({trackRemovals:!0});return function(S,t,h,m){const o=h.batch,a=o.keys();let r=nt.resolve();return a.forEach(i=>{r=r.next(()=>m.getEntry(t,i)).next(n=>{const u=h.docVersions.get(i);bt(u!==null),n.version.compareTo(u)<0&&(o.applyToRemoteDocument(n,h),n.isValidDocument()&&(n.setReadTime(h.commitVersion),m.addEntry(n)))})}),r.next(()=>S.mutationQueue.removeMutationBatch(t,o))}(d,x,e,I).next(()=>I.apply(x)).next(()=>d.mutationQueue.performConsistencyCheck(x)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(x,R,e.batch.batchId)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,function(S){let t=At();for(let h=0;h<S.mutationResults.length;++h)S.mutationResults[h].transformResults.length>0&&(t=t.add(S.batch.mutations[h].key));return t}(e))).next(()=>d.localDocuments.getDocuments(x,R))})}function ev(p){const e=Tt(p);return e.persistence.runTransaction("Get last remote snapshot version","readonly",d=>e.qr.getLastRemoteSnapshotVersion(d))}function oT(p,e){const d=Tt(p),x=e.snapshotVersion;let R=d.ts;return d.persistence.runTransaction("Apply remote event","readwrite-primary",I=>{const f=d.ss.newChangeBuffer({trackRemovals:!0});R=d.ts;const S=[];e.targetChanges.forEach((m,o)=>{const a=R.get(o);if(!a)return;S.push(d.qr.removeMatchingKeys(I,m.removedDocuments,o).next(()=>d.qr.addMatchingKeys(I,m.addedDocuments,o)));let r=a.withSequenceNumber(I.currentSequenceNumber);e.targetMismatches.get(o)!==null?r=r.withResumeToken(ye.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):m.resumeToken.approximateByteSize()>0&&(r=r.withResumeToken(m.resumeToken,x)),R=R.insert(o,r),function(n,u,s){return n.resumeToken.approximateByteSize()===0||u.snapshotVersion.toMicroseconds()-n.snapshotVersion.toMicroseconds()>=3e8?!0:s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size>0}(a,r,m)&&S.push(d.qr.updateTargetData(I,r))});let t=ei(),h=At();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&S.push(d.persistence.referenceDelegate.updateLimboDocument(I,m))}),S.push(hT(I,f,e.documentUpdates).next(m=>{t=m.us,h=m.cs})),!x.isEqual(mt.min())){const m=d.qr.getLastRemoteSnapshotVersion(I).next(o=>d.qr.setTargetsMetadata(I,I.currentSequenceNumber,x));S.push(m)}return nt.waitFor(S).next(()=>f.apply(I)).next(()=>d.localDocuments.getLocalViewOfDocuments(I,t,h)).next(()=>t)}).then(I=>(d.ts=R,I))}function hT(p,e,d){let x=At(),R=At();return d.forEach(I=>x=x.add(I)),e.getEntries(p,x).next(I=>{let f=ei();return d.forEach((S,t)=>{const h=I.get(S);t.isFoundDocument()!==h.isFoundDocument()&&(R=R.add(S)),t.isNoDocument()&&t.version.isEqual(mt.min())?(e.removeEntry(S,t.readTime),f=f.insert(S,t)):!h.isValidDocument()||t.version.compareTo(h.version)>0||t.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(t),f=f.insert(S,t)):dt("LocalStore","Ignoring outdated watch update for ",S,". Current version:",h.version," Watch version:",t.version)}),{us:f,cs:R}})}function lT(p,e){const d=Tt(p);return d.persistence.runTransaction("Get next mutation batch","readonly",x=>(e===void 0&&(e=-1),d.mutationQueue.getNextMutationBatchAfterBatchId(x,e)))}function uT(p,e){const d=Tt(p);return d.persistence.runTransaction("Allocate target","readwrite",x=>{let R;return d.qr.getTargetData(x,e).next(I=>I?(R=I,nt.resolve(R)):d.qr.allocateTargetId(x).next(f=>(R=new vi(e,f,"TargetPurposeListen",x.currentSequenceNumber),d.qr.addTargetData(x,R).next(()=>R))))}).then(x=>{const R=d.ts.get(x.targetId);return(R===null||x.snapshotVersion.compareTo(R.snapshotVersion)>0)&&(d.ts=d.ts.insert(x.targetId,x),d.ns.set(e,x.targetId)),x})}async function Ko(p,e,d){const x=Tt(p),R=x.ts.get(e),I=d?"readwrite":"readwrite-primary";try{d||await x.persistence.runTransaction("Release target",I,f=>x.persistence.referenceDelegate.removeTarget(f,R))}catch(f){if(!Qs(f))throw f;dt("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}x.ts=x.ts.remove(e),x.ns.delete(R.target)}function bu(p,e,d){const x=Tt(p);let R=mt.min(),I=At();return x.persistence.runTransaction("Execute query","readwrite",f=>function(t,h,m){const o=Tt(t),a=o.ns.get(m);return a!==void 0?nt.resolve(o.ts.get(a)):o.qr.getTargetData(h,m)}(x,f,ze(e)).next(S=>{if(S)return R=S.lastLimboFreeSnapshotVersion,x.qr.getMatchingKeysForTargetId(f,S.targetId).next(t=>{I=t})}).next(()=>x.es.getDocumentsMatchingQuery(f,e,d?R:mt.min(),d?I:At())).next(S=>(fT(x,ix(e),S),{documents:S,ls:I})))}function fT(p,e,d){let x=p.rs.get(e)||mt.min();d.forEach((R,I)=>{I.readTime.compareTo(x)>0&&(x=I.readTime)}),p.rs.set(e,x)}class zu{constructor(){this.activeTargetIds=hx()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dT{constructor(){this.eo=new zu,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,d,x){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,d,x){this.no[e]=d}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new zu,Promise.resolve()}handleUserChange(e,d,x){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{ro(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){dt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){dt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cr=null;function so(){return cr===null?cr=function(){return 268435456+Math.round(2147483648*Math.random())}():cr++,"0x"+cr.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue="WebChannelConnection";class gT extends class{constructor(d){this.databaseInfo=d,this.databaseId=d.databaseId;const x=d.ssl?"https":"http",R=encodeURIComponent(this.databaseId.projectId),I=encodeURIComponent(this.databaseId.database);this.mo=x+"://"+d.host,this.fo=`projects/${R}/databases/${I}`,this.po=this.databaseId.database==="(default)"?`project_id=${R}`:`project_id=${R}&database_id=${I}`}get yo(){return!1}wo(d,x,R,I,f){const S=so(),t=this.So(d,x);dt("RestConnection",`Sending RPC '${d}' ${S}:`,t,R);const h={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(h,I,f),this.Do(d,t,h,R).then(m=>(dt("RestConnection",`Received RPC '${d}' ${S}: `,m),m),m=>{throw Rn("RestConnection",`RPC '${d}' ${S} failed with error: `,m,"url: ",t,"request:",R),m})}Co(d,x,R,I,f,S){return this.wo(d,x,R,I,f)}bo(d,x,R){d["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bn}(),d["Content-Type"]="text/plain",this.databaseInfo.appId&&(d["X-Firebase-GMPID"]=this.databaseInfo.appId),x&&x.headers.forEach((I,f)=>d[f]=I),R&&R.headers.forEach((I,f)=>d[f]=I)}So(d,x){const R=vT[d];return`${this.mo}/v1/${x}:${R}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,d,x,R){const I=so();return new Promise((f,S)=>{const t=new Ay;t.setWithCredentials(!0),t.listenOnce(Ey.COMPLETE,()=>{try{switch(t.getLastErrorCode()){case io.NO_ERROR:const m=t.getResponseJson();dt(ue,`XHR for RPC '${e}' ${I} received:`,JSON.stringify(m)),f(m);break;case io.TIMEOUT:dt(ue,`RPC '${e}' ${I} timed out`),S(new lt(et.DEADLINE_EXCEEDED,"Request time out"));break;case io.HTTP_ERROR:const o=t.getStatus();if(dt(ue,`RPC '${e}' ${I} failed with status:`,o,"response text:",t.getResponseText()),o>0){let a=t.getResponseJson();Array.isArray(a)&&(a=a[0]);const r=a==null?void 0:a.error;if(r&&r.status&&r.message){const i=function(u){const s=u.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(s)>=0?s:et.UNKNOWN}(r.status);S(new lt(i,r.message))}else S(new lt(et.UNKNOWN,"Server responded with status "+t.getStatus()))}else S(new lt(et.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{dt(ue,`RPC '${e}' ${I} completed.`)}});const h=JSON.stringify(R);dt(ue,`RPC '${e}' ${I} sending request:`,R),t.send(d,"POST",h,x,15)})}vo(e,d,x){const R=so(),I=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=xy(),S=Ty(),t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(t.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(t.xmlHttpFactory=new Cy({})),this.bo(t.initMessageHeaders,d,x),t.encodeInitMessageHeaders=!0;const m=I.join("");dt(ue,`Creating RPC '${e}' stream ${R}: ${m}`,t);const o=f.createWebChannel(m,t);let a=!1,r=!1;const i=new pT({co:u=>{r?dt(ue,`Not sending because RPC '${e}' stream ${R} is closed:`,u):(a||(dt(ue,`Opening RPC '${e}' stream ${R} transport.`),o.open(),a=!0),dt(ue,`RPC '${e}' stream ${R} sending:`,u),o.send(u))},lo:()=>o.close()}),n=(u,s,l)=>{u.listen(s,v=>{try{l(v)}catch(c){setTimeout(()=>{throw c},0)}})};return n(o,ur.EventType.OPEN,()=>{r||dt(ue,`RPC '${e}' stream ${R} transport opened.`)}),n(o,ur.EventType.CLOSE,()=>{r||(r=!0,dt(ue,`RPC '${e}' stream ${R} transport closed`),i.Ro())}),n(o,ur.EventType.ERROR,u=>{r||(r=!0,Rn(ue,`RPC '${e}' stream ${R} transport errored:`,u),i.Ro(new lt(et.UNAVAILABLE,"The operation could not be completed")))}),n(o,ur.EventType.MESSAGE,u=>{var s;if(!r){const l=u.data[0];bt(!!l);const v=l,c=v.error||((s=v[0])===null||s===void 0?void 0:s.error);if(c){dt(ue,`RPC '${e}' stream ${R} received error:`,c);const g=c.status;let y=function(T){const A=Yt[T];if(A!==void 0)return Kc(A)}(g),E=c.message;y===void 0&&(y=et.INTERNAL,E="Unknown error status: "+g+" with message "+c.message),r=!0,i.Ro(new lt(y,E)),o.close()}else dt(ue,`RPC '${e}' stream ${R} received:`,l),i.Vo(l)}}),n(S,Sy.STAT_EVENT,u=>{u.stat===mu.PROXY?dt(ue,`RPC '${e}' stream ${R} detected buffering proxy`):u.stat===mu.NOPROXY&&dt(ue,`RPC '${e}' stream ${R} detected no buffering proxy`)}),setTimeout(()=>{i.Ao()},0),i}}function ro(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(p){return new Mx(p,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,d,x=1e3,R=1.5,I=6e4){this.si=e,this.timerId=d,this.Fo=x,this.Mo=R,this.xo=I,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const d=Math.floor(this.Oo+this.qo()),x=Math.max(0,Date.now()-this.Bo),R=Math.max(0,d-x);R>0&&dt("ExponentialBackoff",`Backing off for ${R} ms (base delay: ${this.Oo} ms, delay with jitter: ${d} ms, last attempt: ${x} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,R,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,d,x,R,I,f,S,t){this.si=e,this.Ko=x,this.$o=R,this.connection=I,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=S,this.listener=t,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new iv(e,d)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,d){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():d&&d.code===et.RESOURCE_EXHAUSTED?(ti(d.toString()),ti("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):d&&d.code===et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(d)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),d=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([x,R])=>{this.Uo===d&&this.s_(x,R)},x=>{e(()=>{const R=new lt(et.UNKNOWN,"Fetching auth token failed: "+x.message);return this.o_(R)})})}s_(e,d){const x=this.i_(this.Uo);this.stream=this.__(e,d),this.stream.ho(()=>{x(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(R=>{x(()=>this.o_(R))}),this.stream.onMessage(R=>{x(()=>this.onMessage(R))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(e){return dt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return d=>{this.si.enqueueAndForget(()=>this.Uo===e?d():(dt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mT extends nv{constructor(e,d,x,R,I,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",d,x,R,f),this.serializer=I}__(e,d){return this.connection.vo("Listen",e,d)}onMessage(e){this.zo.reset();const d=Fx(this.serializer,e),x=function(I){if(!("targetChange"in I))return mt.min();const f=I.targetChange;return f.targetIds&&f.targetIds.length?mt.min():f.readTime?We(f.readTime):mt.min()}(e);return this.listener.a_(d,x)}u_(e){const d={};d.database=Ho(this.serializer),d.addTarget=function(I,f){let S;const t=f.target;if(S=bo(t)?{documents:Dx(I,t)}:{query:Nx(I,t)},S.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){S.resumeToken=kc(I,f.resumeToken);const h=Xo(I,f.expectedCount);h!==null&&(S.expectedCount=h)}else if(f.snapshotVersion.compareTo(mt.min())>0){S.readTime=Wr(I,f.snapshotVersion.toTimestamp());const h=Xo(I,f.expectedCount);h!==null&&(S.expectedCount=h)}return S}(this.serializer,e);const x=Vx(this.serializer,e);x&&(d.labels=x),this.e_(d)}c_(e){const d={};d.database=Ho(this.serializer),d.removeTarget=e,this.e_(d)}}class yT extends nv{constructor(e,d,x,R,I,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",d,x,R,f),this.serializer=I,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,d){return this.connection.vo("Write",e,d)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const d=Ox(e.writeResults,e.commitTime),x=We(e.commitTime);return this.listener.I_(x,d)}return bt(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Ho(this.serializer),this.e_(e)}P_(e){const d={streamToken:this.lastStreamToken,writes:e.map(x=>Lx(this.serializer,x))};this.e_(d)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT extends class{}{constructor(e,d,x,R){super(),this.authCredentials=e,this.appCheckCredentials=d,this.connection=x,this.serializer=R,this.d_=!1}A_(){if(this.d_)throw new lt(et.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,d,x){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([R,I])=>this.connection.wo(e,d,x,R,I)).catch(R=>{throw R.name==="FirebaseError"?(R.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),R):new lt(et.UNKNOWN,R.toString())})}Co(e,d,x,R){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([I,f])=>this.connection.Co(e,d,x,I,f,R)).catch(I=>{throw I.name==="FirebaseError"?(I.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),I):new lt(et.UNKNOWN,I.toString())})}terminate(){this.d_=!0}}class TT{constructor(e,d){this.asyncQueue=e,this.onlineStateHandler=d,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const d=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(ti(d),this.f_=!1):dt("OnlineStateTracker",d)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,d,x,R,I){this.localStore=e,this.datastore=d,this.asyncQueue=x,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=I,this.F_.ro(f=>{x.enqueueAndForget(async()=>{rn(this)&&(dt("RemoteStore","Restarting streams for network reachability change."),await async function(t){const h=Tt(t);h.C_.add(4),await Js(h),h.M_.set("Unknown"),h.C_.delete(4),await Fa(h)}(this))})}),this.M_=new TT(x,R)}}async function Fa(p){if(rn(p))for(const e of p.v_)await e(!0)}async function Js(p){for(const e of p.v_)await e(!1)}function sv(p,e){const d=Tt(p);d.D_.has(e.targetId)||(d.D_.set(e.targetId,e),_h(d)?qh(d):Yn(d).Ho()&&jh(d,e))}function rv(p,e){const d=Tt(p),x=Yn(d);d.D_.delete(e),x.Ho()&&av(d,e),d.D_.size===0&&(x.Ho()?x.Zo():rn(d)&&d.M_.set("Unknown"))}function jh(p,e){if(p.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(mt.min())>0){const d=p.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(d)}Yn(p).u_(e)}function av(p,e){p.x_.Oe(e),Yn(p).c_(e)}function qh(p){p.x_=new Cx({getRemoteKeysForTarget:e=>p.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>p.D_.get(e)||null,nt:()=>p.datastore.serializer.databaseId}),Yn(p).start(),p.M_.g_()}function _h(p){return rn(p)&&!Yn(p).jo()&&p.D_.size>0}function rn(p){return Tt(p).C_.size===0}function ov(p){p.x_=void 0}async function ST(p){p.D_.forEach((e,d)=>{jh(p,e)})}async function CT(p,e){ov(p),_h(p)?(p.M_.w_(e),qh(p)):p.M_.set("Unknown")}async function AT(p,e,d){if(p.M_.set("Online"),e instanceof $c&&e.state===2&&e.cause)try{await async function(R,I){const f=I.cause;for(const S of I.targetIds)R.D_.has(S)&&(await R.remoteSyncer.rejectListen(S,f),R.D_.delete(S),R.x_.removeTarget(S))}(p,e)}catch(x){dt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),x),await Yr(p,x)}else if(e instanceof xr?p.x_.$e(e):e instanceof Qc?p.x_.Je(e):p.x_.Ge(e),!d.isEqual(mt.min()))try{const x=await ev(p.localStore);d.compareTo(x)>=0&&await function(I,f){const S=I.x_.it(f);return S.targetChanges.forEach((t,h)=>{if(t.resumeToken.approximateByteSize()>0){const m=I.D_.get(h);m&&I.D_.set(h,m.withResumeToken(t.resumeToken,f))}}),S.targetMismatches.forEach((t,h)=>{const m=I.D_.get(t);if(!m)return;I.D_.set(t,m.withResumeToken(ye.EMPTY_BYTE_STRING,m.snapshotVersion)),av(I,t);const o=new vi(m.target,t,h,m.sequenceNumber);jh(I,o)}),I.remoteSyncer.applyRemoteEvent(S)}(p,d)}catch(x){dt("RemoteStore","Failed to raise snapshot:",x),await Yr(p,x)}}async function Yr(p,e,d){if(!Qs(e))throw e;p.C_.add(1),await Js(p),p.M_.set("Offline"),d||(d=()=>ev(p.localStore)),p.asyncQueue.enqueueRetryable(async()=>{dt("RemoteStore","Retrying IndexedDB access"),await d(),p.C_.delete(1),await Fa(p)})}function hv(p,e){return e().catch(d=>Yr(p,d,e))}async function La(p){const e=Tt(p),d=Ai(e);let x=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;PT(e);)try{const R=await lT(e.localStore,x);if(R===null){e.b_.length===0&&d.Zo();break}x=R.batchId,RT(e,R)}catch(R){await Yr(e,R)}lv(e)&&uv(e)}function PT(p){return rn(p)&&p.b_.length<10}function RT(p,e){p.b_.push(e);const d=Ai(p);d.Ho()&&d.h_&&d.P_(e.mutations)}function lv(p){return rn(p)&&!Ai(p).jo()&&p.b_.length>0}function uv(p){Ai(p).start()}async function MT(p){Ai(p).E_()}async function IT(p){const e=Ai(p);for(const d of p.b_)e.P_(d.mutations)}async function wT(p,e,d){const x=p.b_.shift(),R=Kh.from(x,e,d);await hv(p,()=>p.remoteSyncer.applySuccessfulWrite(R)),await La(p)}async function FT(p,e){e&&Ai(p).h_&&await async function(x,R){if(function(f){return Tx(f)&&f!==et.ABORTED}(R.code)){const I=x.b_.shift();Ai(x).Yo(),await hv(x,()=>x.remoteSyncer.rejectFailedWrite(I.batchId,R)),await La(x)}}(p,e),lv(p)&&uv(p)}async function Wu(p,e){const d=Tt(p);d.asyncQueue.verifyOperationInProgress(),dt("RemoteStore","RemoteStore received new credentials");const x=rn(d);d.C_.add(3),await Js(d),x&&d.M_.set("Unknown"),await d.remoteSyncer.handleCredentialChange(e),d.C_.delete(3),await Fa(d)}async function LT(p,e){const d=Tt(p);e?(d.C_.delete(2),await Fa(d)):e||(d.C_.add(2),await Js(d),d.M_.set("Unknown"))}function Yn(p){return p.O_||(p.O_=function(d,x,R){const I=Tt(d);return I.A_(),new mT(x,I.connection,I.authCredentials,I.appCheckCredentials,I.serializer,R)}(p.datastore,p.asyncQueue,{ho:ST.bind(null,p),Io:CT.bind(null,p),a_:AT.bind(null,p)}),p.v_.push(async e=>{e?(p.O_.Yo(),_h(p)?qh(p):p.M_.set("Unknown")):(await p.O_.stop(),ov(p))})),p.O_}function Ai(p){return p.N_||(p.N_=function(d,x,R){const I=Tt(d);return I.A_(),new yT(x,I.connection,I.authCredentials,I.appCheckCredentials,I.serializer,R)}(p.datastore,p.asyncQueue,{ho:MT.bind(null,p),Io:FT.bind(null,p),T_:IT.bind(null,p),I_:wT.bind(null,p)}),p.v_.push(async e=>{e?(p.N_.Yo(),await La(p)):(await p.N_.stop(),p.b_.length>0&&(dt("RemoteStore",`Stopping write stream with ${p.b_.length} pending writes`),p.b_=[]))})),p.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,d,x,R,I){this.asyncQueue=e,this.timerId=d,this.targetTimeMs=x,this.op=R,this.removalCallback=I,this.deferred=new je,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,d,x,R,I){const f=Date.now()+x,S=new tl(e,d,f,R,I);return S.start(x),S}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(et.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function el(p,e){if(ti("AsyncQueue",`${e}: ${p}`),Qs(p))return new lt(et.UNAVAILABLE,`${e}: ${p}`);throw p}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.comparator=e?(d,x)=>e(d,x)||ct.comparator(d.key,x.key):(d,x)=>ct.comparator(d.key,x.key),this.keyedMap=is(),this.sortedSet=new Qt(this.comparator)}static emptySet(e){return new yn(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const d=this.keyedMap.get(e);return d?this.sortedSet.indexOf(d):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((d,x)=>(e(d),!1))}add(e){const d=this.delete(e.key);return d.copy(d.keyedMap.insert(e.key,e),d.sortedSet.insert(e,null))}delete(e){const d=this.get(e);return d?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(d)):this}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const d=this.sortedSet.getIterator(),x=e.sortedSet.getIterator();for(;d.hasNext();){const R=d.getNext().key,I=x.getNext().key;if(!R.isEqual(I))return!1}return!0}toString(){const e=[];return this.forEach(d=>{e.push(d.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,d){const x=new yn;return x.comparator=this.comparator,x.keyedMap=e,x.sortedSet=d,x}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(){this.B_=new Qt(ct.comparator)}track(e){const d=e.doc.key,x=this.B_.get(d);x?e.type!==0&&x.type===3?this.B_=this.B_.insert(d,e):e.type===3&&x.type!==1?this.B_=this.B_.insert(d,{type:x.type,doc:e.doc}):e.type===2&&x.type===2?this.B_=this.B_.insert(d,{type:2,doc:e.doc}):e.type===2&&x.type===0?this.B_=this.B_.insert(d,{type:0,doc:e.doc}):e.type===1&&x.type===0?this.B_=this.B_.remove(d):e.type===1&&x.type===2?this.B_=this.B_.insert(d,{type:1,doc:x.doc}):e.type===0&&x.type===1?this.B_=this.B_.insert(d,{type:2,doc:e.doc}):vt():this.B_=this.B_.insert(d,e)}L_(){const e=[];return this.B_.inorderTraversal((d,x)=>{e.push(x)}),e}}class Ln{constructor(e,d,x,R,I,f,S,t,h){this.query=e,this.docs=d,this.oldDocs=x,this.docChanges=R,this.mutatedKeys=I,this.fromCache=f,this.syncStateChanged=S,this.excludesMetadataChanges=t,this.hasCachedResults=h}static fromInitialDocuments(e,d,x,R,I){const f=[];return d.forEach(S=>{f.push({type:0,doc:S})}),new Ln(e,d,yn.emptySet(d),f,x,R,!0,!1,I)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Aa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const d=this.docChanges,x=e.docChanges;if(d.length!==x.length)return!1;for(let R=0;R<d.length;R++)if(d[R].type!==x[R].type||!d[R].doc.isEqual(x[R].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this.k_=void 0,this.listeners=[]}}class DT{constructor(){this.queries=new Wn(e=>Lc(e),Aa),this.onlineState="Unknown",this.q_=new Set}}async function fv(p,e){const d=Tt(p),x=e.query;let R=!1,I=d.queries.get(x);if(I||(R=!0,I=new OT),R)try{I.k_=await d.onListen(x)}catch(f){const S=el(f,`Initialization of query '${un(e.query)}' failed`);return void e.onError(S)}d.queries.set(x,I),I.listeners.push(e),e.Q_(d.onlineState),I.k_&&e.K_(I.k_)&&il(d)}async function dv(p,e){const d=Tt(p),x=e.query;let R=!1;const I=d.queries.get(x);if(I){const f=I.listeners.indexOf(e);f>=0&&(I.listeners.splice(f,1),R=I.listeners.length===0)}if(R)return d.queries.delete(x),d.onUnlisten(x)}function NT(p,e){const d=Tt(p);let x=!1;for(const R of e){const I=R.query,f=d.queries.get(I);if(f){for(const S of f.listeners)S.K_(R)&&(x=!0);f.k_=R}}x&&il(d)}function BT(p,e,d){const x=Tt(p),R=x.queries.get(e);if(R)for(const I of R.listeners)I.onError(d);x.queries.delete(e)}function il(p){p.q_.forEach(e=>{e.next()})}class cv{constructor(e,d,x){this.query=e,this.U_=d,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=x||{}}K_(e){if(!this.options.includeMetadataChanges){const x=[];for(const R of e.docChanges)R.type!==3&&x.push(R);e=new Ln(e.query,e.docs,e.oldDocs,x,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let d=!1;return this.W_?this.z_(e)&&(this.U_.next(e),d=!0):this.j_(e,this.onlineState)&&(this.H_(e),d=!0),this.G_=e,d}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let d=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),d=!0),d}j_(e,d){if(!e.fromCache)return!0;const x=d!=="Offline";return(!this.options.J_||!x)&&(!e.docs.isEmpty()||e.hasCachedResults||d==="Offline")}z_(e){if(e.docChanges.length>0)return!0;const d=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!d)&&this.options.includeMetadataChanges===!0}H_(e){e=Ln.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e){this.key=e}}class pv{constructor(e){this.key=e}}class VT{constructor(e,d){this.query=e,this.ia=d,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=At(),this.mutatedKeys=At(),this._a=Oc(e),this.aa=new yn(this._a)}get ua(){return this.ia}ca(e,d){const x=d?d.la:new Yu,R=d?d.aa:this.aa;let I=d?d.mutatedKeys:this.mutatedKeys,f=R,S=!1;const t=this.query.limitType==="F"&&R.size===this.query.limit?R.last():null,h=this.query.limitType==="L"&&R.size===this.query.limit?R.first():null;if(e.inorderTraversal((m,o)=>{const a=R.get(m),r=Pa(this.query,o)?o:null,i=!!a&&this.mutatedKeys.has(a.key),n=!!r&&(r.hasLocalMutations||this.mutatedKeys.has(r.key)&&r.hasCommittedMutations);let u=!1;a&&r?a.data.isEqual(r.data)?i!==n&&(x.track({type:3,doc:r}),u=!0):this.ha(a,r)||(x.track({type:2,doc:r}),u=!0,(t&&this._a(r,t)>0||h&&this._a(r,h)<0)&&(S=!0)):!a&&r?(x.track({type:0,doc:r}),u=!0):a&&!r&&(x.track({type:1,doc:a}),u=!0,(t||h)&&(S=!0)),u&&(r?(f=f.add(r),I=n?I.add(m):I.delete(m)):(f=f.delete(m),I=I.delete(m)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const m=this.query.limitType==="F"?f.last():f.first();f=f.delete(m.key),I=I.delete(m.key),x.track({type:1,doc:m})}return{aa:f,la:x,Zi:S,mutatedKeys:I}}ha(e,d){return e.hasLocalMutations&&d.hasCommittedMutations&&!d.hasLocalMutations}applyChanges(e,d,x){const R=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const I=e.la.L_();I.sort((h,m)=>function(a,r){const i=n=>{switch(n){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt()}};return i(a)-i(r)}(h.type,m.type)||this._a(h.doc,m.doc)),this.Pa(x);const f=d?this.Ia():[],S=this.oa.size===0&&this.current?1:0,t=S!==this.sa;return this.sa=S,I.length!==0||t?{snapshot:new Ln(this.query,e.aa,R,I,e.mutatedKeys,S===0,t,!1,!!x&&x.resumeToken.approximateByteSize()>0),Ta:f}:{Ta:f}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new Yu,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(d=>this.ia=this.ia.add(d)),e.modifiedDocuments.forEach(d=>{}),e.removedDocuments.forEach(d=>this.ia=this.ia.delete(d)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=At(),this.aa.forEach(x=>{this.Ea(x.key)&&(this.oa=this.oa.add(x.key))});const d=[];return e.forEach(x=>{this.oa.has(x)||d.push(new pv(x))}),this.oa.forEach(x=>{e.has(x)||d.push(new vv(x))}),d}da(e){this.ia=e.ls,this.oa=At();const d=this.ca(e.documents);return this.applyChanges(d,!0)}Aa(){return Ln.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class GT{constructor(e,d,x){this.query=e,this.targetId=d,this.view=x}}class UT{constructor(e){this.key=e,this.Ra=!1}}class bT{constructor(e,d,x,R,I,f){this.localStore=e,this.remoteStore=d,this.eventManager=x,this.sharedClientState=R,this.currentUser=I,this.maxConcurrentLimboResolutions=f,this.Va={},this.ma=new Wn(S=>Lc(S),Aa),this.fa=new Map,this.ga=new Set,this.pa=new Qt(ct.comparator),this.ya=new Map,this.wa=new kh,this.Sa={},this.ba=new Map,this.Da=Fn.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function zT(p,e){const d=ZT(p);let x,R;const I=d.ma.get(e);if(I)x=I.targetId,d.sharedClientState.addLocalQueryTarget(x),R=I.view.Aa();else{const f=await uT(d.localStore,ze(e)),S=d.sharedClientState.addLocalQueryTarget(f.targetId);x=f.targetId,R=await XT(d,e,x,S==="current",f.resumeToken),d.isPrimaryClient&&sv(d.remoteStore,f)}return R}async function XT(p,e,d,x,R){p.va=(o,a,r)=>async function(n,u,s,l){let v=u.view.ca(s);v.Zi&&(v=await bu(n.localStore,u.query,!1).then(({documents:y})=>u.view.ca(y,v)));const c=l&&l.targetChanges.get(u.targetId),g=u.view.applyChanges(v,n.isPrimaryClient,c);return Ku(n,u.targetId,g.Ta),g.snapshot}(p,o,a,r);const I=await bu(p.localStore,e,!0),f=new VT(e,I.ls),S=f.ca(I.documents),t=ks.createSynthesizedTargetChangeForCurrentChange(d,x&&p.onlineState!=="Offline",R),h=f.applyChanges(S,p.isPrimaryClient,t);Ku(p,d,h.Ta);const m=new GT(e,d,f);return p.ma.set(e,m),p.fa.has(d)?p.fa.get(d).push(e):p.fa.set(d,[e]),h.snapshot}async function WT(p,e){const d=Tt(p),x=d.ma.get(e),R=d.fa.get(x.targetId);if(R.length>1)return d.fa.set(x.targetId,R.filter(I=>!Aa(I,e))),void d.ma.delete(e);d.isPrimaryClient?(d.sharedClientState.removeLocalQueryTarget(x.targetId),d.sharedClientState.isActiveQueryTarget(x.targetId)||await Ko(d.localStore,x.targetId,!1).then(()=>{d.sharedClientState.clearQueryState(x.targetId),rv(d.remoteStore,x.targetId),Qo(d,x.targetId)}).catch(Ks)):(Qo(d,x.targetId),await Ko(d.localStore,x.targetId,!0))}async function YT(p,e,d){const x=jT(p);try{const R=await function(f,S){const t=Tt(f),h=Jt.now(),m=S.reduce((r,i)=>r.add(i.key),At());let o,a;return t.persistence.runTransaction("Locally write mutations","readwrite",r=>{let i=ei(),n=At();return t.ss.getEntries(r,m).next(u=>{i=u,i.forEach((s,l)=>{l.isValidDocument()||(n=n.add(s))})}).next(()=>t.localDocuments.getOverlayedDocuments(r,i)).next(u=>{o=u;const s=[];for(const l of S){const v=px(l,o.get(l.key).overlayedDocument);v!=null&&s.push(new sn(l.key,v,Cc(v.value.mapValue),Xe.exists(!0)))}return t.mutationQueue.addMutationBatch(r,h,s,S)}).next(u=>{a=u;const s=u.applyToLocalDocumentSet(o,n);return t.documentOverlayCache.saveOverlays(r,u.batchId,s)})}).then(()=>({batchId:a.batchId,changes:Nc(o)}))}(x.localStore,e);x.sharedClientState.addPendingMutation(R.batchId),function(f,S,t){let h=f.Sa[f.currentUser.toKey()];h||(h=new Qt(wt)),h=h.insert(S,t),f.Sa[f.currentUser.toKey()]=h}(x,R.batchId,d),await Zs(x,R.changes),await La(x.remoteStore)}catch(R){const I=el(R,"Failed to persist write");d.reject(I)}}async function gv(p,e){const d=Tt(p);try{const x=await oT(d.localStore,e);e.targetChanges.forEach((R,I)=>{const f=d.ya.get(I);f&&(bt(R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size<=1),R.addedDocuments.size>0?f.Ra=!0:R.modifiedDocuments.size>0?bt(f.Ra):R.removedDocuments.size>0&&(bt(f.Ra),f.Ra=!1))}),await Zs(d,x,e)}catch(x){await Ks(x)}}function Hu(p,e,d){const x=Tt(p);if(x.isPrimaryClient&&d===0||!x.isPrimaryClient&&d===1){const R=[];x.ma.forEach((I,f)=>{const S=f.view.Q_(e);S.snapshot&&R.push(S.snapshot)}),function(f,S){const t=Tt(f);t.onlineState=S;let h=!1;t.queries.forEach((m,o)=>{for(const a of o.listeners)a.Q_(S)&&(h=!0)}),h&&il(t)}(x.eventManager,e),R.length&&x.Va.a_(R),x.onlineState=e,x.isPrimaryClient&&x.sharedClientState.setOnlineState(e)}}async function HT(p,e,d){const x=Tt(p);x.sharedClientState.updateQueryState(e,"rejected",d);const R=x.ya.get(e),I=R&&R.key;if(I){let f=new Qt(ct.comparator);f=f.insert(I,de.newNoDocument(I,mt.min()));const S=At().add(I),t=new Ia(mt.min(),new Map,new Qt(wt),f,S);await gv(x,t),x.pa=x.pa.remove(I),x.ya.delete(e),nl(x)}else await Ko(x.localStore,e,!1).then(()=>Qo(x,e,d)).catch(Ks)}async function KT(p,e){const d=Tt(p),x=e.batch.batchId;try{const R=await aT(d.localStore,e);yv(d,x,null),mv(d,x),d.sharedClientState.updateMutationState(x,"acknowledged"),await Zs(d,R)}catch(R){await Ks(R)}}async function QT(p,e,d){const x=Tt(p);try{const R=await function(f,S){const t=Tt(f);return t.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return t.mutationQueue.lookupMutationBatch(h,S).next(o=>(bt(o!==null),m=o.keys(),t.mutationQueue.removeMutationBatch(h,o))).next(()=>t.mutationQueue.performConsistencyCheck(h)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(h,m,S)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>t.localDocuments.getDocuments(h,m))})}(x.localStore,e);yv(x,e,d),mv(x,e),x.sharedClientState.updateMutationState(e,"rejected",d),await Zs(x,R)}catch(R){await Ks(R)}}function mv(p,e){(p.ba.get(e)||[]).forEach(d=>{d.resolve()}),p.ba.delete(e)}function yv(p,e,d){const x=Tt(p);let R=x.Sa[x.currentUser.toKey()];if(R){const I=R.get(e);I&&(d?I.reject(d):I.resolve(),R=R.remove(e)),x.Sa[x.currentUser.toKey()]=R}}function Qo(p,e,d=null){p.sharedClientState.removeLocalQueryTarget(e);for(const x of p.fa.get(e))p.ma.delete(x),d&&p.Va.Fa(x,d);p.fa.delete(e),p.isPrimaryClient&&p.wa.Rr(e).forEach(x=>{p.wa.containsKey(x)||xv(p,x)})}function xv(p,e){p.ga.delete(e.path.canonicalString());const d=p.pa.get(e);d!==null&&(rv(p.remoteStore,d),p.pa=p.pa.remove(e),p.ya.delete(d),nl(p))}function Ku(p,e,d){for(const x of d)x instanceof vv?(p.wa.addReference(x.key,e),$T(p,x)):x instanceof pv?(dt("SyncEngine","Document no longer in limbo: "+x.key),p.wa.removeReference(x.key,e),p.wa.containsKey(x.key)||xv(p,x.key)):vt()}function $T(p,e){const d=e.key,x=d.path.canonicalString();p.pa.get(d)||p.ga.has(x)||(dt("SyncEngine","New document in limbo: "+d),p.ga.add(x),nl(p))}function nl(p){for(;p.ga.size>0&&p.pa.size<p.maxConcurrentLimboResolutions;){const e=p.ga.values().next().value;p.ga.delete(e);const d=new ct(Ut.fromString(e)),x=p.Da.next();p.ya.set(x,new UT(d)),p.pa=p.pa.insert(d,x),sv(p.remoteStore,new vi(ze(Hh(d.path)),x,"TargetPurposeLimboResolution",Uh._e))}}async function Zs(p,e,d){const x=Tt(p),R=[],I=[],f=[];x.ma.isEmpty()||(x.ma.forEach((S,t)=>{f.push(x.va(t,e,d).then(h=>{if((h||d)&&x.isPrimaryClient&&x.sharedClientState.updateQueryState(t.targetId,h!=null&&h.fromCache?"not-current":"current"),h){R.push(h);const m=Zh.Qi(t.targetId,h);I.push(m)}}))}),await Promise.all(f),x.Va.a_(R),await async function(t,h){const m=Tt(t);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",o=>nt.forEach(h,a=>nt.forEach(a.ki,r=>m.persistence.referenceDelegate.addReference(o,a.targetId,r)).next(()=>nt.forEach(a.qi,r=>m.persistence.referenceDelegate.removeReference(o,a.targetId,r)))))}catch(o){if(!Qs(o))throw o;dt("LocalStore","Failed to update sequence numbers: "+o)}for(const o of h){const a=o.targetId;if(!o.fromCache){const r=m.ts.get(a),i=r.snapshotVersion,n=r.withLastLimboFreeSnapshotVersion(i);m.ts=m.ts.insert(a,n)}}}(x.localStore,I))}async function kT(p,e){const d=Tt(p);if(!d.currentUser.isEqual(e)){dt("SyncEngine","User change. New user:",e.toKey());const x=await tv(d.localStore,e);d.currentUser=e,function(I,f){I.ba.forEach(S=>{S.forEach(t=>{t.reject(new lt(et.CANCELLED,f))})}),I.ba.clear()}(d,"'waitForPendingWrites' promise is rejected due to a user change."),d.sharedClientState.handleUserChange(e,x.removedBatchIds,x.addedBatchIds),await Zs(d,x._s)}}function JT(p,e){const d=Tt(p),x=d.ya.get(e);if(x&&x.Ra)return At().add(x.key);{let R=At();const I=d.fa.get(e);if(!I)return R;for(const f of I){const S=d.ma.get(f);R=R.unionWith(S.view.ua)}return R}}function ZT(p){const e=Tt(p);return e.remoteStore.remoteSyncer.applyRemoteEvent=gv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HT.bind(null,e),e.Va.a_=NT.bind(null,e.eventManager),e.Va.Fa=BT.bind(null,e.eventManager),e}function jT(p){const e=Tt(p);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QT.bind(null,e),e}class Qu{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=wa(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,d){return null}createIndexBackfillerScheduler(e,d){return null}createLocalStore(e){return rT(this.persistence,new nT,e.initialUser,this.serializer)}createPersistence(e){return new tT(Jh.jr,this.serializer)}createSharedClientState(e){return new dT}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class qT{async initialize(e,d){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(d),this.remoteStore=this.createRemoteStore(d),this.eventManager=this.createEventManager(d),this.syncEngine=this.createSyncEngine(d,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=x=>Hu(this.syncEngine,x,1),this.remoteStore.remoteSyncer.handleCredentialChange=kT.bind(null,this.syncEngine),await LT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DT}()}createDatastore(e){const d=wa(e.databaseInfo.databaseId),x=function(I){return new gT(I)}(e.databaseInfo);return function(I,f,S,t){return new xT(I,f,S,t)}(e.authCredentials,e.appCheckCredentials,x,d)}createRemoteStore(e){return function(x,R,I,f,S){return new ET(x,R,I,f,S)}(this.localStore,this.datastore,e.asyncQueue,d=>Hu(this.syncEngine,d,0),function(){return Xu.D()?new Xu:new cT}())}createSyncEngine(e,d){return function(R,I,f,S,t,h,m){const o=new bT(R,I,f,S,t,h);return m&&(o.Ca=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,d)}terminate(){return async function(d){const x=Tt(d);dt("RemoteStore","RemoteStore shutting down."),x.C_.add(5),await Js(x),x.F_.shutdown(),x.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):ti("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,d){this.muted||setTimeout(()=>{this.muted||e(d)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,d,x,R){this.authCredentials=e,this.appCheckCredentials=d,this.asyncQueue=x,this.databaseInfo=R,this.user=fe.UNAUTHENTICATED,this.clientId=Tc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(x,async I=>{dt("FirestoreClient","Received user=",I.uid),await this.authCredentialListener(I),this.user=I}),this.appCheckCredentials.start(x,I=>(dt("FirestoreClient","Received new app check token=",I),this.appCheckCredentialListener(I,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new lt(et.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new je;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(d){const x=el(d,"Failed to shutdown persistence");e.reject(x)}}),e.promise}}async function ao(p,e){p.asyncQueue.verifyOperationInProgress(),dt("FirestoreClient","Initializing OfflineComponentProvider");const d=await p.getConfiguration();await e.initialize(d);let x=d.initialUser;p.setCredentialChangeListener(async R=>{x.isEqual(R)||(await tv(e.localStore,R),x=R)}),e.persistence.setDatabaseDeletedListener(()=>p.terminate()),p._offlineComponents=e}async function $u(p,e){p.asyncQueue.verifyOperationInProgress();const d=await e1(p);dt("FirestoreClient","Initializing OnlineComponentProvider");const x=await p.getConfiguration();await e.initialize(d,x),p.setCredentialChangeListener(R=>Wu(e.remoteStore,R)),p.setAppCheckTokenChangeListener((R,I)=>Wu(e.remoteStore,I)),p._onlineComponents=e}function t1(p){return p.name==="FirebaseError"?p.code===et.FAILED_PRECONDITION||p.code===et.UNIMPLEMENTED:!(typeof DOMException<"u"&&p instanceof DOMException)||p.code===22||p.code===20||p.code===11}async function e1(p){if(!p._offlineComponents)if(p._uninitializedComponentsProvider){dt("FirestoreClient","Using user provided OfflineComponentProvider");try{await ao(p,p._uninitializedComponentsProvider._offline)}catch(e){const d=e;if(!t1(d))throw d;Rn("Error using user provided cache. Falling back to memory cache: "+d),await ao(p,new Qu)}}else dt("FirestoreClient","Using default OfflineComponentProvider"),await ao(p,new Qu);return p._offlineComponents}async function Ev(p){return p._onlineComponents||(p._uninitializedComponentsProvider?(dt("FirestoreClient","Using user provided OnlineComponentProvider"),await $u(p,p._uninitializedComponentsProvider._online)):(dt("FirestoreClient","Using default OnlineComponentProvider"),await $u(p,new qT))),p._onlineComponents}function i1(p){return Ev(p).then(e=>e.syncEngine)}async function Sv(p){const e=await Ev(p),d=e.eventManager;return d.onListen=zT.bind(null,e.syncEngine),d.onUnlisten=WT.bind(null,e.syncEngine),d}function n1(p,e,d={}){const x=new je;return p.asyncQueue.enqueueAndForget(async()=>function(I,f,S,t,h){const m=new Tv({next:a=>{f.enqueueAndForget(()=>dv(I,o));const r=a.docs.has(S);!r&&a.fromCache?h.reject(new lt(et.UNAVAILABLE,"Failed to get document because the client is offline.")):r&&a.fromCache&&t&&t.source==="server"?h.reject(new lt(et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(a)},error:a=>h.reject(a)}),o=new cv(Hh(S.path),m,{includeMetadataChanges:!0,J_:!0});return fv(I,o)}(await Sv(p),p.asyncQueue,e,d,x)),x.promise}function s1(p,e,d={}){const x=new je;return p.asyncQueue.enqueueAndForget(async()=>function(I,f,S,t,h){const m=new Tv({next:a=>{f.enqueueAndForget(()=>dv(I,o)),a.fromCache&&t.source==="server"?h.reject(new lt(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(a)},error:a=>h.reject(a)}),o=new cv(S,m,{includeMetadataChanges:!0,J_:!0});return fv(I,o)}(await Sv(p),p.asyncQueue,e,d,x)),x.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(p){const e={};return p.timeoutSeconds!==void 0&&(e.timeoutSeconds=p.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(p,e,d){if(!d)throw new lt(et.INVALID_ARGUMENT,`Function ${p}() cannot be called with an empty ${e}.`)}function r1(p,e,d,x){if(e===!0&&x===!0)throw new lt(et.INVALID_ARGUMENT,`${p} and ${d} cannot be used together.`)}function Ju(p){if(!ct.isDocumentKey(p))throw new lt(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${p} has ${p.length}.`)}function Zu(p){if(ct.isDocumentKey(p))throw new lt(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${p} has ${p.length}.`)}function Oa(p){if(p===void 0)return"undefined";if(p===null)return"null";if(typeof p=="string")return p.length>20&&(p=`${p.substring(0,20)}...`),JSON.stringify(p);if(typeof p=="number"||typeof p=="boolean")return""+p;if(typeof p=="object"){if(p instanceof Array)return"an array";{const e=function(x){return x.constructor?x.constructor.name:null}(p);return e?`a custom ${e} object`:"an object"}}return typeof p=="function"?"a function":vt()}function Pi(p,e){if("_delegate"in p&&(p=p._delegate),!(p instanceof e)){if(e.name===p.constructor.name)throw new lt(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const d=Oa(p);throw new lt(et.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${d}`)}}return p}function a1(p,e){if(e<=0)throw new lt(et.INVALID_ARGUMENT,`Function ${p}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e){var d,x;if(e.host===void 0){if(e.ssl!==void 0)throw new lt(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(d=e.ssl)===null||d===void 0||d;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new lt(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}r1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cv((x=e.experimentalLongPollingOptions)!==null&&x!==void 0?x:{}),function(I){if(I.timeoutSeconds!==void 0){if(isNaN(I.timeoutSeconds))throw new lt(et.INVALID_ARGUMENT,`invalid long polling timeout: ${I.timeoutSeconds} (must not be NaN)`);if(I.timeoutSeconds<5)throw new lt(et.INVALID_ARGUMENT,`invalid long polling timeout: ${I.timeoutSeconds} (minimum allowed value is 5)`);if(I.timeoutSeconds>30)throw new lt(et.INVALID_ARGUMENT,`invalid long polling timeout: ${I.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(x,R){return x.timeoutSeconds===R.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Da{constructor(e,d,x,R){this._authCredentials=e,this._appCheckCredentials=d,this._databaseId=x,this._app=R,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ju({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new lt(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new lt(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ju(e),e.credentials!==void 0&&(this._authCredentials=function(x){if(!x)return new Ry;switch(x.type){case"firstParty":return new Fy(x.sessionIndex||"0",x.iamToken||null,x.authTokenFactory||null);case"provider":return x.client;default:throw new lt(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(d){const x=ku.get(d);x&&(dt("ComponentProvider","Removing Datastore"),ku.delete(d),x.terminate())}(this),Promise.resolve()}}function o1(p,e,d,x={}){var R;const I=(p=Pi(p,Da))._getSettings(),f=`${e}:${d}`;if(I.host!=="firestore.googleapis.com"&&I.host!==f&&Rn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),p._setSettings(Object.assign(Object.assign({},I),{host:f,ssl:!1})),x.mockUserToken){let S,t;if(typeof x.mockUserToken=="string")S=x.mockUserToken,t=fe.MOCK_USER;else{S=hd(x.mockUserToken,(R=p._app)===null||R===void 0?void 0:R.options.projectId);const h=x.mockUserToken.sub||x.mockUserToken.user_id;if(!h)throw new lt(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t=new fe(h)}p._authCredentials=new My(new xc(S,t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,d,x){this.converter=d,this._query=x,this.type="query",this.firestore=e}withConverter(e){return new Fi(this.firestore,e,this._query)}}class Ee{constructor(e,d,x){this.converter=d,this._key=x,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ee(this.firestore,e,this._key)}}class xi extends Fi{constructor(e,d,x){super(e,d,Hh(x)),this._path=x,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ee(this.firestore,null,new ct(e))}withConverter(e){return new xi(this.firestore,e,this._path)}}function qu(p,e,...d){if(p=te(p),Av("collection","path",e),p instanceof Da){const x=Ut.fromString(e,...d);return Zu(x),new xi(p,null,x)}{if(!(p instanceof Ee||p instanceof xi))throw new lt(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const x=p._path.child(Ut.fromString(e,...d));return Zu(x),new xi(p.firestore,null,x)}}function $o(p,e,...d){if(p=te(p),arguments.length===1&&(e=Tc.newId()),Av("doc","path",e),p instanceof Da){const x=Ut.fromString(e,...d);return Ju(x),new Ee(p,null,new ct(x))}{if(!(p instanceof Ee||p instanceof xi))throw new lt(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const x=p._path.child(Ut.fromString(e,...d));return Ju(x),new Ee(p.firestore,p instanceof xi?p.converter:null,new ct(x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new iv(this,"async_queue_retry"),this.iu=()=>{const d=ro();d&&dt("AsyncQueue","Visibility state changed to "+d.visibilityState),this.zo.Qo()};const e=ro();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const d=ro();d&&typeof d.removeEventListener=="function"&&d.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const d=new je;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(d.resolve,d.reject),d.promise)).then(()=>d.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!Qs(e))throw e;dt("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(e){const d=this.Ja.then(()=>(this.tu=!0,e().catch(x=>{this.eu=x,this.tu=!1;const R=function(f){let S=f.message||"";return f.stack&&(S=f.stack.includes(f.message)?f.stack:f.message+`
`+f.stack),S}(x);throw ti("INTERNAL UNHANDLED ERROR: ",R),x}).then(x=>(this.tu=!1,x))));return this.Ja=d,d}enqueueAfterDelay(e,d,x){this.su(),this.ru.indexOf(e)>-1&&(d=0);const R=tl.createAndSchedule(this,e,d,x,I=>this.au(I));return this.Xa.push(R),R}su(){this.eu&&vt()}verifyOperationInProgress(){}async uu(){let e;do e=this.Ja,await e;while(e!==this.Ja)}cu(e){for(const d of this.Xa)if(d.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((d,x)=>d.targetTimeMs-x.targetTimeMs);for(const d of this.Xa)if(d.skipDelay(),e!=="all"&&d.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const d=this.Xa.indexOf(e);this.Xa.splice(d,1)}}class js extends Da{constructor(e,d,x,R){super(e,d,x,R),this.type="firestore",this._queue=function(){return new h1}(),this._persistenceKey=(R==null?void 0:R.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Pv(this),this._firestoreClient.terminate()}}function l1(p,e){const d=typeof p=="object"?p:vh(),x=typeof p=="string"?p:e||"(default)",R=oa(d,"firestore").getImmediate({identifier:x});if(!R._initialized){const I=rd("firestore");I&&o1(R,...I)}return R}function sl(p){return p._firestoreClient||Pv(p),p._firestoreClient.verifyNotTerminated(),p._firestoreClient}function Pv(p){var e,d,x;const R=p._freezeSettings(),I=function(S,t,h,m){return new Wy(S,t,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Cv(m.experimentalLongPollingOptions),m.useFetchStreams)}(p._databaseId,((e=p._app)===null||e===void 0?void 0:e.options.appId)||"",p._persistenceKey,R);p._firestoreClient=new _T(p._authCredentials,p._appCheckCredentials,p._queue,I),!((d=R.localCache)===null||d===void 0)&&d._offlineComponentProvider&&(!((x=R.localCache)===null||x===void 0)&&x._onlineComponentProvider)&&(p._firestoreClient._uninitializedComponentsProvider={_offlineKind:R.localCache.kind,_offline:R.localCache._offlineComponentProvider,_online:R.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this._byteString=e}static fromBase64String(e){try{return new On(ye.fromBase64String(e))}catch(d){throw new lt(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+d)}}static fromUint8Array(e){return new On(ye.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(...e){for(let d=0;d<e.length;++d)if(e[d].length===0)throw new lt(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,d){if(!isFinite(e)||e<-90||e>90)throw new lt(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(d)||d<-180||d>180)throw new lt(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+d);this._lat=e,this._long=d}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return wt(this._lat,e._lat)||wt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=/^__.*__$/;class f1{constructor(e,d,x){this.data=e,this.fieldMask=d,this.fieldTransforms=x}toMutation(e,d){return this.fieldMask!==null?new sn(e,this.data,this.fieldMask,d,this.fieldTransforms):new $s(e,this.data,d,this.fieldTransforms)}}function Mv(p){switch(p){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt()}}class ol{constructor(e,d,x,R,I,f){this.settings=e,this.databaseId=d,this.serializer=x,this.ignoreUndefinedProperties=R,I===void 0&&this.Pu(),this.fieldTransforms=I||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new ol(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var d;const x=(d=this.path)===null||d===void 0?void 0:d.child(e),R=this.Tu({path:x,du:!1});return R.Au(e),R}Ru(e){var d;const x=(d=this.path)===null||d===void 0?void 0:d.child(e),R=this.Tu({path:x,du:!1});return R.Pu(),R}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Hr(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(d=>e.isPrefixOf(d))!==void 0||this.fieldTransforms.find(d=>e.isPrefixOf(d.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(Mv(this.Iu)&&u1.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class d1{constructor(e,d,x){this.databaseId=e,this.ignoreUndefinedProperties=d,this.serializer=x||wa(e)}pu(e,d,x,R=!1){return new ol({Iu:e,methodName:d,gu:x,path:oe.emptyPath(),du:!1,fu:R},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hl(p){const e=p._freezeSettings(),d=wa(p._databaseId);return new d1(p._databaseId,!!e.ignoreUndefinedProperties,d)}function Iv(p,e,d,x,R,I={}){const f=p.pu(I.merge||I.mergeFields?2:0,e,d,R);Lv("Data must be an object, but it was:",f,x);const S=wv(x,f);let t,h;if(I.merge)t=new Fe(f.fieldMask),h=f.fieldTransforms;else if(I.mergeFields){const m=[];for(const o of I.mergeFields){const a=v1(e,o,d);if(!f.contains(a))throw new lt(et.INVALID_ARGUMENT,`Field '${a}' is specified in your field mask but missing from your input data.`);g1(m,a)||m.push(a)}t=new Fe(m),h=f.fieldTransforms.filter(o=>t.covers(o.field))}else t=null,h=f.fieldTransforms;return new f1(new Re(S),t,h)}function c1(p,e,d,x=!1){return ll(d,p.pu(x?4:3,e))}function ll(p,e){if(Fv(p=te(p)))return Lv("Unsupported field value:",e,p),wv(p,e);if(p instanceof Rv)return function(x,R){if(!Mv(R.Iu))throw R.mu(`${x._methodName}() can only be used with update() and set()`);if(!R.path)throw R.mu(`${x._methodName}() is not currently supported inside arrays`);const I=x._toFieldTransform(R);I&&R.fieldTransforms.push(I)}(p,e),null;if(p===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),p instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(x,R){const I=[];let f=0;for(const S of x){let t=ll(S,R.Vu(f));t==null&&(t={nullValue:"NULL_VALUE"}),I.push(t),f++}return{arrayValue:{values:I}}}(p,e)}return function(x,R){if((x=te(x))===null)return{nullValue:"NULL_VALUE"};if(typeof x=="number")return lx(R.serializer,x);if(typeof x=="boolean")return{booleanValue:x};if(typeof x=="string")return{stringValue:x};if(x instanceof Date){const I=Jt.fromDate(x);return{timestampValue:Wr(R.serializer,I)}}if(x instanceof Jt){const I=new Jt(x.seconds,1e3*Math.floor(x.nanoseconds/1e3));return{timestampValue:Wr(R.serializer,I)}}if(x instanceof al)return{geoPointValue:{latitude:x.latitude,longitude:x.longitude}};if(x instanceof On)return{bytesValue:kc(R.serializer,x._byteString)};if(x instanceof Ee){const I=R.databaseId,f=x.firestore._databaseId;if(!f.isEqual(I))throw R.mu(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${I.projectId}/${I.database}`);return{referenceValue:$h(x.firestore._databaseId||R.databaseId,x._key.path)}}throw R.mu(`Unsupported field value: ${Oa(x)}`)}(p,e)}function wv(p,e){const d={};return Ec(p)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zn(p,(x,R)=>{const I=ll(R,e.Eu(x));I!=null&&(d[x]=I)}),{mapValue:{fields:d}}}function Fv(p){return!(typeof p!="object"||p===null||p instanceof Array||p instanceof Date||p instanceof Jt||p instanceof al||p instanceof On||p instanceof Ee||p instanceof Rv)}function Lv(p,e,d){if(!Fv(d)||!function(R){return typeof R=="object"&&R!==null&&(Object.getPrototypeOf(R)===Object.prototype||Object.getPrototypeOf(R)===null)}(d)){const x=Oa(d);throw x==="an object"?e.mu(p+" a custom object"):e.mu(p+" "+x)}}function v1(p,e,d){if((e=te(e))instanceof rl)return e._internalPath;if(typeof e=="string")return Ov(p,e);throw Hr("Field path arguments must be of type string or ",p,!1,void 0,d)}const p1=new RegExp("[~\\*/\\[\\]]");function Ov(p,e,d){if(e.search(p1)>=0)throw Hr(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,p,!1,void 0,d);try{return new rl(...e.split("."))._internalPath}catch{throw Hr(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,p,!1,void 0,d)}}function Hr(p,e,d,x,R){const I=x&&!x.isEmpty(),f=R!==void 0;let S=`Function ${e}() called with invalid data`;d&&(S+=" (via `toFirestore()`)"),S+=". ";let t="";return(I||f)&&(t+=" (found",I&&(t+=` in field ${x}`),f&&(t+=` in document ${R}`),t+=")"),new lt(et.INVALID_ARGUMENT,S+p+t)}function g1(p,e){return p.some(d=>d.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,d,x,R,I){this._firestore=e,this._userDataWriter=d,this._key=x,this._document=R,this._converter=I}get id(){return this._key.path.lastSegment()}get ref(){return new Ee(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new m1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const d=this._document.data.field(ul("DocumentSnapshot.get",e));if(d!==null)return this._userDataWriter.convertValue(d)}}}class m1 extends Dv{data(){return super.data()}}function ul(p,e){return typeof e=="string"?Ov(p,e):e instanceof rl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(p){if(p.limitType==="L"&&p.explicitOrderBy.length===0)throw new lt(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fl{}class dl extends fl{}function x1(p,e,...d){let x=[];e instanceof fl&&x.push(e),x=x.concat(d),function(I){const f=I.filter(t=>t instanceof vl).length,S=I.filter(t=>t instanceof cl).length;if(f>1||f>0&&S>0)throw new lt(et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(x);for(const R of x)p=R._apply(p);return p}class cl extends dl{constructor(e,d,x){super(),this._field=e,this._op=d,this._value=x,this.type="where"}static _create(e,d,x){return new cl(e,d,x)}_apply(e){const d=this._parse(e);return Nv(e._query,d),new Fi(e.firestore,e.converter,zo(e._query,d))}_parse(e){const d=hl(e.firestore);return function(I,f,S,t,h,m,o){let a;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new lt(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){tf(o,m);const r=[];for(const i of o)r.push(_u(t,I,i));a={arrayValue:{values:r}}}else a=_u(t,I,o)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||tf(o,m),a=c1(S,f,o,m==="in"||m==="not-in");return Kt.create(h,m,a)}(e._query,"where",d,e.firestore._databaseId,this._field,this._op,this._value)}}class vl extends fl{constructor(e,d){super(),this.type=e,this._queryConstraints=d}static _create(e,d){return new vl(e,d)}_parse(e){const d=this._queryConstraints.map(x=>x._parse(e)).filter(x=>x.getFilters().length>0);return d.length===1?d[0]:Ne.create(d,this._getOperator())}_apply(e){const d=this._parse(e);return d.getFilters().length===0?e:(function(R,I){let f=R;const S=I.getFlattenedFilters();for(const t of S)Nv(f,t),f=zo(f,t)}(e._query,d),new Fi(e.firestore,e.converter,zo(e._query,d)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pl extends dl{constructor(e,d){super(),this._field=e,this._direction=d,this.type="orderBy"}static _create(e,d){return new pl(e,d)}_apply(e){const d=function(R,I,f){if(R.startAt!==null)throw new lt(et.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(R.endAt!==null)throw new lt(et.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Is(I,f)}(e._query,this._field,this._direction);return new Fi(e.firestore,e.converter,function(R,I){const f=R.explicitOrderBy.concat([I]);return new Xn(R.path,R.collectionGroup,f,R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)}(e._query,d))}}function T1(p,e="asc"){const d=e,x=ul("orderBy",p);return pl._create(x,d)}class gl extends dl{constructor(e,d,x){super(),this.type=e,this._limit=d,this._limitType=x}static _create(e,d,x){return new gl(e,d,x)}_apply(e){return new Fi(e.firestore,e.converter,br(e._query,this._limit,this._limitType))}}function E1(p){return a1("limit",p),gl._create("limit",p,"F")}function _u(p,e,d){if(typeof(d=te(d))=="string"){if(d==="")throw new lt(et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fc(e)&&d.indexOf("/")!==-1)throw new lt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${d}' contains a '/' character.`);const x=e.path.child(Ut.fromString(d));if(!ct.isDocumentKey(x))throw new lt(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${x}' is not because it has an odd number of segments (${x.length}).`);return Su(p,new ct(x))}if(d instanceof Ee)return Su(p,d._key);throw new lt(et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Oa(d)}.`)}function tf(p,e){if(!Array.isArray(p)||p.length===0)throw new lt(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Nv(p,e){const d=function(R,I){for(const f of R)for(const S of f.getFlattenedFilters())if(I.indexOf(S.op)>=0)return S.op;return null}(p.filters,function(R){switch(R){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(d!==null)throw d===e.op?new lt(et.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new lt(et.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${d.toString()}' filters.`)}class S1{convertValue(e,d="none"){switch(Zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,d);case 5:return e.stringValue;case 6:return this.convertBytes(Ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,d);case 10:return this.convertObject(e.mapValue,d);default:throw vt()}}convertObject(e,d){return this.convertObjectMap(e.fields,d)}convertObjectMap(e,d="none"){const x={};return zn(e,(R,I)=>{x[R]=this.convertValue(I,d)}),x}convertGeoPoint(e){return new al(Ht(e.latitude),Ht(e.longitude))}convertArray(e,d){return(e.values||[]).map(x=>this.convertValue(x,d))}convertServerTimestamp(e,d){switch(d){case"previous":const x=zh(e);return x==null?null:this.convertValue(x,d);case"estimate":return this.convertTimestamp(Ps(e));default:return null}}convertTimestamp(e){const d=Ci(e);return new Jt(d.seconds,d.nanos)}convertDocumentKey(e,d){const x=Ut.fromString(e);bt(_c(x));const R=new Rs(x.get(1),x.get(3)),I=new ct(x.popFirst(5));return R.isEqual(d)||ti(`Document ${I} contains a document reference within a different database (${R.projectId}/${R.database}) which is not supported. It will be treated as a reference in the current database (${d.projectId}/${d.database}) instead.`),I}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(p,e,d){let x;return x=p?d&&(d.merge||d.mergeFields)?p.toFirestore(e,d):p.toFirestore(e):e,x}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,d){this.hasPendingWrites=e,this.fromCache=d}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vv extends Dv{constructor(e,d,x,R,I,f){super(e,d,x,R,f),this._firestore=e,this._firestoreImpl=e,this.metadata=I}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const d=new Tr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(d,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,d={}){if(this._document){const x=this._document.data.field(ul("DocumentSnapshot.get",e));if(x!==null)return this._userDataWriter.convertValue(x,d.serverTimestamps)}}}class Tr extends Vv{data(e={}){return super.data(e)}}class C1{constructor(e,d,x,R){this._firestore=e,this._userDataWriter=d,this._snapshot=R,this.metadata=new ss(R.hasPendingWrites,R.fromCache),this.query=x}get docs(){const e=[];return this.forEach(d=>e.push(d)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,d){this._snapshot.docs.forEach(x=>{e.call(d,new Tr(this._firestore,this._userDataWriter,x.key,x,new ss(this._snapshot.mutatedKeys.has(x.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const d=!!e.includeMetadataChanges;if(d&&this._snapshot.excludesMetadataChanges)throw new lt(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===d||(this._cachedChanges=function(R,I){if(R._snapshot.oldDocs.isEmpty()){let f=0;return R._snapshot.docChanges.map(S=>{const t=new Tr(R._firestore,R._userDataWriter,S.doc.key,S.doc,new ss(R._snapshot.mutatedKeys.has(S.doc.key),R._snapshot.fromCache),R.query.converter);return S.doc,{type:"added",doc:t,oldIndex:-1,newIndex:f++}})}{let f=R._snapshot.oldDocs;return R._snapshot.docChanges.filter(S=>I||S.type!==3).map(S=>{const t=new Tr(R._firestore,R._userDataWriter,S.doc.key,S.doc,new ss(R._snapshot.mutatedKeys.has(S.doc.key),R._snapshot.fromCache),R.query.converter);let h=-1,m=-1;return S.type!==0&&(h=f.indexOf(S.doc.key),f=f.delete(S.doc.key)),S.type!==1&&(f=f.add(S.doc),m=f.indexOf(S.doc.key)),{type:A1(S.type),doc:t,oldIndex:h,newIndex:m}})}}(this,d),this._cachedChangesIncludeMetadataChanges=d),this._cachedChanges}}function A1(p){switch(p){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(p){p=Pi(p,Ee);const e=Pi(p.firestore,js);return n1(sl(e),p._key).then(d=>w1(e,p,d))}class Gv extends S1{constructor(e){super(),this.firestore=e}convertBytes(e){return new On(e)}convertReference(e){const d=this.convertDocumentKey(e,this.firestore._databaseId);return new Ee(this.firestore,null,d)}}function R1(p){p=Pi(p,Fi);const e=Pi(p.firestore,js),d=sl(e),x=new Gv(e);return y1(p._query),s1(d,p._query).then(R=>new C1(e,x,p,R))}function M1(p,e,d){p=Pi(p,Ee);const x=Pi(p.firestore,js),R=Bv(p.converter,e,d);return Uv(x,[Iv(hl(x),"setDoc",p._key,R,p.converter!==null,d).toMutation(p._key,Xe.none())])}function I1(p,e){const d=Pi(p.firestore,js),x=$o(p),R=Bv(p.converter,e);return Uv(d,[Iv(hl(p.firestore),"addDoc",x._key,R,p.converter!==null,{}).toMutation(x._key,Xe.exists(!1))]).then(()=>x)}function Uv(p,e){return function(x,R){const I=new je;return x.asyncQueue.enqueueAndForget(async()=>YT(await i1(x),R,I)),I.promise}(sl(p),e)}function w1(p,e,d){const x=d.docs.get(e._key),R=new Gv(p);return new Vv(p,R,e._key,x,new ss(d.hasPendingWrites,d.fromCache),e.converter)}(function(e,d=!0){(function(R){bn=R})(en),$i(new Ei("firestore",(x,{instanceIdentifier:R,options:I})=>{const f=x.getProvider("app").getImmediate(),S=new js(new Iy(x.getProvider("auth-internal")),new Oy(x.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new lt(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rs(h.options.projectId,m)}(f,R),f);return I=Object.assign({useFetchStreams:d},I),S._setSettings(I),S},"PUBLIC").setMultipleInstances(!0)),be(yu,"4.3.2",e),be(yu,"4.3.2","esm2017")})();var ef={};const nf="@firebase/database",sf="1.0.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bv="";function F1(p){bv=p}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,d){d==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ae(d))}get(e){const d=this.domStorage_.getItem(this.prefixedName_(e));return d==null?null:vs(d)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,d){d==null?delete this.cache_[e]:this.cache_[e]=d}get(e){return oi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=function(p){try{if(typeof window<"u"&&typeof window[p]<"u"){const e=window[p];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new L1(e)}}catch{}return new O1},Xi=zv("localStorage"),ko=zv("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn=new aa("@firebase/database"),D1=function(){let p=1;return function(){return p++}}(),Xv=function(p){const e=fm(p),d=new om;d.update(e);const x=d.digest();return lh.encodeByteArray(x)},qs=function(...p){let e="";for(let d=0;d<p.length;d++){const x=p[d];Array.isArray(x)||x&&typeof x=="object"&&typeof x.length=="number"?e+=qs.apply(null,x):typeof x=="object"?e+=ae(x):e+=x,e+=" "}return e};let Hi=null,rf=!0;const N1=function(p,e){at(!e||p===!0||p===!1,"Can't turn on custom loggers persistently."),p===!0?(xn.logLevel=St.VERBOSE,Hi=xn.log.bind(xn),e&&ko.set("logging_enabled",!0)):typeof p=="function"?Hi=p:(Hi=null,ko.remove("logging_enabled"))},ce=function(...p){if(rf===!0&&(rf=!1,Hi===null&&ko.get("logging_enabled")===!0&&N1(!0)),Hi){const e=qs.apply(null,p);Hi(e)}},_s=function(p){return function(...e){ce(p,...e)}},Jo=function(...p){const e="FIREBASE INTERNAL ERROR: "+qs(...p);xn.error(e)},ii=function(...p){const e=`FIREBASE FATAL ERROR: ${qs(...p)}`;throw xn.error(e),new Error(e)},Se=function(...p){const e="FIREBASE WARNING: "+qs(...p);xn.warn(e)},B1=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Se("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Wv=function(p){return typeof p=="number"&&(p!==p||p===Number.POSITIVE_INFINITY||p===Number.NEGATIVE_INFINITY)},V1=function(p){if(document.readyState==="complete")p();else{let e=!1;const d=function(){if(!document.body){setTimeout(d,Math.floor(10));return}e||(e=!0,p())};document.addEventListener?(document.addEventListener("DOMContentLoaded",d,!1),window.addEventListener("load",d,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&d()}),window.attachEvent("onload",d))}},Dn="[MIN_NAME]",ji="[MAX_NAME]",Hn=function(p,e){if(p===e)return 0;if(p===Dn||e===ji)return-1;if(e===Dn||p===ji)return 1;{const d=af(p),x=af(e);return d!==null?x!==null?d-x===0?p.length-e.length:d-x:-1:x!==null?1:p<e?-1:1}},G1=function(p,e){return p===e?0:p<e?-1:1},Zn=function(p,e){if(e&&p in e)return e[p];throw new Error("Missing required key ("+p+") in object: "+ae(e))},ml=function(p){if(typeof p!="object"||p===null)return ae(p);const e=[];for(const x in p)e.push(x);e.sort();let d="{";for(let x=0;x<e.length;x++)x!==0&&(d+=","),d+=ae(e[x]),d+=":",d+=ml(p[e[x]]);return d+="}",d},Yv=function(p,e){const d=p.length;if(d<=e)return[p];const x=[];for(let R=0;R<d;R+=e)R+e>d?x.push(p.substring(R,d)):x.push(p.substring(R,R+e));return x};function Ie(p,e){for(const d in p)p.hasOwnProperty(d)&&e(d,p[d])}const Hv=function(p){at(!Wv(p),"Invalid JSON number");const e=11,d=52,x=(1<<e-1)-1;let R,I,f,S,t;p===0?(I=0,f=0,R=1/p===-1/0?1:0):(R=p<0,p=Math.abs(p),p>=Math.pow(2,1-x)?(S=Math.min(Math.floor(Math.log(p)/Math.LN2),x),I=S+x,f=Math.round(p*Math.pow(2,d-S)-Math.pow(2,d))):(I=0,f=Math.round(p/Math.pow(2,1-x-d))));const h=[];for(t=d;t;t-=1)h.push(f%2?1:0),f=Math.floor(f/2);for(t=e;t;t-=1)h.push(I%2?1:0),I=Math.floor(I/2);h.push(R?1:0),h.reverse();const m=h.join("");let o="";for(t=0;t<64;t+=8){let a=parseInt(m.substr(t,8),2).toString(16);a.length===1&&(a="0"+a),o=o+a}return o.toLowerCase()},U1=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},b1=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},z1=new RegExp("^-?(0*)\\d{1,10}$"),X1=-2147483648,W1=2147483647,af=function(p){if(z1.test(p)){const e=Number(p);if(e>=X1&&e<=W1)return e}return null},Kn=function(p){try{p()}catch(e){setTimeout(()=>{const d=e.stack||"";throw Se("Exception was thrown by user callback.",d),e},Math.floor(0))}},Y1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},us=function(p,e){const d=setTimeout(p,e);return typeof d=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(d):typeof d=="object"&&d.unref&&d.unref(),d};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,d){this.appName_=e,this.appCheckProvider=d,this.appCheck=d==null?void 0:d.getImmediate({optional:!0}),this.appCheck||d==null||d.get().then(x=>this.appCheck=x)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((d,x)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(d,x):d(null)},0)})}addTokenChangeListener(e){var d;(d=this.appCheckProvider)===null||d===void 0||d.get().then(x=>x.addTokenListener(e))}notifyForInvalidToken(){Se(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,d,x){this.appName_=e,this.firebaseOptions_=d,this.authProvider_=x,this.auth_=null,this.auth_=x.getImmediate({optional:!0}),this.auth_||x.onInit(R=>this.auth_=R)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(d=>d&&d.code==="auth/token-not-initialized"?(ce("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(d)):new Promise((d,x)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(d,x):d(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(d=>d.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(d=>d.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Se(e)}}class Tn{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Tn.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl="5",Kv="v",Qv="s",$v="r",kv="f",Jv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Zv="ls",jv="p",Zo="ac",qv="websocket",_v="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,d,x,R,I=!1,f="",S=!1,t=!1){this.secure=d,this.namespace=x,this.webSocketOnly=R,this.nodeAdmin=I,this.persistenceKey=f,this.includeNamespaceInQueryParams=S,this.isUsingEmulator=t,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Xi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Xi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",d=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${d}`}}function Q1(p){return p.host!==p.internalHost||p.isCustomHost()||p.includeNamespaceInQueryParams}function ep(p,e,d){at(typeof e=="string","typeof type must == string"),at(typeof d=="object","typeof params must == object");let x;if(e===qv)x=(p.secure?"wss://":"ws://")+p.internalHost+"/.ws?";else if(e===_v)x=(p.secure?"https://":"http://")+p.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Q1(p)&&(d.ns=p.namespace);const R=[];return Ie(d,(I,f)=>{R.push(I+"="+f)}),x+R.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(){this.counters_={}}incrementCounter(e,d=1){oi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=d}get(){return Qg(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo={},ho={};function xl(p){const e=p.toString();return oo[e]||(oo[e]=new $1),oo[e]}function k1(p,e){const d=p.toString();return ho[d]||(ho[d]=e()),ho[d]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,d){this.closeAfterResponse=e,this.onClose=d,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,d){for(this.pendingResponses[e]=d;this.pendingResponses[this.currentResponseNum];){const x=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let R=0;R<x.length;++R)x[R]&&Kn(()=>{this.onMessage_(x[R])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="start",Z1="close",j1="pLPCommand",q1="pRTLPCB",ip="id",np="pw",sp="ser",_1="cb",tE="seg",eE="ts",iE="d",nE="dframe",rp=1870,ap=30,sE=rp-ap,rE=25e3,aE=3e4;class vn{constructor(e,d,x,R,I,f,S){this.connId=e,this.repoInfo=d,this.applicationId=x,this.appCheckToken=R,this.authToken=I,this.transportSessionId=f,this.lastSessionId=S,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_s(e),this.stats_=xl(d),this.urlFn=t=>(this.appCheckToken&&(t[Zo]=this.appCheckToken),ep(d,_v,t))}open(e,d){this.curSegmentNum=0,this.onDisconnect_=d,this.myPacketOrderer=new J1(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(aE)),V1(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Tl((...I)=>{const[f,S,t,h,m]=I;if(this.incrementIncomingBytes_(I),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,f===of)this.id=S,this.password=t;else if(f===Z1)S?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(S,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+f)},(...I)=>{const[f,S]=I;this.incrementIncomingBytes_(I),this.myPacketOrderer.handleResponse(f,S)},()=>{this.onClosed_()},this.urlFn);const x={};x[of]="t",x[sp]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(x[_1]=this.scriptTagHolder.uniqueCallbackIdentifier),x[Kv]=yl,this.transportSessionId&&(x[Qv]=this.transportSessionId),this.lastSessionId&&(x[Zv]=this.lastSessionId),this.applicationId&&(x[jv]=this.applicationId),this.appCheckToken&&(x[Zo]=this.appCheckToken),typeof location<"u"&&location.hostname&&Jv.test(location.hostname)&&(x[$v]=kv);const R=this.urlFn(x);this.log_("Connecting via long-poll to "+R),this.scriptTagHolder.addTag(R,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){vn.forceAllow_=!0}static forceDisallow(){vn.forceDisallow_=!0}static isAvailable(){return vn.forceAllow_?!0:!vn.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!U1()&&!b1()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const d=ae(e);this.bytesSent+=d.length,this.stats_.incrementCounter("bytes_sent",d.length);const x=id(d),R=Yv(x,sE);for(let I=0;I<R.length;I++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,R.length,R[I]),this.curSegmentNum++}addDisconnectPingFrame(e,d){this.myDisconnFrame=document.createElement("iframe");const x={};x[nE]="t",x[ip]=e,x[np]=d,this.myDisconnFrame.src=this.urlFn(x),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const d=ae(e).length;this.bytesReceived+=d,this.stats_.incrementCounter("bytes_received",d)}}class Tl{constructor(e,d,x,R){this.onDisconnect=x,this.urlFn=R,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=D1(),window[j1+this.uniqueCallbackIdentifier]=e,window[q1+this.uniqueCallbackIdentifier]=d,this.myIFrame=Tl.createIFrame_();let I="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(I='<script>document.domain="'+document.domain+'";<\/script>');const f="<html><body>"+I+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(f),this.myIFrame.doc.close()}catch(S){ce("frame writing exception"),S.stack&&ce(S.stack),ce(S)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ce("No IE domain setting required")}catch{const x=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+x+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,d){for(this.myID=e,this.myPW=d,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[ip]=this.myID,e[np]=this.myPW,e[sp]=this.currentSerial;let d=this.urlFn(e),x="",R=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ap+x.length<=rp;){const f=this.pendingSegs.shift();x=x+"&"+tE+R+"="+f.seg+"&"+eE+R+"="+f.ts+"&"+iE+R+"="+f.d,R++}return d=d+x,this.addLongPollTag_(d,this.currentSerial),!0}else return!1}enqueueSegment(e,d,x){this.pendingSegs.push({seg:e,ts:d,d:x}),this.alive&&this.newRequest_()}addLongPollTag_(e,d){this.outstandingRequests.add(d);const x=()=>{this.outstandingRequests.delete(d),this.newRequest_()},R=setTimeout(x,Math.floor(rE)),I=()=>{clearTimeout(R),x()};this.addTag(e,I)}addTag(e,d){setTimeout(()=>{try{if(!this.sendNewPolls)return;const x=this.myIFrame.doc.createElement("script");x.type="text/javascript",x.async=!0,x.src=e,x.onload=x.onreadystatechange=function(){const R=x.readyState;(!R||R==="loaded"||R==="complete")&&(x.onload=x.onreadystatechange=null,x.parentNode&&x.parentNode.removeChild(x),d())},x.onerror=()=>{ce("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(x)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=16384,hE=45e3;let Kr=null;typeof MozWebSocket<"u"?Kr=MozWebSocket:typeof WebSocket<"u"&&(Kr=WebSocket);class we{constructor(e,d,x,R,I,f,S){this.connId=e,this.applicationId=x,this.appCheckToken=R,this.authToken=I,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_s(this.connId),this.stats_=xl(d),this.connURL=we.connectionURL_(d,f,S,R,x),this.nodeAdmin=d.nodeAdmin}static connectionURL_(e,d,x,R,I){const f={};return f[Kv]=yl,typeof location<"u"&&location.hostname&&Jv.test(location.hostname)&&(f[$v]=kv),d&&(f[Qv]=d),x&&(f[Zv]=x),R&&(f[Zo]=R),I&&(f[jv]=I),ep(e,qv,f)}open(e,d){this.onDisconnect=d,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Xi.set("previous_websocket_failure",!0);try{let x;ud(),this.mySock=new Kr(this.connURL,[],x)}catch(x){this.log_("Error instantiating WebSocket.");const R=x.message||x.data;R&&this.log_(R),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=x=>{this.handleIncomingFrame(x)},this.mySock.onerror=x=>{this.log_("WebSocket error.  Closing connection.");const R=x.message||x.data;R&&this.log_(R),this.onClosed_()}}start(){}static forceDisallow(){we.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const d=/Android ([0-9]{0,}\.[0-9]{0,})/,x=navigator.userAgent.match(d);x&&x.length>1&&parseFloat(x[1])<4.4&&(e=!0)}return!e&&Kr!==null&&!we.forceDisallow_}static previouslyFailed(){return Xi.isInMemoryStorage||Xi.get("previous_websocket_failure")===!0}markConnectionHealthy(){Xi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const d=this.frames.join("");this.frames=null;const x=vs(d);this.onMessage(x)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(at(this.frames===null,"We already have a frame buffer"),e.length<=6){const d=Number(e);if(!isNaN(d))return this.handleNewFrameCount_(d),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const d=e.data;if(this.bytesReceived+=d.length,this.stats_.incrementCounter("bytes_received",d.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(d);else{const x=this.extractFrameCount_(d);x!==null&&this.appendFrame_(x)}}send(e){this.resetKeepAlive();const d=ae(e);this.bytesSent+=d.length,this.stats_.incrementCounter("bytes_sent",d.length);const x=Yv(d,oE);x.length>1&&this.sendString_(String(x.length));for(let R=0;R<x.length;R++)this.sendString_(x[R])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(hE))}sendString_(e){try{this.mySock.send(e)}catch(d){this.log_("Exception thrown from WebSocket.send():",d.message||d.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}we.responsesRequiredToBeHealthy=2;we.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[vn,we]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const d=we&&we.isAvailable();let x=d&&!we.previouslyFailed();if(e.webSocketOnly&&(d||Se("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),x=!0),x)this.transports_=[we];else{const R=this.transports_=[];for(const I of Ls.ALL_TRANSPORTS)I&&I.isAvailable()&&R.push(I);Ls.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ls.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=6e4,uE=5e3,fE=10*1024,dE=100*1024,lo="t",hf="d",cE="s",lf="r",vE="e",uf="o",ff="a",df="n",cf="p",pE="h";class gE{constructor(e,d,x,R,I,f,S,t,h,m){this.id=e,this.repoInfo_=d,this.applicationId_=x,this.appCheckToken_=R,this.authToken_=I,this.onMessage_=f,this.onReady_=S,this.onDisconnect_=t,this.onKill_=h,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_s("c:"+this.id+":"),this.transportManager_=new Ls(d),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const d=this.connReceiver_(this.conn_),x=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(d,x)},Math.floor(0));const R=e.healthyTimeout||0;R>0&&(this.healthyTimeout_=us(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>dE?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>fE?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(R)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return d=>{e===this.conn_?this.onConnectionLost_(d):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return d=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(d):e===this.secondaryConn_?this.onSecondaryMessageReceived_(d):this.log_("message on old connection"))}}sendRequest(e){const d={t:"d",d:e};this.sendData_(d)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(lo in e){const d=e[lo];d===ff?this.upgradeIfSecondaryHealthy_():d===lf?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):d===uf&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const d=Zn("t",e),x=Zn("d",e);if(d==="c")this.onSecondaryControl_(x);else if(d==="d")this.pendingDataMessages.push(x);else throw new Error("Unknown protocol layer: "+d)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:cf,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ff,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:df,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const d=Zn("t",e),x=Zn("d",e);d==="c"?this.onControl_(x):d==="d"&&this.onDataMessage_(x)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const d=Zn(lo,e);if(hf in e){const x=e[hf];if(d===pE){const R=Object.assign({},x);this.repoInfo_.isUsingEmulator&&(R.h=this.repoInfo_.host),this.onHandshake_(R)}else if(d===df){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let R=0;R<this.pendingDataMessages.length;++R)this.onDataMessage_(this.pendingDataMessages[R]);this.pendingDataMessages=[],this.tryCleanupConnection()}else d===cE?this.onConnectionShutdown_(x):d===lf?this.onReset_(x):d===vE?Jo("Server Error: "+x):d===uf?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Jo("Unknown control packet command: "+d)}}onHandshake_(e){const d=e.ts,x=e.v,R=e.h;this.sessionId=e.s,this.repoInfo_.host=R,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,d),yl!==x&&Se("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const d=this.connReceiver_(this.secondaryConn_),x=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(d,x),us(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(lE))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,d){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(d,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):us(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(uE))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:cf,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Xi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{put(e,d,x,R){}merge(e,d,x,R){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,d,x){}onDisconnectMerge(e,d,x){}onDisconnectCancel(e,d){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e){this.allowedEvents_=e,this.listeners_={},at(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...d){if(Array.isArray(this.listeners_[e])){const x=[...this.listeners_[e]];for(let R=0;R<x.length;R++)x[R].callback.apply(x[R].context,d)}}on(e,d,x){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:d,context:x});const R=this.getInitialEvent(e);R&&d.apply(x,R)}off(e,d,x){this.validateEventType_(e);const R=this.listeners_[e]||[];for(let I=0;I<R.length;I++)if(R[I].callback===d&&(!x||x===R[I].context)){R.splice(I,1);return}}validateEventType_(e){at(this.allowedEvents_.find(d=>d===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends hp{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!fh()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Qr}getInitialEvent(e){return at(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf=32,pf=768;class zt{constructor(e,d){if(d===void 0){this.pieces_=e.split("/");let x=0;for(let R=0;R<this.pieces_.length;R++)this.pieces_[R].length>0&&(this.pieces_[x]=this.pieces_[R],x++);this.pieces_.length=x,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=d}toString(){let e="";for(let d=this.pieceNum_;d<this.pieces_.length;d++)this.pieces_[d]!==""&&(e+="/"+this.pieces_[d]);return e||"/"}}function Ot(){return new zt("")}function Ct(p){return p.pieceNum_>=p.pieces_.length?null:p.pieces_[p.pieceNum_]}function Ri(p){return p.pieces_.length-p.pieceNum_}function Vt(p){let e=p.pieceNum_;return e<p.pieces_.length&&e++,new zt(p.pieces_,e)}function lp(p){return p.pieceNum_<p.pieces_.length?p.pieces_[p.pieces_.length-1]:null}function mE(p){let e="";for(let d=p.pieceNum_;d<p.pieces_.length;d++)p.pieces_[d]!==""&&(e+="/"+encodeURIComponent(String(p.pieces_[d])));return e||"/"}function up(p,e=0){return p.pieces_.slice(p.pieceNum_+e)}function fp(p){if(p.pieceNum_>=p.pieces_.length)return null;const e=[];for(let d=p.pieceNum_;d<p.pieces_.length-1;d++)e.push(p.pieces_[d]);return new zt(e,0)}function kt(p,e){const d=[];for(let x=p.pieceNum_;x<p.pieces_.length;x++)d.push(p.pieces_[x]);if(e instanceof zt)for(let x=e.pieceNum_;x<e.pieces_.length;x++)d.push(e.pieces_[x]);else{const x=e.split("/");for(let R=0;R<x.length;R++)x[R].length>0&&d.push(x[R])}return new zt(d,0)}function Pt(p){return p.pieceNum_>=p.pieces_.length}function Me(p,e){const d=Ct(p),x=Ct(e);if(d===null)return e;if(d===x)return Me(Vt(p),Vt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+p+")")}function dp(p,e){if(Ri(p)!==Ri(e))return!1;for(let d=p.pieceNum_,x=e.pieceNum_;d<=p.pieces_.length;d++,x++)if(p.pieces_[d]!==e.pieces_[x])return!1;return!0}function Le(p,e){let d=p.pieceNum_,x=e.pieceNum_;if(Ri(p)>Ri(e))return!1;for(;d<p.pieces_.length;){if(p.pieces_[d]!==e.pieces_[x])return!1;++d,++x}return!0}class yE{constructor(e,d){this.errorPrefix_=d,this.parts_=up(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let x=0;x<this.parts_.length;x++)this.byteLength_+=ra(this.parts_[x]);cp(this)}}function xE(p,e){p.parts_.length>0&&(p.byteLength_+=1),p.parts_.push(e),p.byteLength_+=ra(e),cp(p)}function TE(p){const e=p.parts_.pop();p.byteLength_-=ra(e),p.parts_.length>0&&(p.byteLength_-=1)}function cp(p){if(p.byteLength_>pf)throw new Error(p.errorPrefix_+"has a key path longer than "+pf+" bytes ("+p.byteLength_+").");if(p.parts_.length>vf)throw new Error(p.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+vf+") or object contains a cycle "+Gi(p))}function Gi(p){return p.parts_.length===0?"":"in property '"+p.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends hp{constructor(){super(["visible"]);let e,d;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(d="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(d="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(d="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(d="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,d&&document.addEventListener(d,()=>{const x=!document[e];x!==this.visible_&&(this.visible_=x,this.trigger("visible",x))},!1)}static getInstance(){return new El}getInitialEvent(e){return at(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=1e3,EE=60*5*1e3,gf=30*1e3,SE=1.3,CE=3e4,AE="server_kill",mf=3;class qe extends op{constructor(e,d,x,R,I,f,S,t){if(super(),this.repoInfo_=e,this.applicationId_=d,this.onDataUpdate_=x,this.onConnectStatus_=R,this.onServerInfoUpdate_=I,this.authTokenProvider_=f,this.appCheckTokenProvider_=S,this.authOverride_=t,this.id=qe.nextPersistentConnectionId_++,this.log_=_s("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=jn,this.maxReconnectDelay_=EE,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,t&&!ud())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");El.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Qr.getInstance().on("online",this.onOnline_,this)}sendRequest(e,d,x){const R=++this.requestNumber_,I={r:R,a:e,b:d};this.log_(ae(I)),at(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(I),x&&(this.requestCBHash_[R]=x)}get(e){this.initConnection_();const d=new sa,R={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:f=>{const S=f.d;f.s==="ok"?d.resolve(S):d.reject(S)}};this.outstandingGets_.push(R),this.outstandingGetCount_++;const I=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(I),d.promise}listen(e,d,x,R){this.initConnection_();const I=e._queryIdentifier,f=e._path.toString();this.log_("Listen called for "+f+" "+I),this.listens.has(f)||this.listens.set(f,new Map),at(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),at(!this.listens.get(f).has(I),"listen() called twice for same path/queryId.");const S={onComplete:R,hashFn:d,query:e,tag:x};this.listens.get(f).set(I,S),this.connected_&&this.sendListen_(S)}sendGet_(e){const d=this.outstandingGets_[e];this.sendRequest("g",d.request,x=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),d.onComplete&&d.onComplete(x)})}sendListen_(e){const d=e.query,x=d._path.toString(),R=d._queryIdentifier;this.log_("Listen on "+x+" for "+R);const I={p:x},f="q";e.tag&&(I.q=d._queryObject,I.t=e.tag),I.h=e.hashFn(),this.sendRequest(f,I,S=>{const t=S.d,h=S.s;qe.warnOnListenWarnings_(t,d),(this.listens.get(x)&&this.listens.get(x).get(R))===e&&(this.log_("listen response",S),h!=="ok"&&this.removeListen_(x,R),e.onComplete&&e.onComplete(h,t))})}static warnOnListenWarnings_(e,d){if(e&&typeof e=="object"&&oi(e,"w")){const x=An(e,"w");if(Array.isArray(x)&&~x.indexOf("no_index")){const R='".indexOn": "'+d._queryParams.getIndex().toString()+'"',I=d._path.toString();Se(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${R} at ${I} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||am(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=gf)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,d=rm(e)?"auth":"gauth",x={cred:e};this.authOverride_===null?x.noauth=!0:typeof this.authOverride_=="object"&&(x.authvar=this.authOverride_),this.sendRequest(d,x,R=>{const I=R.s,f=R.d||"error";this.authToken_===e&&(I==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(I,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const d=e.s,x=e.d||"error";d==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(d,x)})}unlisten(e,d){const x=e._path.toString(),R=e._queryIdentifier;this.log_("Unlisten called for "+x+" "+R),at(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(x,R)&&this.connected_&&this.sendUnlisten_(x,R,e._queryObject,d)}sendUnlisten_(e,d,x,R){this.log_("Unlisten on "+e+" for "+d);const I={p:e},f="n";R&&(I.q=x,I.t=R),this.sendRequest(f,I)}onDisconnectPut(e,d,x){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,d,x):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:d,onComplete:x})}onDisconnectMerge(e,d,x){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,d,x):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:d,onComplete:x})}onDisconnectCancel(e,d){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,d):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:d})}sendOnDisconnect_(e,d,x,R){const I={p:d,d:x};this.log_("onDisconnect "+e,I),this.sendRequest(e,I,f=>{R&&setTimeout(()=>{R(f.s,f.d)},Math.floor(0))})}put(e,d,x,R){this.putInternal("p",e,d,x,R)}merge(e,d,x,R){this.putInternal("m",e,d,x,R)}putInternal(e,d,x,R,I){this.initConnection_();const f={p:d,d:x};I!==void 0&&(f.h=I),this.outstandingPuts_.push({action:e,request:f,onComplete:R}),this.outstandingPutCount_++;const S=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(S):this.log_("Buffering put: "+d)}sendPut_(e){const d=this.outstandingPuts_[e].action,x=this.outstandingPuts_[e].request,R=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(d,x,I=>{this.log_(d+" response",I),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),R&&R(I.s,I.d)})}reportStats(e){if(this.connected_){const d={c:e};this.log_("reportStats",d),this.sendRequest("s",d,x=>{if(x.s!=="ok"){const I=x.d;this.log_("reportStats","Error sending stats: "+I)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ae(e));const d=e.r,x=this.requestCBHash_[d];x&&(delete this.requestCBHash_[d],x(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,d){this.log_("handleServerMessage",e,d),e==="d"?this.onDataUpdate_(d.p,d.d,!1,d.t):e==="m"?this.onDataUpdate_(d.p,d.d,!0,d.t):e==="c"?this.onListenRevoked_(d.p,d.q):e==="ac"?this.onAuthRevoked_(d.s,d.d):e==="apc"?this.onAppCheckRevoked_(d.s,d.d):e==="sd"?this.onSecurityDebugPacket_(d):Jo("Unrecognized action received from server: "+ae(e)+`
Are you using the latest client?`)}onReady_(e,d){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=d,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){at(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=jn,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=jn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>CE&&(this.reconnectDelay_=jn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let d=Math.max(0,this.reconnectDelay_-e);d=Math.random()*d,this.log_("Trying to reconnect in "+d+"ms"),this.scheduleConnect_(d),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*SE)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),d=this.onReady_.bind(this),x=this.onRealtimeDisconnect_.bind(this),R=this.id+":"+qe.nextConnectionId_++,I=this.lastSessionId;let f=!1,S=null;const t=function(){S?S.close():(f=!0,x())},h=function(o){at(S,"sendRequest call when we're not connected not allowed."),S.sendRequest(o)};this.realtime_={close:t,sendRequest:h};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,a]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);f?ce("getToken() completed but was canceled"):(ce("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=a&&a.token,S=new gE(R,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,d,x,r=>{Se(r+" ("+this.repoInfo_.toString()+")"),this.interrupt(AE)},I))}catch(o){this.log_("Failed to get token: "+o),f||(this.repoInfo_.nodeAdmin&&Se(o),t())}}}interrupt(e){ce("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ce("Resuming connection for reason: "+e),delete this.interruptReasons_[e],mo(this.interruptReasons_)&&(this.reconnectDelay_=jn,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const d=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:d})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const d=this.outstandingPuts_[e];d&&"h"in d.request&&d.queued&&(d.onComplete&&d.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,d){let x;d?x=d.map(I=>ml(I)).join("$"):x="default";const R=this.removeListen_(e,x);R&&R.onComplete&&R.onComplete("permission_denied")}removeListen_(e,d){const x=new zt(e).toString();let R;if(this.listens.has(x)){const I=this.listens.get(x);R=I.get(d),I.delete(d),I.size===0&&this.listens.delete(x)}else R=void 0;return R}onAuthRevoked_(e,d){ce("Auth token revoked: "+e+"/"+d),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=mf&&(this.reconnectDelay_=gf,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,d){ce("App check token revoked: "+e+"/"+d),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=mf&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const d of e.values())this.sendListen_(d);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let d="js";e["sdk."+d+"."+bv.replace(/\./g,"-")]=1,fh()?e["framework.cordova"]=1:ld()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Qr.getInstance().currentlyOnline();return mo(this.interruptReasons_)&&e}}qe.nextPersistentConnectionId_=0;qe.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,d){this.name=e,this.node=d}static Wrap(e,d){return new Mt(e,d)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,d){const x=new Mt(Dn,e),R=new Mt(Dn,d);return this.compare(x,R)!==0}minPost(){return Mt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vr;class vp extends Na{static get __EMPTY_NODE(){return vr}static set __EMPTY_NODE(e){vr=e}compare(e,d){return Hn(e.name,d.name)}isDefinedOn(e){throw Bn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,d){return!1}minPost(){return Mt.MIN}maxPost(){return new Mt(ji,vr)}makePost(e,d){return at(typeof e=="string","KeyIndex indexValue must always be a string."),new Mt(e,vr)}toString(){return".key"}}const En=new vp;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,d,x,R,I=null){this.isReverse_=R,this.resultGenerator_=I,this.nodeStack_=[];let f=1;for(;!e.isEmpty();)if(e=e,f=d?x(e.key,d):1,R&&(f*=-1),f<0)this.isReverse_?e=e.left:e=e.right;else if(f===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),d;if(this.resultGenerator_?d=this.resultGenerator_(e.key,e.value):d={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return d}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class _t{constructor(e,d,x,R,I){this.key=e,this.value=d,this.color=x??_t.RED,this.left=R??Te.EMPTY_NODE,this.right=I??Te.EMPTY_NODE}copy(e,d,x,R,I){return new _t(e??this.key,d??this.value,x??this.color,R??this.left,I??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,d,x){let R=this;const I=x(e,R.key);return I<0?R=R.copy(null,null,null,R.left.insert(e,d,x),null):I===0?R=R.copy(null,d,null,null,null):R=R.copy(null,null,null,null,R.right.insert(e,d,x)),R.fixUp_()}removeMin_(){if(this.left.isEmpty())return Te.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,d){let x,R;if(x=this,d(e,x.key)<0)!x.left.isEmpty()&&!x.left.isRed_()&&!x.left.left.isRed_()&&(x=x.moveRedLeft_()),x=x.copy(null,null,null,x.left.remove(e,d),null);else{if(x.left.isRed_()&&(x=x.rotateRight_()),!x.right.isEmpty()&&!x.right.isRed_()&&!x.right.left.isRed_()&&(x=x.moveRedRight_()),d(e,x.key)===0){if(x.right.isEmpty())return Te.EMPTY_NODE;R=x.right.min_(),x=x.copy(R.key,R.value,null,null,x.right.removeMin_())}x=x.copy(null,null,null,null,x.right.remove(e,d))}return x.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),d=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,d)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}_t.RED=!0;_t.BLACK=!1;class PE{copy(e,d,x,R,I){return this}insert(e,d,x){return new _t(e,d,null)}remove(e,d){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Te{constructor(e,d=Te.EMPTY_NODE){this.comparator_=e,this.root_=d}insert(e,d){return new Te(this.comparator_,this.root_.insert(e,d,this.comparator_).copy(null,null,_t.BLACK,null,null))}remove(e){return new Te(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,_t.BLACK,null,null))}get(e){let d,x=this.root_;for(;!x.isEmpty();){if(d=this.comparator_(e,x.key),d===0)return x.value;d<0?x=x.left:d>0&&(x=x.right)}return null}getPredecessorKey(e){let d,x=this.root_,R=null;for(;!x.isEmpty();)if(d=this.comparator_(e,x.key),d===0){if(x.left.isEmpty())return R?R.key:null;for(x=x.left;!x.right.isEmpty();)x=x.right;return x.key}else d<0?x=x.left:d>0&&(R=x,x=x.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new pr(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,d){return new pr(this.root_,e,this.comparator_,!1,d)}getReverseIteratorFrom(e,d){return new pr(this.root_,e,this.comparator_,!0,d)}getReverseIterator(e){return new pr(this.root_,null,this.comparator_,!0,e)}}Te.EMPTY_NODE=new PE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(p,e){return Hn(p.name,e.name)}function Sl(p,e){return Hn(p,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jo;function ME(p){jo=p}const pp=function(p){return typeof p=="number"?"number:"+Hv(p):"string:"+p},gp=function(p){if(p.isLeafNode()){const e=p.val();at(typeof e=="string"||typeof e=="number"||typeof e=="object"&&oi(e,".sv"),"Priority must be a string or number.")}else at(p===jo||p.isEmpty(),"priority of unexpected type.");at(p===jo||p.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yf;class jt{constructor(e,d=jt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=d,this.lazyHash_=null,at(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),gp(this.priorityNode_)}static set __childrenNodeConstructor(e){yf=e}static get __childrenNodeConstructor(){return yf}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new jt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:jt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Pt(e)?this:Ct(e)===".priority"?this.priorityNode_:jt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,d){return null}updateImmediateChild(e,d){return e===".priority"?this.updatePriority(d):d.isEmpty()&&e!==".priority"?this:jt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,d).updatePriority(this.priorityNode_)}updateChild(e,d){const x=Ct(e);return x===null?d:d.isEmpty()&&x!==".priority"?this:(at(x!==".priority"||Ri(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(x,jt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Vt(e),d)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,d){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+pp(this.priorityNode_.val())+":");const d=typeof this.value_;e+=d+":",d==="number"?e+=Hv(this.value_):e+=this.value_,this.lazyHash_=Xv(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===jt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof jt.__childrenNodeConstructor?-1:(at(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const d=typeof e.value_,x=typeof this.value_,R=jt.VALUE_TYPE_ORDER.indexOf(d),I=jt.VALUE_TYPE_ORDER.indexOf(x);return at(R>=0,"Unknown leaf type: "+d),at(I>=0,"Unknown leaf type: "+x),R===I?x==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:I-R}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const d=e;return this.value_===d.value_&&this.priorityNode_.equals(d.priorityNode_)}else return!1}}jt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mp,yp;function IE(p){mp=p}function wE(p){yp=p}class FE extends Na{compare(e,d){const x=e.node.getPriority(),R=d.node.getPriority(),I=x.compareTo(R);return I===0?Hn(e.name,d.name):I}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,d){return!e.getPriority().equals(d.getPriority())}minPost(){return Mt.MIN}maxPost(){return new Mt(ji,new jt("[PRIORITY-POST]",yp))}makePost(e,d){const x=mp(e);return new Mt(d,new jt("[PRIORITY-POST]",x))}toString(){return".priority"}}const ve=new FE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=Math.log(2);class OE{constructor(e){const d=I=>parseInt(Math.log(I)/LE,10),x=I=>parseInt(Array(I+1).join("1"),2);this.count=d(e+1),this.current_=this.count-1;const R=x(this.count);this.bits_=e+1&R}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const $r=function(p,e,d,x){p.sort(e);const R=function(t,h){const m=h-t;let o,a;if(m===0)return null;if(m===1)return o=p[t],a=d?d(o):o,new _t(a,o.node,_t.BLACK,null,null);{const r=parseInt(m/2,10)+t,i=R(t,r),n=R(r+1,h);return o=p[r],a=d?d(o):o,new _t(a,o.node,_t.BLACK,i,n)}},I=function(t){let h=null,m=null,o=p.length;const a=function(i,n){const u=o-i,s=o;o-=i;const l=R(u+1,s),v=p[u],c=d?d(v):v;r(new _t(c,v.node,n,null,l))},r=function(i){h?(h.left=i,h=i):(m=i,h=i)};for(let i=0;i<t.count;++i){const n=t.nextBitIsOne(),u=Math.pow(2,t.count-(i+1));n?a(u,_t.BLACK):(a(u,_t.BLACK),a(u,_t.RED))}return m},f=new OE(p.length),S=I(f);return new Te(x||e,S)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uo;const ln={};class ke{constructor(e,d){this.indexes_=e,this.indexSet_=d}static get Default(){return at(ln&&ve,"ChildrenNode.ts has not been loaded"),uo=uo||new ke({".priority":ln},{".priority":ve}),uo}get(e){const d=An(this.indexes_,e);if(!d)throw new Error("No index defined for "+e);return d instanceof Te?d:null}hasIndex(e){return oi(this.indexSet_,e.toString())}addIndex(e,d){at(e!==En,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const x=[];let R=!1;const I=d.getIterator(Mt.Wrap);let f=I.getNext();for(;f;)R=R||e.isDefinedOn(f.node),x.push(f),f=I.getNext();let S;R?S=$r(x,e.getCompare()):S=ln;const t=e.toString(),h=Object.assign({},this.indexSet_);h[t]=e;const m=Object.assign({},this.indexes_);return m[t]=S,new ke(m,h)}addToIndexes(e,d){const x=Mr(this.indexes_,(R,I)=>{const f=An(this.indexSet_,I);if(at(f,"Missing index implementation for "+I),R===ln)if(f.isDefinedOn(e.node)){const S=[],t=d.getIterator(Mt.Wrap);let h=t.getNext();for(;h;)h.name!==e.name&&S.push(h),h=t.getNext();return S.push(e),$r(S,f.getCompare())}else return ln;else{const S=d.get(e.name);let t=R;return S&&(t=t.remove(new Mt(e.name,S))),t.insert(e,e.node)}});return new ke(x,this.indexSet_)}removeFromIndexes(e,d){const x=Mr(this.indexes_,R=>{if(R===ln)return R;{const I=d.get(e.name);return I?R.remove(new Mt(e.name,I)):R}});return new ke(x,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qn;class Ft{constructor(e,d,x){this.children_=e,this.priorityNode_=d,this.indexMap_=x,this.lazyHash_=null,this.priorityNode_&&gp(this.priorityNode_),this.children_.isEmpty()&&at(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return qn||(qn=new Ft(new Te(Sl),null,ke.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||qn}updatePriority(e){return this.children_.isEmpty()?this:new Ft(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const d=this.children_.get(e);return d===null?qn:d}}getChild(e){const d=Ct(e);return d===null?this:this.getImmediateChild(d).getChild(Vt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,d){if(at(d,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(d);{const x=new Mt(e,d);let R,I;d.isEmpty()?(R=this.children_.remove(e),I=this.indexMap_.removeFromIndexes(x,this.children_)):(R=this.children_.insert(e,d),I=this.indexMap_.addToIndexes(x,this.children_));const f=R.isEmpty()?qn:this.priorityNode_;return new Ft(R,f,I)}}updateChild(e,d){const x=Ct(e);if(x===null)return d;{at(Ct(e)!==".priority"||Ri(e)===1,".priority must be the last token in a path");const R=this.getImmediateChild(x).updateChild(Vt(e),d);return this.updateImmediateChild(x,R)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const d={};let x=0,R=0,I=!0;if(this.forEachChild(ve,(f,S)=>{d[f]=S.val(e),x++,I&&Ft.INTEGER_REGEXP_.test(f)?R=Math.max(R,Number(f)):I=!1}),!e&&I&&R<2*x){const f=[];for(const S in d)f[S]=d[S];return f}else return e&&!this.getPriority().isEmpty()&&(d[".priority"]=this.getPriority().val()),d}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+pp(this.getPriority().val())+":"),this.forEachChild(ve,(d,x)=>{const R=x.hash();R!==""&&(e+=":"+d+":"+R)}),this.lazyHash_=e===""?"":Xv(e)}return this.lazyHash_}getPredecessorChildName(e,d,x){const R=this.resolveIndex_(x);if(R){const I=R.getPredecessorKey(new Mt(e,d));return I?I.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const d=this.resolveIndex_(e);if(d){const x=d.minKey();return x&&x.name}else return this.children_.minKey()}getFirstChild(e){const d=this.getFirstChildName(e);return d?new Mt(d,this.children_.get(d)):null}getLastChildName(e){const d=this.resolveIndex_(e);if(d){const x=d.maxKey();return x&&x.name}else return this.children_.maxKey()}getLastChild(e){const d=this.getLastChildName(e);return d?new Mt(d,this.children_.get(d)):null}forEachChild(e,d){const x=this.resolveIndex_(e);return x?x.inorderTraversal(R=>d(R.name,R.node)):this.children_.inorderTraversal(d)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,d){const x=this.resolveIndex_(d);if(x)return x.getIteratorFrom(e,R=>R);{const R=this.children_.getIteratorFrom(e.name,Mt.Wrap);let I=R.peek();for(;I!=null&&d.compare(I,e)<0;)R.getNext(),I=R.peek();return R}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,d){const x=this.resolveIndex_(d);if(x)return x.getReverseIteratorFrom(e,R=>R);{const R=this.children_.getReverseIteratorFrom(e.name,Mt.Wrap);let I=R.peek();for(;I!=null&&d.compare(I,e)>0;)R.getNext(),I=R.peek();return R}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===tr?-1:0}withIndex(e){if(e===En||this.indexMap_.hasIndex(e))return this;{const d=this.indexMap_.addIndex(e,this.children_);return new Ft(this.children_,this.priorityNode_,d)}}isIndexed(e){return e===En||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const d=e;if(this.getPriority().equals(d.getPriority()))if(this.children_.count()===d.children_.count()){const x=this.getIterator(ve),R=d.getIterator(ve);let I=x.getNext(),f=R.getNext();for(;I&&f;){if(I.name!==f.name||!I.node.equals(f.node))return!1;I=x.getNext(),f=R.getNext()}return I===null&&f===null}else return!1;else return!1}}resolveIndex_(e){return e===En?null:this.indexMap_.get(e.toString())}}Ft.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class DE extends Ft{constructor(){super(new Te(Sl),Ft.EMPTY_NODE,ke.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ft.EMPTY_NODE}isEmpty(){return!1}}const tr=new DE;Object.defineProperties(Mt,{MIN:{value:new Mt(Dn,Ft.EMPTY_NODE)},MAX:{value:new Mt(ji,tr)}});vp.__EMPTY_NODE=Ft.EMPTY_NODE;jt.__childrenNodeConstructor=Ft;ME(tr);wE(tr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=!0;function re(p,e=null){if(p===null)return Ft.EMPTY_NODE;if(typeof p=="object"&&".priority"in p&&(e=p[".priority"]),at(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof p=="object"&&".value"in p&&p[".value"]!==null&&(p=p[".value"]),typeof p!="object"||".sv"in p){const d=p;return new jt(d,re(e))}if(!(p instanceof Array)&&NE){const d=[];let x=!1;if(Ie(p,(f,S)=>{if(f.substring(0,1)!=="."){const t=re(S);t.isEmpty()||(x=x||!t.getPriority().isEmpty(),d.push(new Mt(f,t)))}}),d.length===0)return Ft.EMPTY_NODE;const I=$r(d,RE,f=>f.name,Sl);if(x){const f=$r(d,ve.getCompare());return new Ft(I,re(e),new ke({".priority":f},{".priority":ve}))}else return new Ft(I,re(e),ke.Default)}else{let d=Ft.EMPTY_NODE;return Ie(p,(x,R)=>{if(oi(p,x)&&x.substring(0,1)!=="."){const I=re(R);(I.isLeafNode()||!I.isEmpty())&&(d=d.updateImmediateChild(x,I))}}),d.updatePriority(re(e))}}IE(re);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE extends Na{constructor(e){super(),this.indexPath_=e,at(!Pt(e)&&Ct(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,d){const x=this.extractChild(e.node),R=this.extractChild(d.node),I=x.compareTo(R);return I===0?Hn(e.name,d.name):I}makePost(e,d){const x=re(e),R=Ft.EMPTY_NODE.updateChild(this.indexPath_,x);return new Mt(d,R)}maxPost(){const e=Ft.EMPTY_NODE.updateChild(this.indexPath_,tr);return new Mt(ji,e)}toString(){return up(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE extends Na{compare(e,d){const x=e.node.compareTo(d.node);return x===0?Hn(e.name,d.name):x}isDefinedOn(e){return!0}indexedValueChanged(e,d){return!e.equals(d)}minPost(){return Mt.MIN}maxPost(){return Mt.MAX}makePost(e,d){const x=re(e);return new Mt(d,x)}toString(){return".value"}}const GE=new VE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(p){return{type:"value",snapshotNode:p}}function bE(p,e){return{type:"child_added",snapshotNode:e,childName:p}}function zE(p,e){return{type:"child_removed",snapshotNode:e,childName:p}}function xf(p,e,d){return{type:"child_changed",snapshotNode:e,childName:p,oldSnap:d}}function XE(p,e){return{type:"child_moved",snapshotNode:e,childName:p}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ve}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return at(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return at(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Dn}hasEnd(){return this.endSet_}getIndexEndValue(){return at(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return at(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ji}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return at(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ve}copy(){const e=new Cl;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Tf(p){const e={};if(p.isDefault())return e;let d;if(p.index_===ve?d="$priority":p.index_===GE?d="$value":p.index_===En?d="$key":(at(p.index_ instanceof BE,"Unrecognized index type!"),d=p.index_.toString()),e.orderBy=ae(d),p.startSet_){const x=p.startAfterSet_?"startAfter":"startAt";e[x]=ae(p.indexStartValue_),p.startNameSet_&&(e[x]+=","+ae(p.indexStartName_))}if(p.endSet_){const x=p.endBeforeSet_?"endBefore":"endAt";e[x]=ae(p.indexEndValue_),p.endNameSet_&&(e[x]+=","+ae(p.indexEndName_))}return p.limitSet_&&(p.isViewFromLeft()?e.limitToFirst=p.limit_:e.limitToLast=p.limit_),e}function Ef(p){const e={};if(p.startSet_&&(e.sp=p.indexStartValue_,p.startNameSet_&&(e.sn=p.indexStartName_),e.sin=!p.startAfterSet_),p.endSet_&&(e.ep=p.indexEndValue_,p.endNameSet_&&(e.en=p.indexEndName_),e.ein=!p.endBeforeSet_),p.limitSet_){e.l=p.limit_;let d=p.viewFrom_;d===""&&(p.isViewFromLeft()?d="l":d="r"),e.vf=d}return p.index_!==ve&&(e.i=p.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends op{constructor(e,d,x,R){super(),this.repoInfo_=e,this.onDataUpdate_=d,this.authTokenProvider_=x,this.appCheckTokenProvider_=R,this.log_=_s("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,d){return d!==void 0?"tag$"+d:(at(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,d,x,R){const I=e._path.toString();this.log_("Listen called for "+I+" "+e._queryIdentifier);const f=kr.getListenId_(e,x),S={};this.listens_[f]=S;const t=Tf(e._queryParams);this.restRequest_(I+".json",t,(h,m)=>{let o=m;if(h===404&&(o=null,h=null),h===null&&this.onDataUpdate_(I,o,!1,x),An(this.listens_,f)===S){let a;h?h===401?a="permission_denied":a="rest_error:"+h:a="ok",R(a,null)}})}unlisten(e,d){const x=kr.getListenId_(e,d);delete this.listens_[x]}get(e){const d=Tf(e._queryParams),x=e._path.toString(),R=new sa;return this.restRequest_(x+".json",d,(I,f)=>{let S=f;I===404&&(S=null,I=null),I===null?(this.onDataUpdate_(x,S,!1,null),R.resolve(S)):R.reject(new Error(S))}),R.promise}refreshAuthToken(e){}restRequest_(e,d={},x){return d.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([R,I])=>{R&&R.accessToken&&(d.auth=R.accessToken),I&&I.token&&(d.ac=I.token);const f=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Vn(d);this.log_("Sending REST request for "+f);const S=new XMLHttpRequest;S.onreadystatechange=()=>{if(x&&S.readyState===4){this.log_("REST Response for "+f+" received. status:",S.status,"response:",S.responseText);let t=null;if(S.status>=200&&S.status<300){try{t=vs(S.responseText)}catch{Se("Failed to parse JSON response for "+f+": "+S.responseText)}x(null,t)}else S.status!==401&&S.status!==404&&Se("Got unsuccessful REST response for "+f+" Status: "+S.status),x(S.status);x=null}},S.open("GET",f,!0),S.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(){this.rootNode_=Ft.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,d){this.rootNode_=this.rootNode_.updateChild(e,d)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(){return{value:null,children:new Map}}function xp(p,e,d){if(Pt(e))p.value=d,p.children.clear();else if(p.value!==null)p.value=p.value.updateChild(e,d);else{const x=Ct(e);p.children.has(x)||p.children.set(x,Jr());const R=p.children.get(x);e=Vt(e),xp(R,e,d)}}function qo(p,e,d){p.value!==null?d(e,p.value):YE(p,(x,R)=>{const I=new zt(e.toString()+"/"+x);qo(R,I,d)})}function YE(p,e){p.children.forEach((d,x)=>{e(x,d)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),d=Object.assign({},e);return this.last_&&Ie(this.last_,(x,R)=>{d[x]=d[x]-R}),this.last_=e,d}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=10*1e3,KE=30*1e3,QE=5*60*1e3;class $E{constructor(e,d){this.server_=d,this.statsToReport_={},this.statsListener_=new HE(e);const x=Sf+(KE-Sf)*Math.random();us(this.reportStats_.bind(this),Math.floor(x))}reportStats_(){const e=this.statsListener_.get(),d={};let x=!1;Ie(e,(R,I)=>{I>0&&oi(this.statsToReport_,R)&&(d[R]=I,x=!0)}),x&&this.server_.reportStats(d),us(this.reportStats_.bind(this),Math.floor(Math.random()*2*QE))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(p){p[p.OVERWRITE=0]="OVERWRITE",p[p.MERGE=1]="MERGE",p[p.ACK_USER_WRITE=2]="ACK_USER_WRITE",p[p.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ue||(Ue={}));function Tp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ep(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Sp(p){return{fromUser:!1,fromServer:!0,queryId:p,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,d,x){this.path=e,this.affectedTree=d,this.revert=x,this.type=Ue.ACK_USER_WRITE,this.source=Tp()}operationForChild(e){if(Pt(this.path)){if(this.affectedTree.value!=null)return at(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const d=this.affectedTree.subtree(new zt(e));return new Zr(Ot(),d,this.revert)}}else return at(Ct(this.path)===e,"operationForChild called for unrelated child."),new Zr(Vt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,d,x){this.source=e,this.path=d,this.snap=x,this.type=Ue.OVERWRITE}operationForChild(e){return Pt(this.path)?new qi(this.source,Ot(),this.snap.getImmediateChild(e)):new qi(this.source,Vt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,d,x){this.source=e,this.path=d,this.children=x,this.type=Ue.MERGE}operationForChild(e){if(Pt(this.path)){const d=this.children.subtree(new zt(e));return d.isEmpty()?null:d.value?new qi(this.source,Ot(),d.value):new Os(this.source,Ot(),d)}else return at(Ct(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Os(this.source,Vt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,d,x){this.node_=e,this.fullyInitialized_=d,this.filtered_=x}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Pt(e))return this.isFullyInitialized()&&!this.filtered_;const d=Ct(e);return this.isCompleteForChild(d)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function kE(p,e,d,x){const R=[],I=[];return e.forEach(f=>{f.type==="child_changed"&&p.index_.indexedValueChanged(f.oldSnap,f.snapshotNode)&&I.push(XE(f.childName,f.snapshotNode))}),_n(p,R,"child_removed",e,x,d),_n(p,R,"child_added",e,x,d),_n(p,R,"child_moved",I,x,d),_n(p,R,"child_changed",e,x,d),_n(p,R,"value",e,x,d),R}function _n(p,e,d,x,R,I){const f=x.filter(S=>S.type===d);f.sort((S,t)=>ZE(p,S,t)),f.forEach(S=>{const t=JE(p,S,I);R.forEach(h=>{h.respondsTo(S.type)&&e.push(h.createEvent(t,p.query_))})})}function JE(p,e,d){return e.type==="value"||e.type==="child_removed"||(e.prevName=d.getPredecessorChildName(e.childName,e.snapshotNode,p.index_)),e}function ZE(p,e,d){if(e.childName==null||d.childName==null)throw Bn("Should only compare child_ events.");const x=new Mt(e.childName,e.snapshotNode),R=new Mt(d.childName,d.snapshotNode);return p.index_.compare(x,R)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(p,e){return{eventCache:p,serverCache:e}}function fs(p,e,d,x){return Cp(new Al(e,d,x),p.serverCache)}function Ap(p,e,d,x){return Cp(p.eventCache,new Al(e,d,x))}function _o(p){return p.eventCache.isFullyInitialized()?p.eventCache.getNode():null}function _i(p){return p.serverCache.isFullyInitialized()?p.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo;const jE=()=>(fo||(fo=new Te(G1)),fo);class Bt{constructor(e,d=jE()){this.value=e,this.children=d}static fromObject(e){let d=new Bt(null);return Ie(e,(x,R)=>{d=d.set(new zt(x),R)}),d}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,d){if(this.value!=null&&d(this.value))return{path:Ot(),value:this.value};if(Pt(e))return null;{const x=Ct(e),R=this.children.get(x);if(R!==null){const I=R.findRootMostMatchingPathAndValue(Vt(e),d);return I!=null?{path:kt(new zt(x),I.path),value:I.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Pt(e))return this;{const d=Ct(e),x=this.children.get(d);return x!==null?x.subtree(Vt(e)):new Bt(null)}}set(e,d){if(Pt(e))return new Bt(d,this.children);{const x=Ct(e),I=(this.children.get(x)||new Bt(null)).set(Vt(e),d),f=this.children.insert(x,I);return new Bt(this.value,f)}}remove(e){if(Pt(e))return this.children.isEmpty()?new Bt(null):new Bt(null,this.children);{const d=Ct(e),x=this.children.get(d);if(x){const R=x.remove(Vt(e));let I;return R.isEmpty()?I=this.children.remove(d):I=this.children.insert(d,R),this.value===null&&I.isEmpty()?new Bt(null):new Bt(this.value,I)}else return this}}get(e){if(Pt(e))return this.value;{const d=Ct(e),x=this.children.get(d);return x?x.get(Vt(e)):null}}setTree(e,d){if(Pt(e))return d;{const x=Ct(e),I=(this.children.get(x)||new Bt(null)).setTree(Vt(e),d);let f;return I.isEmpty()?f=this.children.remove(x):f=this.children.insert(x,I),new Bt(this.value,f)}}fold(e){return this.fold_(Ot(),e)}fold_(e,d){const x={};return this.children.inorderTraversal((R,I)=>{x[R]=I.fold_(kt(e,R),d)}),d(e,this.value,x)}findOnPath(e,d){return this.findOnPath_(e,Ot(),d)}findOnPath_(e,d,x){const R=this.value?x(d,this.value):!1;if(R)return R;if(Pt(e))return null;{const I=Ct(e),f=this.children.get(I);return f?f.findOnPath_(Vt(e),kt(d,I),x):null}}foreachOnPath(e,d){return this.foreachOnPath_(e,Ot(),d)}foreachOnPath_(e,d,x){if(Pt(e))return this;{this.value&&x(d,this.value);const R=Ct(e),I=this.children.get(R);return I?I.foreachOnPath_(Vt(e),kt(d,R),x):new Bt(null)}}foreach(e){this.foreach_(Ot(),e)}foreach_(e,d){this.children.inorderTraversal((x,R)=>{R.foreach_(kt(e,x),d)}),this.value&&d(e,this.value)}foreachChild(e){this.children.inorderTraversal((d,x)=>{x.value&&e(d,x.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.writeTree_=e}static empty(){return new Oe(new Bt(null))}}function ds(p,e,d){if(Pt(e))return new Oe(new Bt(d));{const x=p.writeTree_.findRootMostValueAndPath(e);if(x!=null){const R=x.path;let I=x.value;const f=Me(R,e);return I=I.updateChild(f,d),new Oe(p.writeTree_.set(R,I))}else{const R=new Bt(d),I=p.writeTree_.setTree(e,R);return new Oe(I)}}}function Cf(p,e,d){let x=p;return Ie(d,(R,I)=>{x=ds(x,kt(e,R),I)}),x}function Af(p,e){if(Pt(e))return Oe.empty();{const d=p.writeTree_.setTree(e,new Bt(null));return new Oe(d)}}function th(p,e){return an(p,e)!=null}function an(p,e){const d=p.writeTree_.findRootMostValueAndPath(e);return d!=null?p.writeTree_.get(d.path).getChild(Me(d.path,e)):null}function Pf(p){const e=[],d=p.writeTree_.value;return d!=null?d.isLeafNode()||d.forEachChild(ve,(x,R)=>{e.push(new Mt(x,R))}):p.writeTree_.children.inorderTraversal((x,R)=>{R.value!=null&&e.push(new Mt(x,R.value))}),e}function Ti(p,e){if(Pt(e))return p;{const d=an(p,e);return d!=null?new Oe(new Bt(d)):new Oe(p.writeTree_.subtree(e))}}function eh(p){return p.writeTree_.isEmpty()}function Nn(p,e){return Pp(Ot(),p.writeTree_,e)}function Pp(p,e,d){if(e.value!=null)return d.updateChild(p,e.value);{let x=null;return e.children.inorderTraversal((R,I)=>{R===".priority"?(at(I.value!==null,"Priority writes must always be leaf nodes"),x=I.value):d=Pp(kt(p,R),I,d)}),!d.getChild(p).isEmpty()&&x!==null&&(d=d.updateChild(kt(p,".priority"),x)),d}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(p,e){return Lp(e,p)}function qE(p,e,d,x,R){at(x>p.lastWriteId,"Stacking an older write on top of newer ones"),R===void 0&&(R=!0),p.allWrites.push({path:e,snap:d,writeId:x,visible:R}),R&&(p.visibleWrites=ds(p.visibleWrites,e,d)),p.lastWriteId=x}function _E(p,e){for(let d=0;d<p.allWrites.length;d++){const x=p.allWrites[d];if(x.writeId===e)return x}return null}function tS(p,e){const d=p.allWrites.findIndex(S=>S.writeId===e);at(d>=0,"removeWrite called with nonexistent writeId.");const x=p.allWrites[d];p.allWrites.splice(d,1);let R=x.visible,I=!1,f=p.allWrites.length-1;for(;R&&f>=0;){const S=p.allWrites[f];S.visible&&(f>=d&&eS(S,x.path)?R=!1:Le(x.path,S.path)&&(I=!0)),f--}if(R){if(I)return iS(p),!0;if(x.snap)p.visibleWrites=Af(p.visibleWrites,x.path);else{const S=x.children;Ie(S,t=>{p.visibleWrites=Af(p.visibleWrites,kt(x.path,t))})}return!0}else return!1}function eS(p,e){if(p.snap)return Le(p.path,e);for(const d in p.children)if(p.children.hasOwnProperty(d)&&Le(kt(p.path,d),e))return!0;return!1}function iS(p){p.visibleWrites=Mp(p.allWrites,nS,Ot()),p.allWrites.length>0?p.lastWriteId=p.allWrites[p.allWrites.length-1].writeId:p.lastWriteId=-1}function nS(p){return p.visible}function Mp(p,e,d){let x=Oe.empty();for(let R=0;R<p.length;++R){const I=p[R];if(e(I)){const f=I.path;let S;if(I.snap)Le(d,f)?(S=Me(d,f),x=ds(x,S,I.snap)):Le(f,d)&&(S=Me(f,d),x=ds(x,Ot(),I.snap.getChild(S)));else if(I.children){if(Le(d,f))S=Me(d,f),x=Cf(x,S,I.children);else if(Le(f,d))if(S=Me(f,d),Pt(S))x=Cf(x,Ot(),I.children);else{const t=An(I.children,Ct(S));if(t){const h=t.getChild(Vt(S));x=ds(x,Ot(),h)}}}else throw Bn("WriteRecord should have .snap or .children")}}return x}function Ip(p,e,d,x,R){if(!x&&!R){const I=an(p.visibleWrites,e);if(I!=null)return I;{const f=Ti(p.visibleWrites,e);if(eh(f))return d;if(d==null&&!th(f,Ot()))return null;{const S=d||Ft.EMPTY_NODE;return Nn(f,S)}}}else{const I=Ti(p.visibleWrites,e);if(!R&&eh(I))return d;if(!R&&d==null&&!th(I,Ot()))return null;{const f=function(h){return(h.visible||R)&&(!x||!~x.indexOf(h.writeId))&&(Le(h.path,e)||Le(e,h.path))},S=Mp(p.allWrites,f,e),t=d||Ft.EMPTY_NODE;return Nn(S,t)}}}function sS(p,e,d){let x=Ft.EMPTY_NODE;const R=an(p.visibleWrites,e);if(R)return R.isLeafNode()||R.forEachChild(ve,(I,f)=>{x=x.updateImmediateChild(I,f)}),x;if(d){const I=Ti(p.visibleWrites,e);return d.forEachChild(ve,(f,S)=>{const t=Nn(Ti(I,new zt(f)),S);x=x.updateImmediateChild(f,t)}),Pf(I).forEach(f=>{x=x.updateImmediateChild(f.name,f.node)}),x}else{const I=Ti(p.visibleWrites,e);return Pf(I).forEach(f=>{x=x.updateImmediateChild(f.name,f.node)}),x}}function rS(p,e,d,x,R){at(x||R,"Either existingEventSnap or existingServerSnap must exist");const I=kt(e,d);if(th(p.visibleWrites,I))return null;{const f=Ti(p.visibleWrites,I);return eh(f)?R.getChild(d):Nn(f,R.getChild(d))}}function aS(p,e,d,x){const R=kt(e,d),I=an(p.visibleWrites,R);if(I!=null)return I;if(x.isCompleteForChild(d)){const f=Ti(p.visibleWrites,R);return Nn(f,x.getNode().getImmediateChild(d))}else return null}function oS(p,e){return an(p.visibleWrites,e)}function hS(p,e,d,x,R,I,f){let S;const t=Ti(p.visibleWrites,e),h=an(t,Ot());if(h!=null)S=h;else if(d!=null)S=Nn(t,d);else return[];if(S=S.withIndex(f),!S.isEmpty()&&!S.isLeafNode()){const m=[],o=f.getCompare(),a=I?S.getReverseIteratorFrom(x,f):S.getIteratorFrom(x,f);let r=a.getNext();for(;r&&m.length<R;)o(r,x)!==0&&m.push(r),r=a.getNext();return m}else return[]}function lS(){return{visibleWrites:Oe.empty(),allWrites:[],lastWriteId:-1}}function ih(p,e,d,x){return Ip(p.writeTree,p.treePath,e,d,x)}function wp(p,e){return sS(p.writeTree,p.treePath,e)}function Rf(p,e,d,x){return rS(p.writeTree,p.treePath,e,d,x)}function jr(p,e){return oS(p.writeTree,kt(p.treePath,e))}function uS(p,e,d,x,R,I){return hS(p.writeTree,p.treePath,e,d,x,R,I)}function Pl(p,e,d){return aS(p.writeTree,p.treePath,e,d)}function Fp(p,e){return Lp(kt(p.treePath,e),p.writeTree)}function Lp(p,e){return{treePath:p,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(){this.changeMap=new Map}trackChildChange(e){const d=e.type,x=e.childName;at(d==="child_added"||d==="child_changed"||d==="child_removed","Only child changes supported for tracking"),at(x!==".priority","Only non-priority child changes can be tracked.");const R=this.changeMap.get(x);if(R){const I=R.type;if(d==="child_added"&&I==="child_removed")this.changeMap.set(x,xf(x,e.snapshotNode,R.snapshotNode));else if(d==="child_removed"&&I==="child_added")this.changeMap.delete(x);else if(d==="child_removed"&&I==="child_changed")this.changeMap.set(x,zE(x,R.oldSnap));else if(d==="child_changed"&&I==="child_added")this.changeMap.set(x,bE(x,e.snapshotNode));else if(d==="child_changed"&&I==="child_changed")this.changeMap.set(x,xf(x,e.snapshotNode,R.oldSnap));else throw Bn("Illegal combination of changes: "+e+" occurred after "+R)}else this.changeMap.set(x,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{getCompleteChild(e){return null}getChildAfterChild(e,d,x){return null}}const Op=new dS;class Rl{constructor(e,d,x=null){this.writes_=e,this.viewCache_=d,this.optCompleteServerCache_=x}getCompleteChild(e){const d=this.viewCache_.eventCache;if(d.isCompleteForChild(e))return d.getNode().getImmediateChild(e);{const x=this.optCompleteServerCache_!=null?new Al(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Pl(this.writes_,e,x)}}getChildAfterChild(e,d,x){const R=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:_i(this.viewCache_),I=uS(this.writes_,R,d,1,x,e);return I.length===0?null:I[0]}}function cS(p,e){at(e.eventCache.getNode().isIndexed(p.filter.getIndex()),"Event snap not indexed"),at(e.serverCache.getNode().isIndexed(p.filter.getIndex()),"Server snap not indexed")}function vS(p,e,d,x,R){const I=new fS;let f,S;if(d.type===Ue.OVERWRITE){const h=d;h.source.fromUser?f=nh(p,e,h.path,h.snap,x,R,I):(at(h.source.fromServer,"Unknown source."),S=h.source.tagged||e.serverCache.isFiltered()&&!Pt(h.path),f=qr(p,e,h.path,h.snap,x,R,S,I))}else if(d.type===Ue.MERGE){const h=d;h.source.fromUser?f=gS(p,e,h.path,h.children,x,R,I):(at(h.source.fromServer,"Unknown source."),S=h.source.tagged||e.serverCache.isFiltered(),f=sh(p,e,h.path,h.children,x,R,S,I))}else if(d.type===Ue.ACK_USER_WRITE){const h=d;h.revert?f=xS(p,e,h.path,x,R,I):f=mS(p,e,h.path,h.affectedTree,x,R,I)}else if(d.type===Ue.LISTEN_COMPLETE)f=yS(p,e,d.path,x,I);else throw Bn("Unknown operation type: "+d.type);const t=I.getChanges();return pS(e,f,t),{viewCache:f,changes:t}}function pS(p,e,d){const x=e.eventCache;if(x.isFullyInitialized()){const R=x.getNode().isLeafNode()||x.getNode().isEmpty(),I=_o(p);(d.length>0||!p.eventCache.isFullyInitialized()||R&&!x.getNode().equals(I)||!x.getNode().getPriority().equals(I.getPriority()))&&d.push(UE(_o(e)))}}function Dp(p,e,d,x,R,I){const f=e.eventCache;if(jr(x,d)!=null)return e;{let S,t;if(Pt(d))if(at(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const h=_i(e),m=h instanceof Ft?h:Ft.EMPTY_NODE,o=wp(x,m);S=p.filter.updateFullNode(e.eventCache.getNode(),o,I)}else{const h=ih(x,_i(e));S=p.filter.updateFullNode(e.eventCache.getNode(),h,I)}else{const h=Ct(d);if(h===".priority"){at(Ri(d)===1,"Can't have a priority with additional path components");const m=f.getNode();t=e.serverCache.getNode();const o=Rf(x,d,m,t);o!=null?S=p.filter.updatePriority(m,o):S=f.getNode()}else{const m=Vt(d);let o;if(f.isCompleteForChild(h)){t=e.serverCache.getNode();const a=Rf(x,d,f.getNode(),t);a!=null?o=f.getNode().getImmediateChild(h).updateChild(m,a):o=f.getNode().getImmediateChild(h)}else o=Pl(x,h,e.serverCache);o!=null?S=p.filter.updateChild(f.getNode(),h,o,m,R,I):S=f.getNode()}}return fs(e,S,f.isFullyInitialized()||Pt(d),p.filter.filtersNodes())}}function qr(p,e,d,x,R,I,f,S){const t=e.serverCache;let h;const m=f?p.filter:p.filter.getIndexedFilter();if(Pt(d))h=m.updateFullNode(t.getNode(),x,null);else if(m.filtersNodes()&&!t.isFiltered()){const r=t.getNode().updateChild(d,x);h=m.updateFullNode(t.getNode(),r,null)}else{const r=Ct(d);if(!t.isCompleteForPath(d)&&Ri(d)>1)return e;const i=Vt(d),u=t.getNode().getImmediateChild(r).updateChild(i,x);r===".priority"?h=m.updatePriority(t.getNode(),u):h=m.updateChild(t.getNode(),r,u,i,Op,null)}const o=Ap(e,h,t.isFullyInitialized()||Pt(d),m.filtersNodes()),a=new Rl(R,o,I);return Dp(p,o,d,R,a,S)}function nh(p,e,d,x,R,I,f){const S=e.eventCache;let t,h;const m=new Rl(R,e,I);if(Pt(d))h=p.filter.updateFullNode(e.eventCache.getNode(),x,f),t=fs(e,h,!0,p.filter.filtersNodes());else{const o=Ct(d);if(o===".priority")h=p.filter.updatePriority(e.eventCache.getNode(),x),t=fs(e,h,S.isFullyInitialized(),S.isFiltered());else{const a=Vt(d),r=S.getNode().getImmediateChild(o);let i;if(Pt(a))i=x;else{const n=m.getCompleteChild(o);n!=null?lp(a)===".priority"&&n.getChild(fp(a)).isEmpty()?i=n:i=n.updateChild(a,x):i=Ft.EMPTY_NODE}if(r.equals(i))t=e;else{const n=p.filter.updateChild(S.getNode(),o,i,a,m,f);t=fs(e,n,S.isFullyInitialized(),p.filter.filtersNodes())}}}return t}function Mf(p,e){return p.eventCache.isCompleteForChild(e)}function gS(p,e,d,x,R,I,f){let S=e;return x.foreach((t,h)=>{const m=kt(d,t);Mf(e,Ct(m))&&(S=nh(p,S,m,h,R,I,f))}),x.foreach((t,h)=>{const m=kt(d,t);Mf(e,Ct(m))||(S=nh(p,S,m,h,R,I,f))}),S}function If(p,e,d){return d.foreach((x,R)=>{e=e.updateChild(x,R)}),e}function sh(p,e,d,x,R,I,f,S){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let t=e,h;Pt(d)?h=x:h=new Bt(null).setTree(d,x);const m=e.serverCache.getNode();return h.children.inorderTraversal((o,a)=>{if(m.hasChild(o)){const r=e.serverCache.getNode().getImmediateChild(o),i=If(p,r,a);t=qr(p,t,new zt(o),i,R,I,f,S)}}),h.children.inorderTraversal((o,a)=>{const r=!e.serverCache.isCompleteForChild(o)&&a.value===null;if(!m.hasChild(o)&&!r){const i=e.serverCache.getNode().getImmediateChild(o),n=If(p,i,a);t=qr(p,t,new zt(o),n,R,I,f,S)}}),t}function mS(p,e,d,x,R,I,f){if(jr(R,d)!=null)return e;const S=e.serverCache.isFiltered(),t=e.serverCache;if(x.value!=null){if(Pt(d)&&t.isFullyInitialized()||t.isCompleteForPath(d))return qr(p,e,d,t.getNode().getChild(d),R,I,S,f);if(Pt(d)){let h=new Bt(null);return t.getNode().forEachChild(En,(m,o)=>{h=h.set(new zt(m),o)}),sh(p,e,d,h,R,I,S,f)}else return e}else{let h=new Bt(null);return x.foreach((m,o)=>{const a=kt(d,m);t.isCompleteForPath(a)&&(h=h.set(m,t.getNode().getChild(a)))}),sh(p,e,d,h,R,I,S,f)}}function yS(p,e,d,x,R){const I=e.serverCache,f=Ap(e,I.getNode(),I.isFullyInitialized()||Pt(d),I.isFiltered());return Dp(p,f,d,x,Op,R)}function xS(p,e,d,x,R,I){let f;if(jr(x,d)!=null)return e;{const S=new Rl(x,e,R),t=e.eventCache.getNode();let h;if(Pt(d)||Ct(d)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=ih(x,_i(e));else{const o=e.serverCache.getNode();at(o instanceof Ft,"serverChildren would be complete if leaf node"),m=wp(x,o)}m=m,h=p.filter.updateFullNode(t,m,I)}else{const m=Ct(d);let o=Pl(x,m,e.serverCache);o==null&&e.serverCache.isCompleteForChild(m)&&(o=t.getImmediateChild(m)),o!=null?h=p.filter.updateChild(t,m,o,Vt(d),S,I):e.eventCache.getNode().hasChild(m)?h=p.filter.updateChild(t,m,Ft.EMPTY_NODE,Vt(d),S,I):h=t,h.isEmpty()&&e.serverCache.isFullyInitialized()&&(f=ih(x,_i(e)),f.isLeafNode()&&(h=p.filter.updateFullNode(h,f,I)))}return f=e.serverCache.isFullyInitialized()||jr(x,Ot())!=null,fs(e,h,f,p.filter.filtersNodes())}}function TS(p,e){const d=_i(p.viewCache_);return d&&(p.query._queryParams.loadsAllData()||!Pt(e)&&!d.getImmediateChild(Ct(e)).isEmpty())?d.getChild(e):null}function wf(p,e,d,x){e.type===Ue.MERGE&&e.source.queryId!==null&&(at(_i(p.viewCache_),"We should always have a full cache before handling merges"),at(_o(p.viewCache_),"Missing event cache, even though we have a server cache"));const R=p.viewCache_,I=vS(p.processor_,R,e,d,x);return cS(p.processor_,I.viewCache),at(I.viewCache.serverCache.isFullyInitialized()||!R.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),p.viewCache_=I.viewCache,ES(p,I.changes,I.viewCache.eventCache.getNode(),null)}function ES(p,e,d,x){const R=x?[x]:p.eventRegistrations_;return kE(p.eventGenerator_,e,d,R)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff;function SS(p){at(!Ff,"__referenceConstructor has already been defined"),Ff=p}function Ml(p,e,d,x){const R=e.source.queryId;if(R!==null){const I=p.views.get(R);return at(I!=null,"SyncTree gave us an op for an invalid query."),wf(I,e,d,x)}else{let I=[];for(const f of p.views.values())I=I.concat(wf(f,e,d,x));return I}}function Il(p,e){let d=null;for(const x of p.views.values())d=d||TS(x,e);return d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lf;function CS(p){at(!Lf,"__referenceConstructor has already been defined"),Lf=p}class Of{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Bt(null),this.pendingWriteTree_=lS(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Np(p,e,d,x,R){return qE(p.pendingWriteTree_,e,d,x,R),R?Va(p,new qi(Tp(),e,d)):[]}function Wi(p,e,d=!1){const x=_E(p.pendingWriteTree_,e);if(tS(p.pendingWriteTree_,e)){let I=new Bt(null);return x.snap!=null?I=I.set(Ot(),!0):Ie(x.children,f=>{I=I.set(new zt(f),!0)}),Va(p,new Zr(x.path,I,d))}else return[]}function Ba(p,e,d){return Va(p,new qi(Ep(),e,d))}function AS(p,e,d){const x=Bt.fromObject(d);return Va(p,new Os(Ep(),e,x))}function PS(p,e,d,x){const R=Gp(p,x);if(R!=null){const I=Up(R),f=I.path,S=I.queryId,t=Me(f,e),h=new qi(Sp(S),t,d);return bp(p,f,h)}else return[]}function RS(p,e,d,x){const R=Gp(p,x);if(R){const I=Up(R),f=I.path,S=I.queryId,t=Me(f,e),h=Bt.fromObject(d),m=new Os(Sp(S),t,h);return bp(p,f,m)}else return[]}function wl(p,e,d){const R=p.pendingWriteTree_,I=p.syncPointTree_.findOnPath(e,(f,S)=>{const t=Me(f,e),h=Il(S,t);if(h)return h});return Ip(R,e,I,d,!0)}function Va(p,e){return Bp(e,p.syncPointTree_,null,Rp(p.pendingWriteTree_,Ot()))}function Bp(p,e,d,x){if(Pt(p.path))return Vp(p,e,d,x);{const R=e.get(Ot());d==null&&R!=null&&(d=Il(R,Ot()));let I=[];const f=Ct(p.path),S=p.operationForChild(f),t=e.children.get(f);if(t&&S){const h=d?d.getImmediateChild(f):null,m=Fp(x,f);I=I.concat(Bp(S,t,h,m))}return R&&(I=I.concat(Ml(R,p,x,d))),I}}function Vp(p,e,d,x){const R=e.get(Ot());d==null&&R!=null&&(d=Il(R,Ot()));let I=[];return e.children.inorderTraversal((f,S)=>{const t=d?d.getImmediateChild(f):null,h=Fp(x,f),m=p.operationForChild(f);m&&(I=I.concat(Vp(m,S,t,h)))}),R&&(I=I.concat(Ml(R,p,x,d))),I}function Gp(p,e){return p.tagToQueryMap.get(e)}function Up(p){const e=p.indexOf("$");return at(e!==-1&&e<p.length-1,"Bad queryKey."),{queryId:p.substr(e+1),path:new zt(p.substr(0,e))}}function bp(p,e,d){const x=p.syncPointTree_.get(e);at(x,"Missing sync point for query tag that we're tracking");const R=Rp(p.pendingWriteTree_,e);return Ml(x,d,R,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this.node_=e}getImmediateChild(e){const d=this.node_.getImmediateChild(e);return new Fl(d)}node(){return this.node_}}class Ll{constructor(e,d){this.syncTree_=e,this.path_=d}getImmediateChild(e){const d=kt(this.path_,e);return new Ll(this.syncTree_,d)}node(){return wl(this.syncTree_,this.path_)}}const MS=function(p){return p=p||{},p.timestamp=p.timestamp||new Date().getTime(),p},Df=function(p,e,d){if(!p||typeof p!="object")return p;if(at(".sv"in p,"Unexpected leaf node or priority contents"),typeof p[".sv"]=="string")return IS(p[".sv"],e,d);if(typeof p[".sv"]=="object")return wS(p[".sv"],e);at(!1,"Unexpected server value: "+JSON.stringify(p,null,2))},IS=function(p,e,d){switch(p){case"timestamp":return d.timestamp;default:at(!1,"Unexpected server value: "+p)}},wS=function(p,e,d){p.hasOwnProperty("increment")||at(!1,"Unexpected server value: "+JSON.stringify(p,null,2));const x=p.increment;typeof x!="number"&&at(!1,"Unexpected increment value: "+x);const R=e.node();if(at(R!==null&&typeof R<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!R.isLeafNode())return x;const f=R.getValue();return typeof f!="number"?x:f+x},FS=function(p,e,d,x){return Ol(e,new Ll(d,p),x)},zp=function(p,e,d){return Ol(p,new Fl(e),d)};function Ol(p,e,d){const x=p.getPriority().val(),R=Df(x,e.getImmediateChild(".priority"),d);let I;if(p.isLeafNode()){const f=p,S=Df(f.getValue(),e,d);return S!==f.getValue()||R!==f.getPriority().val()?new jt(S,re(R)):p}else{const f=p;return I=f,R!==f.getPriority().val()&&(I=I.updatePriority(new jt(R))),f.forEachChild(ve,(S,t)=>{const h=Ol(t,e.getImmediateChild(S),d);h!==t&&(I=I.updateImmediateChild(S,h))}),I}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e="",d=null,x={children:{},childCount:0}){this.name=e,this.parent=d,this.node=x}}function Nl(p,e){let d=e instanceof zt?e:new zt(e),x=p,R=Ct(d);for(;R!==null;){const I=An(x.node.children,R)||{children:{},childCount:0};x=new Dl(R,x,I),d=Vt(d),R=Ct(d)}return x}function Qn(p){return p.node.value}function Xp(p,e){p.node.value=e,rh(p)}function Wp(p){return p.node.childCount>0}function LS(p){return Qn(p)===void 0&&!Wp(p)}function Ga(p,e){Ie(p.node.children,(d,x)=>{e(new Dl(d,p,x))})}function Yp(p,e,d,x){d&&!x&&e(p),Ga(p,R=>{Yp(R,e,!0,x)}),d&&x&&e(p)}function OS(p,e,d){let x=d?p:p.parent;for(;x!==null;){if(e(x))return!0;x=x.parent}return!1}function er(p){return new zt(p.parent===null?p.name:er(p.parent)+"/"+p.name)}function rh(p){p.parent!==null&&DS(p.parent,p.name,p)}function DS(p,e,d){const x=LS(d),R=oi(p.node.children,e);x&&R?(delete p.node.children[e],p.node.childCount--,rh(p)):!x&&!R&&(p.node.children[e]=d.node,p.node.childCount++,rh(p))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=/[\[\].#$\/\u0000-\u001F\u007F]/,BS=/[\[\].#$\u0000-\u001F\u007F]/,co=10*1024*1024,Hp=function(p){return typeof p=="string"&&p.length!==0&&!NS.test(p)},Kp=function(p){return typeof p=="string"&&p.length!==0&&!BS.test(p)},VS=function(p){return p&&(p=p.replace(/^\/*\.info(\/|$)/,"/")),Kp(p)},GS=function(p,e,d,x){x&&e===void 0||Bl(dh(p,"value"),e,d)},Bl=function(p,e,d){const x=d instanceof zt?new yE(d,p):d;if(e===void 0)throw new Error(p+"contains undefined "+Gi(x));if(typeof e=="function")throw new Error(p+"contains a function "+Gi(x)+" with contents = "+e.toString());if(Wv(e))throw new Error(p+"contains "+e.toString()+" "+Gi(x));if(typeof e=="string"&&e.length>co/3&&ra(e)>co)throw new Error(p+"contains a string greater than "+co+" utf8 bytes "+Gi(x)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let R=!1,I=!1;if(Ie(e,(f,S)=>{if(f===".value")R=!0;else if(f!==".priority"&&f!==".sv"&&(I=!0,!Hp(f)))throw new Error(p+" contains an invalid key ("+f+") "+Gi(x)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);xE(x,f),Bl(p,S,x),TE(x)}),R&&I)throw new Error(p+' contains ".value" child '+Gi(x)+" in addition to actual children.")}},Qp=function(p,e,d,x){if(!(x&&d===void 0)&&!Kp(d))throw new Error(dh(p,e)+'was an invalid path = "'+d+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},US=function(p,e,d,x){d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),Qp(p,e,d,x)},bS=function(p,e){if(Ct(e)===".info")throw new Error(p+" failed = Can't modify data under /.info/")},zS=function(p,e){const d=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Hp(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||d.length!==0&&!VS(d))throw new Error(dh(p,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $p(p,e){let d=null;for(let x=0;x<e.length;x++){const R=e[x],I=R.getPath();d!==null&&!dp(I,d.path)&&(p.eventLists_.push(d),d=null),d===null&&(d={events:[],path:I}),d.events.push(R)}d&&p.eventLists_.push(d)}function ni(p,e,d){$p(p,d),WS(p,x=>Le(x,e)||Le(e,x))}function WS(p,e){p.recursionDepth_++;let d=!0;for(let x=0;x<p.eventLists_.length;x++){const R=p.eventLists_[x];if(R){const I=R.path;e(I)?(YS(p.eventLists_[x]),p.eventLists_[x]=null):d=!1}}d&&(p.eventLists_=[]),p.recursionDepth_--}function YS(p){for(let e=0;e<p.events.length;e++){const d=p.events[e];if(d!==null){p.events[e]=null;const x=d.getEventRunner();Hi&&ce("event: "+d.toString()),Kn(x)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="repo_interrupt",KS=25;class QS{constructor(e,d,x,R){this.repoInfo_=e,this.forceRestClient_=d,this.authTokenProvider_=x,this.appCheckProvider_=R,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new XS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Jr(),this.transactionQueueTree_=new Dl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function $S(p,e,d){if(p.stats_=xl(p.repoInfo_),p.forceRestClient_||Y1())p.server_=new kr(p.repoInfo_,(x,R,I,f)=>{Nf(p,x,R,I,f)},p.authTokenProvider_,p.appCheckProvider_),setTimeout(()=>Bf(p,!0),0);else{if(typeof d<"u"&&d!==null){if(typeof d!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ae(d)}catch(x){throw new Error("Invalid authOverride provided: "+x)}}p.persistentConnection_=new qe(p.repoInfo_,e,(x,R,I,f)=>{Nf(p,x,R,I,f)},x=>{Bf(p,x)},x=>{JS(p,x)},p.authTokenProvider_,p.appCheckProvider_,d),p.server_=p.persistentConnection_}p.authTokenProvider_.addTokenChangeListener(x=>{p.server_.refreshAuthToken(x)}),p.appCheckProvider_.addTokenChangeListener(x=>{p.server_.refreshAppCheckToken(x.token)}),p.statsReporter_=k1(p.repoInfo_,()=>new $E(p.stats_,p.server_)),p.infoData_=new WE,p.infoSyncTree_=new Of({startListening:(x,R,I,f)=>{let S=[];const t=p.infoData_.getNode(x._path);return t.isEmpty()||(S=Ba(p.infoSyncTree_,x._path,t),setTimeout(()=>{f("ok")},0)),S},stopListening:()=>{}}),Gl(p,"connected",!1),p.serverSyncTree_=new Of({startListening:(x,R,I,f)=>(p.server_.listen(x,I,R,(S,t)=>{const h=f(S,t);ni(p.eventQueue_,x._path,h)}),[]),stopListening:(x,R)=>{p.server_.unlisten(x,R)}})}function kS(p){const d=p.infoData_.getNode(new zt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+d}function Vl(p){return MS({timestamp:kS(p)})}function Nf(p,e,d,x,R){p.dataUpdateCount++;const I=new zt(e);d=p.interceptServerDataCallback_?p.interceptServerDataCallback_(e,d):d;let f=[];if(R)if(x){const t=Mr(d,h=>re(h));f=RS(p.serverSyncTree_,I,t,R)}else{const t=re(d);f=PS(p.serverSyncTree_,I,t,R)}else if(x){const t=Mr(d,h=>re(h));f=AS(p.serverSyncTree_,I,t)}else{const t=re(d);f=Ba(p.serverSyncTree_,I,t)}let S=I;f.length>0&&(S=Ua(p,I)),ni(p.eventQueue_,S,f)}function Bf(p,e){Gl(p,"connected",e),e===!1&&jS(p)}function JS(p,e){Ie(e,(d,x)=>{Gl(p,d,x)})}function Gl(p,e,d){const x=new zt("/.info/"+e),R=re(d);p.infoData_.updateSnapshot(x,R);const I=Ba(p.infoSyncTree_,x,R);ni(p.eventQueue_,x,I)}function kp(p){return p.nextWriteId_++}function ZS(p,e,d,x,R){Ul(p,"set",{path:e.toString(),value:d,priority:x});const I=Vl(p),f=re(d,x),S=wl(p.serverSyncTree_,e),t=zp(f,S,I),h=kp(p),m=Np(p.serverSyncTree_,e,t,h,!0);$p(p.eventQueue_,m),p.server_.put(e.toString(),f.val(!0),(a,r)=>{const i=a==="ok";i||Se("set at "+e+" failed: "+a);const n=Wi(p.serverSyncTree_,h,!i);ni(p.eventQueue_,e,n),_S(p,R,a,r)});const o=_p(p,e);Ua(p,o),ni(p.eventQueue_,o,[])}function jS(p){Ul(p,"onDisconnectEvents");const e=Vl(p),d=Jr();qo(p.onDisconnect_,Ot(),(R,I)=>{const f=FS(R,I,p.serverSyncTree_,e);xp(d,R,f)});let x=[];qo(d,Ot(),(R,I)=>{x=x.concat(Ba(p.serverSyncTree_,R,I));const f=_p(p,R);Ua(p,f)}),p.onDisconnect_=Jr(),ni(p.eventQueue_,Ot(),x)}function qS(p){p.persistentConnection_&&p.persistentConnection_.interrupt(HS)}function Ul(p,...e){let d="";p.persistentConnection_&&(d=p.persistentConnection_.id+":"),ce(d,...e)}function _S(p,e,d,x){e&&Kn(()=>{if(d==="ok")e(null);else{const R=(d||"error").toUpperCase();let I=R;x&&(I+=": "+x);const f=new Error(I);f.code=R,e(f)}})}function Jp(p,e,d){return wl(p.serverSyncTree_,e,d)||Ft.EMPTY_NODE}function bl(p,e=p.transactionQueueTree_){if(e||ba(p,e),Qn(e)){const d=jp(p,e);at(d.length>0,"Sending zero length transaction queue"),d.every(R=>R.status===0)&&tC(p,er(e),d)}else Wp(e)&&Ga(e,d=>{bl(p,d)})}function tC(p,e,d){const x=d.map(h=>h.currentWriteId),R=Jp(p,e,x);let I=R;const f=R.hash();for(let h=0;h<d.length;h++){const m=d[h];at(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const o=Me(e,m.path);I=I.updateChild(o,m.currentOutputSnapshotRaw)}const S=I.val(!0),t=e;p.server_.put(t.toString(),S,h=>{Ul(p,"transaction put response",{path:t.toString(),status:h});let m=[];if(h==="ok"){const o=[];for(let a=0;a<d.length;a++)d[a].status=2,m=m.concat(Wi(p.serverSyncTree_,d[a].currentWriteId)),d[a].onComplete&&o.push(()=>d[a].onComplete(null,!0,d[a].currentOutputSnapshotResolved)),d[a].unwatcher();ba(p,Nl(p.transactionQueueTree_,e)),bl(p,p.transactionQueueTree_),ni(p.eventQueue_,e,m);for(let a=0;a<o.length;a++)Kn(o[a])}else{if(h==="datastale")for(let o=0;o<d.length;o++)d[o].status===3?d[o].status=4:d[o].status=0;else{Se("transaction at "+t.toString()+" failed: "+h);for(let o=0;o<d.length;o++)d[o].status=4,d[o].abortReason=h}Ua(p,e)}},f)}function Ua(p,e){const d=Zp(p,e),x=er(d),R=jp(p,d);return eC(p,R,x),x}function eC(p,e,d){if(e.length===0)return;const x=[];let R=[];const f=e.filter(S=>S.status===0).map(S=>S.currentWriteId);for(let S=0;S<e.length;S++){const t=e[S],h=Me(d,t.path);let m=!1,o;if(at(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),t.status===4)m=!0,o=t.abortReason,R=R.concat(Wi(p.serverSyncTree_,t.currentWriteId,!0));else if(t.status===0)if(t.retryCount>=KS)m=!0,o="maxretry",R=R.concat(Wi(p.serverSyncTree_,t.currentWriteId,!0));else{const a=Jp(p,t.path,f);t.currentInputSnapshot=a;const r=e[S].update(a.val());if(r!==void 0){Bl("transaction failed: Data returned ",r,t.path);let i=re(r);typeof r=="object"&&r!=null&&oi(r,".priority")||(i=i.updatePriority(a.getPriority()));const u=t.currentWriteId,s=Vl(p),l=zp(i,a,s);t.currentOutputSnapshotRaw=i,t.currentOutputSnapshotResolved=l,t.currentWriteId=kp(p),f.splice(f.indexOf(u),1),R=R.concat(Np(p.serverSyncTree_,t.path,l,t.currentWriteId,t.applyLocally)),R=R.concat(Wi(p.serverSyncTree_,u,!0))}else m=!0,o="nodata",R=R.concat(Wi(p.serverSyncTree_,t.currentWriteId,!0))}ni(p.eventQueue_,d,R),R=[],m&&(e[S].status=2,function(a){setTimeout(a,Math.floor(0))}(e[S].unwatcher),e[S].onComplete&&(o==="nodata"?x.push(()=>e[S].onComplete(null,!1,e[S].currentInputSnapshot)):x.push(()=>e[S].onComplete(new Error(o),!1,null))))}ba(p,p.transactionQueueTree_);for(let S=0;S<x.length;S++)Kn(x[S]);bl(p,p.transactionQueueTree_)}function Zp(p,e){let d,x=p.transactionQueueTree_;for(d=Ct(e);d!==null&&Qn(x)===void 0;)x=Nl(x,d),e=Vt(e),d=Ct(e);return x}function jp(p,e){const d=[];return qp(p,e,d),d.sort((x,R)=>x.order-R.order),d}function qp(p,e,d){const x=Qn(e);if(x)for(let R=0;R<x.length;R++)d.push(x[R]);Ga(e,R=>{qp(p,R,d)})}function ba(p,e){const d=Qn(e);if(d){let x=0;for(let R=0;R<d.length;R++)d[R].status!==2&&(d[x]=d[R],x++);d.length=x,Xp(e,d.length>0?d:void 0)}Ga(e,x=>{ba(p,x)})}function _p(p,e){const d=er(Zp(p,e)),x=Nl(p.transactionQueueTree_,e);return OS(x,R=>{vo(p,R)}),vo(p,x),Yp(x,R=>{vo(p,R)}),d}function vo(p,e){const d=Qn(e);if(d){const x=[];let R=[],I=-1;for(let f=0;f<d.length;f++)d[f].status===3||(d[f].status===1?(at(I===f-1,"All SENT items should be at beginning of queue."),I=f,d[f].status=3,d[f].abortReason="set"):(at(d[f].status===0,"Unexpected transaction status in abort"),d[f].unwatcher(),R=R.concat(Wi(p.serverSyncTree_,d[f].currentWriteId,!0)),d[f].onComplete&&x.push(d[f].onComplete.bind(null,new Error("set"),!1,null))));I===-1?Xp(e,void 0):d.length=I+1,ni(p.eventQueue_,er(e),R);for(let f=0;f<x.length;f++)Kn(x[f])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(p){let e="";const d=p.split("/");for(let x=0;x<d.length;x++)if(d[x].length>0){let R=d[x];try{R=decodeURIComponent(R.replace(/\+/g," "))}catch{}e+="/"+R}return e}function nC(p){const e={};p.charAt(0)==="?"&&(p=p.substring(1));for(const d of p.split("&")){if(d.length===0)continue;const x=d.split("=");x.length===2?e[decodeURIComponent(x[0])]=decodeURIComponent(x[1]):Se(`Invalid query segment '${d}' in query '${p}'`)}return e}const Vf=function(p,e){const d=sC(p),x=d.namespace;d.domain==="firebase.com"&&ii(d.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!x||x==="undefined")&&d.domain!=="localhost"&&ii("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),d.secure||B1();const R=d.scheme==="ws"||d.scheme==="wss";return{repoInfo:new tp(d.host,d.secure,x,R,e,"",x!==d.subdomain),path:new zt(d.pathString)}},sC=function(p){let e="",d="",x="",R="",I="",f=!0,S="https",t=443;if(typeof p=="string"){let h=p.indexOf("//");h>=0&&(S=p.substring(0,h-1),p=p.substring(h+2));let m=p.indexOf("/");m===-1&&(m=p.length);let o=p.indexOf("?");o===-1&&(o=p.length),e=p.substring(0,Math.min(m,o)),m<o&&(R=iC(p.substring(m,o)));const a=nC(p.substring(Math.min(p.length,o)));h=e.indexOf(":"),h>=0?(f=S==="https"||S==="wss",t=parseInt(e.substring(h+1),10)):h=e.length;const r=e.slice(0,h);if(r.toLowerCase()==="localhost")d="localhost";else if(r.split(".").length<=2)d=r;else{const i=e.indexOf(".");x=e.substring(0,i).toLowerCase(),d=e.substring(i+1),I=x}"ns"in a&&(I=a.ns)}return{host:e,port:t,domain:d,subdomain:x,secure:f,scheme:S,pathString:R,namespace:I}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,d,x,R){this._repo=e,this._path=d,this._queryParams=x,this._orderByCalled=R}get key(){return Pt(this._path)?null:lp(this._path)}get ref(){return new on(this._repo,this._path)}get _queryIdentifier(){const e=Ef(this._queryParams),d=ml(e);return d==="{}"?"default":d}get _queryObject(){return Ef(this._queryParams)}isEqual(e){if(e=te(e),!(e instanceof zl))return!1;const d=this._repo===e._repo,x=dp(this._path,e._path),R=this._queryIdentifier===e._queryIdentifier;return d&&x&&R}toJSON(){return this.toString()}toString(){return this._repo.toString()+mE(this._path)}}class on extends zl{constructor(e,d){super(e,d,new Cl,!1)}get parent(){const e=fp(this._path);return e===null?null:new on(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}function rC(p,e){return p=te(p),p._checkNotDeleted("ref"),e!==void 0?aC(p._root,e):p._root}function aC(p,e){return p=te(p),Ct(p._path)===null?US("child","path",e,!1):Qp("child","path",e,!1),new on(p._repo,kt(p._path,e))}function oC(p,e){p=te(p),bS("set",p._path),GS("set",e,p._path,!1);const d=new sa;return ZS(p._repo,p._path,e,null,d.wrapCallback(()=>{})),d.promise}SS(on);CS(on);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="FIREBASE_DATABASE_EMULATOR_HOST",ah={};let lC=!1;function uC(p,e,d,x){p.repoInfo_=new tp(`${e}:${d}`,!1,p.repoInfo_.namespace,p.repoInfo_.webSocketOnly,p.repoInfo_.nodeAdmin,p.repoInfo_.persistenceKey,p.repoInfo_.includeNamespaceInQueryParams,!0),x&&(p.authTokenProvider_=x)}function fC(p,e,d,x,R){let I=x||p.options.databaseURL;I===void 0&&(p.options.projectId||ii("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ce("Using default host for project ",p.options.projectId),I=`${p.options.projectId}-default-rtdb.firebaseio.com`);let f=Vf(I,R),S=f.repoInfo,t,h;typeof process<"u"&&ef&&(h=ef[hC]),h?(t=!0,I=`http://${h}?ns=${S.namespace}`,f=Vf(I,R),S=f.repoInfo):t=!f.repoInfo.secure;const m=R&&t?new Tn(Tn.OWNER):new K1(p.name,p.options,e);zS("Invalid Firebase Database URL",f),Pt(f.path)||ii("Database URL must point to the root of a Firebase Database (not including a child path).");const o=cC(S,p,m,new H1(p.name,d));return new vC(o,p)}function dC(p,e){const d=ah[e];(!d||d[p.key]!==p)&&ii(`Database ${e}(${p.repoInfo_}) has already been deleted.`),qS(p),delete d[p.key]}function cC(p,e,d,x){let R=ah[e.name];R||(R={},ah[e.name]=R);let I=R[p.toURLString()];return I&&ii("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),I=new QS(p,lC,d,x),R[p.toURLString()]=I,I}class vC{constructor(e,d){this._repoInternal=e,this.app=d,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||($S(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new on(this._repo,Ot())),this._rootInternal}_delete(){return this._rootInternal!==null&&(dC(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ii("Cannot call "+e+" on a deleted database.")}}function pC(p=vh(),e){const d=oa(p,"database").getImmediate({identifier:e});if(!d._instanceStarted){const x=rd("database");x&&gC(d,...x)}return d}function gC(p,e,d,x={}){p=te(p),p._checkNotDeleted("useEmulator"),p._instanceStarted&&ii("Cannot call useEmulator() after instance has already been initialized.");const R=p._repoInternal;let I;if(R.repoInfo_.nodeAdmin)x.mockUserToken&&ii('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),I=new Tn(Tn.OWNER);else if(x.mockUserToken){const f=typeof x.mockUserToken=="string"?x.mockUserToken:hd(x.mockUserToken,p.app.options.projectId);I=new Tn(f)}uC(R,e,d,I)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(p){F1(en),$i(new Ei("database",(e,{instanceIdentifier:d})=>{const x=e.getProvider("app").getImmediate(),R=e.getProvider("auth-internal"),I=e.getProvider("app-check-internal");return fC(x,R,I,d)},"PUBLIC").setMultipleInstances(!0)),be(nf,sf,p),be(nf,sf,"esm2017")}qe.prototype.simpleListen=function(p,e){this.sendRequest("q",{p},e)};qe.prototype.echo=function(p,e){this.sendRequest("echo",{d:p},e)};mC();function Xl(p,e){var d={};for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&e.indexOf(x)<0&&(d[x]=p[x]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var R=0,x=Object.getOwnPropertySymbols(p);R<x.length;R++)e.indexOf(x[R])<0&&Object.prototype.propertyIsEnumerable.call(p,x[R])&&(d[x[R]]=p[x[R]]);return d}function tg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yC=tg,eg=new Bs("auth","Firebase",tg());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new aa("@firebase/auth");function xC(p,...e){_r.logLevel<=St.WARN&&_r.warn(`Auth (${en}): ${p}`,...e)}function Er(p,...e){_r.logLevel<=St.ERROR&&_r.error(`Auth (${en}): ${p}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(p,...e){throw Wl(p,...e)}function Ye(p,...e){return Wl(p,...e)}function TC(p,e,d){const x=Object.assign(Object.assign({},yC()),{[e]:d});return new Bs("auth","Firebase",x).create(e,{appName:p.name})}function Wl(p,...e){if(typeof p!="string"){const d=e[0],x=[...e.slice(1)];return x[0]&&(x[0].appName=p.name),p._errorFactory.create(d,...x)}return eg.create(p,...e)}function yt(p,e,...d){if(!p)throw Wl(e,...d)}function Je(p){const e="INTERNAL ASSERTION FAILED: "+p;throw Er(e),new Error(e)}function ri(p,e){p||Je(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(){var p;return typeof self<"u"&&((p=self.location)===null||p===void 0?void 0:p.href)||""}function EC(){return Gf()==="http:"||Gf()==="https:"}function Gf(){var p;return typeof self<"u"&&((p=self.location)===null||p===void 0?void 0:p.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EC()||qg()||"connection"in navigator)?navigator.onLine:!0}function CC(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,d){this.shortDelay=e,this.longDelay=d,ri(d>e,"Short delay should be less than long delay!"),this.isMobile=fh()||ld()}get(){return SC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(p,e){ri(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return e?`${d}${e.startsWith("/")?e.slice(1):e}`:d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{static initialize(e,d,x){this.fetchImpl=e,d&&(this.headersImpl=d),x&&(this.responseImpl=x)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=new ir(3e4,6e4);function Hl(p,e){return p.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:p.tenantId}):e}async function nr(p,e,d,x,R={}){return ng(p,R,async()=>{let I={},f={};x&&(e==="GET"?f=x:I={body:JSON.stringify(x)});const S=Vn(Object.assign({key:p.config.apiKey},f)).slice(1),t=await p._getAdditionalHeaders();return t["Content-Type"]="application/json",p.languageCode&&(t["X-Firebase-Locale"]=p.languageCode),ig.fetch()(rg(p,p.config.apiHost,d,S),Object.assign({method:e,headers:t,referrerPolicy:"no-referrer"},I))})}async function ng(p,e,d){p._canInitEmulator=!1;const x=Object.assign(Object.assign({},AC),e);try{const R=new RC(p),I=await Promise.race([d(),R.promise]);R.clearNetworkTimeout();const f=await I.json();if("needConfirmation"in f)throw gr(p,"account-exists-with-different-credential",f);if(I.ok&&!("errorMessage"in f))return f;{const S=I.ok?f.errorMessage:f.error.message,[t,h]=S.split(" : ");if(t==="FEDERATED_USER_ID_ALREADY_LINKED")throw gr(p,"credential-already-in-use",f);if(t==="EMAIL_EXISTS")throw gr(p,"email-already-in-use",f);if(t==="USER_DISABLED")throw gr(p,"user-disabled",f);const m=x[t]||t.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw TC(p,m,h);si(p,m)}}catch(R){if(R instanceof ai)throw R;si(p,"network-request-failed",{message:String(R)})}}async function sg(p,e,d,x,R={}){const I=await nr(p,e,d,x,R);return"mfaPendingCredential"in I&&si(p,"multi-factor-auth-required",{_serverResponse:I}),I}function rg(p,e,d,x){const R=`${e}${d}?${x}`;return p.config.emulator?Yl(p.config,R):`${p.config.apiScheme}://${R}`}class RC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((d,x)=>{this.timer=setTimeout(()=>x(Ye(this.auth,"network-request-failed")),PC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gr(p,e,d){const x={appName:p.name};d.email&&(x.email=d.email),d.phoneNumber&&(x.phoneNumber=d.phoneNumber);const R=Ye(p,e,x);return R.customData._tokenResponse=d,R}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MC(p,e){return nr(p,"POST","/v1/accounts:delete",e)}async function IC(p,e){return nr(p,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(p){if(p)try{const e=new Date(Number(p));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wC(p,e=!1){const d=te(p),x=await d.getIdToken(e),R=Kl(x);yt(R&&R.exp&&R.auth_time&&R.iat,d.auth,"internal-error");const I=typeof R.firebase=="object"?R.firebase:void 0,f=I==null?void 0:I.sign_in_provider;return{claims:R,token:x,authTime:cs(po(R.auth_time)),issuedAtTime:cs(po(R.iat)),expirationTime:cs(po(R.exp)),signInProvider:f||null,signInSecondFactor:(I==null?void 0:I.sign_in_second_factor)||null}}function po(p){return Number(p)*1e3}function Kl(p){const[e,d,x]=p.split(".");if(e===void 0||d===void 0||x===void 0)return Er("JWT malformed, contained fewer than 3 sections"),null;try{const R=Rr(d);return R?JSON.parse(R):(Er("Failed to decode base64 JWT payload"),null)}catch(R){return Er("Caught error parsing JWT payload as JSON",R==null?void 0:R.toString()),null}}function FC(p){const e=Kl(p);return yt(e,"internal-error"),yt(typeof e.exp<"u","internal-error"),yt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ds(p,e,d=!1){if(d)return e;try{return await e}catch(x){throw x instanceof ai&&LC(x)&&p.auth.currentUser===p&&await p.auth.signOut(),x}}function LC({code:p}){return p==="auth/user-disabled"||p==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var d;if(e){const x=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),x}else{this.errorBackoff=3e4;const R=((d=this.user.stsTokenManager.expirationTime)!==null&&d!==void 0?d:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(e=!1){if(!this.isRunning)return;const d=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},d)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,d){this.createdAt=e,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=cs(this.lastLoginAt),this.creationTime=cs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(p){var e;const d=p.auth,x=await p.getIdToken(),R=await Ds(p,IC(d,{idToken:x}));yt(R==null?void 0:R.users.length,d,"internal-error");const I=R.users[0];p._notifyReloadListener(I);const f=!((e=I.providerUserInfo)===null||e===void 0)&&e.length?BC(I.providerUserInfo):[],S=NC(p.providerData,f),t=p.isAnonymous,h=!(p.email&&I.passwordHash)&&!(S!=null&&S.length),m=t?h:!1,o={uid:I.localId,displayName:I.displayName||null,photoURL:I.photoUrl||null,email:I.email||null,emailVerified:I.emailVerified||!1,phoneNumber:I.phoneNumber||null,tenantId:I.tenantId||null,providerData:S,metadata:new ag(I.createdAt,I.lastLoginAt),isAnonymous:m};Object.assign(p,o)}async function DC(p){const e=te(p);await ta(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NC(p,e){return[...p.filter(x=>!e.some(R=>R.providerId===x.providerId)),...e]}function BC(p){return p.map(e=>{var{providerId:d}=e,x=Xl(e,["providerId"]);return{providerId:d,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(p,e){const d=await ng(p,{},async()=>{const x=Vn({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:R,apiKey:I}=p.config,f=rg(p,R,"/v1/token",`key=${I}`),S=await p._getAdditionalHeaders();return S["Content-Type"]="application/x-www-form-urlencoded",ig.fetch()(f,{method:"POST",headers:S,body:x})});return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){yt(e.idToken,"internal-error"),yt(typeof e.idToken<"u","internal-error"),yt(typeof e.refreshToken<"u","internal-error");const d="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,d)}async getToken(e,d=!1){return yt(!this.accessToken||this.refreshToken,e,"user-token-expired"),!d&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,d){const{accessToken:x,refreshToken:R,expiresIn:I}=await VC(e,d);this.updateTokensAndExpiration(x,R,Number(I))}updateTokensAndExpiration(e,d,x){this.refreshToken=d||null,this.accessToken=e||null,this.expirationTime=Date.now()+x*1e3}static fromJSON(e,d){const{refreshToken:x,accessToken:R,expirationTime:I}=d,f=new Ns;return x&&(yt(typeof x=="string","internal-error",{appName:e}),f.refreshToken=x),R&&(yt(typeof R=="string","internal-error",{appName:e}),f.accessToken=R),I&&(yt(typeof I=="number","internal-error",{appName:e}),f.expirationTime=I),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ns,this.toJSON())}_performRefresh(){return Je("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(p,e){yt(typeof p=="string"||typeof p>"u","internal-error",{appName:e})}class Ki{constructor(e){var{uid:d,auth:x,stsTokenManager:R}=e,I=Xl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new OC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=x,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=I.displayName||null,this.email=I.email||null,this.emailVerified=I.emailVerified||!1,this.phoneNumber=I.phoneNumber||null,this.photoURL=I.photoURL||null,this.isAnonymous=I.isAnonymous||!1,this.tenantId=I.tenantId||null,this.providerData=I.providerData?[...I.providerData]:[],this.metadata=new ag(I.createdAt||void 0,I.lastLoginAt||void 0)}async getIdToken(e){const d=await Ds(this,this.stsTokenManager.getToken(this.auth,e));return yt(d,this.auth,"internal-error"),this.accessToken!==d&&(this.accessToken=d,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),d}getIdTokenResult(e){return wC(this,e)}reload(){return DC(this)}_assign(e){this!==e&&(yt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(d=>Object.assign({},d)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const d=new Ki(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(e){yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,d=!1){let x=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),x=!0),d&&await ta(this),await this.auth._persistUserIfCurrent(this),x&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ds(this,MC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,d){var x,R,I,f,S,t,h,m;const o=(x=d.displayName)!==null&&x!==void 0?x:void 0,a=(R=d.email)!==null&&R!==void 0?R:void 0,r=(I=d.phoneNumber)!==null&&I!==void 0?I:void 0,i=(f=d.photoURL)!==null&&f!==void 0?f:void 0,n=(S=d.tenantId)!==null&&S!==void 0?S:void 0,u=(t=d._redirectEventId)!==null&&t!==void 0?t:void 0,s=(h=d.createdAt)!==null&&h!==void 0?h:void 0,l=(m=d.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:v,emailVerified:c,isAnonymous:g,providerData:y,stsTokenManager:E}=d;yt(v&&E,e,"internal-error");const C=Ns.fromJSON(this.name,E);yt(typeof v=="string",e,"internal-error"),li(o,e.name),li(a,e.name),yt(typeof c=="boolean",e,"internal-error"),yt(typeof g=="boolean",e,"internal-error"),li(r,e.name),li(i,e.name),li(n,e.name),li(u,e.name),li(s,e.name),li(l,e.name);const T=new Ki({uid:v,auth:e,email:a,emailVerified:c,displayName:o,isAnonymous:g,photoURL:i,phoneNumber:r,tenantId:n,stsTokenManager:C,createdAt:s,lastLoginAt:l});return y&&Array.isArray(y)&&(T.providerData=y.map(A=>Object.assign({},A))),u&&(T._redirectEventId=u),T}static async _fromIdTokenResponse(e,d,x=!1){const R=new Ns;R.updateFromServerResponse(d);const I=new Ki({uid:d.localId,auth:e,stsTokenManager:R,isAnonymous:x});return await ta(I),I}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new Map;function Ze(p){ri(p instanceof Function,"Expected a class definition");let e=Uf.get(p);return e?(ri(e instanceof p,"Instance stored in cache mismatched with class"),e):(e=new p,Uf.set(p,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,d){this.storage[e]=d}async _get(e){const d=this.storage[e];return d===void 0?null:d}async _remove(e){delete this.storage[e]}_addListener(e,d){}_removeListener(e,d){}}og.type="NONE";const bf=og;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(p,e,d){return`firebase:${p}:${e}:${d}`}class Sn{constructor(e,d,x){this.persistence=e,this.auth=d,this.userKey=x;const{config:R,name:I}=this.auth;this.fullUserKey=Sr(this.userKey,R.apiKey,I),this.fullPersistenceKey=Sr("persistence",R.apiKey,I),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ki._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const d=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,d)return this.setCurrentUser(d)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,d,x="authUser"){if(!d.length)return new Sn(Ze(bf),e,x);const R=(await Promise.all(d.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let I=R[0]||Ze(bf);const f=Sr(x,e.config.apiKey,e.name);let S=null;for(const h of d)try{const m=await h._get(f);if(m){const o=Ki._fromJSON(e,m);h!==I&&(S=o),I=h;break}}catch{}const t=R.filter(h=>h._shouldAllowMigration);return!I._shouldAllowMigration||!t.length?new Sn(I,e,x):(I=t[0],S&&await I._set(f,S.toJSON()),await Promise.all(d.map(async h=>{if(h!==I)try{await h._remove(f)}catch{}})),new Sn(I,e,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(p){const e=p.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ug(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dg(e))return"Blackberry";if(cg(e))return"Webos";if(Ql(e))return"Safari";if((e.includes("chrome/")||lg(e))&&!e.includes("edge/"))return"Chrome";if(fg(e))return"Android";{const d=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,x=p.match(d);if((x==null?void 0:x.length)===2)return x[1]}return"Other"}function hg(p=me()){return/firefox\//i.test(p)}function Ql(p=me()){const e=p.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lg(p=me()){return/crios\//i.test(p)}function ug(p=me()){return/iemobile/i.test(p)}function fg(p=me()){return/android/i.test(p)}function dg(p=me()){return/blackberry/i.test(p)}function cg(p=me()){return/webos/i.test(p)}function za(p=me()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function GC(p=me()){var e;return za(p)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function UC(){return _g()&&document.documentMode===10}function vg(p=me()){return za(p)||fg(p)||cg(p)||dg(p)||/windows phone/i.test(p)||ug(p)}function bC(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(p,e=[]){let d;switch(p){case"Browser":d=zf(me());break;case"Worker":d=`${zf(me())}-${p}`;break;default:d=p}const x=e.length?e.join(","):"FirebaseCore-web";return`${d}/JsCore/${en}/${x}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,d){const x=I=>new Promise((f,S)=>{try{const t=e(I);f(t)}catch(t){S(t)}});x.onAbort=d,this.queue.push(x);const R=this.queue.length-1;return()=>{this.queue[R]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const d=[];try{for(const x of this.queue)await x(e),x.onAbort&&d.push(x.onAbort)}catch(x){d.reverse();for(const R of d)try{R()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:x==null?void 0:x.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(p,e={}){return nr(p,"GET","/v2/passwordPolicy",Hl(p,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=6;class YC{constructor(e){var d,x,R,I;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(d=f.minPasswordLength)!==null&&d!==void 0?d:WC,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(R=(x=e.allowedNonAlphanumericCharacters)===null||x===void 0?void 0:x.join(""))!==null&&R!==void 0?R:"",this.forceUpgradeOnSignin=(I=e.forceUpgradeOnSignin)!==null&&I!==void 0?I:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var d,x,R,I,f,S;const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=(d=t.meetsMinPasswordLength)!==null&&d!==void 0?d:!0),t.isValid&&(t.isValid=(x=t.meetsMaxPasswordLength)!==null&&x!==void 0?x:!0),t.isValid&&(t.isValid=(R=t.containsLowercaseLetter)!==null&&R!==void 0?R:!0),t.isValid&&(t.isValid=(I=t.containsUppercaseLetter)!==null&&I!==void 0?I:!0),t.isValid&&(t.isValid=(f=t.containsNumericCharacter)!==null&&f!==void 0?f:!0),t.isValid&&(t.isValid=(S=t.containsNonAlphanumericCharacter)!==null&&S!==void 0?S:!0),t}validatePasswordLengthOptions(e,d){const x=this.customStrengthOptions.minPasswordLength,R=this.customStrengthOptions.maxPasswordLength;x&&(d.meetsMinPasswordLength=e.length>=x),R&&(d.meetsMaxPasswordLength=e.length<=R)}validatePasswordCharacterOptions(e,d){this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);let x;for(let R=0;R<e.length;R++)x=e.charAt(R),this.updatePasswordCharacterOptionsStatuses(d,x>="a"&&x<="z",x>="A"&&x<="Z",x>="0"&&x<="9",this.allowedNonAlphanumericCharacters.includes(x))}updatePasswordCharacterOptionsStatuses(e,d,x,R,I){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=x)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=R)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,d,x,R){this.app=e,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=x,this.config=R,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xf(this),this.idTokenSubscription=new Xf(this),this.beforeStateQueue=new zC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=R.sdkClientVersion}_initializeWithPersistence(e,d){return d&&(this._popupRedirectResolver=Ze(d)),this._initializationPromise=this.queue(async()=>{var x,R;if(!this._deleted&&(this.persistenceManager=await Sn.create(this,e),!this._deleted)){if(!((x=this._popupRedirectResolver)===null||x===void 0)&&x._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(d),this.lastNotifiedUid=((R=this.currentUser)===null||R===void 0?void 0:R.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var d;const x=await this.assertedPersistence.getCurrentUser();let R=x,I=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(d=this.redirectUser)===null||d===void 0?void 0:d._redirectEventId,S=R==null?void 0:R._redirectEventId,t=await this.tryRedirectSignIn(e);(!f||f===S)&&(t!=null&&t.user)&&(R=t.user,I=!0)}if(!R)return this.directlySetCurrentUser(null);if(!R._redirectEventId){if(I)try{await this.beforeStateQueue.runMiddleware(R)}catch(f){R=x,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return R?this.reloadAndSetCurrentUserOrClear(R):this.directlySetCurrentUser(null)}return yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===R._redirectEventId?this.directlySetCurrentUser(R):this.reloadAndSetCurrentUserOrClear(R)}async tryRedirectSignIn(e){let d=null;try{d=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return d}async reloadAndSetCurrentUserOrClear(e){try{await ta(e)}catch(d){if((d==null?void 0:d.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const d=e?te(e):null;return d&&yt(d.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(d&&d._clone(this))}async _updateCurrentUser(e,d=!1){if(!this._deleted)return e&&yt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),d||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Ze(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const d=this._getPasswordPolicyInternal();return d.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):d.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XC(this),d=new YC(e);this.tenantId===null?this._projectPasswordPolicy=d:this._tenantPasswordPolicies[this.tenantId]=d}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Bs("auth","Firebase",e())}onAuthStateChanged(e,d,x){return this.registerStateListener(this.authStateSubscription,e,d,x)}beforeAuthStateChanged(e,d){return this.beforeStateQueue.pushCallback(e,d)}onIdTokenChanged(e,d,x){return this.registerStateListener(this.idTokenSubscription,e,d,x)}authStateReady(){return new Promise((e,d)=>{if(this.currentUser)e();else{const x=this.onAuthStateChanged(()=>{x(),e()},d)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,d){const x=await this.getOrInitRedirectPersistenceManager(d);return e===null?x.removeCurrentUser():x.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const d=e&&Ze(e)||this._popupRedirectResolver;yt(d,this,"argument-error"),this.redirectPersistenceManager=await Sn.create(this,[Ze(d._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var d,x;return this._isInitialized&&await this.queue(async()=>{}),((d=this._currentUser)===null||d===void 0?void 0:d._redirectEventId)===e?this._currentUser:((x=this.redirectUser)===null||x===void 0?void 0:x._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=(d=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&d!==void 0?d:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,d,x,R){if(this._deleted)return()=>{};const I=typeof d=="function"?d:d.next.bind(d);let f=!1;const S=this._isInitialized?Promise.resolve():this._initializationPromise;if(yt(S,this,"internal-error"),S.then(()=>{f||I(this.currentUser)}),typeof d=="function"){const t=e.addObserver(d,x,R);return()=>{f=!0,t()}}else{const t=e.addObserver(d);return()=>{f=!0,t()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const d={"X-Client-Version":this.clientVersion};this.app.options.appId&&(d["X-Firebase-gmpid"]=this.app.options.appId);const x=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());x&&(d["X-Firebase-Client"]=x);const R=await this._getAppCheckToken();return R&&(d["X-Firebase-AppCheck"]=R),d}async _getAppCheckToken(){var e;const d=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return d!=null&&d.error&&xC(`Error while retrieving App Check token: ${d.error}`),d==null?void 0:d.token}}function Xa(p){return te(p)}class Xf{constructor(e){this.auth=e,this.observer=null,this.addObserver=hm(d=>this.observer=d)}get next(){return yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(){var p,e;return(e=(p=document.getElementsByTagName("head"))===null||p===void 0?void 0:p[0])!==null&&e!==void 0?e:document}function QC(p){return new Promise((e,d)=>{const x=document.createElement("script");x.setAttribute("src",p),x.onload=e,x.onerror=R=>{const I=Ye("internal-error");I.customData=R,d(I)},x.type="text/javascript",x.charset="UTF-8",KC().appendChild(x)})}function $C(p){return`__${p}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(p,e){const d=oa(p,"auth");if(d.isInitialized()){const R=d.getImmediate(),I=d.getOptions();if(Ir(I,e??{}))return R;si(R,"already-initialized")}return d.initialize({options:e})}function JC(p,e){const d=(e==null?void 0:e.persistence)||[],x=(Array.isArray(d)?d:[d]).map(Ze);e!=null&&e.errorMap&&p._updateErrorMap(e.errorMap),p._initializeWithPersistence(x,e==null?void 0:e.popupRedirectResolver)}function ZC(p,e,d){const x=Xa(p);yt(x._canInitEmulator,x,"emulator-config-failed"),yt(/^https?:\/\//.test(e),x,"invalid-emulator-scheme");const R=!!(d!=null&&d.disableWarnings),I=gg(e),{host:f,port:S}=jC(e),t=S===null?"":`:${S}`;x.config.emulator={url:`${I}//${f}${t}/`},x.settings.appVerificationDisabledForTesting=!0,x.emulatorConfig=Object.freeze({host:f,port:S,protocol:I.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||qC()}function gg(p){const e=p.indexOf(":");return e<0?"":p.substr(0,e+1)}function jC(p){const e=gg(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(e.length));if(!d)return{host:"",port:null};const x=d[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(x);if(R){const I=R[1];return{host:I,port:Wf(x.substr(I.length+1))}}else{const[I,f]=x.split(":");return{host:I,port:Wf(f)}}}function Wf(p){if(!p)return null;const e=Number(p);return isNaN(e)?null:e}function qC(){function p(){const e=document.createElement("p"),d=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,d){this.providerId=e,this.signInMethod=d}toJSON(){return Je("not implemented")}_getIdTokenResponse(e){return Je("not implemented")}_linkToIdToken(e,d){return Je("not implemented")}_getReauthenticationResolver(e){return Je("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cn(p,e){return sg(p,"POST","/v1/accounts:signInWithIdp",Hl(p,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="http://localhost";class tn extends mg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const d=new tn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(d.idToken=e.idToken),e.accessToken&&(d.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(d.nonce=e.nonce),e.pendingToken&&(d.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(d.accessToken=e.oauthToken,d.secret=e.oauthTokenSecret):si("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const d=typeof e=="string"?JSON.parse(e):e,{providerId:x,signInMethod:R}=d,I=Xl(d,["providerId","signInMethod"]);if(!x||!R)return null;const f=new tn(x,R);return f.idToken=I.idToken||void 0,f.accessToken=I.accessToken||void 0,f.secret=I.secret,f.nonce=I.nonce,f.pendingToken=I.pendingToken||null,f}_getIdTokenResponse(e){const d=this.buildRequest();return Cn(e,d)}_linkToIdToken(e,d){const x=this.buildRequest();return x.idToken=d,Cn(e,x)}_getReauthenticationResolver(e){const d=this.buildRequest();return d.autoCreate=!1,Cn(e,d)}buildRequest(){const e={requestUri:_C,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),e.postBody=Vn(d)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends yg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends sr{constructor(){super("facebook.com")}static credential(e){return tn._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends sr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,d){return tn._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:d})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:d,oauthAccessToken:x}=e;if(!d&&!x)return null;try{return fi.credential(d,x)}catch{return null}}}fi.GOOGLE_SIGN_IN_METHOD="google.com";fi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends sr{constructor(){super("github.com")}static credential(e){return tn._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.GITHUB_SIGN_IN_METHOD="github.com";di.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends sr{constructor(){super("twitter.com")}static credential(e,d){return tn._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:d})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:d,oauthTokenSecret:x}=e;if(!d||!x)return null;try{return ci.credential(d,x)}catch{return null}}}ci.TWITTER_SIGN_IN_METHOD="twitter.com";ci.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(p,e){return sg(p,"POST","/v1/accounts:signUp",Hl(p,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,d,x,R=!1){const I=await Ki._fromIdTokenResponse(e,x,R),f=Yf(x);return new Mi({user:I,providerId:f,_tokenResponse:x,operationType:d})}static async _forOperation(e,d,x){await e._updateTokensIfNecessary(x,!0);const R=Yf(x);return new Mi({user:e,providerId:R,_tokenResponse:x,operationType:d})}}function Yf(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(p){var e;const d=Xa(p);if(await d._initializationPromise,!((e=d.currentUser)===null||e===void 0)&&e.isAnonymous)return new Mi({user:d.currentUser,providerId:null,operationType:"signIn"});const x=await t2(d,{returnSecureToken:!0}),R=await Mi._fromIdTokenResponse(d,"signIn",x,!0);return await d._updateCurrentUser(R.user),R}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends ai{constructor(e,d,x,R){var I;super(d.code,d.message),this.operationType=x,this.user=R,Object.setPrototypeOf(this,ea.prototype),this.customData={appName:e.name,tenantId:(I=e.tenantId)!==null&&I!==void 0?I:void 0,_serverResponse:d.customData._serverResponse,operationType:x}}static _fromErrorAndOperation(e,d,x,R){return new ea(e,d,x,R)}}function xg(p,e,d,x){return(e==="reauthenticate"?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(I=>{throw I.code==="auth/multi-factor-auth-required"?ea._fromErrorAndOperation(p,I,e,x):I})}async function i2(p,e,d=!1){const x=await Ds(p,e._linkToIdToken(p.auth,await p.getIdToken()),d);return Mi._forOperation(p,"link",x)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(p,e,d=!1){const{auth:x}=p,R="reauthenticate";try{const I=await Ds(p,xg(x,R,e,p),d);yt(I.idToken,x,"internal-error");const f=Kl(I.idToken);yt(f,x,"internal-error");const{sub:S}=f;return yt(p.uid===S,x,"user-mismatch"),Mi._forOperation(p,R,I)}catch(I){throw(I==null?void 0:I.code)==="auth/user-not-found"&&si(x,"user-mismatch"),I}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s2(p,e,d=!1){const x="signIn",R=await xg(p,x,e),I=await Mi._fromIdTokenResponse(p,x,R);return d||await p._updateCurrentUser(I.user),I}function r2(p,e,d,x){return te(p).onIdTokenChanged(e,d,x)}function a2(p,e,d){return te(p).beforeAuthStateChanged(e,d)}function o2(p,e,d,x){return te(p).onAuthStateChanged(e,d,x)}const ia="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,d){this.storageRetriever=e,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(ia,"1"),this.storage.removeItem(ia),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,d){return this.storage.setItem(e,JSON.stringify(d)),Promise.resolve()}_get(e){const d=this.storage.getItem(e);return Promise.resolve(d?JSON.parse(d):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(){const p=me();return Ql(p)||za(p)}const l2=1e3,u2=10;class Eg extends Tg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,d)=>this.onStorageEvent(e,d),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=h2()&&bC(),this.fallbackToPolling=vg(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const d of Object.keys(this.listeners)){const x=this.storage.getItem(d),R=this.localCache[d];x!==R&&e(d,R,x)}}onStorageEvent(e,d=!1){if(!e.key){this.forAllChangedKeys((f,S,t)=>{this.notifyListeners(f,t)});return}const x=e.key;if(d?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const f=this.storage.getItem(x);if(e.newValue!==f)e.newValue!==null?this.storage.setItem(x,e.newValue):this.storage.removeItem(x);else if(this.localCache[x]===e.newValue&&!d)return}const R=()=>{const f=this.storage.getItem(x);!d&&this.localCache[x]===f||this.notifyListeners(x,f)},I=this.storage.getItem(x);UC()&&I!==e.newValue&&e.newValue!==e.oldValue?setTimeout(R,u2):R()}notifyListeners(e,d){this.localCache[e]=d;const x=this.listeners[e];if(x)for(const R of Array.from(x))R(d&&JSON.parse(d))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,d,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:d,newValue:x}),!0)})},l2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,d){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(d)}_removeListener(e,d){this.listeners[e]&&(this.listeners[e].delete(d),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,d){await super._set(e,d),this.localCache[e]=JSON.stringify(d)}async _get(e){const d=await super._get(e);return this.localCache[e]=JSON.stringify(d),d}async _remove(e){await super._remove(e),delete this.localCache[e]}}Eg.type="LOCAL";const f2=Eg;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg extends Tg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,d){}_removeListener(e,d){}}Sg.type="SESSION";const Cg=Sg;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(p){return Promise.all(p.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(d){return{fulfilled:!1,reason:d}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const d=this.receivers.find(R=>R.isListeningto(e));if(d)return d;const x=new Wa(e);return this.receivers.push(x),x}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const d=e,{eventId:x,eventType:R,data:I}=d.data,f=this.handlersMap[R];if(!(f!=null&&f.size))return;d.ports[0].postMessage({status:"ack",eventId:x,eventType:R});const S=Array.from(f).map(async h=>h(d.origin,I)),t=await d2(S);d.ports[0].postMessage({status:"done",eventId:x,eventType:R,response:t})}_subscribe(e,d){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(d)}_unsubscribe(e,d){this.handlersMap[e]&&d&&this.handlersMap[e].delete(d),(!d||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wa.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(p="",e=10){let d="";for(let x=0;x<e;x++)d+=Math.floor(Math.random()*10);return p+d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,d,x=50){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let I,f;return new Promise((S,t)=>{const h=$l("",20);R.port1.start();const m=setTimeout(()=>{t(new Error("unsupported_event"))},x);f={messageChannel:R,onMessage(o){const a=o;if(a.data.eventId===h)switch(a.data.status){case"ack":clearTimeout(m),I=setTimeout(()=>{t(new Error("timeout"))},3e3);break;case"done":clearTimeout(I),S(a.data.response);break;default:clearTimeout(m),clearTimeout(I),t(new Error("invalid_response"));break}}},this.handlers.add(f),R.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:h,data:d},[R.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(){return window}function v2(p){He().location.href=p}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(){return typeof He().WorkerGlobalScope<"u"&&typeof He().importScripts=="function"}async function p2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function g2(){var p;return((p=navigator==null?void 0:navigator.serviceWorker)===null||p===void 0?void 0:p.controller)||null}function m2(){return Ag()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="firebaseLocalStorageDb",y2=1,na="firebaseLocalStorage",Rg="fbase_key";class rr{constructor(e){this.request=e}toPromise(){return new Promise((e,d)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function Ya(p,e){return p.transaction([na],e?"readwrite":"readonly").objectStore(na)}function x2(){const p=indexedDB.deleteDatabase(Pg);return new rr(p).toPromise()}function hh(){const p=indexedDB.open(Pg,y2);return new Promise((e,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const x=p.result;try{x.createObjectStore(na,{keyPath:Rg})}catch(R){d(R)}}),p.addEventListener("success",async()=>{const x=p.result;x.objectStoreNames.contains(na)?e(x):(x.close(),await x2(),e(await hh()))})})}async function Hf(p,e,d){const x=Ya(p,!0).put({[Rg]:e,value:d});return new rr(x).toPromise()}async function T2(p,e){const d=Ya(p,!1).get(e),x=await new rr(d).toPromise();return x===void 0?null:x.value}function Kf(p,e){const d=Ya(p,!0).delete(e);return new rr(d).toPromise()}const E2=800,S2=3;class Mg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hh(),this.db)}async _withRetries(e){let d=0;for(;;)try{const x=await this._openDb();return await e(x)}catch(x){if(d++>S2)throw x;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ag()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wa._getInstance(m2()),this.receiver._subscribe("keyChanged",async(e,d)=>({keyProcessed:(await this._poll()).includes(d.key)})),this.receiver._subscribe("ping",async(e,d)=>["keyChanged"])}async initializeSender(){var e,d;if(this.activeServiceWorker=await p2(),!this.activeServiceWorker)return;this.sender=new c2(this.activeServiceWorker);const x=await this.sender._send("ping",{},800);x&&!((e=x[0])===null||e===void 0)&&e.fulfilled&&!((d=x[0])===null||d===void 0)&&d.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||g2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hh();return await Hf(e,ia,"1"),await Kf(e,ia),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,d){return this._withPendingWrite(async()=>(await this._withRetries(x=>Hf(x,e,d)),this.localCache[e]=d,this.notifyServiceWorker(e)))}async _get(e){const d=await this._withRetries(x=>T2(x,e));return this.localCache[e]=d,d}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(d=>Kf(d,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(R=>{const I=Ya(R,!1).getAll();return new rr(I).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const d=[],x=new Set;for(const{fbase_key:R,value:I}of e)x.add(R),JSON.stringify(this.localCache[R])!==JSON.stringify(I)&&(this.notifyListeners(R,I),d.push(R));for(const R of Object.keys(this.localCache))this.localCache[R]&&!x.has(R)&&(this.notifyListeners(R,null),d.push(R));return d}notifyListeners(e,d){this.localCache[e]=d;const x=this.listeners[e];if(x)for(const R of Array.from(x))R(d)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),E2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,d){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(d)}_removeListener(e,d){this.listeners[e]&&(this.listeners[e].delete(d),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Mg.type="LOCAL";const C2=Mg;new ir(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(p,e){return e?Ze(e):(yt(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl extends mg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cn(e,this._buildIdpRequest())}_linkToIdToken(e,d){return Cn(e,this._buildIdpRequest(d))}_getReauthenticationResolver(e){return Cn(e,this._buildIdpRequest())}_buildIdpRequest(e){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(d.idToken=e),d}}function P2(p){return s2(p.auth,new kl(p),p.bypassAuthState)}function R2(p){const{auth:e,user:d}=p;return yt(d,e,"internal-error"),n2(d,new kl(p),p.bypassAuthState)}async function M2(p){const{auth:e,user:d}=p;return yt(d,e,"internal-error"),i2(d,new kl(p),p.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,d,x,R,I=!1){this.auth=e,this.resolver=x,this.user=R,this.bypassAuthState=I,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){return new Promise(async(e,d)=>{this.pendingPromise={resolve:e,reject:d};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(x){this.reject(x)}})}async onAuthEvent(e){const{urlResponse:d,sessionId:x,postBody:R,tenantId:I,error:f,type:S}=e;if(f){this.reject(f);return}const t={auth:this.auth,requestUri:d,sessionId:x,tenantId:I||void 0,postBody:R||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(S)(t))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return P2;case"linkViaPopup":case"linkViaRedirect":return M2;case"reauthViaPopup":case"reauthViaRedirect":return R2;default:si(this.auth,"internal-error")}}resolve(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=new ir(2e3,1e4);class pn extends Ig{constructor(e,d,x,R,I){super(e,d,R,I),this.provider=x,this.authWindow=null,this.pollId=null,pn.currentPopupAction&&pn.currentPopupAction.cancel(),pn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return yt(e,this.auth,"internal-error"),e}async onExecution(){ri(this.filter.length===1,"Popup operations only handle one event");const e=$l();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(d=>{this.reject(d)}),this.resolver._isIframeWebStorageSupported(this.auth,d=>{d||this.reject(Ye(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var d,x;if(!((x=(d=this.authWindow)===null||d===void 0?void 0:d.window)===null||x===void 0)&&x.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ye(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,I2.get())};e()}}pn.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2="pendingRedirect",Cr=new Map;class F2 extends Ig{constructor(e,d,x=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,x),this.eventId=null}async execute(){let e=Cr.get(this.auth._key());if(!e){try{const x=await L2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(x)}catch(d){e=()=>Promise.reject(d)}Cr.set(this.auth._key(),e)}return this.bypassAuthState||Cr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const d=await this.auth._redirectUserForId(e.eventId);if(d)return this.user=d,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function L2(p,e){const d=N2(e),x=D2(p);if(!await x._isAvailable())return!1;const R=await x._get(d)==="true";return await x._remove(d),R}function O2(p,e){Cr.set(p._key(),e)}function D2(p){return Ze(p._redirectPersistence)}function N2(p){return Sr(w2,p.config.apiKey,p.name)}async function B2(p,e,d=!1){const x=Xa(p),R=A2(x,e),f=await new F2(x,R,d).execute();return f&&!d&&(delete f.user._redirectEventId,await x._persistUserIfCurrent(f.user),await x._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=10*60*1e3;class G2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let d=!1;return this.consumers.forEach(x=>{this.isEventForConsumer(e,x)&&(d=!0,this.sendToConsumer(e,x),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!U2(e)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=e,d=!0)),d}sendToConsumer(e,d){var x;if(e.error&&!wg(e)){const R=((x=e.error.code)===null||x===void 0?void 0:x.split("auth/")[1])||"internal-error";d.onError(Ye(this.auth,R))}else d.onAuthEvent(e)}isEventForConsumer(e,d){const x=d.eventId===null||!!e.eventId&&e.eventId===d.eventId;return d.filter.includes(e.type)&&x}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=V2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qf(e))}saveEventToCache(e){this.cachedEventUids.add(Qf(e)),this.lastProcessedEventTime=Date.now()}}function Qf(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(e=>e).join("-")}function wg({type:p,error:e}){return p==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function U2(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wg(p);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b2(p,e={}){return nr(p,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,X2=/^https?/;async function W2(p){if(p.config.emulator)return;const{authorizedDomains:e}=await b2(p);for(const d of e)try{if(Y2(d))return}catch{}si(p,"unauthorized-domain")}function Y2(p){const e=oh(),{protocol:d,hostname:x}=new URL(e);if(p.startsWith("chrome-extension://")){const f=new URL(p);return f.hostname===""&&x===""?d==="chrome-extension:"&&p.replace("chrome-extension://","")===e.replace("chrome-extension://",""):d==="chrome-extension:"&&f.hostname===x}if(!X2.test(d))return!1;if(z2.test(p))return x===p;const R=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(x)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=new ir(3e4,6e4);function $f(){const p=He().___jsl;if(p!=null&&p.H){for(const e of Object.keys(p.H))if(p.H[e].r=p.H[e].r||[],p.H[e].L=p.H[e].L||[],p.H[e].r=[...p.H[e].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}}function K2(p){return new Promise((e,d)=>{var x,R,I;function f(){$f(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$f(),d(Ye(p,"network-request-failed"))},timeout:H2.get()})}if(!((R=(x=He().gapi)===null||x===void 0?void 0:x.iframes)===null||R===void 0)&&R.Iframe)e(gapi.iframes.getContext());else if(!((I=He().gapi)===null||I===void 0)&&I.load)f();else{const S=$C("iframefcb");return He()[S]=()=>{gapi.load?f():d(Ye(p,"network-request-failed"))},QC(`https://apis.google.com/js/api.js?onload=${S}`).catch(t=>d(t))}}).catch(e=>{throw Ar=null,e})}let Ar=null;function Q2(p){return Ar=Ar||K2(p),Ar}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=new ir(5e3,15e3),k2="__/auth/iframe",J2="emulator/auth/iframe",Z2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},j2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function q2(p){const e=p.config;yt(e.authDomain,p,"auth-domain-config-required");const d=e.emulator?Yl(e,J2):`https://${p.config.authDomain}/${k2}`,x={apiKey:e.apiKey,appName:p.name,v:en},R=j2.get(p.config.apiHost);R&&(x.eid=R);const I=p._getFrameworks();return I.length&&(x.fw=I.join(",")),`${d}?${Vn(x).slice(1)}`}async function _2(p){const e=await Q2(p),d=He().gapi;return yt(d,p,"internal-error"),e.open({where:document.body,url:q2(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Z2,dontclear:!0},x=>new Promise(async(R,I)=>{await x.restyle({setHideOnLeave:!1});const f=Ye(p,"network-request-failed"),S=He().setTimeout(()=>{I(f)},$2.get());function t(){He().clearTimeout(S),R(x)}x.ping(t).then(t,()=>{I(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eA=500,iA=600,nA="_blank",sA="http://localhost";class kf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rA(p,e,d,x=eA,R=iA){const I=Math.max((window.screen.availHeight-R)/2,0).toString(),f=Math.max((window.screen.availWidth-x)/2,0).toString();let S="";const t=Object.assign(Object.assign({},tA),{width:x.toString(),height:R.toString(),top:I,left:f}),h=me().toLowerCase();d&&(S=lg(h)?nA:d),hg(h)&&(e=e||sA,t.scrollbars="yes");const m=Object.entries(t).reduce((a,[r,i])=>`${a}${r}=${i},`,"");if(GC(h)&&S!=="_self")return aA(e||"",S),new kf(null);const o=window.open(e||"",S,m);yt(o,p,"popup-blocked");try{o.focus()}catch{}return new kf(o)}function aA(p,e){const d=document.createElement("a");d.href=p,d.target=e;const x=document.createEvent("MouseEvent");x.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(x)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="__/auth/handler",hA="emulator/auth/handler",lA=encodeURIComponent("fac");async function Jf(p,e,d,x,R,I){yt(p.config.authDomain,p,"auth-domain-config-required"),yt(p.config.apiKey,p,"invalid-api-key");const f={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:x,v:en,eventId:R};if(e instanceof yg){e.setDefaultLanguage(p.languageCode),f.providerId=e.providerId||"",mo(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,o]of Object.entries(I||{}))f[m]=o}if(e instanceof sr){const m=e.getScopes().filter(o=>o!=="");m.length>0&&(f.scopes=m.join(","))}p.tenantId&&(f.tid=p.tenantId);const S=f;for(const m of Object.keys(S))S[m]===void 0&&delete S[m];const t=await p._getAppCheckToken(),h=t?`#${lA}=${encodeURIComponent(t)}`:"";return`${uA(p)}?${Vn(S).slice(1)}${h}`}function uA({config:p}){return p.emulator?Yl(p,hA):`https://${p.authDomain}/${oA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="webStorageSupport";class fA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cg,this._completeRedirectFn=B2,this._overrideRedirectResult=O2}async _openPopup(e,d,x,R){var I;ri((I=this.eventManagers[e._key()])===null||I===void 0?void 0:I.manager,"_initialize() not called before _openPopup()");const f=await Jf(e,d,x,oh(),R);return rA(e,f,$l())}async _openRedirect(e,d,x,R){await this._originValidation(e);const I=await Jf(e,d,x,oh(),R);return v2(I),new Promise(()=>{})}_initialize(e){const d=e._key();if(this.eventManagers[d]){const{manager:R,promise:I}=this.eventManagers[d];return R?Promise.resolve(R):(ri(I,"If manager is not set, promise should be"),I)}const x=this.initAndGetManager(e);return this.eventManagers[d]={promise:x},x.catch(()=>{delete this.eventManagers[d]}),x}async initAndGetManager(e){const d=await _2(e),x=new G2(e);return d.register("authEvent",R=>(yt(R==null?void 0:R.authEvent,e,"invalid-auth-event"),{status:x.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:x},this.iframes[e._key()]=d,x}_isIframeWebStorageSupported(e,d){this.iframes[e._key()].send(go,{type:go},R=>{var I;const f=(I=R==null?void 0:R[0])===null||I===void 0?void 0:I[go];f!==void 0&&d(!!f),si(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const d=e._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=W2(e)),this.originValidationPromises[d]}get _shouldInitProactively(){return vg()||Ql()||za()}}const dA=fA;var Zf="@firebase/auth",jf="1.3.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const d=this.auth.onIdTokenChanged(x=>{e((x==null?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,d),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const d=this.internalListeners.get(e);d&&(this.internalListeners.delete(e),d(),this.updateProactiveRefresh())}assertAuthConfigured(){yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function pA(p){$i(new Ei("auth",(e,{options:d})=>{const x=e.getProvider("app").getImmediate(),R=e.getProvider("heartbeat"),I=e.getProvider("app-check-internal"),{apiKey:f,authDomain:S}=x.options;yt(f&&!f.includes(":"),"invalid-api-key",{appName:x.name});const t={apiKey:f,authDomain:S,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pg(p)},h=new HC(x,R,I,t);return JC(h,d),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,d,x)=>{e.getProvider("auth-internal").initialize()})),$i(new Ei("auth-internal",e=>{const d=Xa(e.getProvider("auth").getImmediate());return(x=>new cA(x))(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),be(Zf,jf,vA(p)),be(Zf,jf,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=5*60,mA=od("authIdTokenMaxAge")||gA;let qf=null;const yA=p=>async e=>{const d=e&&await e.getIdTokenResult(),x=d&&(new Date().getTime()-Date.parse(d.issuedAtTime))/1e3;if(x&&x>mA)return;const R=d==null?void 0:d.token;qf!==R&&(qf=R,await fetch(p,{method:R?"POST":"DELETE",headers:R?{Authorization:`Bearer ${R}`}:{}}))};function xA(p=vh()){const e=oa(p,"auth");if(e.isInitialized())return e.getImmediate();const d=kC(p,{popupRedirectResolver:dA,persistence:[C2,f2,Cg]}),x=od("authTokenSyncURL");if(x){const I=yA(x);a2(d,I,()=>I(d.currentUser)),r2(d,f=>I(f))}const R=sd("auth");return R&&ZC(d,`http://${R}`),d}pA("Browser");const TA={apiKey:"AIzaSyChpOsuTg7f_EsyJqjShzcY8POusMYiPK4",authDomain:"phaser-multiplayer-test.firebaseapp.com",databaseURL:"https://phaser-multiplayer-test-default-rtdb.firebaseio.com/",projectId:"phaser-multiplayer-test",storageBucket:"phaser-multiplayer-test.appspot.com",messagingSenderId:"519611176356",appId:"1:519611176356:web:85f5b4f2b5d733e1e95d31",measurementId:"G-LRGW16MJE9"};class EA extends pi.Plugins.BasePlugin{constructor(d){super(d);hi(this,"firestore");hi(this,"db");hi(this,"auth");hi(this,"authStateChangedUnsubscribe");hi(this,"onLoggedInCallback");const x=vd(TA);this.firestore=l1(x),this.db=pC(x),this.auth=xA(x),this.authStateChangedUnsubscribe=o2(this.auth,R=>{R&&this.onLoggedInCallback&&this.onLoggedInCallback()})}destroy(){this.authStateChangedUnsubscribe(),super.destroy()}onLoggedIn(d){this.onLoggedInCallback=d}async setUserData(d,x){await oC(this.getUserRef(d),x)}getUserRef(d){return rC(this.db,`players/${d}`)}async saveGameData(d,x){await M1($o(this.firestore,"game-data",d),x)}async loadGameData(d){return(await P1($o(this.firestore,"game-data",d))).data()}async signInAnonymously(){return(await e2(this.auth)).user}getUser(){return this.auth.currentUser}async addHighScore(d,x){await I1(qu(this.firestore,"high-scores"),{name:d,score:x})}async getHighScores(){const d=x1(qu(this.firestore,"high-scores"),T1("score","desc"),E1(10));return(await R1(d)).docs.map(R=>R.data())}}const SA={type:pi.AUTO,width:800,height:600,parent:"app",scale:{mode:pi.Scale.FIT,autoCenter:pi.Scale.CENTER_HORIZONTALLY},pixelArt:!0,scene:Yg,plugins:{global:[{key:"FirebasePlugin",plugin:EA,start:!0,mapping:"firebase"}]}};new pi.Game(SA);
